import{a as bt,b as Bn,c as vb,d as ke,e as gI,f as ym,g as mI,h as vI,i as yI,j as yb,k as _I,l as Ch,m as _b,n as _m,o as wI,p as bI,q as wb,r as wr,s as Cc,t as Js,u as wm,v as xh,w as CI,x as xI,y as wl,z as so}from"./chunk-ZAN37WUL.js";var EI=null;var bb=1,Cb=Symbol("SIGNAL");function On(r){let t=EI;return EI=r,t}var SI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function s5(r){if(!(Sb(r)&&!r.dirty)&&!(!r.dirty&&r.lastCleanEpoch===bb)){if(!r.producerMustRecompute(r)&&!xb(r)){r.dirty=!1,r.lastCleanEpoch=bb;return}r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=bb}}function AI(r){return r&&(r.nextProducerIndex=0),On(r)}function TI(r,t){if(On(t),!(!r||r.producerNode===void 0||r.producerIndexOfThis===void 0||r.producerLastReadVersion===void 0)){if(Sb(r))for(let e=r.nextProducerIndex;e<r.producerNode.length;e++)Eb(r.producerNode[e],r.producerIndexOfThis[e]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function xb(r){bm(r);for(let t=0;t<r.producerNode.length;t++){let e=r.producerNode[t],n=r.producerLastReadVersion[t];if(n!==e.version||(s5(e),n!==e.version))return!0}return!1}function OI(r){if(bm(r),Sb(r))for(let t=0;t<r.producerNode.length;t++)Eb(r.producerNode[t],r.producerIndexOfThis[t]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function Eb(r,t){if(a5(r),bm(r),r.liveConsumerNode.length===1)for(let n=0;n<r.producerNode.length;n++)Eb(r.producerNode[n],r.producerIndexOfThis[n]);let e=r.liveConsumerNode.length-1;if(r.liveConsumerNode[t]=r.liveConsumerNode[e],r.liveConsumerIndexOfThis[t]=r.liveConsumerIndexOfThis[e],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,t<r.liveConsumerNode.length){let n=r.liveConsumerIndexOfThis[t],i=r.liveConsumerNode[t];bm(i),i.producerIndexOfThis[n]=t}}function Sb(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function bm(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function a5(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function l5(){throw new Error}var c5=l5;function MI(r){c5=r}function Yt(r){return typeof r=="function"}function Xu(r){let e=r(n=>{Error.call(n),n.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Cm=Xu(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((n,i)=>`${i+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function xc(r,t){if(r){let e=r.indexOf(t);0<=e&&r.splice(e,1)}}var jr=class r{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:n}=this;if(Yt(n))try{n()}catch(o){t=o instanceof Cm?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{PI(o)}catch(s){t=t??[],s instanceof Cm?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Cm(t)}}add(t){var e;if(t&&t!==this)if(this.closed)PI(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&xc(e,t)}remove(t){let{_finalizers:e}=this;e&&xc(e,t),t instanceof r&&t._removeParent(this)}};jr.EMPTY=(()=>{let r=new jr;return r.closed=!0,r})();var Ab=jr.EMPTY;function xm(r){return r instanceof jr||r&&"closed"in r&&Yt(r.remove)&&Yt(r.add)&&Yt(r.unsubscribe)}function PI(r){Yt(r)?r():r.unsubscribe()}var Ts={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ed={setTimeout(r,t,...e){let{delegate:n}=ed;return n?.setTimeout?n.setTimeout(r,t,...e):setTimeout(r,t,...e)},clearTimeout(r){let{delegate:t}=ed;return(t?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Em(r){ed.setTimeout(()=>{let{onUnhandledError:t}=Ts;if(t)t(r);else throw r})}function Eh(){}var II=Tb("C",void 0,void 0);function DI(r){return Tb("E",void 0,r)}function kI(r){return Tb("N",r,void 0)}function Tb(r,t,e){return{kind:r,value:t,error:e}}var Ec=null;function td(r){if(Ts.useDeprecatedSynchronousErrorHandling){let t=!Ec;if(t&&(Ec={errorThrown:!1,error:null}),r(),t){let{errorThrown:e,error:n}=Ec;if(Ec=null,e)throw n}}else r()}function RI(r){Ts.useDeprecatedSynchronousErrorHandling&&Ec&&(Ec.errorThrown=!0,Ec.error=r)}var Sc=class extends jr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,xm(t)&&t.add(this)):this.destination=f5}static create(t,e,n){return new Na(t,e,n)}next(t){this.isStopped?Mb(kI(t),this):this._next(t)}error(t){this.isStopped?Mb(DI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Mb(II,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},u5=Function.prototype.bind;function Ob(r,t){return u5.call(r,t)}var Pb=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Sm(n)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Sm(n)}else Sm(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Sm(e)}}},Na=class extends Sc{constructor(t,e,n){super();let i;if(Yt(t)||!t)i={next:t??void 0,error:e??void 0,complete:n??void 0};else{let o;this&&Ts.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ob(t.next,o),error:t.error&&Ob(t.error,o),complete:t.complete&&Ob(t.complete,o)}):i=t}this.destination=new Pb(i)}};function Sm(r){Ts.useDeprecatedSynchronousErrorHandling?RI(r):Em(r)}function d5(r){throw r}function Mb(r,t){let{onStoppedNotification:e}=Ts;e&&ed.setTimeout(()=>e(r,t))}var f5={closed:!0,next:Eh,error:d5,complete:Eh};var nd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ao(r){return r}function Ib(...r){return Db(r)}function Db(r){return r.length===0?ao:r.length===1?r[0]:function(e){return r.reduce((n,i)=>i(n),e)}}var un=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){let n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,i){let o=p5(e)?e:new Na(e,n,i);return td(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return n=NI(n),new n((i,o)=>{let s=new Na({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)}[nd](){return this}pipe(...e){return Db(e)(this)}toPromise(e){return e=NI(e),new e((n,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>n(o))})}}return r.create=t=>new r(t),r})();function NI(r){var t;return(t=r??Ts.Promise)!==null&&t!==void 0?t:Promise}function h5(r){return r&&Yt(r.next)&&Yt(r.error)&&Yt(r.complete)}function p5(r){return r&&r instanceof Sc||h5(r)&&xm(r)}function kb(r){return Yt(r?.lift)}function an(r){return t=>{if(kb(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ln(r,t,e,n,i){return new Rb(r,t,e,n,i)}var Rb=class extends Sc{constructor(t,e,n,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function rd(){return an((r,t)=>{let e=null;r._refCount++;let n=ln(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){e=null;return}let i=r._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});r.subscribe(n),n.closed||(e=r.connect())})}var id=class extends un{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,kb(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new jr;let e=this.getSubject();t.add(this.source.subscribe(ln(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=jr.EMPTY)}return t}refCount(){return rd()(this)}};var jI=Xu(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fr=(()=>{class r extends un{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let n=new Am(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new jI}next(e){td(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(e)}})}error(e){td(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){td(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:n,isStopped:i,observers:o}=this;return n||i?Ab:(this.currentObservers=null,o.push(e),new jr(()=>{this.currentObservers=null,xc(o,e)}))}_checkFinalizedStatuses(e){let{hasError:n,thrownError:i,isStopped:o}=this;n?e.error(i):o&&e.complete()}asObservable(){let e=new un;return e.source=this,e}}return r.create=(t,e)=>new Am(t,e),r})(),Am=class extends Fr{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.next)===null||n===void 0||n.call(e,t)}error(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.error)===null||n===void 0||n.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,n;return(n=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&n!==void 0?n:Ab}};var Oi=class extends Fr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var Sh={now(){return(Sh.delegate||Date).now()},delegate:void 0};var Tm=class extends Fr{constructor(t=1/0,e=1/0,n=Sh){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;e||(n.push(t),!i&&n.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=n?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!i){let s=e.now(),a=0;for(let c=1;c<n.length&&n[c]<=s;c+=2)a=c;a&&n.splice(0,a+1)}}};var Om=class extends jr{constructor(t,e){super()}schedule(t,e=0){return this}};var Ah={setInterval(r,t,...e){let{delegate:n}=Ah;return n?.setInterval?n.setInterval(r,t,...e):setInterval(r,t,...e)},clearInterval(r){let{delegate:t}=Ah;return(t?.clearInterval||clearInterval)(r)},delegate:void 0};var od=class extends Om{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,n=0){return Ah.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(n!=null&&this.delay===n&&this.pending===!1)return e;e!=null&&Ah.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let n=this._execute(t,e);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,i;try{this.work(t)}catch(o){n=!0,i=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,xc(n,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var sd=class r{constructor(t,e=r.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}};sd.now=Sh.now;var ad=class extends sd{constructor(t,e=sd.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}};var Th=new ad(od);var Mm=class extends od{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return n!=null&&n>0||n==null&&this.delay>0?super.requestAsyncId(t,e,n):(t.flush(this),0)}};var Pm=class extends ad{};var Nb=new Pm(Mm);var lo=new un(r=>r.complete());function FI(r){return r&&Yt(r.schedule)}function jb(r){return r[r.length-1]}function Im(r){return Yt(jb(r))?r.pop():void 0}function Zs(r){return FI(jb(r))?r.pop():void 0}function LI(r,t){return typeof jb(r)=="number"?r.pop():t}var Dm=r=>r&&typeof r.length=="number"&&typeof r!="function";function km(r){return Yt(r?.then)}function Rm(r){return Yt(r[nd])}function Nm(r){return Symbol.asyncIterator&&Yt(r?.[Symbol.asyncIterator])}function jm(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function g5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fm=g5();function Lm(r){return Yt(r?.[Fm])}function Vm(r){return mI(this,arguments,function*(){let e=r.getReader();try{for(;;){let{value:n,done:i}=yield ym(e.read());if(i)return yield ym(void 0);yield yield ym(n)}}finally{e.releaseLock()}})}function Bm(r){return Yt(r?.getReader)}function rr(r){if(r instanceof un)return r;if(r!=null){if(Rm(r))return m5(r);if(Dm(r))return v5(r);if(km(r))return y5(r);if(Nm(r))return VI(r);if(Lm(r))return _5(r);if(Bm(r))return w5(r)}throw jm(r)}function m5(r){return new un(t=>{let e=r[nd]();if(Yt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v5(r){return new un(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function y5(r){return new un(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Em)})}function _5(r){return new un(t=>{for(let e of r)if(t.next(e),t.closed)return;t.complete()})}function VI(r){return new un(t=>{b5(r,t).catch(e=>t.error(e))})}function w5(r){return VI(Vm(r))}function b5(r,t){var e,n,i,o;return gI(this,void 0,void 0,function*(){try{for(e=vI(r);n=yield e.next(),!n.done;){let s=n.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{n&&!n.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Ao(r,t,e,n=0,i=!1){let o=t.schedule(function(){e(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(o),!i)return o}function is(r,t=0){return an((e,n)=>{e.subscribe(ln(n,i=>Ao(n,r,()=>n.next(i),t),()=>Ao(n,r,()=>n.complete(),t),i=>Ao(n,r,()=>n.error(i),t)))})}function Os(r,t=0){return an((e,n)=>{n.add(r.schedule(()=>e.subscribe(n),t))})}function BI(r,t){return rr(r).pipe(Os(t),is(t))}function UI(r,t){return rr(r).pipe(Os(t),is(t))}function HI(r,t){return new un(e=>{let n=0;return t.schedule(function(){n===r.length?e.complete():(e.next(r[n++]),e.closed||this.schedule())})})}function zI(r,t){return new un(e=>{let n;return Ao(e,t,()=>{n=r[Fm](),Ao(e,t,()=>{let i,o;try{({value:i,done:o}=n.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>Yt(n?.return)&&n.return()})}function Um(r,t){if(!r)throw new Error("Iterable cannot be null");return new un(e=>{Ao(e,t,()=>{let n=r[Symbol.asyncIterator]();Ao(e,t,()=>{n.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function $I(r,t){return Um(Vm(r),t)}function WI(r,t){if(r!=null){if(Rm(r))return BI(r,t);if(Dm(r))return HI(r,t);if(km(r))return UI(r,t);if(Nm(r))return Um(r,t);if(Lm(r))return zI(r,t);if(Bm(r))return $I(r,t)}throw jm(r)}function yn(r,t){return t?WI(r,t):rr(r)}function Ft(...r){let t=Zs(r);return yn(r,t)}function ld(r,t){let e=Yt(r)?r:()=>r,n=i=>i.error(e());return new un(t?i=>t.schedule(n,0,i):n)}function Fb(r){return!!r&&(r instanceof un||Yt(r.lift)&&Yt(r.subscribe))}var ja=Xu(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function Vt(r,t){return an((e,n)=>{let i=0;e.subscribe(ln(n,o=>{n.next(r.call(t,o,i++))}))})}var{isArray:C5}=Array;function x5(r,t){return C5(t)?r(...t):r(t)}function Hm(r){return Vt(t=>x5(r,t))}var{isArray:E5}=Array,{getPrototypeOf:S5,prototype:A5,keys:T5}=Object;function zm(r){if(r.length===1){let t=r[0];if(E5(t))return{args:t,keys:null};if(O5(t)){let e=T5(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:r,keys:null}}function O5(r){return r&&typeof r=="object"&&S5(r)===A5}function $m(r,t){return r.reduce((e,n,i)=>(e[n]=t[i],e),{})}function Oh(...r){let t=Zs(r),e=Im(r),{args:n,keys:i}=zm(r);if(n.length===0)return yn([],t);let o=new un(M5(n,t,i?s=>$m(i,s):ao));return e?o.pipe(Hm(e)):o}function M5(r,t,e=ao){return n=>{qI(t,()=>{let{length:i}=r,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)qI(t,()=>{let u=yn(r[c],t),f=!1;u.subscribe(ln(n,g=>{o[c]=g,f||(f=!0,a--),a||n.next(e(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}function qI(r,t,e){r?Ao(e,r,t):t()}function GI(r,t,e,n,i,o,s,a){let c=[],u=0,f=0,g=!1,v=()=>{g&&!c.length&&!u&&t.complete()},_=C=>u<n?b(C):c.push(C),b=C=>{o&&t.next(C),u++;let S=!1;rr(e(C,f++)).subscribe(ln(t,j=>{i?.(j),o?_(j):t.next(j)},()=>{S=!0},void 0,()=>{if(S)try{for(u--;c.length&&u<n;){let j=c.shift();s?Ao(t,s,()=>b(j)):b(j)}v()}catch(j){t.error(j)}}))};return r.subscribe(ln(t,_,()=>{g=!0,v()})),()=>{a?.()}}function Yr(r,t,e=1/0){return Yt(t)?Yr((n,i)=>Vt((o,s)=>t(n,o,i,s))(rr(r(n,i))),e):(typeof t=="number"&&(e=t),an((n,i)=>GI(n,i,r,e)))}function bl(r=1/0){return Yr(ao,r)}function KI(){return bl(1)}function cd(...r){return KI()(yn(r,Zs(r)))}function Wm(r){return new un(t=>{rr(r()).subscribe(t)})}function Lb(...r){let t=Im(r),{args:e,keys:n}=zm(r),i=new un(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let f=0;f<s;f++){let g=!1;rr(e[f]).subscribe(ln(o,v=>{g||(g=!0,u--),a[f]=v},()=>c--,void 0,()=>{(!c||!g)&&(u||o.next(n?$m(n,a):a),o.complete())}))}});return t?i.pipe(Hm(t)):i}function Vb(...r){let t=Zs(r),e=LI(r,1/0),n=r;return n.length?n.length===1?rr(n[0]):bl(e)(yn(n,t)):lo}function pi(r,t){return an((e,n)=>{let i=0;e.subscribe(ln(n,o=>r.call(t,o,i++)&&n.next(o)))})}function Cl(r){return an((t,e)=>{let n=null,i=!1,o;n=t.subscribe(ln(e,void 0,void 0,s=>{o=rr(r(s,Cl(r)(t))),n?(n.unsubscribe(),n=null,o.subscribe(e)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(e))})}function QI(r,t,e,n,i){return(o,s)=>{let a=e,c=t,u=0;o.subscribe(ln(s,f=>{let g=u++;c=a?r(c,f,g):(a=!0,f),n&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Fa(r,t){return Yt(t)?Yr(r,t,1):Yr(r,1)}function xl(r){return an((t,e)=>{let n=!1;t.subscribe(ln(e,i=>{n=!0,e.next(i)},()=>{n||e.next(r),e.complete()}))})}function La(r){return r<=0?()=>lo:an((t,e)=>{let n=0;t.subscribe(ln(e,i=>{++n<=r&&(e.next(i),r<=n&&e.complete())}))})}function Bb(r){return Vt(()=>r)}function Ub(r,t=ao){return r=r??P5,an((e,n)=>{let i,o=!0;e.subscribe(ln(n,s=>{let a=t(s);(o||!r(i,a))&&(o=!1,i=a,n.next(s))}))})}function P5(r,t){return r===t}function qm(r=I5){return an((t,e)=>{let n=!1;t.subscribe(ln(e,i=>{n=!0,e.next(i)},()=>n?e.complete():e.error(r())))})}function I5(){return new ja}function El(r){return an((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}function os(r,t){let e=arguments.length>=2;return n=>n.pipe(r?pi((i,o)=>r(i,o,n)):ao,La(1),e?xl(t):qm(()=>new ja))}function ud(r){return r<=0?()=>lo:an((t,e)=>{let n=[];t.subscribe(ln(e,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(let i of n)e.next(i);e.complete()},void 0,()=>{n=null}))})}function Hb(r,t){let e=arguments.length>=2;return n=>n.pipe(r?pi((i,o)=>r(i,o,n)):ao,ud(1),e?xl(t):qm(()=>new ja))}function Mh(){return an((r,t)=>{let e,n=!1;r.subscribe(ln(t,i=>{let o=e;e=i,n&&t.next([o,i]),n=!0}))})}function Ac(r,t){return an(QI(r,t,arguments.length>=2,!0))}function YI(r={}){let{connector:t=()=>new Fr,resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:i=!0}=r;return o=>{let s,a,c,u=0,f=!1,g=!1,v=()=>{a?.unsubscribe(),a=void 0},_=()=>{v(),s=c=void 0,f=g=!1},b=()=>{let C=s;_(),C?.unsubscribe()};return an((C,S)=>{u++,!g&&!f&&v();let j=c=c??t();S.add(()=>{u--,u===0&&!g&&!f&&(a=zb(b,i))}),j.subscribe(S),!s&&u>0&&(s=new Na({next:q=>j.next(q),error:q=>{g=!0,v(),a=zb(_,e,q),j.error(q)},complete:()=>{f=!0,v(),a=zb(_,n),j.complete()}}),rr(C).subscribe(s))})(o)}}function zb(r,t,...e){if(t===!0){r();return}if(t===!1)return;let n=new Na({next:()=>{n.unsubscribe(),r()}});return rr(t(...e)).subscribe(n)}function Gm(r,t,e){let n,i=!1;return r&&typeof r=="object"?{bufferSize:n=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=r:n=r??1/0,YI({connector:()=>new Tm(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Tc(...r){let t=Zs(r);return an((e,n)=>{(t?cd(r,e,t):cd(r,e)).subscribe(n)})}function ur(r,t){return an((e,n)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&n.complete();e.subscribe(ln(n,c=>{i?.unsubscribe();let u=0,f=o++;rr(r(c,f)).subscribe(i=ln(n,g=>n.next(t?t(c,g,f,u++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Km(r,t){return Yt(t)?ur(()=>r,t):ur(()=>r)}function $b(r){return an((t,e)=>{rr(r).subscribe(ln(e,()=>e.complete(),Eh)),!e.closed&&t.subscribe(e)})}function Jr(r,t,e){let n=Yt(r)||t||e?{next:r,error:t,complete:e}:r;return n?an((i,o)=>{var s;(s=n.subscribe)===null||s===void 0||s.call(n);let a=!0;i.subscribe(ln(o,c=>{var u;(u=n.next)===null||u===void 0||u.call(n,c),o.next(c)},()=>{var c;a=!1,(c=n.complete)===null||c===void 0||c.call(n),o.complete()},c=>{var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,c),o.error(c)},()=>{var c,u;a&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):ao}var D5="https://g.co/ng/security#xss",Ut=class extends Error{constructor(t,e){super(Tv(t,e)),this.code=t}};function Tv(r,t){return`${`NG0${Math.abs(r)}`}${t?": "+t:""}`}function Wh(r){return{toString:r}.toString()}var Qm="__parameters__";function k5(r){return function(...e){if(r){let n=r(...e);for(let i in n)this[i]=n[i]}}}function ND(r,t,e){return Wh(()=>{let n=k5(t);function i(...o){if(this instanceof i)return n.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,f){let g=c.hasOwnProperty(Qm)?c[Qm]:Object.defineProperty(c,Qm,{value:[]})[Qm];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),c}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=r,i.annotationCls=i,i})}var zo=globalThis;function qn(r){for(let t in r)if(r[t]===qn)return t;throw Error("Could not find renamed property on target object.")}function R5(r,t){for(let e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function To(r){if(typeof r=="string")return r;if(Array.isArray(r))return"["+r.map(To).join(", ")+"]";if(r==null)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;let t=r.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function JI(r,t){return r==null||r===""?t===null?"":t:t==null||t===""?r:r+" "+t}var N5=qn({__forward_ref__:qn});function qh(r){return r.__forward_ref__=qh,r.toString=function(){return To(this())},r}function co(r){return jD(r)?r():r}function jD(r){return typeof r=="function"&&r.hasOwnProperty(N5)&&r.__forward_ref__===qh}function Mt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Tr(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ov(r){return ZI(r,LD)||ZI(r,VD)}function FD(r){return Ov(r)!==null}function ZI(r,t){return r.hasOwnProperty(t)?r[t]:null}function j5(r){let t=r&&(r[LD]||r[VD]);return t||null}function XI(r){return r&&(r.hasOwnProperty(eD)||r.hasOwnProperty(F5))?r[eD]:null}var LD=qn({\u0275prov:qn}),eD=qn({\u0275inj:qn}),VD=qn({ngInjectableDef:qn}),F5=qn({ngInjectorDef:qn}),wt=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Mt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function BD(r){return r&&!!r.\u0275providers}var L5=qn({\u0275cmp:qn}),V5=qn({\u0275dir:qn}),B5=qn({\u0275pipe:qn}),U5=qn({\u0275mod:qn}),ov=qn({\u0275fac:qn}),Ph=qn({__NG_ELEMENT_ID__:qn}),tD=qn({__NG_ENV_ID__:qn});function UD(r){return typeof r=="string"?r:r==null?"":String(r)}function H5(r){return typeof r=="function"?r.name||r.toString():typeof r=="object"&&r!=null&&typeof r.type=="function"?r.type.name||r.type.toString():UD(r)}function z5(r,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${r}`:"";throw new Ut(-200,r)}function nx(r,t){throw new Ut(-201,!1)}var dn=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(dn||{}),sC;function HD(){return sC}function ss(r){let t=sC;return sC=r,t}function zD(r,t,e){let n=Ov(r);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(e&dn.Optional)return null;if(t!==void 0)return t;nx(r,"Injector")}var $5={},Dh=$5,aC="__NG_DI_FLAG__",sv="ngTempTokenPath",W5="ngTokenPath",q5=/\n/gm,G5="\u0275",nD="__source",gd;function K5(){return gd}function Sl(r){let t=gd;return gd=r,t}function Q5(r,t=dn.Default){if(gd===void 0)throw new Ut(-203,!1);return gd===null?zD(r,void 0,t):gd.get(r,t&dn.Optional?null:void 0,t)}function Xe(r,t=dn.Default){return(HD()||Q5)(co(r),t)}function ct(r,t=dn.Default){return Xe(r,Mv(t))}function Mv(r){return typeof r>"u"||typeof r=="number"?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function lC(r){let t=[];for(let e=0;e<r.length;e++){let n=co(r[e]);if(Array.isArray(n)){if(n.length===0)throw new Ut(900,!1);let i,o=dn.Default;for(let s=0;s<n.length;s++){let a=n[s],c=Y5(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(Xe(i,o))}else t.push(Xe(n))}return t}function $D(r,t){return r[aC]=t,r.prototype[aC]=t,r}function Y5(r){return r[aC]}function J5(r,t,e,n){let i=r[sv];throw t[nD]&&i.unshift(t[nD]),r.message=Z5(`
`+r.message,i,e,n),r[W5]=i,r[sv]=null,r}function Z5(r,t,e,n=null){r=r&&r.charAt(0)===`
`&&r.charAt(1)==G5?r.slice(2):r;let i=To(t);if(Array.isArray(t))i=t.map(To).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):To(a)))}i=`{${o.join(", ")}}`}return`${e}${n?"("+n+")":""}[${i}]: ${r.replace(q5,`
  `)}`}var Gh=$D(ND("Optional"),8);var WD=$D(ND("SkipSelf"),4);function vd(r,t){let e=r.hasOwnProperty(ov);return e?r[ov]:null}function X5(r,t,e){if(r.length!==t.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],o=t[n];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function ez(r){return r.flat(Number.POSITIVE_INFINITY)}function rx(r,t){r.forEach(e=>Array.isArray(e)?rx(e,t):t(e))}function qD(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function av(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function tz(r,t,e,n){let i=r.length;if(i==t)r.push(e,n);else if(i===1)r.push(n,r[0]),r[0]=e;else{for(i--,r.push(r[i-1],r[i]);i>t;){let o=i-2;r[i]=r[o],i--}r[t]=e,r[t+1]=n}}function nz(r,t,e){let n=Kh(r,t);return n>=0?r[n|1]=e:(n=~n,tz(r,n,t,e)),n}function Wb(r,t){let e=Kh(r,t);if(e>=0)return r[e|1]}function Kh(r,t){return rz(r,t,1)}function rz(r,t,e){let n=0,i=r.length>>e;for(;i!==n;){let o=n+(i-n>>1),s=r[o<<e];if(t===s)return o<<e;s>t?i=o:n=o+1}return~(i<<e)}var yd={},as=[],_d=new wt(""),GD=new wt("",-1),KD=new wt(""),lv=class{get(t,e=Dh){if(e===Dh){let n=new Error(`NullInjectorError: No provider for ${To(t)}!`);throw n.name="NullInjectorError",n}return e}},QD=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(QD||{}),ta=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(ta||{}),ls=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(ls||{});function iz(r,t,e){let n=r.length;for(;;){let i=r.indexOf(t,e);if(i===-1)return i;if(i===0||r.charCodeAt(i-1)<=32){let o=t.length;if(i+o===n||r.charCodeAt(i+o)<=32)return i}e=i+1}}function cC(r,t,e){let n=0;for(;n<e.length;){let i=e[n];if(typeof i=="number"){if(i!==0)break;n++;let o=e[n++],s=e[n++],a=e[n++];r.setAttribute(t,s,a,o)}else{let o=i,s=e[++n];sz(o)?r.setProperty(t,o,s):r.setAttribute(t,o,s),n++}}return n}function oz(r){return r===3||r===4||r===6}function sz(r){return r.charCodeAt(0)===64}function kh(r,t){if(!(t===null||t.length===0))if(r===null||r.length===0)r=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){let i=t[n];typeof i=="number"?e=i:e===0||(e===-1||e===2?rD(r,e,i,null,t[++n]):rD(r,e,i,null,null))}}return r}function rD(r,t,e,n,i){let o=0,s=r.length;if(t===-1)s=-1;else for(;o<r.length;){let a=r[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<r.length;){let a=r[o];if(typeof a=="number")break;if(a===e){if(n===null){i!==null&&(r[o+1]=i);return}else if(n===r[o+1]){r[o+2]=i;return}}o++,n!==null&&o++,i!==null&&o++}s!==-1&&(r.splice(s,0,t),o=s+1),r.splice(o++,0,e),n!==null&&r.splice(o++,0,n),i!==null&&r.splice(o++,0,i)}var YD="ng-template";function az(r,t,e,n){let i=0;if(n){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&iz(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(ix(r))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function ix(r){return r.type===4&&r.value!==YD}function lz(r,t,e){let n=r.type===4&&!e?YD:r.value;return t===n}function cz(r,t,e){let n=4,i=r.attrs,o=i!==null?fz(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ms(n)&&!Ms(c))return!1;if(s&&Ms(c))continue;s=!1,n=c|n&1;continue}if(!s)if(n&4){if(n=2|n&1,c!==""&&!lz(r,c,e)||c===""&&t.length===1){if(Ms(n))return!1;s=!0}}else if(n&8){if(i===null||!az(r,i,c,e)){if(Ms(n))return!1;s=!0}}else{let u=t[++a],f=uz(c,i,ix(r),e);if(f===-1){if(Ms(n))return!1;s=!0;continue}if(u!==""){let g;if(f>o?g="":g=i[f+1].toLowerCase(),n&2&&u!==g){if(Ms(n))return!1;s=!0}}}}return Ms(n)||s}function Ms(r){return(r&1)===0}function uz(r,t,e,n){if(t===null)return-1;let i=0;if(n||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===r)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return hz(t,r)}function dz(r,t,e=!1){for(let n=0;n<t.length;n++)if(cz(r,t[n],e))return!0;return!1}function fz(r){for(let t=0;t<r.length;t++){let e=r[t];if(oz(e))return t}return r.length}function hz(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){let n=r[e];if(typeof n=="number")return-1;if(n===t)return e;e++}return-1}function iD(r,t){return r?":not("+t.trim()+")":t}function pz(r){let t=r[0],e=1,n=2,i="",o=!1;for(;e<r.length;){let s=r[e];if(typeof s=="string")if(n&2){let a=r[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else n&8?i+="."+s:n&4&&(i+=" "+s);else i!==""&&!Ms(s)&&(t+=iD(o,i),i=""),n=s,o=o||!Ms(n);e++}return i!==""&&(t+=iD(o,i)),t}function gz(r){return r.map(pz).join(",")}function mz(r){let t=[],e=[],n=1,i=2;for(;n<r.length;){let o=r[n];if(typeof o=="string")i===2?o!==""&&t.push(o,r[++n]):i===8&&e.push(o);else{if(!Ms(i))break;i=o}n++}return{attrs:t,classes:e}}function oa(r){return Wh(()=>{let t=t1(r),e=Bn(bt({},t),{decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===QD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||ta.Emulated,styles:r.styles||as,_:null,schemas:r.schemas||null,tView:null,id:""});n1(e);let n=r.dependencies;return e.directiveDefs=sD(n,!1),e.pipeDefs=sD(n,!0),e.id=_z(e),e})}function vz(r){return Tl(r)||JD(r)}function yz(r){return r!==null}function Or(r){return Wh(()=>({type:r.type,bootstrap:r.bootstrap||as,declarations:r.declarations||as,imports:r.imports||as,exports:r.exports||as,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function oD(r,t){if(r==null)return yd;let e={};for(let n in r)if(r.hasOwnProperty(n)){let i=r[n],o,s,a=ls.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(e[o]=a!==ls.None?[n,a]:n,t[o]=s):e[o]=n}return e}function za(r){return Wh(()=>{let t=t1(r);return n1(t),t})}function Tl(r){return r[L5]||null}function JD(r){return r[V5]||null}function ZD(r){return r[B5]||null}function XD(r){let t=Tl(r)||JD(r)||ZD(r);return t!==null?t.standalone:!1}function e1(r,t){let e=r[U5]||null;if(!e&&t===!0)throw new Error(`Type ${To(r)} does not have '\u0275mod' property.`);return e}function t1(r){let t={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:r.inputs||yd,exportAs:r.exportAs||null,standalone:r.standalone===!0,signals:r.signals===!0,selectors:r.selectors||as,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oD(r.inputs,t),outputs:oD(r.outputs),debugInfo:null}}function n1(r){r.features?.forEach(t=>t(r))}function sD(r,t){if(!r)return null;let e=t?ZD:vz;return()=>(typeof r=="function"?r():r).map(n=>e(n)).filter(yz)}function _z(r){let t=0,e=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(let i of e)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Pv(r){return{\u0275providers:r}}function wz(...r){return{\u0275providers:r1(!0,r),\u0275fromNgModule:!0}}function r1(r,...t){let e=[],n=new Set,i,o=s=>{e.push(s)};return rx(t,s=>{let a=s;uC(a,o,[],n)&&(i||=[],i.push(a))}),i!==void 0&&i1(i,o),e}function i1(r,t){for(let e=0;e<r.length;e++){let{ngModule:n,providers:i}=r[e];ox(i,o=>{t(o,n)})}}function uC(r,t,e,n){if(r=co(r),!r)return!1;let i=null,o=XI(r),s=!o&&Tl(r);if(!o&&!s){let c=r.ngModule;if(o=XI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=r}let a=n.has(i);if(s){if(a)return!1;if(n.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)uC(u,t,e,n)}}else if(o){if(o.imports!=null&&!a){n.add(i);let u;try{rx(o.imports,f=>{uC(f,t,e,n)&&(u||=[],u.push(f))})}finally{}u!==void 0&&i1(u,t)}if(!a){let u=vd(i)||(()=>new i);t({provide:i,useFactory:u,deps:as},i),t({provide:KD,useValue:i,multi:!0},i),t({provide:_d,useValue:()=>Xe(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=r;ox(c,f=>{t(f,u)})}}else return!1;return i!==r&&r.providers!==void 0}function ox(r,t){for(let e of r)BD(e)&&(e=e.\u0275providers),Array.isArray(e)?ox(e,t):t(e)}var bz=qn({provide:String,useValue:qn});function o1(r){return r!==null&&typeof r=="object"&&bz in r}function Cz(r){return!!(r&&r.useExisting)}function xz(r){return!!(r&&r.useFactory)}function wd(r){return typeof r=="function"}function Ez(r){return!!r.useClass}var Iv=new wt(""),Xm={},Sz={},qb;function sx(){return qb===void 0&&(qb=new lv),qb}var Li=class{},Rh=class extends Li{get destroyed(){return this._destroyed}constructor(t,e,n,i){super(),this.parent=e,this.source=n,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fC(t,s=>this.processProvider(s)),this.records.set(GD,dd(void 0,this)),i.has("environment")&&this.records.set(Li,dd(void 0,this));let o=this.records.get(Iv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(KD,as,dn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=On(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),On(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Sl(this),n=ss(void 0),i;try{return t()}finally{Sl(e),ss(n)}}get(t,e=Dh,n=dn.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(tD))return t[tD](this);n=Mv(n);let i,o=Sl(this),s=ss(void 0);try{if(!(n&dn.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=Pz(t)&&Ov(t);u&&this.injectableDefInScope(u)?c=dd(dC(t),Xm):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=n&dn.Self?sx():this.parent;return e=n&dn.Optional&&e===Dh?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[sv]=a[sv]||[]).unshift(To(t)),o)throw a;return J5(a,t,"R3InjectorError",this.source)}else throw a}finally{ss(s),Sl(o)}}resolveInjectorInitializers(){let t=On(null),e=Sl(this),n=ss(void 0),i;try{let o=this.get(_d,as,dn.Self);for(let s of o)s()}finally{Sl(e),ss(n),On(t)}}toString(){let t=[],e=this.records;for(let n of e.keys())t.push(To(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ut(205,!1)}processProvider(t){t=co(t);let e=wd(t)?t:co(t&&t.provide),n=Tz(t);if(!wd(t)&&t.multi===!0){let i=this.records.get(e);i||(i=dd(void 0,Xm,!0),i.factory=()=>lC(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,n)}hydrate(t,e){let n=On(null);try{return e.value===Xm&&(e.value=Sz,e.value=e.factory()),typeof e.value=="object"&&e.value&&Mz(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{On(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=co(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function dC(r){let t=Ov(r),e=t!==null?t.factory:vd(r);if(e!==null)return e;if(r instanceof wt)throw new Ut(204,!1);if(r instanceof Function)return Az(r);throw new Ut(204,!1)}function Az(r){if(r.length>0)throw new Ut(204,!1);let e=j5(r);return e!==null?()=>e.factory(r):()=>new r}function Tz(r){if(o1(r))return dd(void 0,r.useValue);{let t=s1(r);return dd(t,Xm)}}function s1(r,t,e){let n;if(wd(r)){let i=co(r);return vd(i)||dC(i)}else if(o1(r))n=()=>co(r.useValue);else if(xz(r))n=()=>r.useFactory(...lC(r.deps||[]));else if(Cz(r))n=()=>Xe(co(r.useExisting));else{let i=co(r&&(r.useClass||r.provide));if(Oz(r))n=()=>new i(...lC(r.deps));else return vd(i)||dC(i)}return n}function dd(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function Oz(r){return!!r.deps}function Mz(r){return r!==null&&typeof r=="object"&&typeof r.ngOnDestroy=="function"}function Pz(r){return typeof r=="function"||typeof r=="object"&&r instanceof wt}function fC(r,t){for(let e of r)Array.isArray(e)?fC(e,t):e&&BD(e)?fC(e.\u0275providers,t):t(e)}function Ds(r,t){r instanceof Rh&&r.assertNotDestroyed();let e,n=Sl(r),i=ss(void 0);try{return t()}finally{Sl(n),ss(i)}}function a1(){return HD()!==void 0||K5()!=null}function Iz(r){if(!a1())throw new Ut(-203,!1)}function Dz(r){let t=zo.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function kz(r){return typeof r=="function"}var $a=0,rn=1,Kt=2,Mi=3,Ps=4,ks=5,Nh=6,jh=7,uo=8,bd=9,na=10,Pi=11,Fh=12,aD=13,Sd=14,Is=15,Qh=16,fd=17,Va=18,Dv=19,l1=20,Al=21,Gb=22,Pc=23,Ba=25,c1=1;var Ic=7,cv=8,Cd=9,Fi=10,ax=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r}(ax||{});function Oc(r){return Array.isArray(r)&&typeof r[c1]=="object"}function Wa(r){return Array.isArray(r)&&r[c1]===!0}function u1(r){return(r.flags&4)!==0}function kv(r){return r.componentOffset>-1}function lx(r){return(r.flags&1)===1}function Ol(r){return!!r.template}function Rz(r){return(r[Kt]&512)!==0}var hC=class{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}};function d1(r,t,e,n){t!==null?t.applyValueToInputSignal(t,n):r[e]=n}function Ad(){return f1}function f1(r){return r.type.prototype.ngOnChanges&&(r.setInput=jz),Nz}Ad.ngInherit=!0;function Nz(){let r=p1(this),t=r?.current;if(t){let e=r.previous;if(e===yd)r.previous=t;else for(let n in t)e[n]=t[n];r.current=null,this.ngOnChanges(t)}}function jz(r,t,e,n,i){let o=this.declaredInputs[n],s=p1(r)||Fz(r,{previous:yd,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new hC(u&&u.currentValue,e,c===yd),d1(r,t,i,e)}var h1="__ngSimpleChanges__";function p1(r){return r[h1]||null}function Fz(r,t){return r[h1]=t}var lD=null;var Xs=function(r,t,e){lD?.(r,t,e)},Lz="svg",Vz="math",Bz=!1;function Uz(){return Bz}function ra(r){for(;Array.isArray(r);)r=r[$a];return r}function g1(r,t){return ra(t[r])}function Rs(r,t){return ra(t[r.index])}function cx(r,t){return r.data[t]}function Pl(r,t){let e=t[r];return Oc(e)?e:e[$a]}function Hz(r){return(r[Kt]&4)===4}function ux(r){return(r[Kt]&128)===128}function zz(r){return Wa(r[Mi])}function uv(r,t){return t==null?null:r[t]}function m1(r){r[fd]=0}function $z(r){r[Kt]&1024||(r[Kt]|=1024,ux(r)&&Lh(r))}function Wz(r,t){for(;r>0;)t=t[Sd],r--;return t}function dx(r){return!!(r[Kt]&9216||r[Pc]?.dirty)}function pC(r){r[na].changeDetectionScheduler?.notify(1),dx(r)?Lh(r):r[Kt]&64&&(Uz()?(r[Kt]|=1024,Lh(r)):r[na].changeDetectionScheduler?.notify())}function Lh(r){r[na].changeDetectionScheduler?.notify();let t=Vh(r);for(;t!==null&&!(t[Kt]&8192||(t[Kt]|=8192,!ux(t)));)t=Vh(t)}function v1(r,t){if((r[Kt]&256)===256)throw new Ut(911,!1);r[Al]===null&&(r[Al]=[]),r[Al].push(t)}function qz(r,t){if(r[Al]===null)return;let e=r[Al].indexOf(t);e!==-1&&r[Al].splice(e,1)}function Vh(r){let t=r[Mi];return Wa(t)?t[Mi]:t}var pn={lFrame:E1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Gz(){return pn.lFrame.elementDepthCount}function Kz(){pn.lFrame.elementDepthCount++}function Qz(){pn.lFrame.elementDepthCount--}function y1(){return pn.bindingsEnabled}function Yz(){return pn.skipHydrationRootTNode!==null}function Jz(r){return pn.skipHydrationRootTNode===r}function Zz(){pn.skipHydrationRootTNode=null}function Gn(){return pn.lFrame.lView}function $o(){return pn.lFrame.tView}function Yh(r){return pn.lFrame.contextLView=r,r[uo]}function Jh(r){return pn.lFrame.contextLView=null,r}function Wo(){let r=_1();for(;r!==null&&r.type===64;)r=r.parent;return r}function _1(){return pn.lFrame.currentTNode}function Xz(){let r=pn.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}function Zh(r,t){let e=pn.lFrame;e.currentTNode=r,e.isParent=t}function w1(){return pn.lFrame.isParent}function e4(){pn.lFrame.isParent=!1}function t4(r){return pn.lFrame.bindingIndex=r}function fx(){return pn.lFrame.bindingIndex++}function n4(r){let t=pn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function r4(){return pn.lFrame.inI18n}function i4(r,t){let e=pn.lFrame;e.bindingIndex=e.bindingRootIndex=r,gC(t)}function o4(){return pn.lFrame.currentDirectiveIndex}function gC(r){pn.lFrame.currentDirectiveIndex=r}function s4(r){let t=pn.lFrame.currentDirectiveIndex;return t===-1?null:r[t]}function b1(){return pn.lFrame.currentQueryIndex}function hx(r){pn.lFrame.currentQueryIndex=r}function a4(r){let t=r[rn];return t.type===2?t.declTNode:t.type===1?r[ks]:null}function C1(r,t,e){if(e&dn.SkipSelf){let i=t,o=r;for(;i=i.parent,i===null&&!(e&dn.Host);)if(i=a4(o),i===null||(o=o[Sd],i.type&10))break;if(i===null)return!1;t=i,r=o}let n=pn.lFrame=x1();return n.currentTNode=t,n.lView=r,!0}function px(r){let t=x1(),e=r[rn];pn.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function x1(){let r=pn.lFrame,t=r===null?null:r.child;return t===null?E1(r):t}function E1(r){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return r!==null&&(r.child=t),t}function S1(){let r=pn.lFrame;return pn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}var A1=S1;function gx(){let r=S1();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function l4(r){return(pn.lFrame.contextLView=Wz(r,pn.lFrame.contextLView))[uo]}function Lc(){return pn.lFrame.selectedIndex}function Dc(r){pn.lFrame.selectedIndex=r}function c4(){let r=pn.lFrame;return cx(r.tView,r.selectedIndex)}function u4(){return pn.lFrame.currentNamespace}var T1=!0;function mx(){return T1}function vx(r){T1=r}function d4(r,t,e){let{ngOnChanges:n,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(n){let s=f1(t);(e.preOrderHooks??=[]).push(r,s),(e.preOrderCheckHooks??=[]).push(r,s)}i&&(e.preOrderHooks??=[]).push(0-r,i),o&&((e.preOrderHooks??=[]).push(r,o),(e.preOrderCheckHooks??=[]).push(r,o))}function yx(r,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){let o=r.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(r.contentHooks??=[]).push(-e,s),a&&((r.contentHooks??=[]).push(e,a),(r.contentCheckHooks??=[]).push(e,a)),c&&(r.viewHooks??=[]).push(-e,c),u&&((r.viewHooks??=[]).push(e,u),(r.viewCheckHooks??=[]).push(e,u)),f!=null&&(r.destroyHooks??=[]).push(e,f)}}function ev(r,t,e){O1(r,t,3,e)}function tv(r,t,e,n){(r[Kt]&3)===e&&O1(r,t,e,n)}function Kb(r,t){let e=r[Kt];(e&3)===t&&(e&=16383,e+=1,r[Kt]=e)}function O1(r,t,e,n){let i=n!==void 0?r[fd]&65535:0,o=n??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],n!=null&&a>=n)break}else t[c]<0&&(r[fd]+=65536),(a<o||o==-1)&&(f4(r,e,t,c),r[fd]=(r[fd]&4294901760)+c+2),c++}function cD(r,t){Xs(4,r,t);let e=On(null);try{t.call(r)}finally{On(e),Xs(5,r,t)}}function f4(r,t,e,n){let i=e[n]<0,o=e[n+1],s=i?-e[n]:e[n],a=r[s];i?r[Kt]>>14<r[fd]>>16&&(r[Kt]&3)===t&&(r[Kt]+=16384,cD(a,o)):cD(a,o)}var md=-1,kc=class{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}};function h4(r){return r instanceof kc}function p4(r){return(r.flags&8)!==0}function g4(r){return(r.flags&16)!==0}function M1(r){return r!==md}function dv(r){return r&32767}function m4(r){return r>>16}function fv(r,t){let e=m4(r),n=t;for(;e>0;)n=n[Sd],e--;return n}var mC=!0;function uD(r){let t=mC;return mC=r,t}var v4=256,P1=v4-1,I1=5,y4=0,ea={};function _4(r,t,e){let n;typeof e=="string"?n=e.charCodeAt(0)||0:e.hasOwnProperty(Ph)&&(n=e[Ph]),n==null&&(n=e[Ph]=y4++);let i=n&P1,o=1<<i;t.data[r+(i>>I1)]|=o}function hv(r,t){let e=D1(r,t);if(e!==-1)return e;let n=t[rn];n.firstCreatePass&&(r.injectorIndex=t.length,Qb(n.data,r),Qb(t,null),Qb(n.blueprint,null));let i=_x(r,t),o=r.injectorIndex;if(M1(i)){let s=dv(i),a=fv(i,t),c=a[rn].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function Qb(r,t){r.push(0,0,0,0,0,0,0,0,t)}function D1(r,t){return r.injectorIndex===-1||r.parent&&r.parent.injectorIndex===r.injectorIndex||t[r.injectorIndex+8]===null?-1:r.injectorIndex}function _x(r,t){if(r.parent&&r.parent.injectorIndex!==-1)return r.parent.injectorIndex;let e=0,n=null,i=t;for(;i!==null;){if(n=F1(i),n===null)return md;if(e++,i=i[Sd],n.injectorIndex!==-1)return n.injectorIndex|e<<16}return md}function vC(r,t,e){_4(r,t,e)}function k1(r,t,e){if(e&dn.Optional||r!==void 0)return r;nx(t,"NodeInjector")}function R1(r,t,e,n){if(e&dn.Optional&&n===void 0&&(n=null),!(e&(dn.Self|dn.Host))){let i=r[bd],o=ss(void 0);try{return i?i.get(t,n,e&dn.Optional):zD(t,n,e&dn.Optional)}finally{ss(o)}}return k1(n,t,e)}function N1(r,t,e,n=dn.Default,i){if(r!==null){if(t[Kt]&2048&&!(n&dn.Self)){let s=x4(r,t,e,n,ea);if(s!==ea)return s}let o=j1(r,t,e,n,ea);if(o!==ea)return o}return R1(t,e,n,i)}function j1(r,t,e,n,i){let o=b4(e);if(typeof o=="function"){if(!C1(t,r,n))return n&dn.Host?k1(i,e,n):R1(t,e,n,i);try{let s;if(s=o(n),s==null&&!(n&dn.Optional))nx(e);else return s}finally{A1()}}else if(typeof o=="number"){let s=null,a=D1(r,t),c=md,u=n&dn.Host?t[Is][ks]:null;for((a===-1||n&dn.SkipSelf)&&(c=a===-1?_x(r,t):t[a+8],c===md||!fD(n,!1)?a=-1:(s=t[rn],a=dv(c),t=fv(c,t)));a!==-1;){let f=t[rn];if(dD(o,a,f.data)){let g=w4(a,t,e,s,n,u);if(g!==ea)return g}c=t[a+8],c!==md&&fD(n,t[rn].data[a+8]===u)&&dD(o,a,t)?(s=f,a=dv(c),t=fv(c,t)):a=-1}}return i}function w4(r,t,e,n,i,o){let s=t[rn],a=s.data[r+8],c=n==null?kv(a)&&mC:n!=s&&(a.type&3)!==0,u=i&dn.Host&&o===a,f=nv(a,s,e,c,u);return f!==null?Rc(t,s,f,a):ea}function nv(r,t,e,n,i){let o=r.providerIndexes,s=t.data,a=o&1048575,c=r.directiveStart,u=r.directiveEnd,f=o>>20,g=n?a:a+f,v=i?a+f:u;for(let _=g;_<v;_++){let b=s[_];if(_<c&&e===b||_>=c&&b.type===e)return _}if(i){let _=s[c];if(_&&Ol(_)&&_.type===e)return c}return null}function Rc(r,t,e,n){let i=r[e],o=t.data;if(h4(i)){let s=i;s.resolving&&z5(H5(o[e]));let a=uD(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?ss(s.injectImpl):null,f=C1(r,n,dn.Default);try{i=r[e]=s.factory(void 0,o,r,n),t.firstCreatePass&&e>=n.directiveStart&&d4(e,o[e],t)}finally{u!==null&&ss(u),uD(a),s.resolving=!1,A1()}}return i}function b4(r){if(typeof r=="string")return r.charCodeAt(0)||0;let t=r.hasOwnProperty(Ph)?r[Ph]:void 0;return typeof t=="number"?t>=0?t&P1:C4:t}function dD(r,t,e){let n=1<<r;return!!(e[t+(r>>I1)]&n)}function fD(r,t){return!(r&dn.Self)&&!(r&dn.Host&&t)}var Mc=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return N1(this._tNode,this._lView,t,Mv(n),e)}};function C4(){return new Mc(Wo(),Gn())}function Xh(r){return Wh(()=>{let t=r.prototype.constructor,e=t[ov]||yC(t),n=Object.prototype,i=Object.getPrototypeOf(r.prototype).constructor;for(;i&&i!==n;){let o=i[ov]||yC(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yC(r){return jD(r)?()=>{let t=yC(co(r));return t&&t()}:vd(r)}function x4(r,t,e,n,i){let o=r,s=t;for(;o!==null&&s!==null&&s[Kt]&2048&&!(s[Kt]&512);){let a=j1(o,s,e,n|dn.Self,ea);if(a!==ea)return a;let c=o.parent;if(!c){let u=s[l1];if(u){let f=u.get(e,ea,n);if(f!==ea)return f}c=F1(s),s=s[Sd]}o=c}return i}function F1(r){let t=r[rn],e=t.type;return e===2?t.declTNode:e===1?r[ks]:null}function hD(r,t=null,e=null,n){let i=L1(r,t,e,n);return i.resolveInjectorInitializers(),i}function L1(r,t=null,e=null,n,i=new Set){let o=[e||as,wz(r)];return n=n||(typeof r=="object"?void 0:To(r)),new Rh(o,t||sx(),n||null,i)}var Ns=(()=>{class r{static{this.THROW_IF_NOT_FOUND=Dh}static{this.NULL=new lv}static create(e,n){if(Array.isArray(e))return hD({name:""},n,e,"");{let i=e.name??"";return hD({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=Mt({token:r,providedIn:"any",factory:()=>Xe(GD)})}static{this.__NG_ELEMENT_ID__=-1}}return r})();var E4="ngOriginalError";function Yb(r){return r[E4]}var ia=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Yb(t);for(;e&&Yb(e);)e=Yb(e);return e||null}},V1=new wt("",{providedIn:"root",factory:()=>ct(ia).handleError.bind(void 0)}),wx=(()=>{class r{static{this.__NG_ELEMENT_ID__=S4}static{this.__NG_ENV_ID__=e=>e}}return r})(),_C=class extends wx{constructor(t){super(),this._lView=t}onDestroy(t){return v1(this._lView,t),()=>qz(this._lView,t)}};function S4(){return new _C(Gn())}function A4(){return Td(Wo(),Gn())}function Td(r,t){return new sa(Rs(r,t))}var sa=(()=>{class r{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=A4}}return r})();function T4(r){return r instanceof sa?r.nativeElement:r}var wC=class extends Fr{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,a1()&&(this.destroyRef=ct(wx,{optional:!0})??void 0)}emit(t){let e=On(null);try{super.next(t)}finally{On(e)}}subscribe(t,e,n){let i=t,o=e||(()=>null),s=n;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Jb(o),i&&(i=Jb(i)),s&&(s=Jb(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof jr&&t.add(a),a}};function Jb(r){return t=>{setTimeout(r,void 0,t)}}var Zr=wC;function O4(){return this._results[Symbol.iterator]()}var bC=class r{get changes(){return this._changes??=new Zr}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=r.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=O4)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let n=ez(t);(this._changesDetected=!X5(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function B1(r){return(r.flags&128)===128}var U1=new Map,M4=0;function P4(){return M4++}function I4(r){U1.set(r[Dv],r)}function D4(r){U1.delete(r[Dv])}var pD="__ngContext__";function Nc(r,t){Oc(t)?(r[pD]=t[Dv],I4(t)):r[pD]=t}function H1(r){return $1(r[Fh])}function z1(r){return $1(r[Ps])}function $1(r){for(;r!==null&&!Wa(r);)r=r[Ps];return r}var CC;function W1(r){CC=r}function k4(){if(CC!==void 0)return CC;if(typeof document<"u")return document;throw new Ut(210,!1)}var Rv=new wt("",{providedIn:"root",factory:()=>R4}),R4="ng",bx=new wt(""),Vi=new wt("",{providedIn:"platform",factory:()=>"unknown"});var Cx=new wt("",{providedIn:"root",factory:()=>k4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var N4="h",j4="b";var F4=()=>null;function xx(r,t,e=!1){return F4(r,t,e)}var q1=!1,L4=new wt("",{providedIn:"root",factory:()=>q1});var xC=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${D5})`}};function Ex(r){return r instanceof xC?r.changingThisBreaksApplicationSecurity:r}function G1(r){return r instanceof Function?r():r}function V4(r){return(r??ct(Ns)).get(Vi)==="browser"}var Ua=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(Ua||{}),B4;function Sx(r,t){return B4(r,t)}function hd(r,t,e,n,i){if(n!=null){let o,s=!1;Wa(n)?o=n:Oc(n)&&(s=!0,n=n[$a]);let a=ra(n);r===0&&e!==null?i==null?J1(t,e,a):pv(t,e,a,i||null,!0):r===1&&e!==null?pv(t,e,a,i||null,!0):r===2?r3(t,a,s):r===3&&t.destroyNode(a),o!=null&&o3(t,r,o,e,i)}}function U4(r,t){return r.createText(t)}function H4(r,t,e){r.setValue(t,e)}function K1(r,t,e){return r.createElement(t,e)}function z4(r,t){Q1(r,t),t[$a]=null,t[ks]=null}function $4(r,t,e,n,i,o){n[$a]=i,n[ks]=t,jv(r,n,e,1,i,o)}function Q1(r,t){t[na].changeDetectionScheduler?.notify(1),jv(r,t,t[Pi],2,null,null)}function W4(r){let t=r[Fh];if(!t)return Zb(r[rn],r);for(;t;){let e=null;if(Oc(t))e=t[Fh];else{let n=t[Fi];n&&(e=n)}if(!e){for(;t&&!t[Ps]&&t!==r;)Oc(t)&&Zb(t[rn],t),t=t[Mi];t===null&&(t=r),Oc(t)&&Zb(t[rn],t),e=t&&t[Ps]}t=e}}function q4(r,t,e,n){let i=Fi+n,o=e.length;n>0&&(e[i-1][Ps]=t),n<o-Fi?(t[Ps]=e[i],qD(e,Fi+n,t)):(e.push(t),t[Ps]=null),t[Mi]=e;let s=t[Qh];s!==null&&e!==s&&G4(s,t);let a=t[Va];a!==null&&a.insertView(r),pC(t),t[Kt]|=128}function G4(r,t){let e=r[Cd],i=t[Mi][Mi][Is];t[Is]!==i&&(r[Kt]|=ax.HasTransplantedViews),e===null?r[Cd]=[t]:e.push(t)}function Y1(r,t){let e=r[Cd],n=e.indexOf(t);e.splice(n,1)}function Bh(r,t){if(r.length<=Fi)return;let e=Fi+t,n=r[e];if(n){let i=n[Qh];i!==null&&i!==r&&Y1(i,n),t>0&&(r[e-1][Ps]=n[Ps]);let o=av(r,Fi+t);z4(n[rn],n);let s=o[Va];s!==null&&s.detachView(o[rn]),n[Mi]=null,n[Ps]=null,n[Kt]&=-129}return n}function Nv(r,t){if(!(t[Kt]&256)){let e=t[Pi];e.destroyNode&&jv(r,t,e,3,null,null),W4(t)}}function Zb(r,t){if(t[Kt]&256)return;let e=On(null);try{t[Kt]&=-129,t[Kt]|=256,t[Pc]&&OI(t[Pc]),Q4(r,t),K4(r,t),t[rn].type===1&&t[Pi].destroy();let n=t[Qh];if(n!==null&&Wa(t[Mi])){n!==t[Mi]&&Y1(n,t);let i=t[Va];i!==null&&i.detachView(r)}D4(t)}finally{On(e)}}function K4(r,t){let e=r.cleanup,n=t[jh];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?n[s]():n[-s].unsubscribe(),o+=2}else{let s=n[e[o+1]];e[o].call(s)}n!==null&&(t[jh]=null);let i=t[Al];if(i!==null){t[Al]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Q4(r,t){let e;if(r!=null&&(e=r.destroyHooks)!=null)for(let n=0;n<e.length;n+=2){let i=t[e[n]];if(!(i instanceof kc)){let o=e[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Xs(4,a,c);try{c.call(a)}finally{Xs(5,a,c)}}else{Xs(4,i,o);try{o.call(i)}finally{Xs(5,i,o)}}}}}function Y4(r,t,e){return J4(r,t.parent,e)}function J4(r,t,e){let n=t;for(;n!==null&&n.type&40;)t=n,n=t.parent;if(n===null)return e[$a];{let{componentOffset:i}=n;if(i>-1){let{encapsulation:o}=r.data[n.directiveStart+i];if(o===ta.None||o===ta.Emulated)return null}return Rs(n,e)}}function pv(r,t,e,n,i){r.insertBefore(t,e,n,i)}function J1(r,t,e){r.appendChild(t,e)}function gD(r,t,e,n,i){n!==null?pv(r,t,e,n,i):J1(r,t,e)}function Z4(r,t,e,n){r.removeChild(t,e,n)}function Ax(r,t){return r.parentNode(t)}function X4(r,t){return r.nextSibling(t)}function e3(r,t,e){return n3(r,t,e)}function t3(r,t,e){return r.type&40?Rs(r,e):null}var n3=t3,mD;function Tx(r,t,e,n){let i=Y4(r,n,t),o=t[Pi],s=n.parent||t[ks],a=e3(s,n,t);if(i!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)gD(o,i,e[c],a,!1);else gD(o,i,e,a,!1);mD!==void 0&&mD(o,n,t,e,i)}function rv(r,t){if(t!==null){let e=t.type;if(e&3)return Rs(t,r);if(e&4)return EC(-1,r[t.index]);if(e&8){let n=t.child;if(n!==null)return rv(r,n);{let i=r[t.index];return Wa(i)?EC(-1,i):ra(i)}}else{if(e&32)return Sx(t,r)()||ra(r[t.index]);{let n=Z1(r,t);if(n!==null){if(Array.isArray(n))return n[0];let i=Vh(r[Is]);return rv(i,n)}else return rv(r,t.next)}}}return null}function Z1(r,t){if(t!==null){let n=r[Is][ks],i=t.projection;return n.projection[i]}return null}function EC(r,t){let e=Fi+r+1;if(e<t.length){let n=t[e],i=n[rn].firstChild;if(i!==null)return rv(n,i)}return t[Ic]}function r3(r,t,e){let n=Ax(r,t);n&&Z4(r,n,t,e)}function Ox(r,t,e,n,i,o,s){for(;e!=null;){let a=n[e.index],c=e.type;if(s&&t===0&&(a&&Nc(ra(a),n),e.flags|=2),(e.flags&32)!==32)if(c&8)Ox(r,t,e.child,n,i,o,!1),hd(t,r,i,a,o);else if(c&32){let u=Sx(e,n),f;for(;f=u();)hd(t,r,i,f,o);hd(t,r,i,a,o)}else c&16?i3(r,t,n,e,i,o):hd(t,r,i,a,o);e=s?e.projectionNext:e.next}}function jv(r,t,e,n,i,o){Ox(e,n,r.firstChild,t,i,o,!1)}function i3(r,t,e,n,i,o){let s=e[Is],c=s[ks].projection[n.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let f=c[u];hd(t,r,i,f,o)}else{let u=c,f=s[Mi];B1(n)&&(u.flags|=128),Ox(r,t,u,f,i,o,!0)}}function o3(r,t,e,n,i){let o=e[Ic],s=ra(e);o!==s&&hd(t,r,n,o,i);for(let a=Fi;a<e.length;a++){let c=e[a];jv(c[rn],c,r,t,n,o)}}function s3(r,t,e,n,i){if(t)i?r.addClass(e,n):r.removeClass(e,n);else{let o=n.indexOf("-")===-1?void 0:Ua.DashCase;i==null?r.removeStyle(e,n,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ua.Important),r.setStyle(e,n,i,o))}}function a3(r,t,e){r.setAttribute(t,"style",e)}function X1(r,t,e){e===""?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e)}function ek(r,t,e){let{mergedAttrs:n,classes:i,styles:o}=e;n!==null&&cC(r,t,n),i!==null&&X1(r,t,i),o!==null&&a3(r,t,o)}var Od={};function Vc(r=1){tk($o(),Gn(),Lc()+r,!1)}function tk(r,t,e,n){if(!n)if((t[Kt]&3)===3){let o=r.preOrderCheckHooks;o!==null&&ev(t,o,e)}else{let o=r.preOrderHooks;o!==null&&tv(t,o,0,e)}Dc(e)}function ir(r,t=dn.Default){let e=Gn();if(e===null)return Xe(r,t);let n=Wo();return N1(n,e,co(r),t)}function nk(){let r="invalid";throw new Error(r)}function rk(r,t,e,n,i,o){let s=On(null);try{let a=null;i&ls.SignalBased&&(a=t[n][Cb]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ls.HasDecoratorInputTransform&&(o=r.inputTransforms[n].call(t,o)),r.setInput!==null?r.setInput(t,a,o,e,n):d1(t,a,n,o)}finally{On(s)}}function l3(r,t){let e=r.hostBindingOpCodes;if(e!==null)try{for(let n=0;n<e.length;n++){let i=e[n];if(i<0)Dc(~i);else{let o=i,s=e[++n],a=e[++n];i4(s,o);let c=t[o];a(2,c)}}}finally{Dc(-1)}}function Fv(r,t,e,n,i,o,s,a,c,u,f){let g=t.blueprint.slice();return g[$a]=i,g[Kt]=n|4|128|8|64,(u!==null||r&&r[Kt]&2048)&&(g[Kt]|=2048),m1(g),g[Mi]=g[Sd]=r,g[uo]=e,g[na]=s||r&&r[na],g[Pi]=a||r&&r[Pi],g[bd]=c||r&&r[bd]||null,g[ks]=o,g[Dv]=P4(),g[Nh]=f,g[l1]=u,g[Is]=t.type==2?r[Is]:g,g}function Lv(r,t,e,n,i){let o=r.data[t];if(o===null)o=c3(r,t,e,n,i),r4()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=n,o.attrs=i;let s=Xz();o.injectorIndex=s===null?-1:s.injectorIndex}return Zh(o,!0),o}function c3(r,t,e,n,i){let o=_1(),s=w1(),a=s?o:o&&o.parent,c=r.data[t]=g3(r,a,e,t,n,i);return r.firstChild===null&&(r.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function ik(r,t,e,n){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(n),r.blueprint.push(n),r.data.push(null);return i}function ok(r,t,e,n,i){let o=Lc(),s=n&2;try{Dc(-1),s&&t.length>Ba&&tk(r,t,Ba,!1),Xs(s?2:0,i),e(n,i)}finally{Dc(o),Xs(s?3:1,i)}}function sk(r,t,e){if(u1(t)){let n=On(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=r.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{On(n)}}}function ak(r,t,e){y1()&&(C3(r,t,e,Rs(e,t)),(e.flags&64)===64&&fk(r,t,e))}function lk(r,t,e=Rs){let n=t.localNames;if(n!==null){let i=t.index+1;for(let o=0;o<n.length;o+=2){let s=n[o+1],a=s===-1?e(t,r):r[s];r[i++]=a}}}function ck(r){let t=r.tView;return t===null||t.incompleteFirstPass?r.tView=Mx(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):t}function Mx(r,t,e,n,i,o,s,a,c,u,f){let g=Ba+n,v=g+i,_=u3(g,v),b=typeof u=="function"?u():u;return _[rn]={type:r,blueprint:_,template:e,queries:null,viewQuery:a,declTNode:t,data:_.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:f}}function u3(r,t){let e=[];for(let n=0;n<t;n++)e.push(n<r?null:Od);return e}function d3(r,t,e,n){let o=n.get(L4,q1)||e===ta.ShadowDom,s=r.selectRootElement(t,o);return f3(s),s}function f3(r){h3(r)}var h3=()=>null;function p3(r,t,e,n){let i=gk(t);i.push(e),r.firstCreatePass&&mk(r).push(n,i.length-1)}function g3(r,t,e,n,i,o){let s=t?t.injectorIndex:-1,a=0;return Yz()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vD(r,t,e,n,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;n??={};let a,c=ls.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}r===0?yD(n,e,u,a,c):yD(n,e,u,a)}return n}function yD(r,t,e,n,i){let o;r.hasOwnProperty(e)?(o=r[e]).push(t,n):o=r[e]=[t,n],i!==void 0&&o.push(i)}function m3(r,t,e){let n=t.directiveStart,i=t.directiveEnd,o=r.data,s=t.attrs,a=[],c=null,u=null;for(let f=n;f<i;f++){let g=o[f],v=e?e.get(g):null,_=v?v.inputs:null,b=v?v.outputs:null;c=vD(0,g.inputs,f,c,_),u=vD(1,g.outputs,f,u,b);let C=c!==null&&s!==null&&!ix(t)?I3(c,f,s):null;a.push(C)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function v3(r){return r==="class"?"className":r==="for"?"htmlFor":r==="formaction"?"formAction":r==="innerHtml"?"innerHTML":r==="readonly"?"readOnly":r==="tabindex"?"tabIndex":r}function y3(r,t,e,n,i,o,s,a){let c=Rs(t,e),u=t.inputs,f;!a&&u!=null&&(f=u[n])?(Px(r,e,f,n,i),kv(t)&&_3(e,t.index)):t.type&3?(n=v3(n),i=s!=null?s(i,t.value||"",n):i,o.setProperty(c,n,i)):t.type&12}function _3(r,t){let e=Pl(t,r);e[Kt]&16||(e[Kt]|=64)}function uk(r,t,e,n){if(y1()){let i=n===null?null:{"":-1},o=E3(r,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&dk(r,t,e,s,i,a),i&&S3(e,n,i)}e.mergedAttrs=kh(e.mergedAttrs,e.attrs)}function dk(r,t,e,n,i,o){for(let u=0;u<n.length;u++)vC(hv(e,t),r,n[u].type);T3(e,r.data.length,n.length);for(let u=0;u<n.length;u++){let f=n[u];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=ik(r,t,n.length,null);for(let u=0;u<n.length;u++){let f=n[u];e.mergedAttrs=kh(e.mergedAttrs,f.hostAttrs),O3(r,e,t,c,f),A3(c,f,i),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let g=f.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((r.preOrderHooks??=[]).push(e.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}m3(r,e,o)}function w3(r,t,e,n,i){let o=i.hostBindings;if(o){let s=r.hostBindingOpCodes;s===null&&(s=r.hostBindingOpCodes=[]);let a=~t.index;b3(s)!=a&&s.push(a),s.push(e,n,o)}}function b3(r){let t=r.length;for(;t>0;){let e=r[--t];if(typeof e=="number"&&e<0)return e}return 0}function C3(r,t,e,n){let i=e.directiveStart,o=e.directiveEnd;kv(e)&&M3(t,e,r.data[i+e.componentOffset]),r.firstCreatePass||hv(e,t),Nc(n,t);let s=e.initialInputs;for(let a=i;a<o;a++){let c=r.data[a],u=Rc(t,r,a,e);if(Nc(u,t),s!==null&&P3(t,a-i,u,c,e,s),Ol(c)){let f=Pl(e.index,t);f[uo]=Rc(t,r,a,e)}}}function fk(r,t,e){let n=e.directiveStart,i=e.directiveEnd,o=e.index,s=o4();try{Dc(o);for(let a=n;a<i;a++){let c=r.data[a],u=t[a];gC(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&x3(c,u)}}finally{Dc(-1),gC(s)}}function x3(r,t){r.hostBindings!==null&&r.hostBindings(1,t)}function E3(r,t){let e=r.directiveRegistry,n=null,i=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(dz(t,s.selectors,!1))if(n||(n=[]),Ol(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),n.unshift(...a,s);let c=a.length;SC(r,t,c)}else n.unshift(s),SC(r,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,n,i),n.push(s)}return n===null?null:[n,i]}function SC(r,t,e){t.componentOffset=e,(r.components??=[]).push(t.index)}function S3(r,t,e){if(t){let n=r.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new Ut(-301,!1);n.push(t[i],o)}}}function A3(r,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=r;Ol(t)&&(e[""]=r)}}function T3(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function O3(r,t,e,n,i){r.data[n]=i;let o=i.factory||(i.factory=vd(i.type,!0)),s=new kc(o,Ol(i),ir);r.blueprint[n]=s,e[n]=s,w3(r,t,n,ik(r,e,i.hostVars,Od),i)}function M3(r,t,e){let n=Rs(t,r),i=ck(e),o=r[na].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Vv(r,Fv(r,i,null,s,n,t,null,o.createRenderer(n,e),null,null,null));r[t.index]=a}function P3(r,t,e,n,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],f=s[a++],g=s[a++];rk(n,e,c,u,f,g)}}function I3(r,t,e){let n=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(r.hasOwnProperty(o)){n===null&&(n=[]);let s=r[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){n.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}return n}function hk(r,t,e,n){return[r,!0,0,t,null,n,null,e,null,null]}function pk(r,t){let e=r.contentQueries;if(e!==null){let n=On(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=r.data[s];hx(o),a.contentQueries(2,t[s],s)}}}finally{On(n)}}}function Vv(r,t){return r[Fh]?r[aD][Ps]=t:r[Fh]=t,r[aD]=t,t}function AC(r,t,e){hx(0);let n=On(null);try{t(r,e)}finally{On(n)}}function gk(r){return r[jh]||(r[jh]=[])}function mk(r){return r.cleanup||(r.cleanup=[])}function vk(r,t){let e=r[bd],n=e?e.get(ia,null):null;n&&n.handleError(t)}function Px(r,t,e,n,i){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],c=e[o++],u=t[s],f=r.data[s];rk(f,u,n,a,c,i)}}function D3(r,t,e){let n=g1(t,r);H4(r[Pi],n,e)}function k3(r,t){let e=Pl(t,r),n=e[rn];R3(n,e);let i=e[$a];i!==null&&e[Nh]===null&&(e[Nh]=xx(i,e[bd])),Ix(n,e,e[uo])}function R3(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])}function Ix(r,t,e){px(t);try{let n=r.viewQuery;n!==null&&AC(1,n,e);let i=r.template;i!==null&&ok(r,t,i,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),t[Va]?.finishViewCreation(r),r.staticContentQueries&&pk(r,t),r.staticViewQueries&&AC(2,r.viewQuery,e);let o=r.components;o!==null&&N3(t,o)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{t[Kt]&=-5,gx()}}function N3(r,t){for(let e=0;e<t.length;e++)k3(r,t[e])}function Dx(r,t,e,n){let i=On(null);try{let o=t.tView,a=r[Kt]&4096?4096:16,c=Fv(r,o,e,a,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),u=r[t.index];c[Qh]=u;let f=r[Va];return f!==null&&(c[Va]=f.createEmbeddedView(o)),Ix(o,c,e),c}finally{On(i)}}function j3(r,t){let e=Fi+t;if(e<r.length)return r[e]}function gv(r,t){return!t||t.firstChild===null||B1(r)}function kx(r,t,e,n=!0){let i=t[rn];if(q4(i,t,r,e),n){let s=EC(e,r),a=t[Pi],c=Ax(a,r[Ic]);c!==null&&$4(i,r[ks],a,t,c,s)}let o=t[Nh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function F3(r,t){let e=Bh(r,t);return e!==void 0&&Nv(e[rn],e),e}function mv(r,t,e,n,i=!1){for(;e!==null;){let o=t[e.index];o!==null&&n.push(ra(o)),Wa(o)&&L3(o,n);let s=e.type;if(s&8)mv(r,t,e.child,n);else if(s&32){let a=Sx(e,t),c;for(;c=a();)n.push(c)}else if(s&16){let a=Z1(t,e);if(Array.isArray(a))n.push(...a);else{let c=Vh(t[Is]);mv(c[rn],c,a,n,!0)}}e=i?e.projectionNext:e.next}return n}function L3(r,t){for(let e=Fi;e<r.length;e++){let n=r[e],i=n[rn].firstChild;i!==null&&mv(n[rn],n,i,t)}r[Ic]!==r[$a]&&t.push(r[Ic])}var yk=[];function V3(r){return r[Pc]??B3(r)}function B3(r){let t=yk.pop()??Object.create(H3);return t.lView=r,t}function U3(r){r.lView[Pc]!==r&&(r.lView=null,yk.push(r))}var H3=Bn(bt({},SI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{Lh(r.lView)},consumerOnSignalRead(){this.lView[Pc]=this}}),_k=100;function wk(r,t=!0,e=0){let n=r[na],i=n.rendererFactory,o=!1;o||i.begin?.();try{z3(r,e)}catch(s){throw t&&vk(r,s),s}finally{o||(i.end?.(),n.inlineEffectRunner?.flush())}}function z3(r,t){TC(r,t);let e=0;for(;dx(r);){if(e===_k)throw new Ut(103,!1);e++,TC(r,1)}}function $3(r,t,e,n){let i=t[Kt];if((i&256)===256)return;let o=!1;!o&&t[na].inlineEffectRunner?.flush(),px(t);let s=null,a=null;!o&&W3(r)&&(a=V3(t),s=AI(a));try{m1(t),t4(r.bindingStartIndex),e!==null&&ok(r,t,e,2,n);let c=(i&3)===3;if(!o)if(c){let g=r.preOrderCheckHooks;g!==null&&ev(t,g,null)}else{let g=r.preOrderHooks;g!==null&&tv(t,g,0,null),Kb(t,0)}if(q3(t),bk(t,0),r.contentQueries!==null&&pk(r,t),!o)if(c){let g=r.contentCheckHooks;g!==null&&ev(t,g)}else{let g=r.contentHooks;g!==null&&tv(t,g,1),Kb(t,1)}l3(r,t);let u=r.components;u!==null&&xk(t,u,0);let f=r.viewQuery;if(f!==null&&AC(2,f,n),!o)if(c){let g=r.viewCheckHooks;g!==null&&ev(t,g)}else{let g=r.viewHooks;g!==null&&tv(t,g,2),Kb(t,2)}if(r.firstUpdatePass===!0&&(r.firstUpdatePass=!1),t[Gb]){for(let g of t[Gb])g();t[Gb]=null}o||(t[Kt]&=-73)}catch(c){throw Lh(t),c}finally{a!==null&&(TI(a,s),U3(a)),gx()}}function W3(r){return r.type!==2}function bk(r,t){for(let e=H1(r);e!==null;e=z1(e))for(let n=Fi;n<e.length;n++){let i=e[n];Ck(i,t)}}function q3(r){for(let t=H1(r);t!==null;t=z1(t)){if(!(t[Kt]&ax.HasTransplantedViews))continue;let e=t[Cd];for(let n=0;n<e.length;n++){let i=e[n],o=i[Mi];$z(i)}}}function G3(r,t,e){let n=Pl(t,r);Ck(n,e)}function Ck(r,t){ux(r)&&TC(r,t)}function TC(r,t){let n=r[rn],i=r[Kt],o=r[Pc],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&xb(o)),o&&(o.dirty=!1),r[Kt]&=-9217,s)$3(n,r,n.template,r[uo]);else if(i&8192){bk(r,1);let a=n.components;a!==null&&xk(r,a,1)}}function xk(r,t,e){for(let n=0;n<t.length;n++)G3(r,t[n],e)}function Rx(r){for(r[na].changeDetectionScheduler?.notify();r;){r[Kt]|=64;let t=Vh(r);if(Rz(r)&&!t)return r;r=t}return null}var jc=class{get rootNodes(){let t=this._lView,e=t[rn];return mv(e,t,e.firstChild,[])}constructor(t,e,n=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[uo]}set context(t){this._lView[uo]=t}get destroyed(){return(this._lView[Kt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Mi];if(Wa(t)){let e=t[cv],n=e?e.indexOf(this):-1;n>-1&&(Bh(t,n),av(e,n))}this._attachedToViewContainer=!1}Nv(this._lView[rn],this._lView)}onDestroy(t){v1(this._lView,t)}markForCheck(){Rx(this._cdRefInjectingView||this._lView)}detach(){this._lView[Kt]&=-129}reattach(){pC(this._lView),this._lView[Kt]|=128}detectChanges(){this._lView[Kt]|=1024,wk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ut(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Q1(this._lView[rn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ut(902,!1);this._appRef=t,pC(this._lView)}},Uh=(()=>{class r{static{this.__NG_ELEMENT_ID__=Y3}}return r})(),K3=Uh,Q3=class extends K3{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){let i=Dx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:n});return new jc(i)}};function Y3(){return Nx(Wo(),Gn())}function Nx(r,t){return r.type&4?new Q3(t,r,Td(r,t)):null}var Tfe=new RegExp(`^(\\d+)*(${j4}|${N4})*(.*)`);var J3=()=>null;function vv(r,t){return J3(r,t)}var yv=class{},OC=class{},_v=class{};function Z3(r){let t=Error(`No component factory found for ${To(r)}.`);return t[X3]=r,t}var X3="ngComponent";var MC=class{resolveComponentFactory(t){throw Z3(t)}},Bv=(()=>{class r{static{this.NULL=new MC}}return r})(),Hh=class{},Il=(()=>{class r{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>e9()}}return r})();function e9(){let r=Gn(),t=Wo(),e=Pl(t.index,r);return(Oc(e)?e:r)[Pi]}var t9=(()=>{class r{static{this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>null})}}return r})(),Xb={};var _D=new Set;function ep(r){_D.has(r)||(_D.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}function wD(...r){}function n9(){let r=typeof zo.requestAnimationFrame=="function",t=zo[r?"requestAnimationFrame":"setTimeout"],e=zo[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var _n=class r{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zr(!1),this.onMicrotaskEmpty=new Zr(!1),this.onStable=new Zr(!1),this.onError=new Zr(!1),typeof Zone>"u")throw new Ut(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&e,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=n9().nativeRequestAnimationFrame,o9(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!r.isInAngularZone())throw new Ut(909,!1)}static assertNotInAngularZone(){if(r.isInAngularZone())throw new Ut(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,r9,wD,wD);try{return o.runTask(s,e,n)}finally{o.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}},r9={};function jx(r){if(r._nesting==0&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function i9(r){r.isCheckStableRunning||r.lastRequestAnimationFrameId!==-1||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(zo,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,PC(r),r.isCheckStableRunning=!0,jx(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),PC(r))}function o9(r){let t=()=>{i9(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,i,o,s,a)=>{if(s9(a))return e.invokeTask(i,o,s,a);try{return bD(r),e.invokeTask(i,o,s,a)}finally{(r.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||r.shouldCoalesceRunChangeDetection)&&t(),CD(r)}},onInvoke:(e,n,i,o,s,a,c)=>{try{return bD(r),e.invoke(i,o,s,a,c)}finally{r.shouldCoalesceRunChangeDetection&&t(),CD(r)}},onHasTask:(e,n,i,o)=>{e.hasTask(i,o),n===i&&(o.change=="microTask"?(r._hasPendingMicrotasks=o.microTask,PC(r),jx(r)):o.change=="macroTask"&&(r.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,n,i,o)=>(e.handleError(i,o),r.runOutsideAngular(()=>r.onError.emit(o)),!1)})}function PC(r){r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&r.lastRequestAnimationFrameId!==-1?r.hasPendingMicrotasks=!0:r.hasPendingMicrotasks=!1}function bD(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function CD(r){r._nesting--,jx(r)}var IC=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zr,this.onMicrotaskEmpty=new Zr,this.onStable=new Zr,this.onError=new Zr}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}};function s9(r){return!Array.isArray(r)||r.length!==1?!1:r[0].data?.__ignore_ng_zone__===!0}function a9(r="zone.js",t){return r==="noop"?new IC:r==="zone.js"?new _n(t):r}var pd=function(r){return r[r.EarlyRead=0]="EarlyRead",r[r.Write=1]="Write",r[r.MixedReadWrite=2]="MixedReadWrite",r[r.Read=3]="Read",r}(pd||{}),l9={destroy(){}};function Uv(r,t){!t&&Iz(Uv);let e=t?.injector??ct(Ns);if(!V4(e))return l9;ep("NgAfterNextRender");let n=e.get(Fx),i=n.handler??=new kC,o=t?.phase??pd.MixedReadWrite,s=()=>{i.unregister(c),a()},a=e.get(wx).onDestroy(s),c=Ds(e,()=>new DC(o,()=>{s(),r()}));return i.register(c),{destroy:s}}var DC=class{constructor(t,e){this.phase=t,this.callbackFn=e,this.zone=ct(_n),this.errorHandler=ct(ia,{optional:!0}),ct(yv,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},kC=class{constructor(){this.executingCallbacks=!1,this.buckets={[pd.EarlyRead]:new Set,[pd.Write]:new Set,[pd.MixedReadWrite]:new Set,[pd.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let e of t)e.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},Fx=(()=>{class r{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let n of e)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>new r})}}return r})();function RC(r,t,e){let n=e?r.styles:null,i=e?r.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=JI(i,a);else if(o==2){let c=a,u=t[++s];n=JI(n,c+": "+u+";")}}e?r.styles=n:r.stylesWithoutHost=n,e?r.classes=i:r.classesWithoutHost=i}var wv=class extends Bv{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Tl(t);return new xd(e,this.ngModule)}};function xD(r){let t=[];for(let e in r){if(!r.hasOwnProperty(e))continue;let n=r[e];n!==void 0&&t.push({propName:Array.isArray(n)?n[0]:n,templateName:e})}return t}function c9(r){let t=r.toLowerCase();return t==="svg"?Lz:t==="math"?Vz:null}var NC=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=Mv(n);let i=this.injector.get(t,Xb,n);return i!==Xb||e===Xb?i:this.parentInjector.get(t,e,n)}},xd=class extends _v{get inputs(){let t=this.componentDef,e=t.inputTransforms,n=xD(t.inputs);if(e!==null)for(let i of n)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return n}get outputs(){return xD(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=gz(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,i){let o=On(null);try{i=i||this.ngModule;let s=i instanceof Li?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new NC(t,s):t,c=a.get(Hh,null);if(c===null)throw new Ut(407,!1);let u=a.get(t9,null),f=a.get(Fx,null),g=a.get(yv,null),v={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:g},_=c.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",C=n?d3(_,n,this.componentDef.encapsulation,a):K1(_,b,c9(b)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let j=null;C!==null&&(j=xx(C,a,!0));let q=Mx(0,null,null,1,0,null,null,null,null,null,null),N=Fv(null,q,null,S,null,null,v,_,a,null,j);px(N);let G,se;try{let ue=this.componentDef,Y,L=null;ue.findHostDirectiveDefs?(Y=[],L=new Map,ue.findHostDirectiveDefs(ue,Y,L),Y.push(ue)):Y=[ue];let k=u9(N,C),$=d9(k,C,ue,Y,N,v,_);se=cx(q,Ba),C&&p9(_,ue,C,n),e!==void 0&&g9(se,this.ngContentSelectors,e),G=h9($,ue,Y,L,N,[m9]),Ix(q,N,null)}finally{gx()}return new jC(this.componentType,G,Td(se,N),N,se)}finally{On(o)}}},jC=class extends OC{constructor(t,e,n,i,o){super(),this.location=n,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new jc(i,void 0,!1),this.componentType=t}setInput(t,e){let n=this._tNode.inputs,i;if(n!==null&&(i=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;Px(o[rn],o,i,t,e),this.previousInputValues.set(t,e);let s=Pl(this._tNode.index,o);Rx(s)}}get injector(){return new Mc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function u9(r,t){let e=r[rn],n=Ba;return r[n]=t,Lv(e,n,2,"#host",null)}function d9(r,t,e,n,i,o,s){let a=i[rn];f9(n,r,t,s);let c=null;t!==null&&(c=xx(t,i[bd]));let u=o.rendererFactory.createRenderer(t,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let g=Fv(i,ck(e),null,f,i[r.index],r,o,u,null,null,c);return a.firstCreatePass&&SC(a,r,n.length-1),Vv(i,g),i[r.index]=g}function f9(r,t,e,n){for(let i of r)t.mergedAttrs=kh(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(RC(t,t.mergedAttrs,!0),e!==null&&ek(n,e,t))}function h9(r,t,e,n,i,o){let s=Wo(),a=i[rn],c=Rs(s,i);dk(a,i,s,e,null,n);for(let f=0;f<e.length;f++){let g=s.directiveStart+f,v=Rc(i,a,g,s);Nc(v,i)}fk(a,i,s),c&&Nc(c,i);let u=Rc(i,a,s.directiveStart+s.componentOffset,s);if(r[uo]=i[uo]=u,o!==null)for(let f of o)f(u,t);return sk(a,s,i),u}function p9(r,t,e,n){if(n)cC(r,e,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=mz(t.selectors[0]);i&&cC(r,e,i),o&&o.length>0&&X1(r,e,o.join(" "))}}function g9(r,t,e){let n=r.projection=[];for(let i=0;i<t.length;i++){let o=e[i];n.push(o!=null?Array.from(o):null)}}function m9(){let r=Wo();yx(Gn()[rn],r)}var Md=(()=>{class r{static{this.__NG_ELEMENT_ID__=v9}}return r})();function v9(){let r=Wo();return Sk(r,Gn())}var y9=Md,Ek=class extends y9{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Td(this._hostTNode,this._hostLView)}get injector(){return new Mc(this._hostTNode,this._hostLView)}get parentInjector(){let t=_x(this._hostTNode,this._hostLView);if(M1(t)){let e=fv(t,this._hostLView),n=dv(t),i=e[rn].data[n+8];return new Mc(i,e)}else return new Mc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=ED(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Fi}createEmbeddedView(t,e,n){let i,o;typeof n=="number"?i=n:n!=null&&(i=n.index,o=n.injector);let s=vv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,gv(this._hostTNode,s)),a}createComponent(t,e,n,i,o){let s=t&&!kz(t),a;if(s)a=e;else{let b=e||{};a=b.index,n=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?t:new xd(Tl(t)),u=n||this.parentInjector;if(!o&&c.ngModule==null){let C=(s?u:this.parentInjector).get(Li,null);C&&(o=C)}let f=Tl(c.componentType??{}),g=vv(this._lContainer,f?.id??null),v=g?.firstChild??null,_=c.create(u,i,v,o);return this.insertImpl(_.hostView,a,gv(this._hostTNode,g)),_}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,n){let i=t._lView;if(zz(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Mi],u=new Ek(c,c[ks],c[Mi]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return kx(s,i,o,n),t.attachToViewContainerRef(),qD(eC(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=ED(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),n=Bh(this._lContainer,e);n&&(av(eC(this._lContainer),e),Nv(n[rn],n))}detach(t){let e=this._adjustIndex(t,-1),n=Bh(this._lContainer,e);return n&&av(eC(this._lContainer),e)!=null?new jc(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function ED(r){return r[cv]}function eC(r){return r[cv]||(r[cv]=[])}function Sk(r,t){let e,n=t[r.index];return Wa(n)?e=n:(e=hk(n,t,null,r),t[r.index]=e,Vv(t,e)),w9(e,t,r,n),new Ek(e,r,t)}function _9(r,t){let e=r[Pi],n=e.createComment(""),i=Rs(t,r),o=Ax(e,i);return pv(e,o,n,X4(e,i),!1),n}var w9=x9,b9=()=>!1;function C9(r,t,e){return b9(r,t,e)}function x9(r,t,e,n){if(r[Ic])return;let i;e.type&8?i=ra(n):i=_9(t,e),r[Ic]=i}var FC=class r{constructor(t){this.queryList=t,this.matches=null}clone(){return new r(this.queryList)}setDirty(){this.queryList.setDirty()}},LC=class r{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let n=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<n;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new r(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Lx(t,e).matches!==null&&this.queries[e].setDirty()}},VC=class{constructor(t,e,n=null){this.flags=e,this.read=n,typeof t=="string"?this.predicate=I9(t):this.predicate=t}},BC=class r{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){let i=e!==null?e.length:0,o=this.getByIndex(n).embeddedTView(t,i);o&&(o.indexInDeclarationView=n,e!==null?e.push(o):e=[o])}return e!==null?new r(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},UC=class r{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new r(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==e;)n=n.parent;return e===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){let o=n[i];this.matchTNodeWithReadOption(t,e,E9(e,o)),this.matchTNodeWithReadOption(t,e,nv(e,t,o,!1,!1))}else n===Uh?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,nv(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(n!==null){let i=this.metadata.read;if(i!==null)if(i===sa||i===Md||i===Uh&&e.type&4)this.addMatch(e.index,-2);else{let o=nv(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,n)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function E9(r,t){let e=r.localNames;if(e!==null){for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1]}return null}function S9(r,t){return r.type&11?Td(r,t):r.type&4?Nx(r,t):null}function A9(r,t,e,n){return e===-1?S9(t,r):e===-2?T9(r,t,n):Rc(r,r[rn],e,t)}function T9(r,t,e){if(e===sa)return Td(t,r);if(e===Uh)return Nx(t,r);if(e===Md)return Sk(t,r)}function Ak(r,t,e,n){let i=t[Va].queries[n];if(i.matches===null){let o=r.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let f=o[u];a.push(A9(t,f,s[c+1],e.metadata.read))}}i.matches=a}return i.matches}function HC(r,t,e,n){let i=r.queries.getByIndex(e),o=i.matches;if(o!==null){let s=Ak(r,t,i,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)n.push(s[a/2]);else{let u=o[a+1],f=t[-c];for(let g=Fi;g<f.length;g++){let v=f[g];v[Qh]===v[Mi]&&HC(v[rn],v,u,n)}if(f[Cd]!==null){let g=f[Cd];for(let v=0;v<g.length;v++){let _=g[v];HC(_[rn],_,u,n)}}}}}return n}function O9(r,t){return r[Va].queries[t].queryList}function M9(r,t,e){let n=new bC((e&4)===4);return p3(r,t,n,n.destroy),(t[Va]??=new LC).queries.push(new FC(n))-1}function P9(r,t,e){let n=$o();return n.firstCreatePass&&(D9(n,new VC(r,t,e),-1),(t&2)===2&&(n.staticViewQueries=!0)),M9(n,Gn(),t)}function I9(r){return r.split(",").map(t=>t.trim())}function D9(r,t,e){r.queries===null&&(r.queries=new BC),r.queries.track(new UC(t,e))}function Lx(r,t){return r.queries.getByIndex(t)}function k9(r,t){let e=r[rn],n=Lx(e,t);return n.crossesNgTemplate?HC(e,r,t,[]):Ak(e,r,n,t)}function R9(r){return typeof r=="function"&&r[Cb]!==void 0}function Tk(r){return R9(r)&&typeof r.set=="function"}function N9(r){let t=[],e=new Map;function n(i){let o=e.get(i);if(!o){let s=r(i);e.set(i,o=s.then(V9))}return o}return bv.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(n(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((g,v)=>{a.push(""),s.push(n(g).then(_=>{a[u+v]=_,f.splice(f.indexOf(g),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(n(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>B9(o));t.push(c)}),F9(),Promise.all(t).then(()=>{})}var bv=new Map,j9=new Set;function F9(){let r=bv;return bv=new Map,r}function L9(){return bv.size===0}function V9(r){return typeof r=="string"?r:r.text()}function B9(r){j9.delete(r)}function U9(r){return Object.getPrototypeOf(r.prototype).constructor}function Pd(r){let t=U9(r.type),e=!0,n=[r];for(;t;){let i;if(Ol(r))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ut(903,!1);i=t.\u0275dir}if(i){if(e){n.push(i);let s=r;s.inputs=Ym(r.inputs),s.inputTransforms=Ym(r.inputTransforms),s.declaredInputs=Ym(r.declaredInputs),s.outputs=Ym(r.outputs);let a=i.hostBindings;a&&q9(r,a);let c=i.viewQuery,u=i.contentQueries;if(c&&$9(r,c),u&&W9(r,u),H9(r,i),R5(r.outputs,i.outputs),Ol(i)&&i.data.animation){let f=r.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(r),a===Pd&&(e=!1)}}t=Object.getPrototypeOf(t)}z9(n)}function H9(r,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||r.inputs.hasOwnProperty(e))continue;let n=t.inputs[e];if(n!==void 0&&(r.inputs[e]=n,r.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let i=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(i))continue;r.inputTransforms??={},r.inputTransforms[i]=t.inputTransforms[i]}}}function z9(r){let t=0,e=null;for(let n=r.length-1;n>=0;n--){let i=r[n];i.hostVars=t+=i.hostVars,i.hostAttrs=kh(i.hostAttrs,e=kh(e,i.hostAttrs))}}function Ym(r){return r===yd?{}:r===as?[]:r}function $9(r,t){let e=r.viewQuery;e?r.viewQuery=(n,i)=>{t(n,i),e(n,i)}:r.viewQuery=t}function W9(r,t){let e=r.contentQueries;e?r.contentQueries=(n,i,o)=>{t(n,i,o),e(n,i,o)}:r.contentQueries=t}function q9(r,t){let e=r.hostBindings;e?r.hostBindings=(n,i)=>{t(n,i),e(n,i)}:r.hostBindings=t}var Ml=class{},zh=class{};var Cv=class extends Ml{constructor(t,e,n){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wv(this);let i=e1(t);this._bootstrapComponents=G1(i.bootstrap),this._r3Injector=L1(t,e,[{provide:Ml,useValue:this},{provide:Bv,useValue:this.componentFactoryResolver},...n],To(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},xv=class extends zh{constructor(t){super(),this.moduleType=t}create(t){return new Cv(this.moduleType,t,[])}};function G9(r,t,e){return new Cv(r,t,e)}var zC=class extends Ml{constructor(t){super(),this.componentFactoryResolver=new wv(this),this.instance=null;let e=new Rh([...t.providers,{provide:Ml,useValue:this},{provide:Bv,useValue:this.componentFactoryResolver}],t.parent||sx(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Hv(r,t,e=null){return new zC({providers:r,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var Bc=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Oi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function zv(r,t,e){let n=r[t];return Object.is(n,e)?!1:(r[t]=e,!0)}function K9(r){return(r.flags&32)===32}function Q9(r,t,e,n,i,o,s,a,c){let u=t.consts,f=Lv(t,r,4,s||null,uv(u,a));uk(t,e,f,uv(u,c)),yx(t,f);let g=f.tView=Mx(2,f,n,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,f),g.queries=t.queries.embeddedTView(f)),f}function $C(r,t,e,n,i,o,s,a){let c=Gn(),u=$o(),f=r+Ba,g=u.firstCreatePass?Q9(f,u,c,t,e,n,i,o,s):u.data[f];Zh(g,!1);let v=Y9(u,c,g,r);mx()&&Tx(u,c,v,g),Nc(v,c);let _=hk(v,c,v,g);return c[f]=_,Vv(c,_),C9(_,g,c),lx(g)&&ak(u,c,g),s!=null&&lk(c,g,a),$C}var Y9=J9;function J9(r,t,e,n){return vx(!0),t[Pi].createComment("")}function Z9(r,t,e,n){return zv(r,fx(),e)?t+UD(e)+n:Od}function Jm(r,t){return r<<17|t<<2}function Fc(r){return r>>17&32767}function X9(r){return(r&2)==2}function e$(r,t){return r&131071|t<<17}function WC(r){return r|2}function Ed(r){return(r&131068)>>2}function tC(r,t){return r&-131069|t<<2}function t$(r){return(r&1)===1}function qC(r){return r|1}function n$(r,t,e,n,i,o){let s=o?t.classBindings:t.styleBindings,a=Fc(s),c=Ed(s);r[n]=e;let u=!1,f;if(Array.isArray(e)){let g=e;f=g[1],(f===null||Kh(g,f)>0)&&(u=!0)}else f=e;if(i)if(c!==0){let v=Fc(r[a+1]);r[n+1]=Jm(v,a),v!==0&&(r[v+1]=tC(r[v+1],n)),r[a+1]=e$(r[a+1],n)}else r[n+1]=Jm(a,0),a!==0&&(r[a+1]=tC(r[a+1],n)),a=n;else r[n+1]=Jm(c,0),a===0?a=n:r[c+1]=tC(r[c+1],n),c=n;u&&(r[n+1]=WC(r[n+1])),SD(r,f,n,!0),SD(r,f,n,!1),r$(t,f,r,n,o),s=Jm(a,c),o?t.classBindings=s:t.styleBindings=s}function r$(r,t,e,n,i){let o=i?r.residualClasses:r.residualStyles;o!=null&&typeof t=="string"&&Kh(o,t)>=0&&(e[n+1]=qC(e[n+1]))}function SD(r,t,e,n){let i=r[e+1],o=t===null,s=n?Fc(i):Ed(i),a=!1;for(;s!==0&&(a===!1||o);){let c=r[s],u=r[s+1];i$(c,t)&&(a=!0,r[s+1]=n?qC(u):WC(u)),s=n?Fc(u):Ed(u)}a&&(r[e+1]=n?WC(i):qC(i))}function i$(r,t){return r===null||t==null||(Array.isArray(r)?r[1]:r)===t?!0:Array.isArray(r)&&typeof t=="string"?Kh(r,t)>=0:!1}function AD(r,t,e,n,i){let o=t.inputs,s=i?"class":"style";Px(r,e,o[s],s,n)}function Vx(r,t){return o$(r,t,null,!0),Vx}function o$(r,t,e,n){let i=Gn(),o=$o(),s=n4(2);if(o.firstUpdatePass&&a$(o,r,s,n),t!==Od&&zv(i,s,t)){let a=o.data[Lc()];f$(o,a,i,i[Pi],r,i[s+1]=h$(t,e),n,s)}}function s$(r,t){return t>=r.expandoStartIndex}function a$(r,t,e,n){let i=r.data;if(i[e+1]===null){let o=i[Lc()],s=s$(r,e);p$(o,n)&&t===null&&!s&&(t=!1),t=l$(i,o,t,n),n$(i,o,t,e,s,n)}}function l$(r,t,e,n){let i=s4(r),o=n?t.residualClasses:t.residualStyles;if(i===null)(n?t.classBindings:t.styleBindings)===0&&(e=nC(null,r,t,e,n),e=$h(e,t.attrs,n),o=null);else{let s=t.directiveStylingLast;if(s===-1||r[s]!==i)if(e=nC(i,r,t,e,n),o===null){let c=c$(r,t,n);c!==void 0&&Array.isArray(c)&&(c=nC(null,r,t,c[1],n),c=$h(c,t.attrs,n),u$(r,t,n,c))}else o=d$(r,t,n)}return o!==void 0&&(n?t.residualClasses=o:t.residualStyles=o),e}function c$(r,t,e){let n=e?t.classBindings:t.styleBindings;if(Ed(n)!==0)return r[Fc(n)]}function u$(r,t,e,n){let i=e?t.classBindings:t.styleBindings;r[Fc(i)]=n}function d$(r,t,e){let n,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=r[o].hostAttrs;n=$h(n,s,e)}return $h(n,t.attrs,e)}function nC(r,t,e,n,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],n=$h(n,o.hostAttrs,i),o!==r);)a++;return r!==null&&(e.directiveStylingLast=a),n}function $h(r,t,e){let n=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===n&&(Array.isArray(r)||(r=r===void 0?[]:["",r]),nz(r,s,e?!0:t[++o]))}return r===void 0?null:r}function f$(r,t,e,n,i,o,s,a){if(!(t.type&3))return;let c=r.data,u=c[a+1],f=t$(u)?TD(c,t,e,i,Ed(u),s):void 0;if(!Ev(f)){Ev(o)||X9(u)&&(o=TD(c,null,e,i,a,s));let g=g1(Lc(),e);s3(n,s,g,i,o)}}function TD(r,t,e,n,i,o){let s=t===null,a;for(;i>0;){let c=r[i],u=Array.isArray(c),f=u?c[1]:c,g=f===null,v=e[i+1];v===Od&&(v=g?as:void 0);let _=g?Wb(v,n):f===n?v:void 0;if(u&&!Ev(_)&&(_=Wb(c,n)),Ev(_)&&(a=_,s))return a;let b=r[i+1];i=s?Fc(b):Ed(b)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Wb(c,n))}return a}function Ev(r){return r!==void 0}function h$(r,t){return r==null||r===""||(typeof t=="string"?r=r+t:typeof r=="object"&&(r=To(Ex(r)))),r}function p$(r,t){return(r.flags&(t?8:16))!==0}var GC=class{destroy(t){}updateValue(t,e){}swap(t,e){let n=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-n>1){let s=this.detach(n);this.attach(n,o),this.attach(i,s)}else this.attach(n,o)}move(t,e){this.attach(e,this.detach(t))}};function rC(r,t,e,n,i){return r===e&&Object.is(t,n)?1:Object.is(i(r,t),i(e,n))?-1:0}function g$(r,t,e){let n,i,o=0,s=r.length-1;if(Array.isArray(t)){let a=t.length-1;for(;o<=s&&o<=a;){let c=r.at(o),u=t[o],f=rC(o,c,o,u,e);if(f!==0){f<0&&r.updateValue(o,u),o++;continue}let g=r.at(s),v=t[a],_=rC(s,g,a,v,e);if(_!==0){_<0&&r.updateValue(s,v),s--,a--;continue}let b=e(o,c),C=e(s,g),S=e(o,u);if(Object.is(S,C)){let j=e(a,v);Object.is(j,b)?(r.swap(o,s),r.updateValue(s,v),a--,s--):r.move(s,o),r.updateValue(o,u),o++;continue}if(n??=new Sv,i??=MD(r,o,s,e),KC(r,n,o,S))r.updateValue(o,u),o++,s++;else if(i.has(S))n.set(b,r.detach(o)),s--;else{let j=r.create(o,t[o]);r.attach(o,j),o++,s++}}for(;o<=a;)OD(r,n,e,o,t[o]),o++}else if(t!=null){let a=t[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let u=r.at(o),f=c.value,g=rC(o,u,o,f,e);if(g!==0)g<0&&r.updateValue(o,f),o++,c=a.next();else{n??=new Sv,i??=MD(r,o,s,e);let v=e(o,f);if(KC(r,n,o,v))r.updateValue(o,f),o++,s++,c=a.next();else if(!i.has(v))r.attach(o,r.create(o,f)),o++,s++,c=a.next();else{let _=e(o,u);n.set(_,r.detach(o)),s--}}}for(;!c.done;)OD(r,n,e,r.length,c.value),c=a.next()}for(;o<=s;)r.destroy(r.detach(s--));n?.forEach(a=>{r.destroy(a)})}function KC(r,t,e,n){return t!==void 0&&t.has(n)?(r.attach(e,t.get(n)),t.delete(n),!0):!1}function OD(r,t,e,n,i){if(KC(r,t,n,e(n,i)))r.updateValue(n,i);else{let o=r.create(n,i);r.attach(n,o)}}function MD(r,t,e,n){let i=new Set;for(let o=t;o<=e;o++)i.add(n(o,r.at(o)));return i}var Sv=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let n=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(n);)n=i.get(n);i.set(n,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,n]of this.kvMap)if(t(n,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(n);)n=i.get(n),t(n,e)}}};var QC=class{constructor(t,e,n){this.lContainer=t,this.$implicit=e,this.$index=n}get $count(){return this.lContainer.length-Fi}};function Ok(r){return r}var YC=class{constructor(t,e,n){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=n}};function Mk(r,t,e,n,i,o,s,a,c,u,f,g,v){ep("NgControlFlow");let _=c!==void 0,b=Gn(),C=a?s.bind(b[Is][uo]):s,S=new YC(_,C);b[Ba+r]=S,$C(r+1,t,e,n,i,o),_&&$C(r+2,c,u,f,g,v)}var JC=class extends GC{constructor(t,e,n){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=n,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Fi}at(t){return this.getLView(t)[uo].$implicit}attach(t,e){let n=e[Nh];this.needsIndexUpdate||=t!==this.length,kx(this.lContainer,e,t,gv(this.templateTNode,n))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,m$(this.lContainer,t)}create(t,e){let n=vv(this.lContainer,this.templateTNode.tView.ssrId);return Dx(this.hostLView,this.templateTNode,new QC(this.lContainer,e,t),{dehydratedView:n})}destroy(t){Nv(t[rn],t)}updateValue(t,e){this.getLView(t)[uo].$implicit=e}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[uo].$index=t}getLView(t){return v$(this.lContainer,t)}};function Pk(r){let t=On(null),e=Lc();try{let n=Gn(),i=n[rn],o=n[e];if(o.liveCollection===void 0){let a=e+1,c=PD(n,a),u=ID(i,a);o.liveCollection=new JC(c,n,u)}else o.liveCollection.reset();let s=o.liveCollection;if(g$(s,r,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=fx(),c=s.length===0;if(zv(n,a,c)){let u=e+2,f=PD(n,u);if(c){let g=ID(i,u),v=vv(f,g.tView.ssrId),_=Dx(n,g,void 0,{dehydratedView:v});kx(f,_,0,gv(g,v))}else F3(f,0)}}}finally{On(t)}}function PD(r,t){return r[t]}function m$(r,t){return Bh(r,t)}function v$(r,t){return j3(r,t)}function ID(r,t){return cx(r,t)}function y$(r,t,e,n,i,o){let s=t.consts,a=uv(s,i),c=Lv(t,r,2,n,a);return uk(t,e,c,uv(s,o)),c.attrs!==null&&RC(c,c.attrs,!1),c.mergedAttrs!==null&&RC(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Bi(r,t,e,n){let i=Gn(),o=$o(),s=Ba+r,a=i[Pi],c=o.firstCreatePass?y$(s,o,i,t,e,n):o.data[s],u=_$(o,i,c,a,t,r);i[s]=u;let f=lx(c);return Zh(c,!0),ek(a,u,c),!K9(c)&&mx()&&Tx(o,i,u,c),Gz()===0&&Nc(u,i),Kz(),f&&(ak(o,i,c),sk(o,c,i)),n!==null&&lk(i,c),Bi}function fo(){let r=Wo();w1()?e4():(r=r.parent,Zh(r,!1));let t=r;Jz(t)&&Zz(),Qz();let e=$o();return e.firstCreatePass&&(yx(e,r),u1(r)&&e.queries.elementEnd(r)),t.classesWithoutHost!=null&&p4(t)&&AD(e,t,Gn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&g4(t)&&AD(e,t,Gn(),t.stylesWithoutHost,!1),fo}function aa(r,t,e,n){return Bi(r,t,e,n),fo(),aa}var _$=(r,t,e,n,i,o)=>(vx(!0),K1(n,i,u4()));function $v(){return Gn()}var Av="en-US";var w$=Av;function b$(r){typeof r=="string"&&(w$=r.toLowerCase().replace(/_/g,"-"))}function js(r,t,e,n){let i=Gn(),o=$o(),s=Wo();return Ik(o,i,i[Pi],s,r,t,n),js}function C$(r,t,e,n){let i=r.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===n){let a=t[jh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Ik(r,t,e,n,i,o,s){let a=lx(n),u=r.firstCreatePass&&mk(r),f=t[uo],g=gk(t),v=!0;if(n.type&3||s){let C=Rs(n,t),S=s?s(C):C,j=g.length,q=s?G=>s(ra(G[n.index])):n.index,N=null;if(!s&&a&&(N=C$(r,t,i,n.index)),N!==null){let G=N.__ngLastListenerFn__||N;G.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,v=!1}else{o=kD(n,t,f,o,!1);let G=e.listen(S,i,o);g.push(o,G),u&&u.push(i,q,j,j+1)}}else o=kD(n,t,f,o,!1);let _=n.outputs,b;if(v&&_!==null&&(b=_[i])){let C=b.length;if(C)for(let S=0;S<C;S+=2){let j=b[S],q=b[S+1],se=t[j][q].subscribe(o),ue=g.length;g.push(o,se),u&&u.push(i,n.index,ue,-(ue+1))}}}function DD(r,t,e,n){let i=On(null);try{return Xs(6,t,e),e(n)!==!1}catch(o){return vk(r,o),!1}finally{Xs(7,t,e),On(i)}}function kD(r,t,e,n,i){return function o(s){if(s===Function)return n;let a=r.componentOffset>-1?Pl(r.index,t):t;Rx(a);let c=DD(t,e,n,s),u=o.__ngNextListenerFn__;for(;u;)c=DD(t,e,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function Bx(r=1){return l4(r)}function Ux(r,t,e){P9(r,t,e)}function Wv(r){let t=Gn(),e=$o(),n=b1();hx(n+1);let i=Lx(e,n);if(r.dirty&&Hz(t)===((i.metadata.flags&2)===2)){if(i.matches===null)r.reset([]);else{let o=k9(t,n);r.reset(o,T4),r.notifyOnChanges()}return!0}return!1}function qv(){return O9(Gn(),b1())}function la(r,t=""){let e=Gn(),n=$o(),i=r+Ba,o=n.firstCreatePass?Lv(n,i,1,t,null):n.data[i],s=x$(n,e,o,t,r);e[i]=s,mx()&&Tx(n,e,s,o),Zh(o,!1)}var x$=(r,t,e,n,i)=>(vx(!0),U4(t[Pi],n));function tp(r,t,e){let n=Gn(),i=Z9(n,r,t,e);return i!==Od&&D3(n,Lc(),i),tp}function Hx(r,t,e){Tk(t)&&(t=t());let n=Gn(),i=fx();if(zv(n,i,t)){let o=$o(),s=c4();y3(o,s,n,r,t,n[Pi],e,!1)}return Hx}function Dk(r,t){let e=Tk(r);return e&&r.set(t),e}function zx(r,t){let e=Gn(),n=$o(),i=Wo();return Ik(n,e,e[Pi],i,r,t),zx}function E$(r,t,e){let n=$o();if(n.firstCreatePass){let i=Ol(r);ZC(e,n.data,n.blueprint,i,!0),ZC(t,n.data,n.blueprint,i,!1)}}function ZC(r,t,e,n,i){if(r=co(r),Array.isArray(r))for(let o=0;o<r.length;o++)ZC(r[o],t,e,n,i);else{let o=$o(),s=Gn(),a=Wo(),c=wd(r)?r:co(r.provide),u=s1(r),f=a.providerIndexes&1048575,g=a.directiveStart,v=a.providerIndexes>>20;if(wd(r)||!r.multi){let _=new kc(u,i,ir),b=oC(c,t,i?f:f+v,g);b===-1?(vC(hv(a,s),o,c),iC(o,r,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(_),s.push(_)):(e[b]=_,s[b]=_)}else{let _=oC(c,t,f+v,g),b=oC(c,t,f,f+v),C=_>=0&&e[_],S=b>=0&&e[b];if(i&&!S||!i&&!C){vC(hv(a,s),o,c);let j=T$(i?A$:S$,e.length,i,n,u);!i&&S&&(e[b].providerFactory=j),iC(o,r,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(j),s.push(j)}else{let j=kk(e[i?b:_],u,!i&&n);iC(o,r,_>-1?_:b,j)}!i&&n&&S&&e[b].componentProviders++}}}function iC(r,t,e,n){let i=wd(t),o=Ez(t);if(i||o){let c=(o?co(t.useClass):t).prototype.ngOnDestroy;if(c){let u=r.destroyHooks||(r.destroyHooks=[]);if(!i&&t.multi){let f=u.indexOf(e);f===-1?u.push(e,[n,c]):u[f+1].push(n,c)}else u.push(e,c)}}}function kk(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function oC(r,t,e,n){for(let i=e;i<n;i++)if(t[i]===r)return i;return-1}function S$(r,t,e,n){return XC(this.multi,[])}function A$(r,t,e,n){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Rc(e,e[rn],this.providerFactory.index,n);o=a.slice(0,s),XC(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],XC(i,o);return o}function XC(r,t){for(let e=0;e<r.length;e++){let n=r[e];t.push(n())}return t}function T$(r,t,e,n,i){let o=new kc(r,e,ir);return o.multi=[],o.index=t,o.componentProviders=0,kk(o,i,n&&!e),o}function $x(r,t=[]){return e=>{e.providersResolver=(n,i)=>E$(n,i?i(r):r,t)}}var O$=(()=>{class r{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let n=r1(!1,e.type),i=n.length>0?Hv([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Mt({token:r,providedIn:"environment",factory:()=>new r(Xe(Li))})}}return r})();function Rk(r){ep("NgStandalone"),r.getStandaloneInjector=t=>t.get(O$).getOrCreateStandaloneInjector(r)}var Zm=null;function M$(r){Zm!==null&&(r.defaultEncapsulation!==Zm.defaultEncapsulation||r.preserveWhitespaces!==Zm.preserveWhitespaces)||(Zm=r)}var Ha=class{constructor(t){this.full=t;let e=t.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},Nk=new Ha("17.3.12"),Gv=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();var Wx=new wt(""),np=new wt(""),Kv=(()=>{class r{constructor(e,n,i){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,qx||(P$(i),i.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(e)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,i){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},n)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:i})}whenStable(e,n,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,i){return[]}static{this.\u0275fac=function(n){return new(n||r)(Xe(_n),Xe(Qv),Xe(np))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),Qv=(()=>{class r{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return qx?.findTestabilityInTree(this,e,n)??null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();function P$(r){qx=r}var qx;function Uc(r){return!!r&&typeof r.then=="function"}function jk(r){return!!r&&typeof r.subscribe=="function"}var Yv=new wt(""),Fk=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=ct(Yv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=i();if(Uc(o))e.push(o);else if(jk(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(i=>{this.reject(i)}),e.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Jv=new wt("");function I$(){MI(()=>{throw new Ut(600,!1)})}function D$(r){return r.isBoundToModule}function k$(r,t,e){try{let n=e();return Uc(n)?n.catch(i=>{throw t.runOutsideAngular(()=>r.handleError(i)),i}):n}catch(n){throw t.runOutsideAngular(()=>r.handleError(n)),n}}function Lk(r,t){return Array.isArray(t)?t.reduce(Lk,r):bt(bt({},r),t)}var Hc=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ct(V1),this.afterRenderEffectManager=ct(Fx),this.externalTestViews=new Set,this.beforeRender=new Fr,this.afterTick=new Fr,this.componentTypes=[],this.components=[],this.isStable=ct(Bc).hasPendingTasks.pipe(Vt(e=>!e)),this._injector=ct(Li)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){let i=e instanceof _v;if(!this._injector.get(Fk).done){let v=!i&&XD(e),_=!1;throw new Ut(405,_)}let s;i?s=e:s=this._injector.get(Bv).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=D$(s)?void 0:this._injector.get(Ml),c=n||s.selector,u=s.create(Ns.NULL,[],c,a),f=u.location.nativeElement,g=u.injector.get(Wx,null);return g?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),iv(this.components,u),g?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new Ut(101,!1);let n=On(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,On(n)}}detectChangesInAttachedViews(e){let n=0,i=this.afterRenderEffectManager;for(;;){if(n===_k)throw new Ut(103,!1);if(e){let o=n===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)R$(s,o,a)}if(n++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ex(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ex(o))))break}}attachView(e){let n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){let n=e;iv(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let n=this._injector.get(Jv,[]);[...this._bootstrapListeners,...n].forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>iv(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ut(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function iv(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function R$(r,t,e){!t&&!ex(r)||N$(r,e,t)}function ex(r){return dx(r)}function N$(r,t,e){let n;e?(n=0,r[Kt]|=1024):r[Kt]&64?n=0:n=1,wk(r,t,n)}var tx=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Zv=(()=>{class r{compileModuleSync(e){return new xv(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let n=this.compileModuleSync(e),i=e1(e),o=G1(i.declarations).reduce((s,a)=>{let c=Tl(a);return c&&s.push(new xd(c)),s},[]);return new tx(n,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),j$=new wt("");function F$(r,t,e){let n=new xv(e);return Promise.resolve(n)}function RD(r){for(let t=r.length-1;t>=0;t--)if(r[t]!==void 0)return r[t]}var L$=(()=>{class r{constructor(){this.zone=ct(_n),this.applicationRef=ct(Hc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function V$(r){return[{provide:_n,useFactory:r},{provide:_d,multi:!0,useFactory:()=>{let t=ct(L$,{optional:!0});return()=>t.initialize()}},{provide:_d,multi:!0,useFactory:()=>{let t=ct(H$);return()=>{t.initialize()}}},{provide:V1,useFactory:B$}]}function B$(){let r=ct(_n),t=ct(ia);return e=>r.runOutsideAngular(()=>t.handleError(e))}function U$(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}var H$=(()=>{class r{constructor(){this.subscription=new jr,this.initialized=!1,this.zone=ct(_n),this.pendingTasks=ct(Bc)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_n.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function z$(){return typeof $localize<"u"&&$localize.locale||Av}var Gx=new wt("",{providedIn:"root",factory:()=>ct(Gx,dn.Optional|dn.SkipSelf)||z$()});var Vk=new wt(""),Bk=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){let i=a9(n?.ngZone,U$({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing}));return i.run(()=>{let o=G9(e.moduleType,this.injector,V$(()=>i)),s=o.injector.get(ia,null);return i.runOutsideAngular(()=>{let a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{iv(this._modules,o),a.unsubscribe()})}),k$(s,i,()=>{let a=o.injector.get(Fk);return a.runInitializers(),a.donePromise.then(()=>{let c=o.injector.get(Gx,Av);return b$(c||Av),this._moduleDoBootstrap(o),o})})})}bootstrapModule(e,n=[]){let i=Lk({},n);return F$(this.injector,i,e).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(e){let n=e.injector.get(Hc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>n.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new Ut(-403,!1);this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ut(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());let e=this._injector.get(Vk,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(n){return new(n||r)(Xe(Ns))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})(),Ih=null,Uk=new wt("");function $$(r){if(Ih&&!Ih.get(Uk,!1))throw new Ut(400,!1);I$(),Ih=r;let t=r.get(Bk);return G$(r),t}function Kx(r,t,e=[]){let n=`Platform: ${t}`,i=new wt(n);return(o=[])=>{let s=Hk();if(!s||s.injector.get(Uk,!1)){let a=[...e,...o,{provide:i,useValue:!0}];r?r(a):$$(W$(a,n))}return q$(i)}}function W$(r=[],t){return Ns.create({name:t,providers:[{provide:Iv,useValue:"platform"},{provide:Vk,useValue:new Set([()=>Ih=null])},...r]})}function q$(r){let t=Hk();if(!t)throw new Ut(401,!1);return t}function Hk(){return Ih?.get(Bk)??null}function G$(r){r.get(bx,null)?.forEach(e=>e())}function Qx(){return!1}var zc=(()=>{class r{static{this.__NG_ELEMENT_ID__=K$}}return r})();function K$(r){return Q$(Wo(),Gn(),(r&16)===16)}function Q$(r,t,e){if(kv(r)&&!e){let n=Pl(r.index,t);return new jc(n,n)}else if(r.type&47){let n=t[Is];return new jc(n,t)}return null}var zk=Kx(null,"core",[]),$k=(()=>{class r{constructor(e){}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hc))}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({})}}return r})();function Xv(r){return typeof r=="boolean"?r:r!=null&&r!=="false"}function Wk(r){let t=Tl(r);if(!t)return null;let e=new xd(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Kk=null;function ca(){return Kk}function Qk(r){Kk??=r}var ey=class{};var Hi=new wt(""),Zx=(()=>{class r{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(Z$),providedIn:"platform"})}}return r})(),Yk=new wt(""),Z$=(()=>{class r extends Zx{constructor(){super(),this._doc=ct(Hi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ca().getBaseHref(this._doc)}onPopState(e){let n=ca().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=ca().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,i){this._history.pushState(e,n,i)}replaceState(e,n,i){this._history.replaceState(e,n,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>new r,providedIn:"platform"})}}return r})();function Xx(r,t){if(r.length==0)return t;if(t.length==0)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?r+t.substring(1):e==1?r+t:r+"/"+t}function qk(r){let t=r.match(/#|\?|$/),e=t&&t.index||r.length,n=e-(r[e-1]==="/"?1:0);return r.slice(0,n)+r.slice(e)}function qa(r){return r&&r[0]!=="?"?"?"+r:r}var $c=(()=>{class r{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(eE),providedIn:"root"})}}return r})(),Jk=new wt(""),eE=(()=>{class r extends $c{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??ct(Hi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Xx(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+qa(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${n}${i}`:n}pushState(e,n,i,o){let s=this.prepareExternalUrl(i+qa(o));this._platformLocation.pushState(e,n,s)}replaceState(e,n,i,o){let s=this.prepareExternalUrl(i+qa(o));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||r)(Xe(Zx),Xe(Jk,8))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Zk=(()=>{class r extends $c{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],n!=null&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(e){let n=Xx(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,i,o){let s=this.prepareExternalUrl(i+qa(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,n,s)}replaceState(e,n,i,o){let s=this.prepareExternalUrl(i+qa(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||r)(Xe(Zx),Xe(Jk,8))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),Dd=(()=>{class r{constructor(e){this._subject=new Zr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=t6(qk(Gk(n))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+qa(n))}normalize(e){return r.stripTrailingSlash(e6(this._basePath,Gk(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",i=null){this._locationStrategy.pushState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qa(n)),i)}replaceState(e,n="",i=null){this._locationStrategy.replaceState(i,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+qa(n)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(i=>i(e,n))}subscribe(e,n,i){return this._subject.subscribe({next:e,error:n,complete:i})}static{this.normalizeQueryParams=qa}static{this.joinWithSlash=Xx}static{this.stripTrailingSlash=qk}static{this.\u0275fac=function(n){return new(n||r)(Xe($c))}}static{this.\u0275prov=Mt({token:r,factory:()=>X$(),providedIn:"root"})}}return r})();function X$(){return new Dd(Xe($c))}function e6(r,t){if(!r||!t.startsWith(r))return t;let e=t.substring(r.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Gk(r){return r.replace(/\/index.html$/,"")}function t6(r){if(new RegExp("^(https?:)?//").test(r)){let[,e]=r.split(/\/\/[^\/]+/);return e}return r}function ty(r,t){t=encodeURIComponent(t);for(let e of r.split(";")){let n=e.indexOf("="),[i,o]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Xk=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({})}}return r})(),tE="browser",n6="server";function r6(r){return r===tE}function Dl(r){return r===n6}var eR=(()=>{class r{static{this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>r6(ct(Vi))?new Yx(ct(Hi),window):new Jx})}}return r})(),Yx=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=i6(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],i-o[1])}};function i6(r,t){let e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if(typeof r.createTreeWalker=="function"&&r.body&&typeof r.body.attachShadow=="function"){let n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT),i=n.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=n.nextNode()}}return null}var Jx=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},Id=class{};var ip=class{},ry=class{},Wc=class r{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let i=e.slice(0,n),o=i.toLowerCase(),s=e.slice(n+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,n),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var rE=class{encodeKey(t){return tR(t)}encodeValue(t){return tR(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function l6(r,t){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}var c6=/%(\d[a-f0-9])/gi,u6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tR(r){return encodeURIComponent(r).replace(c6,(t,e)=>u6[e]??t)}function ny(r){return`${r}`}var kl=class r{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new rE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=l6(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],i=Array.isArray(n)?n.map(ny):[ny(n)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let i=t[n];Array.isArray(i)?i.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(ny(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],i=n.indexOf(ny(t.value));i!==-1&&n.splice(i,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var iE=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function d6(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nR(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function rR(r){return typeof Blob<"u"&&r instanceof Blob}function iR(r){return typeof FormData<"u"&&r instanceof FormData}function f6(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var rp=class r{constructor(t,e,n,i){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(d6(this.method)||i?(this.body=n!==void 0?n:null,o=i):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Wc,this.context??=new iE,!this.params)this.params=new kl,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||nR(this.body)||rR(this.body)||iR(this.body)||f6(this.body)?this.body:this.body instanceof kl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||iR(this.body)?null:rR(this.body)?this.body.type||null:nR(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof kl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,g=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((v,_)=>v.set(_,t.setHeaders[_]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((v,_)=>v.set(_,t.setParams[_]),f)),new r(e,n,s,{params:f,headers:u,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},kd=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(kd||{}),op=class{constructor(t,e=sy.Ok,n="OK"){this.headers=t.headers||new Wc,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},oE=class r extends op{constructor(t={}){super(t),this.type=kd.ResponseHeader}clone(t={}){return new r({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},iy=class r extends op{constructor(t={}){super(t),this.type=kd.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new r({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},oy=class extends op{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},sy=function(r){return r[r.Continue=100]="Continue",r[r.SwitchingProtocols=101]="SwitchingProtocols",r[r.Processing=102]="Processing",r[r.EarlyHints=103]="EarlyHints",r[r.Ok=200]="Ok",r[r.Created=201]="Created",r[r.Accepted=202]="Accepted",r[r.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",r[r.NoContent=204]="NoContent",r[r.ResetContent=205]="ResetContent",r[r.PartialContent=206]="PartialContent",r[r.MultiStatus=207]="MultiStatus",r[r.AlreadyReported=208]="AlreadyReported",r[r.ImUsed=226]="ImUsed",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.Found=302]="Found",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.Unused=306]="Unused",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.LengthRequired=411]="LengthRequired",r[r.PreconditionFailed=412]="PreconditionFailed",r[r.PayloadTooLarge=413]="PayloadTooLarge",r[r.UriTooLong=414]="UriTooLong",r[r.UnsupportedMediaType=415]="UnsupportedMediaType",r[r.RangeNotSatisfiable=416]="RangeNotSatisfiable",r[r.ExpectationFailed=417]="ExpectationFailed",r[r.ImATeapot=418]="ImATeapot",r[r.MisdirectedRequest=421]="MisdirectedRequest",r[r.UnprocessableEntity=422]="UnprocessableEntity",r[r.Locked=423]="Locked",r[r.FailedDependency=424]="FailedDependency",r[r.TooEarly=425]="TooEarly",r[r.UpgradeRequired=426]="UpgradeRequired",r[r.PreconditionRequired=428]="PreconditionRequired",r[r.TooManyRequests=429]="TooManyRequests",r[r.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",r[r.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout",r[r.HttpVersionNotSupported=505]="HttpVersionNotSupported",r[r.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",r[r.InsufficientStorage=507]="InsufficientStorage",r[r.LoopDetected=508]="LoopDetected",r[r.NotExtended=510]="NotExtended",r[r.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",r}(sy||{});function nE(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var h6=(()=>{class r{constructor(e){this.handler=e}request(e,n,i={}){let o;if(e instanceof rp)o=e;else{let c;i.headers instanceof Wc?c=i.headers:c=new Wc(i.headers);let u;i.params&&(i.params instanceof kl?u=i.params:u=new kl({fromObject:i.params})),o=new rp(e,n,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Ft(o).pipe(Fa(c=>this.handler.handle(c)));if(e instanceof rp||i.observe==="events")return s;let a=s.pipe(pi(c=>c instanceof iy));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Vt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Vt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Vt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Vt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new kl().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,i={}){return this.request("PATCH",e,nE(i,n))}post(e,n,i={}){return this.request("POST",e,nE(i,n))}put(e,n,i={}){return this.request("PUT",e,nE(i,n))}static{this.\u0275fac=function(n){return new(n||r)(Xe(ip))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();function lR(r,t){return t(r)}function p6(r,t){return(e,n)=>t.intercept(e,{handle:i=>r(i,n)})}function g6(r,t,e){return(n,i)=>Ds(e,()=>t(n,o=>r(o,i)))}var m6=new wt(""),sE=new wt(""),v6=new wt(""),y6=new wt("");function _6(){let r=null;return(t,e)=>{r===null&&(r=(ct(m6,{optional:!0})??[]).reduceRight(p6,lR));let n=ct(Bc),i=n.add();return r(t,e).pipe(El(()=>n.remove(i)))}}var oR=(()=>{class r extends ip{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=ct(Bc);let i=ct(y6,{optional:!0});this.backend=i??e}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(sE),...this.injector.get(v6,[])]));this.chain=i.reduceRight((o,s)=>g6(o,s,this.injector),lR)}let n=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(El(()=>this.pendingTasks.remove(n)))}static{this.\u0275fac=function(n){return new(n||r)(Xe(ry),Xe(Li))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();var w6=/^\)\]\}',?\n/;function b6(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var sR=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ut(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?yn(n.\u0275loadImpl()):Ft(null)).pipe(ur(()=>new un(o=>{let s=n.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,S)=>s.setRequestHeader(C,S.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),c=null,u=()=>{if(c!==null)return c;let C=s.statusText||"OK",S=new Wc(s.getAllResponseHeaders()),j=b6(s)||e.url;return c=new oE({headers:S,status:s.status,statusText:C,url:j}),c},f=()=>{let{headers:C,status:S,statusText:j,url:q}=u(),N=null;S!==sy.NoContent&&(N=typeof s.response>"u"?s.responseText:s.response),S===0&&(S=N?sy.Ok:0);let G=S>=200&&S<300;if(e.responseType==="json"&&typeof N=="string"){let se=N;N=N.replace(w6,"");try{N=N!==""?JSON.parse(N):null}catch(ue){N=se,G&&(G=!1,N={error:ue,text:N})}}G?(o.next(new iy({body:N,headers:C,status:S,statusText:j,url:q||void 0})),o.complete()):o.error(new oy({error:N,headers:C,status:S,statusText:j,url:q||void 0}))},g=C=>{let{url:S}=u(),j=new oy({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(j)},v=!1,_=C=>{v||(o.next(u()),v=!0);let S={type:kd.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(S.total=C.total),e.responseType==="text"&&s.responseText&&(S.partialText=s.responseText),o.next(S)},b=C=>{let S={type:kd.UploadProgress,loaded:C.loaded};C.lengthComputable&&(S.total=C.total),o.next(S)};return s.addEventListener("load",f),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),e.reportProgress&&(s.addEventListener("progress",_),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:kd.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",f),s.removeEventListener("timeout",g),e.reportProgress&&(s.removeEventListener("progress",_),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(n){return new(n||r)(Xe(Id))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),cR=new wt(""),C6="XSRF-TOKEN",x6=new wt("",{providedIn:"root",factory:()=>C6}),E6="X-XSRF-TOKEN",S6=new wt("",{providedIn:"root",factory:()=>E6}),ay=class{},A6=(()=>{class r{constructor(e,n,i){this.doc=e,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ty(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hi),Xe(Vi),Xe(x6))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();function T6(r,t){let e=r.url.toLowerCase();if(!ct(cR)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(r);let n=ct(ay).getToken(),i=ct(S6);return n!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,n)})),t(r)}var uR=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(uR||{});function O6(r,t){return{\u0275kind:r,\u0275providers:t}}function M6(...r){let t=[h6,sR,oR,{provide:ip,useExisting:oR},{provide:ry,useExisting:sR},{provide:sE,useValue:T6,multi:!0},{provide:cR,useValue:!0},{provide:ay,useClass:A6}];for(let e of r)t.push(...e.\u0275providers);return Pv(t)}var aR=new wt("");function P6(){return O6(uR.LegacyInterceptors,[{provide:aR,useFactory:_6},{provide:sE,useExisting:aR,multi:!0}])}var dR=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({providers:[M6(P6())]})}}return r})();var cE=class extends ey{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uE=class r extends cE{static makeCurrent(){Qk(new r)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=I6();return e==null?null:D6(e)}resetBaseElement(){sp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ty(document.cookie,t)}},sp=null;function I6(){return sp=sp||document.querySelector("base"),sp?sp.getAttribute("href"):null}function D6(r){return new URL(r,document.baseURI).pathname}var dE=class{addToWindow(t){zo.getAngularTestability=(n,i=!0)=>{let o=t.findTestabilityInTree(n,i);if(o==null)throw new Ut(5103,!1);return o},zo.getAllAngularTestabilities=()=>t.getAllTestabilities(),zo.getAllAngularRootElements=()=>t.getAllRootElements();let e=n=>{let i=zo.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&n()};i.forEach(a=>{a.whenStable(s)})};zo.frameworkStabilizers||(zo.frameworkStabilizers=[]),zo.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,n){if(e==null)return null;let i=t.getTestability(e);return i??(n?ca().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},k6=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),fE=new wt(""),gR=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i){return this._findPluginFor(n).addEventListener(e,n,i)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new Ut(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||r)(Xe(fE),Xe(_n))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),ly=class{constructor(t){this._doc=t}},aE="ng-app-id",mR=(()=>{class r{constructor(e,n,i,o={}){this.doc=e,this.appId=n,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Dl(o),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(i=>i.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${aE}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(i=>{i.textContent!=null&&n.set(i.textContent,i)}),n}return null}changeUsageCount(e,n){let i=this.styleRef;if(i.has(e)){let o=i.get(e);return o.usage+=n,o.usage}return i.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let i=this.styleNodesInDOM,o=i?.get(n);if(o?.parentNode===e)return i.delete(n),o.removeAttribute(aE),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=n,this.platformIsServer&&s.setAttribute(aE,this.appId),e.appendChild(s),s}}addStyleToHost(e,n){let i=this.getStyleElement(e,n),o=this.styleRef,s=o.get(n)?.elements;s?s.push(i):o.set(n,{elements:[i],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hi),Xe(Rv),Xe(Cx,8),Xe(Vi))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),lE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pE=/%COMP%/g,vR="%COMP%",R6=`_nghost-${vR}`,N6=`_ngcontent-${vR}`,j6=!0,F6=new wt("",{providedIn:"root",factory:()=>j6});function L6(r){return N6.replace(pE,r)}function V6(r){return R6.replace(pE,r)}function yR(r,t){return t.map(e=>e.replace(pE,r))}var fR=(()=>{class r{constructor(e,n,i,o,s,a,c,u=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Dl(a),this.defaultRenderer=new ap(e,s,c,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===ta.ShadowDom&&(n=Bn(bt({},n),{encapsulation:ta.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof cy?i.applyToHost(e):i instanceof lp&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,o=i.get(n.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(n.encapsulation){case ta.Emulated:o=new cy(c,u,n,this.appId,f,s,a,g);break;case ta.ShadowDom:return new hE(c,u,e,n,s,a,this.nonce,g);default:o=new lp(c,u,n,f,s,a,g);break}i.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||r)(Xe(gR),Xe(mR),Xe(Rv),Xe(F6),Xe(Hi),Xe(Vi),Xe(_n),Xe(Cx))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),ap=class{constructor(t,e,n,i){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(lE[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(hR(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(hR(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new Ut(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;let o=lE[i];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let i=lE[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(Ua.DashCase|Ua.Important)?t.style.setProperty(e,n,i&Ua.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ua.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=ca().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function hR(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var hE=class extends ap{constructor(t,e,n,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=yR(i.id,i.styles);for(let f of u){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lp=class extends ap{constructor(t,e,n,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=c?yR(c,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cy=class extends lp{constructor(t,e,n,i,o,s,a,c){let u=i+"-"+n.id;super(t,e,n,o,s,a,c,u),this.contentAttr=L6(u),this.hostAttr=V6(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},B6=(()=>{class r extends ly{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i){return e.addEventListener(n,i,!1),()=>this.removeEventListener(e,n,i)}removeEventListener(e,n,i){return e.removeEventListener(n,i)}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hi))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})(),pR=["alt","control","meta","shift"],U6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H6={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},z6=(()=>{class r extends ly{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,n,i){let o=r.parseEventName(n),s=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ca().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let o=r._normalizeKey(n.pop()),s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),pR.forEach(u=>{let f=n.indexOf(u);f>-1&&(n.splice(f,1),s+=u+".")}),s+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(e,n){let i=U6[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),pR.forEach(s=>{if(s!==i){let a=H6[s];a(e)&&(o+=s+".")}}),o+=i,o===n)}static eventCallback(e,n,i){return o=>{r.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>n(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hi))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();function $6(){uE.makeCurrent()}function W6(){return new ia}function q6(){return W1(document),document}var G6=[{provide:Vi,useValue:tE},{provide:bx,useValue:$6,multi:!0},{provide:Hi,useFactory:q6,deps:[]}],_R=Kx(zk,"browser",G6),K6=new wt(""),Q6=[{provide:np,useClass:dE,deps:[]},{provide:Wx,useClass:Kv,deps:[_n,Qv,np]},{provide:Kv,useClass:Kv,deps:[_n,Qv,np]}],Y6=[{provide:Iv,useValue:"root"},{provide:ia,useFactory:W6,deps:[]},{provide:fE,useClass:B6,multi:!0,deps:[Hi,_n,Vi]},{provide:fE,useClass:z6,multi:!0,deps:[Hi]},fR,mR,gR,{provide:Hh,useExisting:fR},{provide:Id,useClass:k6,deps:[]},[]],wR=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:Rv,useValue:e.appId}]}}static{this.\u0275fac=function(n){return new(n||r)(Xe(K6,12))}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({providers:[...Y6,...Q6],imports:[Xk,$k]})}}return r})();var bR=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||r)(Xe(Hi))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var sn="primary",xp=Symbol("RouteTitle"),_E=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ld(r){return new _E(r)}function Z6(r,t,e){let n=e.path.split("/");if(n.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<r.length))return null;let i={};for(let o=0;o<n.length;o++){let s=n[o],a=r[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function X6(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!ua(r[e],t[e]))return!1;return!0}function ua(r,t){let e=r?wE(r):void 0,n=t?wE(t):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!IR(r[i],t[i]))return!1;return!0}function wE(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function IR(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),n=[...t].sort();return e.every((i,o)=>n[o]===i)}else return r===t}function DR(r){return r.length>0?r[r.length-1]:null}function Fl(r){return Fb(r)?r:Uc(r)?yn(Promise.resolve(r)):Ft(r)}var eW={exact:RR,subset:NR},kR={exact:tW,subset:nW,ignored:()=>!0};function xR(r,t,e){return eW[e.paths](r.root,t.root,e.matrixParams)&&kR[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function tW(r,t){return ua(r,t)}function RR(r,t,e){if(!Gc(r.segments,t.segments)||!fy(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!r.children[n]||!RR(r.children[n],t.children[n],e))return!1;return!0}function nW(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>IR(r[e],t[e]))}function NR(r,t,e){return jR(r,t,t.segments,e)}function jR(r,t,e,n){if(r.segments.length>e.length){let i=r.segments.slice(0,e.length);return!(!Gc(i,e)||t.hasChildren()||!fy(i,e,n))}else if(r.segments.length===e.length){if(!Gc(r.segments,e)||!fy(r.segments,e,n))return!1;for(let i in t.children)if(!r.children[i]||!NR(r.children[i],t.children[i],n))return!1;return!0}else{let i=e.slice(0,r.segments.length),o=e.slice(r.segments.length);return!Gc(r.segments,i)||!fy(r.segments,i,n)||!r.children[sn]?!1:jR(r.children[sn],t,o,n)}}function fy(r,t,e){return t.every((n,i)=>kR[e](r[i].parameters,n.parameters))}var Rl=class{constructor(t=new Fn([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Ld(this.queryParams),this._queryParamMap}toString(){return oW.serialize(this)}},Fn=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hy(this)}},qc=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ld(this.parameters),this._parameterMap}toString(){return LR(this)}};function rW(r,t){return Gc(r,t)&&r.every((e,n)=>ua(e.parameters,t[n].parameters))}function Gc(r,t){return r.length!==t.length?!1:r.every((e,n)=>e.path===t[n].path)}function iW(r,t){let e=[];return Object.entries(r.children).forEach(([n,i])=>{n===sn&&(e=e.concat(t(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==sn&&(e=e.concat(t(i,n)))}),e}var Ep=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>new gp,providedIn:"root"})}}return r})(),gp=class{parse(t){let e=new CE(t);return new Rl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${cp(t.root,!0)}`,n=lW(t.queryParams),i=typeof t.fragment=="string"?`#${sW(t.fragment)}`:"";return`${e}${n}${i}`}},oW=new gp;function hy(r){return r.segments.map(t=>LR(t)).join("/")}function cp(r,t){if(!r.hasChildren())return hy(r);if(t){let e=r.children[sn]?cp(r.children[sn],!1):"",n=[];return Object.entries(r.children).forEach(([i,o])=>{i!==sn&&n.push(`${i}:${cp(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=iW(r,(n,i)=>i===sn?[cp(r.children[sn],!1)]:[`${i}:${cp(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[sn]!=null?`${hy(r)}/${e[0]}`:`${hy(r)}/(${e.join("//")})`}}function FR(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uy(r){return FR(r).replace(/%3B/gi,";")}function sW(r){return encodeURI(r)}function bE(r){return FR(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function py(r){return decodeURIComponent(r)}function ER(r){return py(r.replace(/\+/g,"%20"))}function LR(r){return`${bE(r.path)}${aW(r.parameters)}`}function aW(r){return Object.entries(r).map(([t,e])=>`;${bE(t)}=${bE(e)}`).join("")}function lW(r){let t=Object.entries(r).map(([e,n])=>Array.isArray(n)?n.map(i=>`${uy(e)}=${uy(i)}`).join("&"):`${uy(e)}=${uy(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var cW=/^[^\/()?;#]+/;function gE(r){let t=r.match(cW);return t?t[0]:""}var uW=/^[^\/()?;=#]+/;function dW(r){let t=r.match(uW);return t?t[0]:""}var fW=/^[^=?&#]+/;function hW(r){let t=r.match(fW);return t?t[0]:""}var pW=/^[^&#]+/;function gW(r){let t=r.match(pW);return t?t[0]:""}var CE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[sn]=new Fn(t,e)),n}parseSegment(){let t=gE(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ut(4009,!1);return this.capture(t),new qc(py(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=dW(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let i=gE(this.remaining);i&&(n=i,this.capture(n))}t[py(e)]=py(n)}parseQueryParam(t){let e=hW(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let s=gW(this.remaining);s&&(n=s,this.capture(n))}let i=ER(e),o=ER(n);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=gE(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ut(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=sn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[sn]:new Fn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ut(4011,!1)}};function VR(r){return r.segments.length>0?new Fn([],{[sn]:r}):r}function BR(r){let t={};for(let[n,i]of Object.entries(r.children)){let o=BR(i);if(n===sn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}let e=new Fn(r.segments,t);return mW(e)}function mW(r){if(r.numberOfChildren===1&&r.children[sn]){let t=r.children[sn];return new Fn(r.segments.concat(t.segments),t.children)}return r}function Vd(r){return r instanceof Rl}function vW(r,t,e=null,n=null){let i=UR(r);return HR(i,t,e,n)}function UR(r){let t;function e(o){let s={};for(let c of o.children){let u=e(c);s[c.outlet]=u}let a=new Fn(o.url,s);return o===r&&(t=a),a}let n=e(r.root),i=VR(n);return t??i}function HR(r,t,e,n){let i=r;for(;i.parent;)i=i.parent;if(t.length===0)return mE(i,i,i,e,n);let o=yW(t);if(o.toRoot())return mE(i,i,new Fn([],{}),e,n);let s=_W(o,i,r),a=s.processChildren?fp(s.segmentGroup,s.index,o.commands):$R(s.segmentGroup,s.index,o.commands);return mE(i,s.segmentGroup,a,e,n)}function gy(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function mp(r){return typeof r=="object"&&r!=null&&r.outlets}function mE(r,t,e,n,i){let o={};n&&Object.entries(n).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;r===t?s=e:s=zR(r,t,e);let a=VR(BR(s));return new Rl(a,o,i)}function zR(r,t,e){let n={};return Object.entries(r.children).forEach(([i,o])=>{o===t?n[i]=e:n[i]=zR(o,t,e)}),new Fn(r.segments,n)}var my=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&gy(n[0]))throw new Ut(4003,!1);let i=n.find(mp);if(i&&i!==DR(n))throw new Ut(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yW(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new my(!0,0,r);let t=0,e=!1,n=r.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new my(e,t,n)}var jd=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function _W(r,t,e){if(r.isAbsolute)return new jd(t,!0,0);if(!e)return new jd(t,!1,NaN);if(e.parent===null)return new jd(e,!0,0);let n=gy(r.commands[0])?0:1,i=e.segments.length-1+n;return wW(e,i,r.numberOfDoubleDots)}function wW(r,t,e){let n=r,i=t,o=e;for(;o>i;){if(o-=i,n=n.parent,!n)throw new Ut(4005,!1);i=n.segments.length}return new jd(n,!1,i-o)}function bW(r){return mp(r[0])?r[0].outlets:{[sn]:r}}function $R(r,t,e){if(r??=new Fn([],{}),r.segments.length===0&&r.hasChildren())return fp(r,t,e);let n=CW(r,t,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let o=new Fn(r.segments.slice(0,n.pathIndex),{});return o.children[sn]=new Fn(r.segments.slice(n.pathIndex),r.children),fp(o,0,i)}else return n.match&&i.length===0?new Fn(r.segments,{}):n.match&&!r.hasChildren()?xE(r,t,e):n.match?fp(r,0,i):xE(r,t,e)}function fp(r,t,e){if(e.length===0)return new Fn(r.segments,{});{let n=bW(e),i={};if(Object.keys(n).some(o=>o!==sn)&&r.children[sn]&&r.numberOfChildren===1&&r.children[sn].segments.length===0){let o=fp(r.children[sn],t,e);return new Fn(r.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$R(r.children[o],t,s))}),Object.entries(r.children).forEach(([o,s])=>{n[o]===void 0&&(i[o]=s)}),new Fn(r.segments,i)}}function CW(r,t,e){let n=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=e.length)return o;let s=r.segments[i],a=e[n];if(mp(a))break;let c=`${a}`,u=n<e.length-1?e[n+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!AR(c,u,s))return o;n+=2}else{if(!AR(c,{},s))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function xE(r,t,e){let n=r.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(mp(o)){let c=xW(o.outlets);return new Fn(n,c)}if(i===0&&gy(e[0])){let c=r.segments[t];n.push(new qc(c.path,SR(e[0]))),i++;continue}let s=mp(o)?o.outlets[sn]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&gy(a)?(n.push(new qc(s,SR(a))),i+=2):(n.push(new qc(s,{})),i++)}return new Fn(n,{})}function xW(r){let t={};return Object.entries(r).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=xE(new Fn([],{}),0,n))}),t}function SR(r){let t={};return Object.entries(r).forEach(([e,n])=>t[e]=`${n}`),t}function AR(r,t,e){return r==e.path&&ua(t,e.parameters)}var hp="imperative",bi=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(bi||{}),cs=class{constructor(t,e){this.id=t,this.url=e}},Bd=class extends cs{constructor(t,e,n="imperative",i=null){super(t,e),this.type=bi.NavigationStart,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ga=class extends cs{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=bi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Go=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Go||{}),vy=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(vy||{}),Nl=class extends cs{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=bi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},jl=class extends cs{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=bi.NavigationSkipped}},vp=class extends cs{constructor(t,e,n,i){super(t,e),this.error=n,this.target=i,this.type=bi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yy=class extends cs{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=bi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},EE=class extends cs{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=bi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},SE=class extends cs{constructor(t,e,n,i,o){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o,this.type=bi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},AE=class extends cs{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=bi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},TE=class extends cs{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=bi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},OE=class{constructor(t){this.route=t,this.type=bi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ME=class{constructor(t){this.route=t,this.type=bi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},PE=class{constructor(t){this.snapshot=t,this.type=bi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},IE=class{constructor(t){this.snapshot=t,this.type=bi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},DE=class{constructor(t){this.snapshot=t,this.type=bi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kE=class{constructor(t){this.snapshot=t,this.type=bi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_y=class{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=bi.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},yp=class{},_p=class{constructor(t){this.url=t}};var RE=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sp,this.attachRef=null}},Sp=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){let i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new RE,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),wy=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=NE(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=NE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=jE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return jE(t,this._root).map(e=>e.value)}};function NE(r,t){if(r===t.value)return t;for(let e of t.children){let n=NE(r,e);if(n)return n}return null}function jE(r,t){if(r===t.value)return[t];for(let e of t.children){let n=jE(r,e);if(n.length)return n.unshift(t),n}return[]}var qo=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Nd(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var by=class extends wy{constructor(t,e){super(t),this.snapshot=e,qE(this,t)}toString(){return this.snapshot.toString()}};function WR(r){let t=EW(r),e=new Oi([new qc("",{})]),n=new Oi({}),i=new Oi({}),o=new Oi({}),s=new Oi(""),a=new Ud(e,n,o,s,i,sn,r,t.root);return a.snapshot=t.root,new by(new qo(a,[]),t)}function EW(r){let t={},e={},n={},i="",o=new wp([],t,n,i,e,sn,r,null,{});return new Cy("",new qo(o,[]))}var Ud=class{constructor(t,e,n,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Vt(u=>u[xp]))??Ft(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Vt(t=>Ld(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Vt(t=>Ld(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function WE(r,t,e="emptyOnly"){let n,{routeConfig:i}=r;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:bt(bt({},t.params),r.params),data:bt(bt({},t.data),r.data),resolve:bt(bt(bt(bt({},r.data),t.data),i?.data),r._resolvedData)}:n={params:bt({},r.params),data:bt({},r.data),resolve:bt(bt({},r.data),r._resolvedData??{})},i&&GR(i)&&(n.resolve[xp]=i.title),n}var wp=class{get title(){return this.data?.[xp]}constructor(t,e,n,i,o,s,a,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ld(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ld(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Cy=class extends wy{constructor(t,e){super(e),this.url=t,qE(this,e)}toString(){return qR(this._root)}};function qE(r,t){t.value._routerState=r,t.children.forEach(e=>qE(r,e))}function qR(r){let t=r.children.length>0?` { ${r.children.map(qR).join(", ")} } `:"";return`${r.value}${t}`}function vE(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,ua(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),ua(t.params,e.params)||r.paramsSubject.next(e.params),X6(t.url,e.url)||r.urlSubject.next(e.url),ua(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function FE(r,t){let e=ua(r.params,t.params)&&rW(r.url,t.url),n=!r.parent!=!t.parent;return e&&!n&&(!r.parent||FE(r.parent,t.parent))}function GR(r){return typeof r.title=="string"||r.title===null}var SW=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=sn,this.activateEvents=new Zr,this.deactivateEvents=new Zr,this.attachEvents=new Zr,this.detachEvents=new Zr,this.parentContexts=ct(Sp),this.location=ct(Md),this.changeDetector=ct(zc),this.environmentInjector=ct(Li),this.inputBinder=ct(Ty,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ut(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ut(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ut(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Ut(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new LE(e,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=za({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ad]})}}return r})(),LE=class r{__ngOutletInjector(t){return new r(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ud?this.route:t===Sp?this.childContexts:this.parent.get(t,e)}},Ty=new wt(""),TR=(()=>{class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,i=Oh([n.queryParams,n.params,n.data]).pipe(ur(([o,s,a],c)=>(a=bt(bt(bt({},o),s),a),c===0?Ft(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let s=Wk(n.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,i)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();function AW(r,t,e){let n=bp(r,t._root,e?e._root:void 0);return new by(n,t)}function bp(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let i=TW(r,t,e);return new qo(n,i)}else{if(r.shouldAttach(t.value)){let o=r.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>bp(r,a)),s}}let n=OW(t.value),i=t.children.map(o=>bp(r,o));return new qo(n,i)}}function TW(r,t,e){return t.children.map(n=>{for(let i of e.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return bp(r,n,i);return bp(r,n)})}function OW(r){return new Ud(new Oi(r.url),new Oi(r.params),new Oi(r.queryParams),new Oi(r.fragment),new Oi(r.data),r.outlet,r.component,r)}var KR="ngNavigationCancelingError";function QR(r,t){let{redirectTo:e,navigationBehaviorOptions:n}=Vd(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=YR(!1,Go.Redirect);return i.url=e,i.navigationBehaviorOptions=n,i}function YR(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[KR]=!0,e.cancellationCode=t,e}function MW(r){return JR(r)&&Vd(r.url)}function JR(r){return!!r&&r[KR]}var PW=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=oa({type:r,selectors:[["ng-component"]],standalone:!0,features:[Rk],decls:1,vars:0,template:function(n,i){n&1&&aa(0,"router-outlet")},dependencies:[SW],encapsulation:2})}}return r})();function IW(r,t){return r.providers&&!r._injector&&(r._injector=Hv(r.providers,t,`Route: ${r.path}`)),r._injector??t}function GE(r){let t=r.children&&r.children.map(GE),e=t?Bn(bt({},r),{children:t}):bt({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==sn&&(e.component=PW),e}function da(r){return r.outlet||sn}function DW(r,t){let e=r.filter(n=>da(n)===t);return e.push(...r.filter(n=>da(n)!==t)),e}function Ap(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var kW=(r,t,e,n)=>Vt(i=>(new VE(t,i.targetRouterState,i.currentRouterState,e,n).activate(r),i)),VE=class{constructor(t,e,n,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),vE(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let i=Nd(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],n),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,e,n){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=n.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,o=Nd(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,o=Nd(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let i=Nd(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new kE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new IE(t.value.snapshot))}activateRoutes(t,e,n){let i=t.value,o=e?e.value:null;if(vE(i),i===o)if(i.component){let s=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(i.component){let s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vE(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Ap(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}},xy=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Fd=class{constructor(t,e){this.component=t,this.route=e}};function RW(r,t,e){let n=r._root,i=t?t._root:null;return up(n,i,e,[n.value])}function NW(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function zd(r,t){let e=Symbol(),n=t.get(r,e);return n===e?typeof r=="function"&&!FD(r)?r:t.get(r):n}function up(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Nd(t);return r.children.forEach(s=>{jW(s,o[s.value.outlet],e,n.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pp(a,e.getContext(s),i)),i}function jW(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,s=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=FW(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new xy(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?up(r,t,a?a.children:null,n,i):up(r,t,e,n,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fd(a.outlet.component,s))}else s&&pp(t,a,i),i.canActivateChecks.push(new xy(n)),o.component?up(r,null,a?a.children:null,n,i):up(r,null,e,n,i);return i}function FW(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!Gc(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Gc(r.url,t.url)||!ua(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FE(r,t)||!ua(r.queryParams,t.queryParams);case"paramsChange":default:return!FE(r,t)}}function pp(r,t,e){let n=Nd(r),i=r.value;Object.entries(n).forEach(([o,s])=>{i.component?t?pp(s,t.children.getContext(o),e):pp(s,null,e):pp(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Fd(t.outlet.component,i)):e.canDeactivateChecks.push(new Fd(null,i)):e.canDeactivateChecks.push(new Fd(null,i))}function Tp(r){return typeof r=="function"}function LW(r){return typeof r=="boolean"}function VW(r){return r&&Tp(r.canLoad)}function BW(r){return r&&Tp(r.canActivate)}function UW(r){return r&&Tp(r.canActivateChild)}function HW(r){return r&&Tp(r.canDeactivate)}function zW(r){return r&&Tp(r.canMatch)}function ZR(r){return r instanceof ja||r?.name==="EmptyError"}var dy=Symbol("INITIAL_VALUE");function Hd(){return ur(r=>Oh(r.map(t=>t.pipe(La(1),Tc(dy)))).pipe(Vt(t=>{for(let e of t)if(e!==!0){if(e===dy)return dy;if(e===!1||e instanceof Rl)return e}return!0}),pi(t=>t!==dy),La(1)))}function $W(r,t){return Yr(e=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Ft(Bn(bt({},e),{guardsResult:!0})):WW(s,n,i,r).pipe(Yr(a=>a&&LW(a)?qW(n,o,r,t):Ft(a)),Vt(a=>Bn(bt({},e),{guardsResult:a})))})}function WW(r,t,e,n){return yn(r).pipe(Yr(i=>JW(i.component,i.route,e,t,n)),os(i=>i!==!0,!0))}function qW(r,t,e,n){return yn(t).pipe(Fa(i=>cd(KW(i.route.parent,n),GW(i.route,n),YW(r,i.path,e),QW(r,i.route,e))),os(i=>i!==!0,!0))}function GW(r,t){return r!==null&&t&&t(new DE(r)),Ft(!0)}function KW(r,t){return r!==null&&t&&t(new PE(r)),Ft(!0)}function QW(r,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return Ft(!0);let i=n.map(o=>Wm(()=>{let s=Ap(t)??e,a=zd(o,s),c=BW(a)?a.canActivate(t,r):Ds(s,()=>a(t,r));return Fl(c).pipe(os())}));return Ft(i).pipe(Hd())}function YW(r,t,e){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>NW(s)).filter(s=>s!==null).map(s=>Wm(()=>{let a=s.guards.map(c=>{let u=Ap(s.node)??e,f=zd(c,u),g=UW(f)?f.canActivateChild(n,r):Ds(u,()=>f(n,r));return Fl(g).pipe(os())});return Ft(a).pipe(Hd())}));return Ft(o).pipe(Hd())}function JW(r,t,e,n,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ft(!0);let s=o.map(a=>{let c=Ap(t)??i,u=zd(a,c),f=HW(u)?u.canDeactivate(r,t,e,n):Ds(c,()=>u(r,t,e,n));return Fl(f).pipe(os())});return Ft(s).pipe(Hd())}function ZW(r,t,e,n){let i=t.canLoad;if(i===void 0||i.length===0)return Ft(!0);let o=i.map(s=>{let a=zd(s,r),c=VW(a)?a.canLoad(t,e):Ds(r,()=>a(t,e));return Fl(c)});return Ft(o).pipe(Hd(),XR(n))}function XR(r){return Ib(Jr(t=>{if(Vd(t))throw QR(r,t)}),Vt(t=>t===!0))}function XW(r,t,e,n){let i=t.canMatch;if(!i||i.length===0)return Ft(!0);let o=i.map(s=>{let a=zd(s,r),c=zW(a)?a.canMatch(t,e):Ds(r,()=>a(t,e));return Fl(c)});return Ft(o).pipe(Hd(),XR(n))}var Cp=class{constructor(t){this.segmentGroup=t||null}},Ey=class extends Error{constructor(t){super(),this.urlTree=t}};function Rd(r){return ld(new Cp(r))}function e8(r){return ld(new Ut(4e3,!1))}function t8(r){return ld(YR(!1,Go.GuardRejected))}var BE=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return Ft(n);if(i.numberOfChildren>1||!i.children[sn])return e8(t.redirectTo);i=i.children[sn]}}applyRedirectCommands(t,e,n){let i=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new Ey(i);return i}applyRedirectCreateUrlTree(t,e,n,i){let o=this.createSegmentGroup(t,e.root,n,i);return new Rl(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[i]=e[a]}else n[i]=o}),n}createSegmentGroup(t,e,n,i){let o=this.createSegments(t,e.segments,n,i),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,n,i)}),new Fn(o,s)}createSegments(t,e,n,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,n))}findPosParam(t,e,n){let i=n[e.path.substring(1)];if(!i)throw new Ut(4001,!1);return i}findOrReturn(t,e){let n=0;for(let i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}},UE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function n8(r,t,e,n,i){let o=KE(r,t,e);return o.matched?(n=IW(t,n),XW(n,t,e,i).pipe(Vt(s=>s===!0?o:bt({},UE)))):Ft(o)}function KE(r,t,e){if(t.path==="**")return r8(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?bt({},UE):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Z6)(e,r,t);if(!i)return bt({},UE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?bt(bt({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function r8(r){return{matched:!0,parameters:r.length>0?DR(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function OR(r,t,e,n){return e.length>0&&s8(r,e,n)?{segmentGroup:new Fn(t,o8(n,new Fn(e,r.children))),slicedSegments:[]}:e.length===0&&a8(r,e,n)?{segmentGroup:new Fn(r.segments,i8(r,e,n,r.children)),slicedSegments:e}:{segmentGroup:new Fn(r.segments,r.children),slicedSegments:e}}function i8(r,t,e,n){let i={};for(let o of e)if(Oy(r,t,o)&&!n[da(o)]){let s=new Fn([],{});i[da(o)]=s}return bt(bt({},n),i)}function o8(r,t){let e={};e[sn]=t;for(let n of r)if(n.path===""&&da(n)!==sn){let i=new Fn([],{});e[da(n)]=i}return e}function s8(r,t,e){return e.some(n=>Oy(r,t,n)&&da(n)!==sn)}function a8(r,t,e){return e.some(n=>Oy(r,t,n))}function Oy(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function l8(r,t,e,n){return da(r)!==n&&(n===sn||!Oy(t,e,r))?!1:KE(t,r,e).matched}function c8(r,t,e){return t.length===0&&!r.children[e]}var HE=class{};function u8(r,t,e,n,i,o,s="emptyOnly"){return new zE(r,t,e,n,i,s,o).recognize()}var d8=31,zE=class{constructor(t,e,n,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new BE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ut(4002,`'${t.segmentGroup}'`)}recognize(){let t=OR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Vt(e=>{let n=new wp([],Object.freeze({}),Object.freeze(bt({},this.urlTree.queryParams)),this.urlTree.fragment,{},sn,this.rootComponentType,null,{}),i=new qo(n,e),o=new Cy("",i),s=vW(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,sn).pipe(Cl(n=>{if(n instanceof Ey)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Cp?this.noMatchError(n):n}))}inheritParamsAndData(t,e){let n=t.value,i=WE(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(t,e,n,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,i,!0).pipe(Vt(o=>o instanceof qo?[o]:[]))}processChildren(t,e,n){let i=[];for(let o of Object.keys(n.children))o==="primary"?i.unshift(o):i.push(o);return yn(i).pipe(Fa(o=>{let s=n.children[o],a=DW(e,o);return this.processSegmentGroup(t,a,s,o)}),Ac((o,s)=>(o.push(...s),o)),xl(null),Hb(),Yr(o=>{if(o===null)return Rd(n);let s=eN(o);return f8(s),Ft(s)}))}processSegment(t,e,n,i,o,s){return yn(e).pipe(Fa(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,n,i,o,s).pipe(Cl(c=>{if(c instanceof Cp)return Ft(null);throw c}))),os(a=>!!a),Cl(a=>{if(ZR(a))return c8(n,i,o)?Ft(new HE):Rd(n);throw a}))}processSegmentAgainstRoute(t,e,n,i,o,s,a){return l8(n,i,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,n,o,s):Rd(i):Rd(i)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:f}=KE(e,i,o);if(!a)return Rd(e);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>d8&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,g).pipe(Yr(v=>this.processSegment(t,n,e,v.concat(f),s,!1)))}matchSegmentAgainstRoute(t,e,n,i,o){let s=n8(e,n,i,t,this.urlSerializer);return n.path==="**"&&(e.children={}),s.pipe(ur(a=>a.matched?(t=n._injector??t,this.getChildConfig(t,n,i).pipe(ur(({routes:c})=>{let u=n._loadedInjector??t,{consumedSegments:f,remainingSegments:g,parameters:v}=a,_=new wp(f,v,Object.freeze(bt({},this.urlTree.queryParams)),this.urlTree.fragment,p8(n),da(n),n.component??n._loadedComponent??null,n,g8(n)),{segmentGroup:b,slicedSegments:C}=OR(e,f,g,c);if(C.length===0&&b.hasChildren())return this.processChildren(u,c,b).pipe(Vt(j=>j===null?null:new qo(_,j)));if(c.length===0&&C.length===0)return Ft(new qo(_,[]));let S=da(n)===o;return this.processSegment(u,c,b,C,S?sn:o,!0).pipe(Vt(j=>new qo(_,j instanceof qo?[j]:[])))}))):Rd(e)))}getChildConfig(t,e,n){return e.children?Ft({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Ft({routes:e._loadedRoutes,injector:e._loadedInjector}):ZW(t,e,n,this.urlSerializer).pipe(Yr(i=>i?this.configLoader.loadChildren(t,e).pipe(Jr(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):t8(e))):Ft({routes:[],injector:t})}};function f8(r){r.sort((t,e)=>t.value.outlet===sn?-1:e.value.outlet===sn?1:t.value.outlet.localeCompare(e.value.outlet))}function h8(r){let t=r.value.routeConfig;return t&&t.path===""}function eN(r){let t=[],e=new Set;for(let n of r){if(!h8(n)){t.push(n);continue}let i=t.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),e.add(i)):t.push(n)}for(let n of e){let i=eN(n.children);t.push(new qo(n.value,i))}return t.filter(n=>!e.has(n))}function p8(r){return r.data||{}}function g8(r){return r.resolve||{}}function m8(r,t,e,n,i,o){return Yr(s=>u8(r,t,e,n,s.extractedUrl,i,o).pipe(Vt(({state:a,tree:c})=>Bn(bt({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function v8(r,t){return Yr(e=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return Ft(e);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of tN(c))s.add(u);let a=0;return yn(s).pipe(Fa(c=>o.has(c)?y8(c,n,r,t):(c.data=WE(c,c.parent,r).resolve,Ft(void 0))),Jr(()=>a++),ud(1),Yr(c=>a===s.size?Ft(e):lo))})}function tN(r){let t=r.children.map(e=>tN(e)).flat();return[r,...t]}function y8(r,t,e,n){let i=r.routeConfig,o=r._resolve;return i?.title!==void 0&&!GR(i)&&(o[xp]=i.title),_8(o,r,t,n).pipe(Vt(s=>(r._resolvedData=s,r.data=WE(r,r.parent,e).resolve,null)))}function _8(r,t,e,n){let i=wE(r);if(i.length===0)return Ft({});let o={};return yn(i).pipe(Yr(s=>w8(r[s],t,e,n).pipe(os(),Jr(a=>{o[s]=a}))),ud(1),Bb(o),Cl(s=>ZR(s)?lo:ld(s)))}function w8(r,t,e,n){let i=Ap(t)??n,o=zd(r,i),s=o.resolve?o.resolve(t,e):Ds(i,()=>o(t,e));return Fl(s)}function yE(r){return ur(t=>{let e=r(t);return e?yn(e).pipe(Vt(()=>t)):Ft(t)})}var nN=(()=>{class r{buildTitle(e){let n,i=e.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===sn);return n}getResolvedTitleForRoute(e){return e.data[xp]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(b8),providedIn:"root"})}}return r})(),b8=(()=>{class r extends nN{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||r)(Xe(bR))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Op=new wt("",{providedIn:"root",factory:()=>({})}),Sy=new wt(""),QE=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ct(Zv)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ft(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=Fl(e.loadComponent()).pipe(Vt(rN),Jr(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),El(()=>{this.componentLoaders.delete(e)})),i=new id(n,()=>new Fr).pipe(rd());return this.componentLoaders.set(e,i),i}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Ft({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=C8(n,this.compiler,e,this.onLoadEndListener).pipe(El(()=>{this.childrenLoaders.delete(n)})),s=new id(o,()=>new Fr).pipe(rd());return this.childrenLoaders.set(n,s),s}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function C8(r,t,e,n){return Fl(r.loadChildren()).pipe(Vt(rN),Yr(i=>i instanceof zh||Array.isArray(i)?Ft(i):yn(t.compileModuleAsync(i))),Vt(i=>{n&&n(r);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(Sy,[],{optional:!0,self:!0}).flat()),{routes:s.map(GE),injector:o}}))}function x8(r){return r&&typeof r=="object"&&"default"in r}function rN(r){return x8(r)?r.default:r}var YE=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(E8),providedIn:"root"})}}return r})(),E8=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),iN=new wt(""),oN=new wt("");function S8(r,t,e){let n=r.get(oN),i=r.get(Hi);return r.get(_n).runOutsideAngular(()=>{if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),A8(r))),{onViewTransitionCreated:c}=n;return c&&Ds(r,()=>c({transition:a,from:t,to:e})),s})}function A8(r){return new Promise(t=>{Uv(t,{injector:r})})}var JE=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fr,this.transitionAbortSubject=new Fr,this.configLoader=ct(QE),this.environmentInjector=ct(Li),this.urlSerializer=ct(Ep),this.rootContexts=ct(Sp),this.location=ct(Dd),this.inputBindingEnabled=ct(Ty,{optional:!0})!==null,this.titleStrategy=ct(nN),this.options=ct(Op,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ct(YE),this.createViewTransition=ct(iN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ft(void 0),this.rootComponentType=null;let e=i=>this.events.next(new OE(i)),n=i=>this.events.next(new ME(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(Bn(bt(bt({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,i){return this.transitions=new Oi({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pi(o=>o.id!==0),Vt(o=>Bn(bt({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let s=!1,a=!1;return Ft(o).pipe(ur(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Go.SupersededByNewNavigation),lo;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Bn(bt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&f!=="reload"){let g="";return this.events.next(new jl(c.id,this.urlSerializer.serialize(c.rawUrl),g,vy.IgnoredSameUrlNavigation)),c.resolve(null),lo}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ft(c).pipe(ur(g=>{let v=this.transitions?.getValue();return this.events.next(new Bd(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),v!==this.transitions?.getValue()?lo:Promise.resolve(g)}),m8(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Jr(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Bn(bt({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let v=new yy(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:g,extractedUrl:v,source:_,restoredState:b,extras:C}=c,S=new Bd(g,this.urlSerializer.serialize(v),_,b);this.events.next(S);let j=WR(this.rootComponentType).snapshot;return this.currentTransition=o=Bn(bt({},c),{targetSnapshot:j,urlAfterRedirects:v,extras:Bn(bt({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,Ft(o)}else{let g="";return this.events.next(new jl(c.id,this.urlSerializer.serialize(c.extractedUrl),g,vy.IgnoredByUrlHandlingStrategy)),c.resolve(null),lo}}),Jr(c=>{let u=new EE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Vt(c=>(this.currentTransition=o=Bn(bt({},c),{guards:RW(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),$W(this.environmentInjector,c=>this.events.next(c)),Jr(c=>{if(o.guardsResult=c.guardsResult,Vd(c.guardsResult))throw QR(this.urlSerializer,c.guardsResult);let u=new SE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),pi(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Go.GuardRejected),!1)),yE(c=>{if(c.guards.canActivateChecks.length)return Ft(c).pipe(Jr(u=>{let f=new AE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),ur(u=>{let f=!1;return Ft(u).pipe(v8(this.paramsInheritanceStrategy,this.environmentInjector),Jr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Go.NoDataFromResolver)}}))}),Jr(u=>{let f=new TE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),yE(c=>{let u=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Jr(v=>{f.component=v}),Vt(()=>{})));for(let v of f.children)g.push(...u(v));return g};return Oh(u(c.targetSnapshot.root)).pipe(xl(null),La(1))}),yE(()=>this.afterPreactivation()),ur(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,f=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return f?yn(f).pipe(Vt(()=>o)):Ft(o)}),Vt(c=>{let u=AW(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Bn(bt({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Jr(()=>{this.events.next(new yp)}),kW(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),La(1),Jr({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ga(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),$b(this.transitionAbortSubject.pipe(Jr(c=>{throw c}))),El(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Go.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cl(c=>{if(a=!0,JR(c))this.events.next(new Nl(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),MW(c)?this.events.next(new _p(c.url)):o.resolve(!1);else{this.events.next(new vp(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return lo}))}))}cancelNavigationTransition(e,n,i){let o=new Nl(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function T8(r){return r!==hp}var O8=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(M8),providedIn:"root"})}}return r})(),$E=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},M8=(()=>{class r extends $E{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xh(r)))(i||r)}})()}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),sN=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:()=>ct(P8),providedIn:"root"})}}return r})(),P8=(()=>{class r extends sN{constructor(){super(...arguments),this.location=ct(Dd),this.urlSerializer=ct(Ep),this.options=ct(Op,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ct(YE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=WR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof Bd)this.stateMemento=this.createStateMemento();else if(e instanceof jl)this.rawUrlTree=n.initialUrl;else if(e instanceof yy){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(i,n)}}else e instanceof yp?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof Nl&&(e.code===Go.GuardRejected||e.code===Go.NoDataFromResolver)?this.restoreHistory(n):e instanceof vp?this.restoreHistory(n,!0):e instanceof Ga&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl){let o=this.browserPageId,s=bt(bt({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(i,"",s)}else{let o=bt(bt({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xh(r)))(i||r)}})()}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),dp=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(dp||{});function aN(r,t){r.events.pipe(pi(e=>e instanceof Ga||e instanceof Nl||e instanceof vp||e instanceof jl),Vt(e=>e instanceof Ga||e instanceof jl?dp.COMPLETE:(e instanceof Nl?e.code===Go.Redirect||e.code===Go.SupersededByNewNavigation:!1)?dp.REDIRECTING:dp.FAILED),pi(e=>e!==dp.REDIRECTING),La(1)).subscribe(()=>{t()})}function I8(r){throw r}var D8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},k8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kc=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ct(Gv),this.stateManager=ct(sN),this.options=ct(Op,{optional:!0})||{},this.pendingTasks=ct(Bc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ct(JE),this.urlSerializer=ct(Ep),this.location=ct(Dd),this.urlHandlingStrategy=ct(YE),this._events=new Fr,this.errorHandler=this.options.errorHandler||I8,this.navigated=!1,this.routeReuseStrategy=ct(O8),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ct(Sy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ct(Ty,{optional:!0}),this.eventsSubscription=new jr,this.isNgZoneEnabled=ct(_n)instanceof _n&&_n.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof Nl&&n.code!==Go.Redirect&&n.code!==Go.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Ga)this.navigated=!0;else if(n instanceof _p){let s=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||T8(i.source)};this.scheduleNavigation(s,hp,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}N8(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=bt({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(GE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=n,u=c?this.currentUrlTree.fragment:s,f=null;switch(a){case"merge":f=bt(bt({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let v=i?i.snapshot:this.routerState.snapshot.root;g=UR(v)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),g=this.currentUrlTree.root}return HR(g,e,f,u??null)}navigateByUrl(e,n={skipLocationChange:!1}){let i=Vd(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,hp,null,n)}navigate(e,n={skipLocationChange:!1}){return R8(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let i;if(n===!0?i=bt({},D8):n===!1?i=bt({},k8):i=n,Vd(e))return xR(this.currentUrlTree,e,i);let o=this.parseUrl(e);return xR(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(e,n,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((g,v)=>{a=g,c=v});let f=this.pendingTasks.add();return aN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function R8(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new Ut(4008,!1)}function N8(r){return!(r instanceof yp)&&!(r instanceof _p)}var Ay=class{};var j8=(()=>{class r{constructor(e,n,i,o,s){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pi(e=>e instanceof Ga),Fa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let i=[];for(let o of n){o.providers&&!o._injector&&(o._injector=Hv(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return yn(i).pipe(bl())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(e,n):i=Ft(null);let o=i.pipe(Yr(s=>s===null?Ft(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return yn([o,s]).pipe(bl())}else return o})}static{this.\u0275fac=function(n){return new(n||r)(Xe(Kc),Xe(Zv),Xe(Li),Xe(Ay),Xe(QE))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),lN=new wt(""),F8=(()=>{class r{constructor(e,n,i,o,s={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ct(Li),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Bd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ga?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof jl&&e.code===vy.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof _y&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>ke(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Uv(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new _y(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){nk()}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}}return r})();function L8(r){return r.routerState.root}function Mp(r,t){return{\u0275kind:r,\u0275providers:t}}function V8(){let r=ct(Ns);return t=>{let e=r.get(Hc);if(t!==e.components[0])return;let n=r.get(Kc),i=r.get(cN);r.get(ZE)===1&&n.initialNavigation(),r.get(uN,null,dn.Optional)?.setUpPreloading(),r.get(lN,null,dn.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cN=new wt("",{factory:()=>new Fr}),ZE=new wt("",{providedIn:"root",factory:()=>1});function B8(){return Mp(2,[{provide:ZE,useValue:0},{provide:Yv,multi:!0,deps:[Ns],useFactory:t=>{let e=t.get(Yk,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let i=t.get(Kc),o=t.get(cN);aN(i,()=>{n(!0)}),t.get(JE).afterPreactivation=()=>(n(!0),o.closed?Ft(void 0):o),i.initialNavigation()}))}}])}function U8(){return Mp(3,[{provide:Yv,multi:!0,useFactory:()=>{let t=ct(Kc);return()=>{t.setUpLocationChangeListener()}}},{provide:ZE,useValue:2}])}var uN=new wt("");function H8(r){return Mp(0,[{provide:uN,useExisting:j8},{provide:Ay,useExisting:r}])}function z8(){return Mp(8,[TR,{provide:Ty,useExisting:TR}])}function $8(r){let t=[{provide:iN,useValue:S8},{provide:oN,useValue:bt({skipNextTransition:!!r?.skipInitialTransition},r)}];return Mp(9,t)}var MR=new wt("ROUTER_FORROOT_GUARD"),W8=[Dd,{provide:Ep,useClass:gp},Kc,Sp,{provide:Ud,useFactory:L8,deps:[Kc]},QE,[]],XE=(()=>{class r{constructor(e){}static forRoot(e,n){return{ngModule:r,providers:[W8,[],{provide:Sy,multi:!0,useValue:e},{provide:MR,useFactory:Q8,deps:[[Kc,new Gh,new WD]]},{provide:Op,useValue:n||{}},n?.useHash?G8():K8(),q8(),n?.preloadingStrategy?H8(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Y8(n):[],n?.bindToComponentInputs?z8().\u0275providers:[],n?.enableViewTransitions?$8().\u0275providers:[],J8()]}}static forChild(e){return{ngModule:r,providers:[{provide:Sy,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||r)(Xe(MR,8))}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({})}}return r})();function q8(){return{provide:lN,useFactory:()=>{let r=ct(eR),t=ct(_n),e=ct(Op),n=ct(JE),i=ct(Ep);return e.scrollOffset&&r.setOffset(e.scrollOffset),new F8(i,n,r,t,e)}}}function G8(){return{provide:$c,useClass:Zk}}function K8(){return{provide:$c,useClass:eE}}function Q8(r){return"guarded"}function Y8(r){return[r.initialNavigation==="disabled"?U8().\u0275providers:[],r.initialNavigation==="enabledBlocking"?B8().\u0275providers:[]]}var PR=new wt("");function J8(){return[{provide:PR,useFactory:V8},{provide:Jv,multi:!0,useExisting:PR}]}var Z8=[],dN=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({imports:[XE.forRoot(Z8),XE]})}}return r})();var My=class{constructor(){this.BigText={label:"BigText",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
        <path fill="currentColor" d="M20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20M4,6V18H20V6H4M6,9H18V11H6V9M6,13H16V15H6V13Z"></path>
    </svg>`,content:`
      <textarea style="
            outline: none;
            padding: 10px 14px;
            margin: 10px;
            width: 100%;
            border: 1px solid #d5dce1;
            border-radius: 4px;
        "
        ></textarea>
      `}}};var Py=class{constructor(){this._Button_JS={label:"Button",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg class="SVG" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 20.5C20 21.3 19.3 22 18.5 22H13C12.6 22 12.3 21.9 12 21.6L8 17.4L8.7 16.6C8.9 16.4 9.2 16.3 9.5 16.3H9.7L12 18V9C12 8.4 12.4 8 13 8S14 8.4 14 9V13.5L15.2 13.6L19.1 15.8C19.6 16 20 16.6 20 17.1V20.5M20 2H4C2.9 2 2 2.9 2 4V12C2 13.1 2.9 14 4 14H8V12H4V4H20V12H18V14H20C21.1 14 22 13.1 22 12V4C22 2.9 21.1 2 20 2Z"></path>
            </svg>`,content:`
      <button style="
                  outline: none;
                  border: none;
                  background: #2196F3;
                  color: white;
                  border-radius: 4px;
                  padding: 5px 10px;
                  margin: 10px;
                  cursor: pointer;
                  ">
      Button
      </button>
      `}}};var Iy=class{constructor(){this._divider_JS={label:"Divider",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg class="SVG" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21 18H2V20H21V18M19 10V14H4V10H19M20 8H3C2.45 8 2 8.45 2 9V15C2 15.55 2.45 16 3 16H20C20.55 16 21 15.55 21 15V9C21 8.45 20.55 8 20 8M21 4H2V6H21V4Z"></path>
            </svg>`,content:`
        <div style=" background-color: rgba(0, 0, 0, 0.1); height: 1px; margin: 10px;"></div>
      `}}};var Dy=class{constructor(){this._Hero_Section_JS={label:"Hero Section",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
        <path fill="currentColor" d="M20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20M4,6V18H20V6H4M6,9H18V11H6V9M6,13H16V15H6V13Z"></path>
    </svg>`,content:`
    <div class="hero">

    <h1>Insert title here</h1>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
    </div>
      `}}};var ky=class{constructor(){this._Image_JS={label:"Image",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
              <path fill="currentColor" d="M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z"></path>
            </svg>`,content:`
      <img>
      `}}};var Ry=class{constructor(){this._Label_JS={label:"Label",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24" >
              <g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)" stroke="none"> <path d="M40 225 c0 -8 5 -15 10 -15 6 0 10 -37 10 -90 0 -53 -4 -90 -10 -90 -5 0 -10 -7 -10 -15 0 -12 16 -15 80 -15 l80 0 0 30 c0 20 -5 30 -15 30 -8 0 -15 -7 -15 -16 0 -12 -9 -14 -37 -12 l-38 3 -3 83 c-2 67 0 83 13 88 32 13 16 34 -25 34 -29 0 -40 -4 -40 -15z"/> </g>
              </svg>`,content:`
      <label style=" padding: 10px;  margin: 10px;" >Label</label>
      `}}};var Ny=class{constructor(){this._Link_JS={label:"Link",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
          <svg Class="SVG" viewBox="0 0 24 24">
            <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
          </svg>`,content:`
        <a href="#">Link</a>
      `}}};var jy=class{constructor(){this._Map_JS={label:"Map",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
              <path fill="currentColor" d="M20.5,3L20.34,3.03L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3M10,5.47L14,6.87V18.53L10,17.13V5.47M5,6.46L8,5.45V17.15L5,18.31V6.46M19,17.54L16,18.55V6.86L19,5.7V17.54Z"></path>
            </svg>`,content:`
      <iframe src="https://maps.google.com/maps?&amp;z=1&amp;t=q&amp;output=embed" frameborder="0" class="gjs-no-pointer" style="height: 100%; width: 100%;"></iframe>
      `}}};var Fy=class{constructor(){this._Quote_JS={label:"Quote",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
                <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z"></path>
            </svg>`,content:`
      <b>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit</b>
      `}}};var Ly=class{constructor(){this._1_Section_JS={label:"1 Section",attributes:{class:"gjs-fonts gjs-f-b1"},media:`
            <svg class="SVG" viewBox="0 0 24 24" >
                <path fill="currentColor" d="M2 20h20V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1Z"></path>
            </svg>`,content:`
        <table style="width: 100%; height: 150px; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px;"></td>
            </tr>
        </table>`}}};var Vy=class{constructor(){this._2_Section_JS={label:"1/2 Sections",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg class="SVG" viewBox="0 0 23 24" >
              <path fill="currentColor" d="M2 20h8V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM13 20h8V4h-8v16Zm-1 0V4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1Z"></path>
            </svg>`,content:`
      <table style="width: 100%; height: 150px; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px; width:50%; "></td>
                <td style="padding: 10px; width:50%; "></td>
            </tr>
        </table>`}}};var By=class{constructor(){this._3_7_Section_JS={label:"3/7 Sections",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg class="SVG" viewBox="0 0 24 24">
              <path fill="currentColor" d="M2 20h5V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM10 20h12V4H10v16Zm-1 0V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1Z"></path>
            </svg>`,content:`
      <table style="width: 100%; height: 150px; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px; width:25%; "></td>
                <td style="padding: 10px; width:75%; "></td>
            </tr>
        </table>`}}};var Uy=class{constructor(){this._3_Section_JS={label:"1/3 Sections",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg class="SVG" viewBox="0 0 23 24"  >
              <path fill="currentColor" d="M2 20h4V4H2v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1ZM17 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1ZM9.5 20h4V4h-4v16Zm-1 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z"></path>
            </svg>`,content:`
      <table style="width: 100%; height: 150px; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px; width:33.33%; "></td>
                <td style="padding: 10px; width:33.33%; "></td>
                <td style="padding: 10px; width:33.33%; "></td>
            </tr>
        </table>`}}};var Hy=class{constructor(){this._Text_JS={label:"Text",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
              <path fill="currentColor" d="M18.5,4L19.66,8.35L18.7,8.61C18.25,7.74 17.79,6.87 17.26,6.43C16.73,6 16.11,6 15.5,6H13V16.5C13,17 13,17.5 13.33,17.75C13.67,18 14.33,18 15,18V19H9V18C9.67,18 10.33,18 10.67,17.75C11,17.5 11,17 11,16.5V6H8.5C7.89,6 7.27,6 6.74,6.43C6.21,6.87 5.75,7.74 5.3,8.61L4.34,8.35L5.5,4H18.5Z"></path>
            </svg>`,content:`
      <p>Text Here</p>
      `}}};var zy=class{constructor(){this._Video_JS={label:"Video",attributes:{class:"gjs-fonts gjs-f-b2"},media:`
            <svg Class="SVG" viewBox="0 0 24 24">
              <path fill="currentColor" d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z"></path>
            </svg>`,content:`
      <video></video>
      `}}};var $y=class{constructor(){this._BigText_JS=new My,this._Button_JS=new Py,this._divider_JS=new Iy,this._Hero_Section_JS=new Dy,this._Image_JS=new ky,this._Label_JS=new Ry,this._Link_JS=new Ny,this._Map_JS=new jy,this._Quote_JS=new Fy,this._1_Section_JS=new Ly,this._2_Section_JS=new Vy,this._3_7_Section_JS=new By,this._3_Section_JS=new Uy,this._Text_JS=new Hy,this._Video_JS=new zy,this.Array_All=[this._1_Section_JS._1_Section_JS,this._2_Section_JS._2_Section_JS,this._3_7_Section_JS._3_7_Section_JS,this._3_Section_JS._3_Section_JS,this._Button_JS._Button_JS,this._BigText_JS.BigText,this._divider_JS._divider_JS,this._Hero_Section_JS._Hero_Section_JS,this._Image_JS._Image_JS,this._Label_JS._Label_JS,this._Link_JS._Link_JS,this._Map_JS._Map_JS,this._Quote_JS._Quote_JS,this._Text_JS._Text_JS,this._Video_JS._Video_JS]}};var X8={982:(r,t,e)=>{var n,i,o;(function(s){i=[e(523),e(391)],n=s,o=typeof n=="function"?n.apply(t,i):n,o!==void 0&&(r.exports=o)})(function(s,a){var c=Array.prototype.slice;function u(k,$,I){return I.length<=4?k.call($,I[0],I[1],I[2],I[3]):k.apply($,I)}function f(k,$){return c.call(k,$)}function g(k,$){return k==null?!1:(s.isArray($)||($=f(arguments,1)),s.all($,function(I){return I in k}))}var v=function(){var k=!1,$=-1;function I(){$++,k=!0,s.defer(function(){k=!1})}return function(){return k||I(),$}}();function _(){this.registeredObjects=[],this.cidIndexes=[]}_.prototype={isRegistered:function(k){return k&&k.cid?this.registeredObjects[k.cid]:s.contains(this.registeredObjects,k)},register:function(k){return this.isRegistered(k)?!1:(k&&k.cid?(this.registeredObjects[k.cid]=k,this.cidIndexes.push(k.cid)):this.registeredObjects.push(k),!0)},unregister:function(k){if(this.isRegistered(k)){if(k&&k.cid)delete this.registeredObjects[k.cid],this.cidIndexes.splice(s.indexOf(this.cidIndexes,k.cid),1);else{var $=s.indexOf(this.registeredObjects,k);this.registeredObjects.splice($,1)}return!0}return!1},get:function(){return s.map(this.cidIndexes,function(k){return this.registeredObjects[k]},this).concat(this.registeredObjects)}};function b(k,$,I,T){for(var O=0,Z=$.length,ce;O<Z;O++)if(ce=$[O],!!ce){if(k==="on"){if(!T.objectRegistry.register(ce))continue}else if(!T.objectRegistry.unregister(ce))continue;s.isFunction(ce[k])&&ce[k]("all",I,T)}}function C(k,$){var I=$.type,T=$.undoTypes,O=!T[I]||T[I][k];s.isFunction(O)&&O($.object,$.before,$.after,$.options)}function S(k,$,I,T,O){if(!(I.isCurrentlyUndoRedoing||k==="undo"&&I.pointer===-1||k==="redo"&&I.pointer===I.length-1)){I.isCurrentlyUndoRedoing=!0;var Z,ce,V=k==="undo";for(O?ce=V&&I.pointer===I.length-1||!V&&I.pointer===-1?s.clone(I.models):c.apply(I.models,V?[0,I.pointer]:[I.pointer,I.length-1]):(Z=I.at(V?I.pointer:I.pointer+1),ce=T?I.where({magicFusionIndex:Z.get("magicFusionIndex")}):[Z]),I.pointer+=(V?-1:1)*ce.length;Z=V?ce.pop():ce.shift();)Z[k]();I.isCurrentlyUndoRedoing=!1,$.trigger(k,$)}}function j(k,$){var I=k.condition,T=typeof I;return T==="function"?!!u(I,k,$):T==="boolean"?I:!0}function q(k,$,I,T){if(k.track&&!k.isCurrentlyUndoRedoing&&$ in T&&j(T[$],I)){var O=u(T[$].on,T[$],I),Z;if(g(O,"object","before","after")){if(O.type=$,O.magicFusionIndex=v(),O.undoTypes=T,k.pointer<k.length-1)for(var Z=k.length-k.pointer-1;Z--;)k.pop();k.pointer=k.length,k.add(O),k.length>k.maximumStackLength&&(k.shift(),k.pointer--)}}}var N={add:{undo:function(k,$,I,T){k.remove(I,T)},redo:function(k,$,I,T){T.index&&(T.at=T.index),k.add(I,T)},on:function(k,$,I){return{object:$,before:void 0,after:k,options:s.clone(I)}}},remove:{undo:function(k,$,I,T){"index"in T&&(T.at=T.index),k.add($,T)},redo:function(k,$,I,T){k.remove($,T)},on:function(k,$,I){return{object:$,before:k,after:void 0,options:s.clone(I)}}},change:{undo:function(k,$,I,T){s.isEmpty($)?s.each(s.keys(I),k.unset,k):(k.set($),T&&T.unsetData&&T.unsetData.before&&T.unsetData.before.length&&s.each(T.unsetData.before,k.unset,k))},redo:function(k,$,I,T){s.isEmpty(I)?s.each(s.keys($),k.unset,k):(k.set(I),T&&T.unsetData&&T.unsetData.after&&T.unsetData.after.length&&s.each(T.unsetData.after,k.unset,k))},on:function(k,$){var I=k.changedAttributes(),T=s.keys(I),O=s.pick(k.previousAttributes(),T),Z=s.keys(O),ce=($||($={})).unsetData={after:[],before:[]};return T.length!=Z.length&&(T.length>Z.length?s.each(T,function(V){V in O||ce.before.push(V)},this):s.each(Z,function(V){V in I||ce.after.push(V)})),{object:k,before:O,after:I,options:s.clone($)}}},reset:{undo:function(k,$,I){k.reset($)},redo:function(k,$,I){k.reset(I)},on:function(k,$){return{object:k,before:$.previousModels,after:s.clone(k.models)}}}};function G(){}G.prototype=N;function se(k,$,I,T){if(typeof $=="object")return s.each($,function(O,Z){k===2?se(k,O,I,T):se(k,Z,O,I)});switch(k){case 0:g(I,"undo","redo","on")&&s.all(s.pick(I,"undo","redo","on"),s.isFunction)&&(T[$]=I);break;case 1:T[$]&&s.isObject(I)&&(T[$]=s.extend({},T[$],I));break;case 2:delete T[$];break}return this}var ue=a.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(k){C("undo",this.attributes)},redo:function(k){C("redo",this.attributes)}}),Y=a.Collection.extend({model:ue,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(k){this.maximumStackLength=k}}),L=a.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(k){this.stack=new Y,this.objectRegistry=new _,this.undoTypes=new G,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function($,I){this.stack.setMaxLength(I)},this),k&&k.track&&this.startTracking(),k&&k.register&&(s.isArray(k.register)||s.isArguments(k.register)?u(this.register,this,k.register):this.register(k.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(k){q(this.stack,k,f(arguments,1),this.undoTypes)},register:function(){b("on",arguments,this._addToStack,this)},unregister:function(){b("off",arguments,this._addToStack,this)},unregisterAll:function(){u(this.unregister,this,this.objectRegistry.get())},undo:function(k){S("undo",this,this.stack,k)},undoAll:function(){S("undo",this,this.stack,!1,!0)},redo:function(k){S("redo",this,this.stack,k)},redoAll:function(){S("redo",this,this.stack,!1,!0)},isAvailable:function(k){var $=this.stack,I=$.length;switch(k){case"undo":return I>0&&$.pointer>-1;case"redo":return I>0&&$.pointer<I-1;default:return!1}},merge:function(k){for(var $=s.isArray(k)?k:f(arguments),I;I=$.pop();)I instanceof L&&I.stack instanceof Y&&(I.stack=this.stack)},addUndoType:function(k,$){se(0,k,$,this.undoTypes)},changeUndoType:function(k,$){se(1,k,$,this.undoTypes)},removeUndoType:function(k){se(2,k,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return s.extend(L,{defaults:function(k){s.extend(L.prototype.defaults,k)},addUndoType:function(k,$){se(0,k,$,N)},changeUndoType:function(k,$){se(1,k,$,N)},removeUndoType:function(k){se(2,k,void 0,N)}}),a.UndoManager=L})},391:(r,t,e)=>{var n,i;(function(o){var s=typeof self=="object"&&self.self===self&&self||typeof e.g=="object"&&e.g.global===e.g&&e.g;if(1)n=[e(523),e(694),t],i=function(u,f,g){s.Backbone=o(s,g,u,f)}.apply(t,n),i!==void 0&&(r.exports=i);else var a,c})(function(o,s,a,c){var u=o.Backbone,f=Array.prototype.slice;s.VERSION="1.4.1",s.$=c,s.noConflict=function(){return o.Backbone=u,this},s.emulateHTTP=!1,s.emulateJSON=!1;var g=s.Events={},v=/\s+/,_,b=function(R,K,ee,he,Se){var X=0,ve;if(ee&&typeof ee=="object")for(he!==void 0&&("context"in Se)&&Se.context===void 0&&(Se.context=he),ve=a.keys(ee);X<ve.length;X++)K=b(R,K,ve[X],ee[ve[X]],Se);else if(ee&&v.test(ee))for(ve=ee.split(v);X<ve.length;X++)K=R(K,ve[X],he,Se);else K=R(K,ee,he,Se);return K};g.on=function(R,K,ee){if(this._events=b(C,this._events||{},R,K,{context:ee,ctx:this,listening:_}),_){var he=this._listeners||(this._listeners={});he[_.id]=_,_.interop=!1}return this},g.listenTo=function(R,K,ee){if(!R)return this;var he=R._listenId||(R._listenId=a.uniqueId("l")),Se=this._listeningTo||(this._listeningTo={}),X=_=Se[he];X||(this._listenId||(this._listenId=a.uniqueId("l")),X=_=Se[he]=new se(this,R));var ve=S(R,K,ee,this);if(_=void 0,ve)throw ve;return X.interop&&X.on(K,ee),this};var C=function(R,K,ee,he){if(ee){var Se=R[K]||(R[K]=[]),X=he.context,ve=he.ctx,fe=he.listening;fe&&fe.count++,Se.push({callback:ee,context:X,ctx:X||ve,listening:fe})}return R},S=function(R,K,ee,he){try{R.on(K,ee,he)}catch(Se){return Se}};g.off=function(R,K,ee){return this._events?(this._events=b(j,this._events,R,K,{context:ee,listeners:this._listeners}),this):this},g.stopListening=function(R,K,ee){var he=this._listeningTo;if(!he)return this;for(var Se=R?[R._listenId]:a.keys(he),X=0;X<Se.length;X++){var ve=he[Se[X]];if(!ve)break;ve.obj.off(K,ee,this),ve.interop&&ve.off(K,ee)}return a.isEmpty(he)&&(this._listeningTo=void 0),this};var j=function(R,K,ee,he){if(R){var Se=he.context,X=he.listeners,ve=0,fe;if(!K&&!Se&&!ee){for(fe=a.keys(X);ve<fe.length;ve++)X[fe[ve]].cleanup();return}for(fe=K?[K]:a.keys(R);ve<fe.length;ve++){K=fe[ve];var yt=R[K];if(!yt)break;for(var St=[],Ct=0;Ct<yt.length;Ct++){var Q=yt[Ct];if(ee&&ee!==Q.callback&&ee!==Q.callback._callback||Se&&Se!==Q.context)St.push(Q);else{var le=Q.listening;le&&le.off(K,ee)}}St.length?R[K]=St:delete R[K]}return R}};g.once=function(R,K,ee){var he=b(q,{},R,K,this.off.bind(this));return typeof R=="string"&&ee==null&&(K=void 0),this.on(he,K,ee)},g.listenToOnce=function(R,K,ee){var he=b(q,{},K,ee,this.stopListening.bind(this,R));return this.listenTo(R,he)};var q=function(R,K,ee,he){if(ee){var Se=R[K]=a.once(function(){he(K,Se),ee.apply(this,arguments)});Se._callback=ee}return R};g.trigger=function(R){if(!this._events)return this;for(var K=Math.max(0,arguments.length-1),ee=Array(K),he=0;he<K;he++)ee[he]=arguments[he+1];return b(N,this._events,R,void 0,ee),this};var N=function(R,K,ee,he){if(R){var Se=R[K],X=R.all;Se&&X&&(X=X.slice()),Se&&G(Se,he),X&&G(X,[K].concat(he))}return R},G=function(R,K){var ee,he=-1,Se=R.length,X=K[0],ve=K[1],fe=K[2];switch(K.length){case 0:for(;++he<Se;)(ee=R[he]).callback.call(ee.ctx);return;case 1:for(;++he<Se;)(ee=R[he]).callback.call(ee.ctx,X);return;case 2:for(;++he<Se;)(ee=R[he]).callback.call(ee.ctx,X,ve);return;case 3:for(;++he<Se;)(ee=R[he]).callback.call(ee.ctx,X,ve,fe);return;default:for(;++he<Se;)(ee=R[he]).callback.apply(ee.ctx,K);return}},se=function(R,K){this.id=R._listenId,this.listener=R,this.obj=K,this.interop=!0,this.count=0,this._events=void 0};se.prototype.on=g.on,se.prototype.off=function(R,K){var ee;this.interop?(this._events=b(j,this._events,R,K,{context:void 0,listeners:void 0}),ee=!this._events):(this.count--,ee=this.count===0),ee&&this.cleanup()},se.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},g.bind=g.on,g.unbind=g.off,a.extend(s,g);var ue=s.Model=function(R,K){var ee=R||{};K||(K={}),this.preinitialize.apply(this,arguments),this.cid=a.uniqueId(this.cidPrefix),this.attributes={},K.collection&&(this.collection=K.collection),K.parse&&(ee=this.parse(ee,K)||{});var he=a.result(this,"defaults");ee=a.defaults(a.extend({},he,ee),he),this.set(ee,K),this.changed={},this.initialize.apply(this,arguments)};a.extend(ue.prototype,g,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(R){return a.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(R){return this.attributes[R]},escape:function(R){return a.escape(this.get(R))},has:function(R){return this.get(R)!=null},matches:function(R){return!!a.iteratee(R,this)(this.attributes)},set:function(R,K,ee){if(R==null)return this;var he;if(typeof R=="object"?(he=R,ee=K):(he={})[R]=K,ee||(ee={}),!this._validate(he,ee))return!1;var Se=ee.unset,X=ee.silent,ve=[],fe=this._changing;this._changing=!0,fe||(this._previousAttributes=a.clone(this.attributes),this.changed={});var yt=this.attributes,St=this.changed,Ct=this._previousAttributes;for(var Q in he)K=he[Q],a.isEqual(yt[Q],K)||ve.push(Q),a.isEqual(Ct[Q],K)?delete St[Q]:St[Q]=K,Se?delete yt[Q]:yt[Q]=K;if(this.idAttribute in he){var le=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,le,ee)}if(!X){ve.length&&(this._pending=ee);for(var U=0;U<ve.length;U++)this.trigger("change:"+ve[U],this,yt[ve[U]],ee)}if(fe)return this;if(!X)for(;this._pending;)ee=this._pending,this._pending=!1,this.trigger("change",this,ee);return this._pending=!1,this._changing=!1,this},unset:function(R,K){return this.set(R,void 0,a.extend({},K,{unset:!0}))},clear:function(R){var K={};for(var ee in this.attributes)K[ee]=void 0;return this.set(K,a.extend({},R,{unset:!0}))},hasChanged:function(R){return R==null?!a.isEmpty(this.changed):a.has(this.changed,R)},changedAttributes:function(R){if(!R)return this.hasChanged()?a.clone(this.changed):!1;var K=this._changing?this._previousAttributes:this.attributes,ee={},he;for(var Se in R){var X=R[Se];a.isEqual(K[Se],X)||(ee[Se]=X,he=!0)}return he?ee:!1},previous:function(R){return R==null||!this._previousAttributes?null:this._previousAttributes[R]},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(R){R=a.extend({parse:!0},R);var K=this,ee=R.success;return R.success=function(he){var Se=R.parse?K.parse(he,R):he;if(!K.set(Se,R))return!1;ee&&ee.call(R.context,K,he,R),K.trigger("sync",K,he,R)},Lt(this,R),this.sync("read",this,R)},save:function(R,K,ee){var he;R==null||typeof R=="object"?(he=R,ee=K):(he={})[R]=K,ee=a.extend({validate:!0,parse:!0},ee);var Se=ee.wait;if(he&&!Se){if(!this.set(he,ee))return!1}else if(!this._validate(he,ee))return!1;var X=this,ve=ee.success,fe=this.attributes;ee.success=function(Ct){X.attributes=fe;var Q=ee.parse?X.parse(Ct,ee):Ct;if(Se&&(Q=a.extend({},he,Q)),Q&&!X.set(Q,ee))return!1;ve&&ve.call(ee.context,X,Ct,ee),X.trigger("sync",X,Ct,ee)},Lt(this,ee),he&&Se&&(this.attributes=a.extend({},fe,he));var yt=this.isNew()?"create":ee.patch?"patch":"update";yt==="patch"&&!ee.attrs&&(ee.attrs=he);var St=this.sync(yt,this,ee);return this.attributes=fe,St},destroy:function(R){R=R?a.clone(R):{};var K=this,ee=R.success,he=R.wait,Se=function(){K.stopListening(),K.trigger("destroy",K,K.collection,R)};R.success=function(ve){he&&Se(),ee&&ee.call(R.context,K,ve,R),K.isNew()||K.trigger("sync",K,ve,R)};var X=!1;return this.isNew()?a.defer(R.success):(Lt(this,R),X=this.sync("delete",this,R)),he||Se(),X},url:function(){var R=a.result(this,"urlRoot")||a.result(this.collection,"url")||xn();if(this.isNew())return R;var K=this.get(this.idAttribute);return R.replace(/[^\/]$/,"$&/")+encodeURIComponent(K)},parse:function(R,K){return R},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(R){return this._validate({},a.extend({},R,{validate:!0}))},_validate:function(R,K){if(!K.validate||!this.validate)return!0;R=a.extend({},this.attributes,R);var ee=this.validationError=this.validate(R,K)||null;return ee?(this.trigger("invalid",this,ee,a.extend(K,{validationError:ee})),!1):!0}});var Y=s.Collection=function(R,K){K||(K={}),this.preinitialize.apply(this,arguments),K.model&&(this.model=K.model),K.comparator!==void 0&&(this.comparator=K.comparator),this._reset(),this.initialize.apply(this,arguments),R&&this.reset(R,a.extend({silent:!0},K))},L={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},$=function(R,K,ee){ee=Math.min(Math.max(ee,0),R.length);var he=Array(R.length-ee),Se=K.length,X;for(X=0;X<he.length;X++)he[X]=R[X+ee];for(X=0;X<Se;X++)R[X+ee]=K[X];for(X=0;X<he.length;X++)R[X+Se+ee]=he[X]};a.extend(Y.prototype,g,{model:ue,preinitialize:function(){},initialize:function(){},toJSON:function(R){return this.map(function(K){return K.toJSON(R)})},sync:function(){return s.sync.apply(this,arguments)},add:function(R,K){return this.set(R,a.extend({merge:!1},K,k))},remove:function(R,K){K=a.extend({},K);var ee=!a.isArray(R);R=ee?[R]:R.slice();var he=this._removeModels(R,K);return!K.silent&&he.length&&(K.changes={added:[],merged:[],removed:he},this.trigger("update",this,K)),ee?he[0]:he},set:function(R,K){if(R!=null){K=a.extend({},L,K),K.parse&&!this._isModel(R)&&(R=this.parse(R,K)||[]);var ee=!a.isArray(R);R=ee?[R]:R.slice();var he=K.at;he!=null&&(he=+he),he>this.length&&(he=this.length),he<0&&(he+=this.length+1);var Se=[],X=[],ve=[],fe=[],yt={},St=K.add,Ct=K.merge,Q=K.remove,le=!1,U=this.comparator&&he==null&&K.sort!==!1,Ne=a.isString(this.comparator)?this.comparator:null,ye,Ue;for(Ue=0;Ue<R.length;Ue++){ye=R[Ue];var lt=this.get(ye);if(lt){if(Ct&&ye!==lt){var at=this._isModel(ye)?ye.attributes:ye;K.parse&&(at=lt.parse(at,K)),lt.set(at,K),ve.push(lt),U&&!le&&(le=lt.hasChanged(Ne))}yt[lt.cid]||(yt[lt.cid]=!0,Se.push(lt)),R[Ue]=lt}else St&&(ye=R[Ue]=this._prepareModel(ye,K),ye&&(X.push(ye),this._addReference(ye,K),yt[ye.cid]=!0,Se.push(ye)))}if(Q){for(Ue=0;Ue<this.length;Ue++)ye=this.models[Ue],yt[ye.cid]||fe.push(ye);fe.length&&this._removeModels(fe,K)}var tt=!1,Tt=!U&&St&&Q;if(Se.length&&Tt?(tt=this.length!==Se.length||a.some(this.models,function(qt,en){return qt!==Se[en]}),this.models.length=0,$(this.models,Se,0),this.length=this.models.length):X.length&&(U&&(le=!0),$(this.models,X,he??this.length),this.length=this.models.length),le&&this.sort({silent:!0}),!K.silent){for(Ue=0;Ue<X.length;Ue++)he!=null&&(K.index=he+Ue),ye=X[Ue],ye.trigger("add",ye,this,K);(le||tt)&&this.trigger("sort",this,K),(X.length||fe.length||ve.length)&&(K.changes={added:X,removed:fe,merged:ve},this.trigger("update",this,K))}return ee?R[0]:R}},reset:function(R,K){K=K?a.clone(K):{};for(var ee=0;ee<this.models.length;ee++)this._removeReference(this.models[ee],K);return K.previousModels=this.models,this._reset(),R=this.add(R,a.extend({silent:!0},K)),K.silent||this.trigger("reset",this,K),R},push:function(R,K){return this.add(R,a.extend({at:this.length},K))},pop:function(R){var K=this.at(this.length-1);return this.remove(K,R)},unshift:function(R,K){return this.add(R,a.extend({at:0},K))},shift:function(R){var K=this.at(0);return this.remove(K,R)},slice:function(){return f.apply(this.models,arguments)},get:function(R){if(R!=null)return this._byId[R]||this._byId[this.modelId(this._isModel(R)?R.attributes:R,R.idAttribute)]||R.cid&&this._byId[R.cid]},has:function(R){return this.get(R)!=null},at:function(R){return R<0&&(R+=this.length),this.models[R]},where:function(R,K){return this[K?"find":"filter"](R)},findWhere:function(R){return this.where(R,!0)},sort:function(R){var K=this.comparator;if(!K)throw new Error("Cannot sort a set without a comparator");R||(R={});var ee=K.length;return a.isFunction(K)&&(K=K.bind(this)),ee===1||a.isString(K)?this.models=this.sortBy(K):this.models.sort(K),R.silent||this.trigger("sort",this,R),this},pluck:function(R){return this.map(R+"")},fetch:function(R){R=a.extend({parse:!0},R);var K=R.success,ee=this;return R.success=function(he){var Se=R.reset?"reset":"set";ee[Se](he,R),K&&K.call(R.context,ee,he,R),ee.trigger("sync",ee,he,R)},Lt(this,R),this.sync("read",this,R)},create:function(R,K){K=K?a.clone(K):{};var ee=K.wait;if(R=this._prepareModel(R,K),!R)return!1;ee||this.add(R,K);var he=this,Se=K.success;return K.success=function(X,ve,fe){ee&&he.add(X,fe),Se&&Se.call(fe.context,X,ve,fe)},R.save(null,K),R},parse:function(R,K){return R},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(R,K){return R[K||this.model.prototype.idAttribute||"id"]},values:function(){return new T(this,O)},keys:function(){return new T(this,Z)},entries:function(){return new T(this,ce)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(R,K){if(this._isModel(R))return R.collection||(R.collection=this),R;K=K?a.clone(K):{},K.collection=this;var ee;return this.model.prototype?ee=new this.model(R,K):ee=this.model(R,K),ee.validationError?(this.trigger("invalid",this,ee.validationError,K),!1):ee},_removeModels:function(R,K){for(var ee=[],he=0;he<R.length;he++){var Se=this.get(R[he]);if(Se){var X=this.indexOf(Se);this.models.splice(X,1),this.length--,delete this._byId[Se.cid];var ve=this.modelId(Se.attributes,Se.idAttribute);ve!=null&&delete this._byId[ve],K.silent||(K.index=X,Se.trigger("remove",Se,this,K)),ee.push(Se),this._removeReference(Se,K)}}return ee},_isModel:function(R){return R instanceof ue},_addReference:function(R,K){this._byId[R.cid]=R;var ee=this.modelId(R.attributes,R.idAttribute);ee!=null&&(this._byId[ee]=R),R.on("all",this._onModelEvent,this)},_removeReference:function(R,K){delete this._byId[R.cid];var ee=this.modelId(R.attributes,R.idAttribute);ee!=null&&delete this._byId[ee],this===R.collection&&delete R.collection,R.off("all",this._onModelEvent,this)},_onModelEvent:function(R,K,ee,he){if(K){if((R==="add"||R==="remove")&&ee!==this)return;if(R==="destroy"&&this.remove(K,he),R==="changeId"){var Se=this.modelId(K.previousAttributes(),K.idAttribute),X=this.modelId(K.attributes,K.idAttribute);Se!=null&&delete this._byId[Se],X!=null&&(this._byId[X]=K)}}this.trigger.apply(this,arguments)}});var I=typeof Symbol=="function"&&Symbol.iterator;I&&(Y.prototype[I]=Y.prototype.values);var T=function(R,K){this._collection=R,this._kind=K,this._index=0},O=1,Z=2,ce=3;I&&(T.prototype[I]=function(){return this}),T.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var R=this._collection.at(this._index);this._index++;var K;if(this._kind===O)K=R;else{var ee=this._collection.modelId(R.attributes,R.idAttribute);this._kind===Z?K=ee:K=[ee,R]}return{value:K,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var V=s.View=function(R){this.cid=a.uniqueId("view"),this.preinitialize.apply(this,arguments),a.extend(this,a.pick(R,Ee)),this._ensureElement(),this.initialize.apply(this,arguments)},xe=/^(\S+)\s*(.*)$/,Ee=["model","collection","el","id","attributes","className","tagName","events"];a.extend(V.prototype,g,{tagName:"div",$:function(R){return this.$el.find(R)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(R){return this.undelegateEvents(),this._setElement(R),this.delegateEvents(),this},_setElement:function(R){this.$el=R instanceof s.$?R:s.$(R),this.el=this.$el[0]},delegateEvents:function(R){if(R||(R=a.result(this,"events")),!R)return this;this.undelegateEvents();for(var K in R){var ee=R[K];if(a.isFunction(ee)||(ee=this[ee]),!!ee){var he=K.match(xe);this.delegate(he[1],he[2],ee.bind(this))}}return this},delegate:function(R,K,ee){return this.$el.on(R+".delegateEvents"+this.cid,K,ee),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(R,K,ee){return this.$el.off(R+".delegateEvents"+this.cid,K,ee),this},_createElement:function(R){return document.createElement(R)},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"));else{var R=a.extend({},a.result(this,"attributes"));this.id&&(R.id=a.result(this,"id")),this.className&&(R.class=a.result(this,"className")),this.setElement(this._createElement(a.result(this,"tagName"))),this._setAttributes(R)}},_setAttributes:function(R){this.$el.attr(R)}});var ze=function(R,K,ee,he){switch(K){case 1:return function(){return R[ee](this[he])};case 2:return function(Se){return R[ee](this[he],Se)};case 3:return function(Se,X){return R[ee](this[he],ft(Se,this),X)};case 4:return function(Se,X,ve){return R[ee](this[he],ft(Se,this),X,ve)};default:return function(){var Se=f.call(arguments);return Se.unshift(this[he]),R[ee].apply(R,Se)}}},pt=function(R,K,ee,he){a.each(ee,function(Se,X){K[X]&&(R.prototype[X]=ze(K,Se,X,he))})},ft=function(R,K){return a.isFunction(R)?R:a.isObject(R)&&!K._isModel(R)?Pt(R):a.isString(R)?function(ee){return ee.get(R)}:R},Pt=function(R){var K=a.matches(R);return function(ee){return K(ee.attributes)}},be={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Te={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a.each([[Y,be,"models"],[ue,Te,"attributes"]],function(R){var K=R[0],ee=R[1],he=R[2];K.mixin=function(Se){var X=a.reduce(a.functions(Se),function(ve,fe){return ve[fe]=0,ve},{});pt(K,Se,X,he)},pt(K,a,ee,he)}),s.sync=function(R,K,ee){var he=$e[R];a.defaults(ee||(ee={}),{emulateHTTP:s.emulateHTTP,emulateJSON:s.emulateJSON});var Se={type:he,dataType:"json"};if(ee.url||(Se.url=a.result(K,"url")||xn()),ee.data==null&&K&&(R==="create"||R==="update"||R==="patch")&&(Se.contentType="application/json",Se.data=JSON.stringify(ee.attrs||K.toJSON(ee))),ee.emulateJSON&&(Se.contentType="application/x-www-form-urlencoded",Se.data=Se.data?{model:Se.data}:{}),ee.emulateHTTP&&(he==="PUT"||he==="DELETE"||he==="PATCH")){Se.type="POST",ee.emulateJSON&&(Se.data._method=he);var X=ee.beforeSend;ee.beforeSend=function(yt){if(yt.setRequestHeader("X-HTTP-Method-Override",he),X)return X.apply(this,arguments)}}Se.type!=="GET"&&!ee.emulateJSON&&(Se.processData=!1);var ve=ee.error;ee.error=function(yt,St,Ct){ee.textStatus=St,ee.errorThrown=Ct,ve&&ve.call(ee.context,yt,St,Ct)};var fe=ee.xhr=s.ajax(a.extend(Se,ee));return K.trigger("request",K,fe,ee),fe};var $e={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var de=s.Router=function(R){R||(R={}),this.preinitialize.apply(this,arguments),R.routes&&(this.routes=R.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Ae=/\((.*?)\)/g,Re=/(\(\?)?:\w+/g,Je=/\*\w+/g,Qe=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(de.prototype,g,{preinitialize:function(){},initialize:function(){},route:function(R,K,ee){a.isRegExp(R)||(R=this._routeToRegExp(R)),a.isFunction(K)&&(ee=K,K=""),ee||(ee=this[K]);var he=this;return s.history.route(R,function(Se){var X=he._extractParameters(R,Se);he.execute(ee,X,K)!==!1&&(he.trigger.apply(he,["route:"+K].concat(X)),he.trigger("route",K,X),s.history.trigger("route",he,K,X))}),this},execute:function(R,K,ee){R&&R.apply(this,K)},navigate:function(R,K){return s.history.navigate(R,K),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var R,K=a.keys(this.routes);(R=K.pop())!=null;)this.route(R,this.routes[R])}},_routeToRegExp:function(R){return R=R.replace(Qe,"\\$&").replace(Ae,"(?:$1)?").replace(Re,function(K,ee){return ee?K:"([^/?]+)"}).replace(Je,"([^?]*?)"),new RegExp("^"+R+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(R,K){var ee=R.exec(K).slice(1);return a.map(ee,function(he,Se){return Se===ee.length-1?he||null:he?decodeURIComponent(he):null})}});var qe=s.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ut=/^[#\/]|\s+$/g,Xt=/^\/+|\/+$/g,It=/#.*$/;qe.started=!1,a.extend(qe.prototype,g,{interval:50,atRoot:function(){var R=this.location.pathname.replace(/[^\/]$/,"$&/");return R===this.root&&!this.getSearch()},matchRoot:function(){var R=this.decodeFragment(this.location.pathname),K=R.slice(0,this.root.length-1)+"/";return K===this.root},decodeFragment:function(R){return decodeURI(R.replace(/%25/g,"%2525"))},getSearch:function(){var R=this.location.href.replace(/#.*/,"").match(/\?.+/);return R?R[0]:""},getHash:function(R){var K=(R||this).location.href.match(/#(.*)$/);return K?K[1]:""},getPath:function(){var R=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return R.charAt(0)==="/"?R.slice(1):R},getFragment:function(R){return R==null&&(this._usePushState||!this._wantsHashChange?R=this.getPath():R=this.getHash()),R.replace(ut,"")},start:function(R){if(qe.started)throw new Error("Backbone.history has already been started");if(qe.started=!0,this.options=a.extend({root:"/"},this.options,R),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Xt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var K=this.root.slice(0,-1)||"/";return this.location.replace(K+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var ee=document.body,he=ee.insertBefore(this.iframe,ee.firstChild).contentWindow;he.document.open(),he.document.close(),he.location.hash="#"+this.fragment}var Se=window.addEventListener||function(X,ve){return attachEvent("on"+X,ve)};if(this._usePushState?Se("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Se("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var R=window.removeEventListener||function(K,ee){return detachEvent("on"+K,ee)};this._usePushState?R("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&R("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),qe.started=!1},route:function(R,K){this.handlers.unshift({route:R,callback:K})},checkUrl:function(R){var K=this.getFragment();if(K===this.fragment&&this.iframe&&(K=this.getHash(this.iframe.contentWindow)),K===this.fragment)return!1;this.iframe&&this.navigate(K),this.loadUrl()},loadUrl:function(R){return this.matchRoot()?(R=this.fragment=this.getFragment(R),a.some(this.handlers,function(K){if(K.route.test(R))return K.callback(R),!0})):!1},navigate:function(R,K){if(!qe.started)return!1;(!K||K===!0)&&(K={trigger:!!K}),R=this.getFragment(R||"");var ee=this.root;(R===""||R.charAt(0)==="?")&&(ee=ee.slice(0,-1)||"/");var he=ee+R;R=R.replace(It,"");var Se=this.decodeFragment(R);if(this.fragment!==Se){if(this.fragment=Se,this._usePushState)this.history[K.replace?"replaceState":"pushState"]({},document.title,he);else if(this._wantsHashChange){if(this._updateHash(this.location,R,K.replace),this.iframe&&R!==this.getHash(this.iframe.contentWindow)){var X=this.iframe.contentWindow;K.replace||(X.document.open(),X.document.close()),this._updateHash(X.location,R,K.replace)}}else return this.location.assign(he);if(K.trigger)return this.loadUrl(R)}},_updateHash:function(R,K,ee){if(ee){var he=R.href.replace(/(javascript:|#).*$/,"");R.replace(he+"#"+K)}else R.hash="#"+K}}),s.history=new qe;var Ln=function(R,K){var ee=this,he;return R&&a.has(R,"constructor")?he=R.constructor:he=function(){return ee.apply(this,arguments)},a.extend(he,ee,K),he.prototype=a.create(ee.prototype,R),he.prototype.constructor=he,he.__super__=ee.prototype,he};ue.extend=Y.extend=de.extend=V.extend=qe.extend=Ln;var xn=function(){throw new Error('A "url" property or function must be specified')},Lt=function(R,K){var ee=K.error;K.error=function(he){ee&&ee.call(K.context,R,he,K),R.trigger("error",R,he,K)}};return s})},862:(r,t,e)=>{(function(n){n(e(237))})(function(n){n.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s){return/^[;{}]$/.test(s)}}),n.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(o,s,a,c){return this.jsonMode?/^[\[,{]$/.test(s)||/^}/.test(a):s==";"&&c.lexical&&c.lexical.type==")"?!1:/^[;{}]$/.test(s)&&!/^;/.test(a)}});var i=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;n.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(o,s,a,c){var u=!1;return this.configuration=="html"&&(u=c.context?i.test(c.context.tagName):!1),!u&&(o=="tag"&&/>$/.test(s)&&c.context||/^</.test(a))}}),n.defineExtension("commentRange",function(o,s,a){var c=this,u=n.innerMode(c.getMode(),c.getTokenAt(s).state).mode;c.operation(function(){if(o)c.replaceRange(u.commentEnd,a),c.replaceRange(u.commentStart,s),s.line==a.line&&s.ch==a.ch&&c.setCursor(s.line,s.ch+u.commentStart.length);else{var f=c.getRange(s,a),g=f.indexOf(u.commentStart),v=f.lastIndexOf(u.commentEnd);g>-1&&v>-1&&v>g&&(f=f.substr(0,g)+f.substring(g+u.commentStart.length,v)+f.substr(v+u.commentEnd.length)),c.replaceRange(f,s,a)}})}),n.defineExtension("autoIndentRange",function(o,s){var a=this;this.operation(function(){for(var c=o.line;c<=s.line;c++)a.indentLine(c,"smart")})}),n.defineExtension("autoFormatRange",function(o,s){var a=this,c=a.getMode(),u=a.getRange(o,s).split(`
`),f=n.copyState(c,a.getTokenAt(o).state),g=a.getOption("tabSize"),v="",_=0,b=o.ch===0;function C(){v+=`
`,b=!0,++_}for(var S=0;S<u.length;++S){for(var j=new n.StringStream(u[S],g);!j.eol();){var q=n.innerMode(c,f),N=c.token(j,f),G=j.current();j.start=j.pos,(!b||/\S/.test(G))&&(v+=G,b=!1),!b&&q.mode.newlineAfterToken&&q.mode.newlineAfterToken(N,G,j.string.slice(j.pos)||u[S+1]||"",q.state)&&C()}!j.pos&&c.blankLine&&c.blankLine(f),!b&&S<u.length-1&&C()}a.operation(function(){a.replaceRange(v,o,s);for(var se=o.line+1,ue=o.line+_;se<=ue;++se)a.indentLine(se,"smart");a.setSelection(o,a.getCursor(!1))})})})},237:function(r){(function(t,e){r.exports=e()})(this,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),a=i||o||s,c=a&&(i?document.documentMode||6:+(s||o)[1]),u=!s&&/WebKit\//.test(t),f=u&&/Qt\/\d+\.\d+/.test(t),g=!s&&/Chrome\//.test(t),v=/Opera\//.test(t),_=/Apple Computer/.test(navigator.vendor),b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),C=/PhantomJS/.test(t),S=_&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),j=/Android/.test(t),q=S||j||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),N=S||/Mac/.test(e),G=/\bCrOS\b/.test(t),se=/win/i.test(e),ue=v&&t.match(/Version\/(\d*\.\d*)/);ue&&(ue=Number(ue[1])),ue&&ue>=15&&(v=!1,u=!0);var Y=N&&(f||v&&(ue==null||ue<12.11)),L=n||a&&c>=9;function k(l){return new RegExp("(^|\\s)"+l+"(?:$|\\s)\\s*")}var $=function(l,d){var p=l.className,h=k(d).exec(p);if(h){var m=p.slice(h.index+h[0].length);l.className=p.slice(0,h.index)+(m?h[1]+m:"")}};function I(l){for(var d=l.childNodes.length;d>0;--d)l.removeChild(l.firstChild);return l}function T(l,d){return I(l).appendChild(d)}function O(l,d,p,h){var m=document.createElement(l);if(p&&(m.className=p),h&&(m.style.cssText=h),typeof d=="string")m.appendChild(document.createTextNode(d));else if(d)for(var w=0;w<d.length;++w)m.appendChild(d[w]);return m}function Z(l,d,p,h){var m=O(l,d,p,h);return m.setAttribute("role","presentation"),m}var ce;document.createRange?ce=function(l,d,p,h){var m=document.createRange();return m.setEnd(h||l,p),m.setStart(l,d),m}:ce=function(l,d,p){var h=document.body.createTextRange();try{h.moveToElementText(l.parentNode)}catch{return h}return h.collapse(!0),h.moveEnd("character",p),h.moveStart("character",d),h};function V(l,d){if(d.nodeType==3&&(d=d.parentNode),l.contains)return l.contains(d);do if(d.nodeType==11&&(d=d.host),d==l)return!0;while(d=d.parentNode)}function xe(){var l;try{l=document.activeElement}catch{l=document.body||null}for(;l&&l.shadowRoot&&l.shadowRoot.activeElement;)l=l.shadowRoot.activeElement;return l}function Ee(l,d){var p=l.className;k(d).test(p)||(l.className+=(p?" ":"")+d)}function ze(l,d){for(var p=l.split(" "),h=0;h<p.length;h++)p[h]&&!k(p[h]).test(d)&&(d+=" "+p[h]);return d}var pt=function(l){l.select()};S?pt=function(l){l.selectionStart=0,l.selectionEnd=l.value.length}:a&&(pt=function(l){try{l.select()}catch{}});function ft(l){var d=Array.prototype.slice.call(arguments,1);return function(){return l.apply(null,d)}}function Pt(l,d,p){d||(d={});for(var h in l)l.hasOwnProperty(h)&&(p!==!1||!d.hasOwnProperty(h))&&(d[h]=l[h]);return d}function be(l,d,p,h,m){d==null&&(d=l.search(/[^\s\u00a0]/),d==-1&&(d=l.length));for(var w=h||0,x=m||0;;){var A=l.indexOf("	",w);if(A<0||A>=d)return x+(d-w);x+=A-w,x+=p-x%p,w=A+1}}var Te=function(){this.id=null,this.f=null,this.time=0,this.handler=ft(this.onTimeout,this)};Te.prototype.onTimeout=function(l){l.id=0,l.time<=+new Date?l.f():setTimeout(l.handler,l.time-+new Date)},Te.prototype.set=function(l,d){this.f=d;var p=+new Date+l;(!this.id||p<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,l),this.time=p)};function $e(l,d){for(var p=0;p<l.length;++p)if(l[p]==d)return p;return-1}var de=50,Ae={toString:function(){return"CodeMirror.Pass"}},Re={scroll:!1},Je={origin:"*mouse"},Qe={origin:"+move"};function qe(l,d,p){for(var h=0,m=0;;){var w=l.indexOf("	",h);w==-1&&(w=l.length);var x=w-h;if(w==l.length||m+x>=d)return h+Math.min(x,d-m);if(m+=w-h,m+=p-m%p,h=w+1,m>=d)return h}}var ut=[""];function Xt(l){for(;ut.length<=l;)ut.push(It(ut)+" ");return ut[l]}function It(l){return l[l.length-1]}function Ln(l,d){for(var p=[],h=0;h<l.length;h++)p[h]=d(l[h],h);return p}function xn(l,d,p){for(var h=0,m=p(d);h<l.length&&p(l[h])<=m;)h++;l.splice(h,0,d)}function Lt(){}function R(l,d){var p;return Object.create?p=Object.create(l):(Lt.prototype=l,p=new Lt),d&&Pt(d,p),p}var K=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(l){return/\w/.test(l)||l>"\x80"&&(l.toUpperCase()!=l.toLowerCase()||K.test(l))}function he(l,d){return d?d.source.indexOf("\\w")>-1&&ee(l)?!0:d.test(l):ee(l)}function Se(l){for(var d in l)if(l.hasOwnProperty(d)&&l[d])return!1;return!0}var X=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ve(l){return l.charCodeAt(0)>=768&&X.test(l)}function fe(l,d,p){for(;(p<0?d>0:d<l.length)&&ve(l.charAt(d));)d+=p;return d}function yt(l,d,p){for(var h=d>p?-1:1;;){if(d==p)return d;var m=(d+p)/2,w=h<0?Math.ceil(m):Math.floor(m);if(w==d)return l(w)?d:p;l(w)?p=w:d=w+h}}function St(l,d,p,h){if(!l)return h(d,p,"ltr",0);for(var m=!1,w=0;w<l.length;++w){var x=l[w];(x.from<p&&x.to>d||d==p&&x.to==d)&&(h(Math.max(x.from,d),Math.min(x.to,p),x.level==1?"rtl":"ltr",w),m=!0)}m||h(d,p,"ltr")}var Ct=null;function Q(l,d,p){var h;Ct=null;for(var m=0;m<l.length;++m){var w=l[m];if(w.from<d&&w.to>d)return m;w.to==d&&(w.from!=w.to&&p=="before"?h=m:Ct=m),w.from==d&&(w.from!=w.to&&p!="before"?h=m:Ct=m)}return h??Ct}var le=function(){var l="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function p(F){return F<=247?l.charAt(F):1424<=F&&F<=1524?"R":1536<=F&&F<=1785?d.charAt(F-1536):1774<=F&&F<=2220?"r":8192<=F&&F<=8203?"w":F==8204?"b":"L"}var h=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,m=/[stwN]/,w=/[LRr]/,x=/[Lb1n]/,A=/[1n]/;function M(F,te,ie){this.level=F,this.from=te,this.to=ie}return function(F,te){var ie=te=="ltr"?"L":"R";if(F.length==0||te=="ltr"&&!h.test(F))return!1;for(var _e=F.length,pe=[],Pe=0;Pe<_e;++Pe)pe.push(p(F.charCodeAt(Pe)));for(var Ve=0,Ye=ie;Ve<_e;++Ve){var it=pe[Ve];it=="m"?pe[Ve]=Ye:Ye=it}for(var vt=0,ot=ie;vt<_e;++vt){var _t=pe[vt];_t=="1"&&ot=="r"?pe[vt]="n":w.test(_t)&&(ot=_t,_t=="r"&&(pe[vt]="R"))}for(var jt=1,kt=pe[0];jt<_e-1;++jt){var nn=pe[jt];nn=="+"&&kt=="1"&&pe[jt+1]=="1"?pe[jt]="1":nn==","&&kt==pe[jt+1]&&(kt=="1"||kt=="n")&&(pe[jt]=kt),kt=nn}for(var Hn=0;Hn<_e;++Hn){var fi=pe[Hn];if(fi==",")pe[Hn]="N";else if(fi=="%"){var cr=void 0;for(cr=Hn+1;cr<_e&&pe[cr]=="%";++cr);for(var So=Hn&&pe[Hn-1]=="!"||cr<_e&&pe[cr]=="1"?"1":"N",ro=Hn;ro<cr;++ro)pe[ro]=So;Hn=cr-1}}for(var Rr=0,io=ie;Rr<_e;++Rr){var wi=pe[Rr];io=="L"&&wi=="1"?pe[Rr]="L":w.test(wi)&&(io=wi)}for(var Qr=0;Qr<_e;++Qr)if(m.test(pe[Qr])){var Nr=void 0;for(Nr=Qr+1;Nr<_e&&m.test(pe[Nr]);++Nr);for(var _r=(Qr?pe[Qr-1]:ie)=="L",oo=(Nr<_e?pe[Nr]:ie)=="L",Ju=_r==oo?_r?"L":"R":ie,_l=Qr;_l<Nr;++_l)pe[_l]=Ju;Qr=Nr-1}for(var Ti=[],Ys,hi=0;hi<_e;)if(x.test(pe[hi])){var gb=hi;for(++hi;hi<_e&&x.test(pe[hi]);++hi);Ti.push(new M(0,gb,hi))}else{var Ra=hi,wc=Ti.length,bc=te=="rtl"?1:0;for(++hi;hi<_e&&pe[hi]!="L";++hi);for(var ji=Ra;ji<hi;)if(A.test(pe[ji])){Ra<ji&&(Ti.splice(wc,0,new M(1,Ra,ji)),wc+=bc);var Zu=ji;for(++ji;ji<hi&&A.test(pe[ji]);++ji);Ti.splice(wc,0,new M(2,Zu,ji)),wc+=bc,Ra=ji}else++ji;Ra<hi&&Ti.splice(wc,0,new M(1,Ra,hi))}return te=="ltr"&&(Ti[0].level==1&&(Ys=F.match(/^\s+/))&&(Ti[0].from=Ys[0].length,Ti.unshift(new M(0,0,Ys[0].length))),It(Ti).level==1&&(Ys=F.match(/\s+$/))&&(It(Ti).to-=Ys[0].length,Ti.push(new M(0,_e-Ys[0].length,_e)))),te=="rtl"?Ti.reverse():Ti}}();function U(l,d){var p=l.order;return p==null&&(p=l.order=le(l.text,d)),p}var Ne=[],ye=function(l,d,p){if(l.addEventListener)l.addEventListener(d,p,!1);else if(l.attachEvent)l.attachEvent("on"+d,p);else{var h=l._handlers||(l._handlers={});h[d]=(h[d]||Ne).concat(p)}};function Ue(l,d){return l._handlers&&l._handlers[d]||Ne}function lt(l,d,p){if(l.removeEventListener)l.removeEventListener(d,p,!1);else if(l.detachEvent)l.detachEvent("on"+d,p);else{var h=l._handlers,m=h&&h[d];if(m){var w=$e(m,p);w>-1&&(h[d]=m.slice(0,w).concat(m.slice(w+1)))}}}function at(l,d){var p=Ue(l,d);if(p.length)for(var h=Array.prototype.slice.call(arguments,2),m=0;m<p.length;++m)p[m].apply(null,h)}function tt(l,d,p){return typeof d=="string"&&(d={type:d,preventDefault:function(){this.defaultPrevented=!0}}),at(l,p||d.type,l,d),ar(d)||d.codemirrorIgnore}function Tt(l){var d=l._handlers&&l._handlers.cursorActivity;if(d)for(var p=l.curOp.cursorActivityHandlers||(l.curOp.cursorActivityHandlers=[]),h=0;h<d.length;++h)$e(p,d[h])==-1&&p.push(d[h])}function qt(l,d){return Ue(l,d).length>0}function en(l){l.prototype.on=function(d,p){ye(this,d,p)},l.prototype.off=function(d,p){lt(this,d,p)}}function Jt(l){l.preventDefault?l.preventDefault():l.returnValue=!1}function Rn(l){l.stopPropagation?l.stopPropagation():l.cancelBubble=!0}function ar(l){return l.defaultPrevented!=null?l.defaultPrevented:l.returnValue==!1}function W(l){Jt(l),Rn(l)}function oe(l){return l.target||l.srcElement}function ge(l){var d=l.which;return d==null&&(l.button&1?d=1:l.button&2?d=3:l.button&4&&(d=2)),N&&l.ctrlKey&&d==1&&(d=3),d}var je=function(){if(a&&c<9)return!1;var l=O("div");return"draggable"in l||"dragDrop"in l}(),nt;function xt(l){if(nt==null){var d=O("span","\u200B");T(l,O("span",[d,document.createTextNode("x")])),l.firstChild.offsetHeight!=0&&(nt=d.offsetWidth<=1&&d.offsetHeight>2&&!(a&&c<8))}var p=nt?O("span","\u200B"):O("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return p.setAttribute("cm-text",""),p}var Ht;function fn(l){if(Ht!=null)return Ht;var d=T(l,document.createTextNode("A\u062EA")),p=ce(d,0,1).getBoundingClientRect(),h=ce(d,1,2).getBoundingClientRect();return I(l),!p||p.left==p.right?!1:Ht=h.right-p.right<3}var Pn=`

b`.split(/\n/).length!=3?function(l){for(var d=0,p=[],h=l.length;d<=h;){var m=l.indexOf(`
`,d);m==-1&&(m=l.length);var w=l.slice(d,l.charAt(m-1)=="\r"?m-1:m),x=w.indexOf("\r");x!=-1?(p.push(w.slice(0,x)),d+=x+1):(p.push(w),d=m+1)}return p}:function(l){return l.split(/\r\n?|\n/)},In=window.getSelection?function(l){try{return l.selectionStart!=l.selectionEnd}catch{return!1}}:function(l){var d;try{d=l.ownerDocument.selection.createRange()}catch{}return!d||d.parentElement()!=l?!1:d.compareEndPoints("StartToEnd",d)!=0},zr=function(){var l=O("div");return"oncopy"in l?!0:(l.setAttribute("oncopy","return;"),typeof l.oncopy=="function")}(),Cr=null;function $n(l){if(Cr!=null)return Cr;var d=T(l,O("span","x")),p=d.getBoundingClientRect(),h=ce(d,0,1).getBoundingClientRect();return Cr=Math.abs(p.left-h.left)>1}var $r={},Nn={};function Wn(l,d){arguments.length>2&&(d.dependencies=Array.prototype.slice.call(arguments,2)),$r[l]=d}function Vn(l,d){Nn[l]=d}function Ci(l){if(typeof l=="string"&&Nn.hasOwnProperty(l))l=Nn[l];else if(l&&typeof l.name=="string"&&Nn.hasOwnProperty(l.name)){var d=Nn[l.name];typeof d=="string"&&(d={name:d}),l=R(d,l),l.name=d.name}else{if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(l))return Ci("application/xml");if(typeof l=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(l))return Ci("application/json")}return typeof l=="string"?{name:l}:l||{name:"null"}}function cn(l,d){d=Ci(d);var p=$r[d.name];if(!p)return cn(l,"text/plain");var h=p(l,d);if(Pr.hasOwnProperty(d.name)){var m=Pr[d.name];for(var w in m)m.hasOwnProperty(w)&&(h.hasOwnProperty(w)&&(h["_"+w]=h[w]),h[w]=m[w])}if(h.name=d.name,d.helperType&&(h.helperType=d.helperType),d.modeProps)for(var x in d.modeProps)h[x]=d.modeProps[x];return h}var Pr={};function Dt(l,d){var p=Pr.hasOwnProperty(l)?Pr[l]:Pr[l]={};Pt(d,p)}function Ir(l,d){if(d===!0)return d;if(l.copyState)return l.copyState(d);var p={};for(var h in d){var m=d[h];m instanceof Array&&(m=m.concat([])),p[h]=m}return p}function Xn(l,d){for(var p;l.innerMode&&(p=l.innerMode(d),!(!p||p.mode==l));)d=p.state,l=p.mode;return p||{mode:l,state:d}}function Wr(l,d,p){return l.startState?l.startState(d,p):!0}var gn=function(l,d,p){this.pos=this.start=0,this.string=l,this.tabSize=d||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=p};gn.prototype.eol=function(){return this.pos>=this.string.length},gn.prototype.sol=function(){return this.pos==this.lineStart},gn.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},gn.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},gn.prototype.eat=function(l){var d=this.string.charAt(this.pos),p;if(typeof l=="string"?p=d==l:p=d&&(l.test?l.test(d):l(d)),p)return++this.pos,d},gn.prototype.eatWhile=function(l){for(var d=this.pos;this.eat(l););return this.pos>d},gn.prototype.eatSpace=function(){for(var l=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>l},gn.prototype.skipToEnd=function(){this.pos=this.string.length},gn.prototype.skipTo=function(l){var d=this.string.indexOf(l,this.pos);if(d>-1)return this.pos=d,!0},gn.prototype.backUp=function(l){this.pos-=l},gn.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=be(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?be(this.string,this.lineStart,this.tabSize):0)},gn.prototype.indentation=function(){return be(this.string,null,this.tabSize)-(this.lineStart?be(this.string,this.lineStart,this.tabSize):0)},gn.prototype.match=function(l,d,p){if(typeof l=="string"){var h=function(x){return p?x.toLowerCase():x},m=this.string.substr(this.pos,l.length);if(h(m)==h(l))return d!==!1&&(this.pos+=l.length),!0}else{var w=this.string.slice(this.pos).match(l);return w&&w.index>0?null:(w&&d!==!1&&(this.pos+=w[0].length),w)}},gn.prototype.current=function(){return this.string.slice(this.start,this.pos)},gn.prototype.hideFirstChars=function(l,d){this.lineStart+=l;try{return d()}finally{this.lineStart-=l}},gn.prototype.lookAhead=function(l){var d=this.lineOracle;return d&&d.lookAhead(l)},gn.prototype.baseToken=function(){var l=this.lineOracle;return l&&l.baseToken(this.pos)};function ht(l,d){if(d-=l.first,d<0||d>=l.size)throw new Error("There is no line "+(d+l.first)+" in the document.");for(var p=l;!p.lines;)for(var h=0;;++h){var m=p.children[h],w=m.chunkSize();if(d<w){p=m;break}d-=w}return p.lines[d]}function pr(l,d,p){var h=[],m=d.line;return l.iter(d.line,p.line+1,function(w){var x=w.text;m==p.line&&(x=x.slice(0,p.ch)),m==d.line&&(x=x.slice(d.ch)),h.push(x),++m}),h}function oi(l,d,p){var h=[];return l.iter(d,p,function(m){h.push(m.text)}),h}function Qn(l,d){var p=d-l.height;if(p)for(var h=l;h;h=h.parent)h.height+=p}function zt(l){if(l.parent==null)return null;for(var d=l.parent,p=$e(d.lines,l),h=d.parent;h;d=h,h=h.parent)for(var m=0;h.children[m]!=d;++m)p+=h.children[m].chunkSize();return p+d.first}function En(l,d){var p=l.first;e:do{for(var h=0;h<l.children.length;++h){var m=l.children[h],w=m.height;if(d<w){l=m;continue e}d-=w,p+=m.chunkSize()}return p}while(!l.lines);for(var x=0;x<l.lines.length;++x){var A=l.lines[x],M=A.height;if(d<M)break;d-=M}return p+x}function si(l,d){return d>=l.first&&d<l.first+l.size}function Dr(l,d){return String(l.lineNumberFormatter(d+l.firstLineNumber))}function Be(l,d,p){if(p===void 0&&(p=null),!(this instanceof Be))return new Be(l,d,p);this.line=l,this.ch=d,this.sticky=p}function Nt(l,d){return l.line-d.line||l.ch-d.ch}function yi(l,d){return l.sticky==d.sticky&&Nt(l,d)==0}function H(l){return Be(l.line,l.ch)}function re(l,d){return Nt(l,d)<0?d:l}function De(l,d){return Nt(l,d)<0?l:d}function He(l,d){return Math.max(l.first,Math.min(d,l.first+l.size-1))}function Ge(l,d){if(d.line<l.first)return Be(l.first,0);var p=l.first+l.size-1;return d.line>p?Be(p,ht(l,p).text.length):Gt(d,ht(l,d.line).text.length)}function Gt(l,d){var p=l.ch;return p==null||p>d?Be(l.line,d):p<0?Be(l.line,0):l}function tn(l,d){for(var p=[],h=0;h<d.length;h++)p[h]=Ge(l,d[h]);return p}var Sn=function(l,d){this.state=l,this.lookAhead=d},An=function(l,d,p,h){this.state=d,this.doc=l,this.line=p,this.maxLookAhead=h||0,this.baseTokens=null,this.baseTokenPos=1};An.prototype.lookAhead=function(l){var d=this.doc.getLine(this.line+l);return d!=null&&l>this.maxLookAhead&&(this.maxLookAhead=l),d},An.prototype.baseToken=function(l){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=l;)this.baseTokenPos+=2;var d=this.baseTokens[this.baseTokenPos+1];return{type:d&&d.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-l}},An.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},An.fromSaved=function(l,d,p){return d instanceof Sn?new An(l,Ir(l.mode,d.state),p,d.lookAhead):new An(l,Ir(l.mode,d),p)},An.prototype.save=function(l){var d=l!==!1?Ir(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Sn(d,this.maxLookAhead):d};function ys(l,d,p,h){var m=[l.state.modeGen],w={};Yi(l,d.text,l.doc.mode,p,function(F,te){return m.push(F,te)},w,h);for(var x=p.state,A=function(F){p.baseTokens=m;var te=l.state.overlays[F],ie=1,_e=0;p.state=!0,Yi(l,d.text,te.mode,p,function(pe,Pe){for(var Ve=ie;_e<pe;){var Ye=m[ie];Ye>pe&&m.splice(ie,1,pe,m[ie+1],Ye),ie+=2,_e=Math.min(pe,Ye)}if(Pe)if(te.opaque)m.splice(Ve,ie-Ve,pe,"overlay "+Pe),ie=Ve+2;else for(;Ve<ie;Ve+=2){var it=m[Ve+1];m[Ve+1]=(it?it+" ":"")+"overlay "+Pe}},w),p.state=x,p.baseTokens=null,p.baseTokenPos=1},M=0;M<l.state.overlays.length;++M)A(M);return{styles:m,classes:w.bgClass||w.textClass?w:null}}function Qi(l,d,p){if(!d.styles||d.styles[0]!=l.state.modeGen){var h=gr(l,zt(d)),m=d.text.length>l.options.maxHighlightLength&&Ir(l.doc.mode,h.state),w=ys(l,d,h);m&&(h.state=m),d.stateAfter=h.save(!m),d.styles=w.styles,w.classes?d.styleClasses=w.classes:d.styleClasses&&(d.styleClasses=null),p===l.doc.highlightFrontier&&(l.doc.modeFrontier=Math.max(l.doc.modeFrontier,++l.doc.highlightFrontier))}return d.styles}function gr(l,d,p){var h=l.doc,m=l.display;if(!h.mode.startState)return new An(h,!0,d);var w=xi(l,d,p),x=w>h.first&&ht(h,w-1).stateAfter,A=x?An.fromSaved(h,x,w):new An(h,Wr(h.mode),w);return h.iter(w,d,function(M){qr(l,M.text,A);var F=A.line;M.stateAfter=F==d-1||F%5==0||F>=m.viewFrom&&F<m.viewTo?A.save():null,A.nextLine()}),p&&(h.modeFrontier=A.line),A}function qr(l,d,p,h){var m=l.doc.mode,w=new gn(d,l.options.tabSize,p);for(w.start=w.pos=h||0,d==""&&es(m,p.state);!w.eol();)jo(m,w,p.state),w.start=w.pos}function es(l,d){if(l.blankLine)return l.blankLine(d);if(l.innerMode){var p=Xn(l,d);if(p.mode.blankLine)return p.mode.blankLine(p.state)}}function jo(l,d,p,h){for(var m=0;m<10;m++){h&&(h[0]=Xn(l,p).mode);var w=l.token(d,p);if(d.pos>d.start)return w}throw new Error("Mode "+l.name+" failed to advance stream.")}var ts=function(l,d,p){this.start=l.start,this.end=l.pos,this.string=l.current(),this.type=d||null,this.state=p};function Tn(l,d,p,h){var m=l.doc,w=m.mode,x;d=Ge(m,d);var A=ht(m,d.line),M=gr(l,d.line,p),F=new gn(A.text,l.options.tabSize,M),te;for(h&&(te=[]);(h||F.pos<d.ch)&&!F.eol();)F.start=F.pos,x=jo(w,F,M.state),h&&te.push(new ts(F,x,Ir(m.mode,M.state)));return h?te:new ts(F,x,M.state)}function Fo(l,d){if(l)for(;;){var p=l.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!p)break;l=l.slice(0,p.index)+l.slice(p.index+p[0].length);var h=p[1]?"bgClass":"textClass";d[h]==null?d[h]=p[2]:new RegExp("(?:^|\\s)"+p[2]+"(?:$|\\s)").test(d[h])||(d[h]+=" "+p[2])}return l}function Yi(l,d,p,h,m,w,x){var A=p.flattenSpans;A==null&&(A=l.options.flattenSpans);var M=0,F=null,te=new gn(d,l.options.tabSize,h),ie,_e=l.options.addModeClass&&[null];for(d==""&&Fo(es(p,h.state),w);!te.eol();){if(te.pos>l.options.maxHighlightLength?(A=!1,x&&qr(l,d,h,te.pos),te.pos=d.length,ie=null):ie=Fo(jo(p,te,h.state,_e),w),_e){var pe=_e[0].name;pe&&(ie="m-"+(ie?pe+" "+ie:pe))}if(!A||F!=ie){for(;M<te.start;)M=Math.min(te.start,M+5e3),m(M,F);F=ie}te.start=te.pos}for(;M<te.pos;){var Pe=Math.min(te.pos,M+5e3);m(Pe,F),M=Pe}}function xi(l,d,p){for(var h,m,w=l.doc,x=p?-1:d-(l.doc.mode.innerMode?1e3:100),A=d;A>x;--A){if(A<=w.first)return w.first;var M=ht(w,A-1),F=M.stateAfter;if(F&&(!p||A+(F instanceof Sn?F.lookAhead:0)<=w.modeFrontier))return A;var te=be(M.text,null,l.options.tabSize);(m==null||h>te)&&(m=A-1,h=te)}return m}function _s(l,d){if(l.modeFrontier=Math.min(l.modeFrontier,d),!(l.highlightFrontier<d-10)){for(var p=l.first,h=d-1;h>p;h--){var m=ht(l,h).stateAfter;if(m&&(!(m instanceof Sn)||h+m.lookAhead<d)){p=h+1;break}}l.highlightFrontier=Math.min(l.highlightFrontier,p)}}var lr=!1,xr=!1;function $s(){lr=!0}function Ea(){xr=!0}function Lo(l,d,p){this.marker=l,this.from=d,this.to=p}function mr(l,d){if(l)for(var p=0;p<l.length;++p){var h=l[p];if(h.marker==d)return h}}function Di(l,d){for(var p,h=0;h<l.length;++h)l[h]!=d&&(p||(p=[])).push(l[h]);return p}function Ji(l,d,p){var h=p&&window.WeakSet&&(p.markedSpans||(p.markedSpans=new WeakSet));h&&h.has(l.markedSpans)?l.markedSpans.push(d):(l.markedSpans=l.markedSpans?l.markedSpans.concat([d]):[d],h&&h.add(l.markedSpans)),d.marker.attachLine(l)}function vr(l,d,p){var h;if(l)for(var m=0;m<l.length;++m){var w=l[m],x=w.marker,A=w.from==null||(x.inclusiveLeft?w.from<=d:w.from<d);if(A||w.from==d&&x.type=="bookmark"&&(!p||!w.marker.insertLeft)){var M=w.to==null||(x.inclusiveRight?w.to>=d:w.to>d);(h||(h=[])).push(new Lo(x,w.from,M?null:w.to))}}return h}function ws(l,d,p){var h;if(l)for(var m=0;m<l.length;++m){var w=l[m],x=w.marker,A=w.to==null||(x.inclusiveRight?w.to>=d:w.to>d);if(A||w.from==d&&x.type=="bookmark"&&(!p||w.marker.insertLeft)){var M=w.from==null||(x.inclusiveLeft?w.from<=d:w.from<d);(h||(h=[])).push(new Lo(x,M?null:w.from-d,w.to==null?null:w.to-d))}}return h}function Gr(l,d){if(d.full)return null;var p=si(l,d.from.line)&&ht(l,d.from.line).markedSpans,h=si(l,d.to.line)&&ht(l,d.to.line).markedSpans;if(!p&&!h)return null;var m=d.from.ch,w=d.to.ch,x=Nt(d.from,d.to)==0,A=vr(p,m,x),M=ws(h,w,x),F=d.text.length==1,te=It(d.text).length+(F?m:0);if(A)for(var ie=0;ie<A.length;++ie){var _e=A[ie];if(_e.to==null){var pe=mr(M,_e.marker);pe?F&&(_e.to=pe.to==null?null:pe.to+te):_e.to=m}}if(M)for(var Pe=0;Pe<M.length;++Pe){var Ve=M[Pe];if(Ve.to!=null&&(Ve.to+=te),Ve.from==null){var Ye=mr(A,Ve.marker);Ye||(Ve.from=te,F&&(A||(A=[])).push(Ve))}else Ve.from+=te,F&&(A||(A=[])).push(Ve)}A&&(A=bo(A)),M&&M!=A&&(M=bo(M));var it=[A];if(!F){var vt=d.text.length-2,ot;if(vt>0&&A)for(var _t=0;_t<A.length;++_t)A[_t].to==null&&(ot||(ot=[])).push(new Lo(A[_t].marker,null,null));for(var jt=0;jt<vt;++jt)it.push(ot);it.push(M)}return it}function bo(l){for(var d=0;d<l.length;++d){var p=l[d];p.from!=null&&p.from==p.to&&p.marker.clearWhenEmpty!==!1&&l.splice(d--,1)}return l.length?l:null}function Ws(l,d,p){var h=null;if(l.iter(d.line,p.line+1,function(pe){if(pe.markedSpans)for(var Pe=0;Pe<pe.markedSpans.length;++Pe){var Ve=pe.markedSpans[Pe].marker;Ve.readOnly&&(!h||$e(h,Ve)==-1)&&(h||(h=[])).push(Ve)}}),!h)return null;for(var m=[{from:d,to:p}],w=0;w<h.length;++w)for(var x=h[w],A=x.find(0),M=0;M<m.length;++M){var F=m[M];if(!(Nt(F.to,A.from)<0||Nt(F.from,A.to)>0)){var te=[M,1],ie=Nt(F.from,A.from),_e=Nt(F.to,A.to);(ie<0||!x.inclusiveLeft&&!ie)&&te.push({from:F.from,to:A.from}),(_e>0||!x.inclusiveRight&&!_e)&&te.push({from:A.to,to:F.to}),m.splice.apply(m,te),M+=te.length-3}}return m}function Zi(l){var d=l.markedSpans;if(d){for(var p=0;p<d.length;++p)d[p].marker.detachLine(l);l.markedSpans=null}}function yr(l,d){if(d){for(var p=0;p<d.length;++p)d[p].marker.attachLine(l);l.markedSpans=d}}function bs(l){return l.inclusiveLeft?-1:0}function Vo(l){return l.inclusiveRight?1:0}function Xi(l,d){var p=l.lines.length-d.lines.length;if(p!=0)return p;var h=l.find(),m=d.find(),w=Nt(h.from,m.from)||bs(l)-bs(d);if(w)return-w;var x=Nt(h.to,m.to)||Vo(l)-Vo(d);return x||d.id-l.id}function Co(l,d){var p=xr&&l.markedSpans,h;if(p)for(var m=void 0,w=0;w<p.length;++w)m=p[w],m.marker.collapsed&&(d?m.from:m.to)==null&&(!h||Xi(h,m.marker)<0)&&(h=m.marker);return h}function qs(l){return Co(l,!0)}function ai(l){return Co(l,!1)}function At(l,d){var p=xr&&l.markedSpans,h;if(p)for(var m=0;m<p.length;++m){var w=p[m];w.marker.collapsed&&(w.from==null||w.from<d)&&(w.to==null||w.to>d)&&(!h||Xi(h,w.marker)<0)&&(h=w.marker)}return h}function Ot(l,d,p,h,m){var w=ht(l,d),x=xr&&w.markedSpans;if(x)for(var A=0;A<x.length;++A){var M=x[A];if(M.marker.collapsed){var F=M.marker.find(0),te=Nt(F.from,p)||bs(M.marker)-bs(m),ie=Nt(F.to,h)||Vo(M.marker)-Vo(m);if(!(te>=0&&ie<=0||te<=0&&ie>=0)&&(te<=0&&(M.marker.inclusiveRight&&m.inclusiveLeft?Nt(F.to,p)>=0:Nt(F.to,p)>0)||te>=0&&(M.marker.inclusiveRight&&m.inclusiveLeft?Nt(F.from,h)<=0:Nt(F.from,h)<0)))return!0}}}function $t(l){for(var d;d=qs(l);)l=d.find(-1,!0).line;return l}function dt(l){for(var d;d=ai(l);)l=d.find(1,!0).line;return l}function er(l){for(var d,p;d=ai(l);)l=d.find(1,!0).line,(p||(p=[])).push(l);return p}function ki(l,d){var p=ht(l,d),h=$t(p);return p==h?d:zt(h)}function Ei(l,d){if(d>l.lastLine())return d;var p=ht(l,d),h;if(!Er(l,p))return d;for(;h=ai(p);)p=h.find(1,!0).line;return zt(p)+1}function Er(l,d){var p=xr&&d.markedSpans;if(p){for(var h=void 0,m=0;m<p.length;++m)if(h=p[m],!!h.marker.collapsed){if(h.from==null)return!0;if(!h.marker.widgetNode&&h.from==0&&h.marker.inclusiveLeft&&kr(l,d,h))return!0}}}function kr(l,d,p){if(p.to==null){var h=p.marker.find(1,!0);return kr(l,h.line,mr(h.line.markedSpans,p.marker))}if(p.marker.inclusiveRight&&p.to==d.text.length)return!0;for(var m=void 0,w=0;w<d.markedSpans.length;++w)if(m=d.markedSpans[w],m.marker.collapsed&&!m.marker.widgetNode&&m.from==p.to&&(m.to==null||m.to!=p.from)&&(m.marker.inclusiveLeft||p.marker.inclusiveRight)&&kr(l,d,m))return!0}function li(l){l=$t(l);for(var d=0,p=l.parent,h=0;h<p.lines.length;++h){var m=p.lines[h];if(m==l)break;d+=m.height}for(var w=p.parent;w;p=w,w=p.parent)for(var x=0;x<w.children.length;++x){var A=w.children[x];if(A==p)break;d+=A.height}return d}function xo(l){if(l.height==0)return 0;for(var d=l.text.length,p,h=l;p=qs(h);){var m=p.find(0,!0);h=m.from.line,d+=m.from.ch-m.to.ch}for(h=l;p=ai(h);){var w=p.find(0,!0);d-=h.text.length-w.from.ch,h=w.to.line,d+=h.text.length-w.to.ch}return d}function _i(l){var d=l.display,p=l.doc;d.maxLine=ht(p,p.first),d.maxLineLength=xo(d.maxLine),d.maxLineChanged=!0,p.iter(function(h){var m=xo(h);m>d.maxLineLength&&(d.maxLineLength=m,d.maxLine=h)})}var Sr=function(l,d,p){this.text=l,yr(this,d),this.height=p?p(this):1};Sr.prototype.lineNo=function(){return zt(this)},en(Sr);function Ru(l,d,p,h){l.text=d,l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null),l.order!=null&&(l.order=null),Zi(l),yr(l,p);var m=h?h(l):1;m!=l.height&&Qn(l,m)}function ns(l){l.parent=null,Zi(l)}var dc={},Sa={};function Gs(l,d){if(!l||/^\s*$/.test(l))return null;var p=d.addModeClass?Sa:dc;return p[l]||(p[l]=l.replace(/\S+/g,"cm-$&"))}function Aa(l,d){var p=Z("span",null,null,u?"padding-right: .1px":null),h={pre:Z("pre",[p],"CodeMirror-line"),content:p,col:0,pos:0,cm:l,trailingSpace:!1,splitSpaces:l.getOption("lineWrapping")};d.measure={};for(var m=0;m<=(d.rest?d.rest.length:0);m++){var w=m?d.rest[m-1]:d.line,x=void 0;h.pos=0,h.addToken=Nu,fn(l.display.measure)&&(x=U(w,l.doc.direction))&&(h.addToken=Ks(h.addToken,x)),h.map=[];var A=d!=l.display.externalMeasured&&zt(w);fc(w,h,Qi(l,w,A)),w.styleClasses&&(w.styleClasses.bgClass&&(h.bgClass=ze(w.styleClasses.bgClass,h.bgClass||"")),w.styleClasses.textClass&&(h.textClass=ze(w.styleClasses.textClass,h.textClass||""))),h.map.length==0&&h.map.push(0,0,h.content.appendChild(xt(l.display.measure))),m==0?(d.measure.map=h.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(h.map),(d.measure.caches||(d.measure.caches=[])).push({}))}if(u){var M=h.content.lastChild;(/\bcm-tab\b/.test(M.className)||M.querySelector&&M.querySelector(".cm-tab"))&&(h.content.className="cm-tab-wrap-hack")}return at(l,"renderLine",l,d.line,h.pre),h.pre.className&&(h.textClass=ze(h.pre.className,h.textClass||"")),h}function Ta(l){var d=O("span","\u2022","cm-invalidchar");return d.title="\\u"+l.charCodeAt(0).toString(16),d.setAttribute("aria-label",d.title),d}function Nu(l,d,p,h,m,w,x){if(d){var A=l.splitSpaces?Oa(d,l.trailingSpace):d,M=l.cm.state.specialChars,F=!1,te;if(!M.test(d))l.col+=d.length,te=document.createTextNode(A),l.map.push(l.pos,l.pos+d.length,te),a&&c<9&&(F=!0),l.pos+=d.length;else{te=document.createDocumentFragment();for(var ie=0;;){M.lastIndex=ie;var _e=M.exec(d),pe=_e?_e.index-ie:d.length-ie;if(pe){var Pe=document.createTextNode(A.slice(ie,ie+pe));a&&c<9?te.appendChild(O("span",[Pe])):te.appendChild(Pe),l.map.push(l.pos,l.pos+pe,Pe),l.col+=pe,l.pos+=pe}if(!_e)break;ie+=pe+1;var Ve=void 0;if(_e[0]=="	"){var Ye=l.cm.options.tabSize,it=Ye-l.col%Ye;Ve=te.appendChild(O("span",Xt(it),"cm-tab")),Ve.setAttribute("role","presentation"),Ve.setAttribute("cm-text","	"),l.col+=it}else _e[0]=="\r"||_e[0]==`
`?(Ve=te.appendChild(O("span",_e[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),Ve.setAttribute("cm-text",_e[0]),l.col+=1):(Ve=l.cm.options.specialCharPlaceholder(_e[0]),Ve.setAttribute("cm-text",_e[0]),a&&c<9?te.appendChild(O("span",[Ve])):te.appendChild(Ve),l.col+=1);l.map.push(l.pos,l.pos+1,Ve),l.pos++}}if(l.trailingSpace=A.charCodeAt(d.length-1)==32,p||h||m||F||w||x){var vt=p||"";h&&(vt+=h),m&&(vt+=m);var ot=O("span",[te],vt,w);if(x)for(var _t in x)x.hasOwnProperty(_t)&&_t!="style"&&_t!="class"&&ot.setAttribute(_t,x[_t]);return l.content.appendChild(ot)}l.content.appendChild(te)}}function Oa(l,d){if(l.length>1&&!/  /.test(l))return l;for(var p=d,h="",m=0;m<l.length;m++){var w=l.charAt(m);w==" "&&p&&(m==l.length-1||l.charCodeAt(m+1)==32)&&(w="\xA0"),h+=w,p=w==" "}return h}function Ks(l,d){return function(p,h,m,w,x,A,M){m=m?m+" cm-force-border":"cm-force-border";for(var F=p.pos,te=F+h.length;;){for(var ie=void 0,_e=0;_e<d.length&&(ie=d[_e],!(ie.to>F&&ie.from<=F));_e++);if(ie.to>=te)return l(p,h,m,w,x,A,M);l(p,h.slice(0,ie.to-F),m,w,null,A,M),w=null,h=h.slice(ie.to-F),F=ie.to}}}function cl(l,d,p,h){var m=!h&&p.widgetNode;m&&l.map.push(l.pos,l.pos+d,m),!h&&l.cm.display.input.needsContentAttribute&&(m||(m=l.content.appendChild(document.createElement("span"))),m.setAttribute("cm-marker",p.id)),m&&(l.cm.display.input.setUneditable(m),l.content.appendChild(m)),l.pos+=d,l.trailingSpace=!1}function fc(l,d,p){var h=l.markedSpans,m=l.text,w=0;if(!h){for(var x=1;x<p.length;x+=2)d.addToken(d,m.slice(w,w=p[x]),Gs(p[x+1],d.cm.options));return}for(var A=m.length,M=0,F=1,te="",ie,_e,pe=0,Pe,Ve,Ye,it,vt;;){if(pe==M){Pe=Ve=Ye=_e="",vt=null,it=null,pe=1/0;for(var ot=[],_t=void 0,jt=0;jt<h.length;++jt){var kt=h[jt],nn=kt.marker;if(nn.type=="bookmark"&&kt.from==M&&nn.widgetNode)ot.push(nn);else if(kt.from<=M&&(kt.to==null||kt.to>M||nn.collapsed&&kt.to==M&&kt.from==M)){if(kt.to!=null&&kt.to!=M&&pe>kt.to&&(pe=kt.to,Ve=""),nn.className&&(Pe+=" "+nn.className),nn.css&&(_e=(_e?_e+";":"")+nn.css),nn.startStyle&&kt.from==M&&(Ye+=" "+nn.startStyle),nn.endStyle&&kt.to==pe&&(_t||(_t=[])).push(nn.endStyle,kt.to),nn.title&&((vt||(vt={})).title=nn.title),nn.attributes)for(var Hn in nn.attributes)(vt||(vt={}))[Hn]=nn.attributes[Hn];nn.collapsed&&(!it||Xi(it.marker,nn)<0)&&(it=kt)}else kt.from>M&&pe>kt.from&&(pe=kt.from)}if(_t)for(var fi=0;fi<_t.length;fi+=2)_t[fi+1]==pe&&(Ve+=" "+_t[fi]);if(!it||it.from==M)for(var cr=0;cr<ot.length;++cr)cl(d,0,ot[cr]);if(it&&(it.from||0)==M){if(cl(d,(it.to==null?A+1:it.to)-M,it.marker,it.from==null),it.to==null)return;it.to==M&&(it=!1)}}if(M>=A)break;for(var So=Math.min(A,pe);;){if(te){var ro=M+te.length;if(!it){var Rr=ro>So?te.slice(0,So-M):te;d.addToken(d,Rr,ie?ie+Pe:Pe,Ye,M+Rr.length==pe?Ve:"",_e,vt)}if(ro>=So){te=te.slice(So-M),M=So;break}M=ro,Ye=""}te=m.slice(w,w=p[F++]),ie=Gs(p[F++],d.cm.options)}}}function Ma(l,d,p){this.line=d,this.rest=er(d),this.size=this.rest?zt(It(this.rest))-p+1:1,this.node=this.text=null,this.hidden=Er(l,d)}function Qs(l,d,p){for(var h=[],m,w=d;w<p;w=m){var x=new Ma(l.doc,ht(l.doc,w),w);m=w+x.size,h.push(x)}return h}var rs=null;function Pa(l){rs?rs.ops.push(l):l.ownsGroup=rs={ops:[l],delayedCallbacks:[]}}function ju(l){var d=l.delayedCallbacks,p=0;do{for(;p<d.length;p++)d[p].call(null);for(var h=0;h<l.ops.length;h++){var m=l.ops[h];if(m.cursorActivityHandlers)for(;m.cursorActivityCalled<m.cursorActivityHandlers.length;)m.cursorActivityHandlers[m.cursorActivityCalled++].call(null,m.cm)}}while(p<d.length)}function ul(l,d){var p=l.ownsGroup;if(p)try{ju(p)}finally{rs=null,d(p)}}var Ri=null;function Yn(l,d){var p=Ue(l,d);if(p.length){var h=Array.prototype.slice.call(arguments,2),m;rs?m=rs.delayedCallbacks:Ri?m=Ri:(m=Ri=[],setTimeout(Cs,0));for(var w=function(A){m.push(function(){return p[A].apply(null,h)})},x=0;x<p.length;++x)w(x)}}function Cs(){var l=Ri;Ri=null;for(var d=0;d<l.length;++d)l[d]()}function Bo(l,d,p,h){for(var m=0;m<d.changes.length;m++){var w=d.changes[m];w=="text"?dl(l,d):w=="gutter"?eo(l,d,p,h):w=="class"?Da(l,d):w=="widget"&&y(l,d,h)}d.changes=null}function xs(l){return l.node==l.text&&(l.node=O("div",null,null,"position: relative"),l.text.parentNode&&l.text.parentNode.replaceChild(l.node,l.text),l.node.appendChild(l.text),a&&c<8&&(l.node.style.zIndex=2)),l.node}function Ia(l,d){var p=d.bgClass?d.bgClass+" "+(d.line.bgClass||""):d.line.bgClass;if(p&&(p+=" CodeMirror-linebackground"),d.background)p?d.background.className=p:(d.background.parentNode.removeChild(d.background),d.background=null);else if(p){var h=xs(d);d.background=h.insertBefore(O("div",null,p),h.firstChild),l.display.input.setUneditable(d.background)}}function ci(l,d){var p=l.display.externalMeasured;return p&&p.line==d.line?(l.display.externalMeasured=null,d.measure=p.measure,p.built):Aa(l,d)}function dl(l,d){var p=d.text.className,h=ci(l,d);d.text==d.node&&(d.node=h.pre),d.text.parentNode.replaceChild(h.pre,d.text),d.text=h.pre,h.bgClass!=d.bgClass||h.textClass!=d.textClass?(d.bgClass=h.bgClass,d.textClass=h.textClass,Da(l,d)):p&&(d.text.className=p)}function Da(l,d){Ia(l,d),d.line.wrapClass?xs(d).className=d.line.wrapClass:d.node!=d.text&&(d.node.className="");var p=d.textClass?d.textClass+" "+(d.line.textClass||""):d.line.textClass;d.text.className=p||""}function eo(l,d,p,h){if(d.gutter&&(d.node.removeChild(d.gutter),d.gutter=null),d.gutterBackground&&(d.node.removeChild(d.gutterBackground),d.gutterBackground=null),d.line.gutterClass){var m=xs(d);d.gutterBackground=O("div",null,"CodeMirror-gutter-background "+d.line.gutterClass,"left: "+(l.options.fixedGutter?h.fixedPos:-h.gutterTotalWidth)+"px; width: "+h.gutterTotalWidth+"px"),l.display.input.setUneditable(d.gutterBackground),m.insertBefore(d.gutterBackground,d.text)}var w=d.line.gutterMarkers;if(l.options.lineNumbers||w){var x=xs(d),A=d.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(l.options.fixedGutter?h.fixedPos:-h.gutterTotalWidth)+"px");if(A.setAttribute("aria-hidden","true"),l.display.input.setUneditable(A),x.insertBefore(A,d.text),d.line.gutterClass&&(A.className+=" "+d.line.gutterClass),l.options.lineNumbers&&(!w||!w["CodeMirror-linenumbers"])&&(d.lineNumber=A.appendChild(O("div",Dr(l.options,p),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+h.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.display.lineNumInnerWidth+"px"))),w)for(var M=0;M<l.display.gutterSpecs.length;++M){var F=l.display.gutterSpecs[M].className,te=w.hasOwnProperty(F)&&w[F];te&&A.appendChild(O("div",[te],"CodeMirror-gutter-elt","left: "+h.gutterLeft[F]+"px; width: "+h.gutterWidth[F]+"px"))}}}function y(l,d,p){d.alignable&&(d.alignable=null);for(var h=k("CodeMirror-linewidget"),m=d.node.firstChild,w=void 0;m;m=w)w=m.nextSibling,h.test(m.className)&&d.node.removeChild(m);D(l,d,p)}function E(l,d,p,h){var m=ci(l,d);return d.text=d.node=m.pre,m.bgClass&&(d.bgClass=m.bgClass),m.textClass&&(d.textClass=m.textClass),Da(l,d),eo(l,d,p,h),D(l,d,h),d.node}function D(l,d,p){if(J(l,d.line,d,p,!0),d.rest)for(var h=0;h<d.rest.length;h++)J(l,d.rest[h],d,p,!1)}function J(l,d,p,h,m){if(d.widgets)for(var w=xs(p),x=0,A=d.widgets;x<A.length;++x){var M=A[x],F=O("div",[M.node],"CodeMirror-linewidget"+(M.className?" "+M.className:""));M.handleMouseEvents||F.setAttribute("cm-ignore-events","true"),Ce(M,F,p,h),l.display.input.setUneditable(F),m&&M.above?w.insertBefore(F,p.gutter||p.text):w.appendChild(F),Yn(M,"redraw")}}function Ce(l,d,p,h){if(l.noHScroll){(p.alignable||(p.alignable=[])).push(d);var m=h.wrapperWidth;d.style.left=h.fixedPos+"px",l.coverGutter||(m-=h.gutterTotalWidth,d.style.paddingLeft=h.gutterTotalWidth+"px"),d.style.width=m+"px"}l.coverGutter&&(d.style.zIndex=5,d.style.position="relative",l.noHScroll||(d.style.marginLeft=-h.gutterTotalWidth+"px"))}function Oe(l){if(l.height!=null)return l.height;var d=l.doc.cm;if(!d)return 0;if(!V(document.body,l.node)){var p="position: relative;";l.coverGutter&&(p+="margin-left: -"+d.display.gutters.offsetWidth+"px;"),l.noHScroll&&(p+="width: "+d.display.wrapper.clientWidth+"px;"),T(d.display.measure,O("div",[l.node],null,p))}return l.height=l.node.parentNode.offsetHeight}function Ze(l,d){for(var p=oe(d);p!=l.wrapper;p=p.parentNode)if(!p||p.nodeType==1&&p.getAttribute("cm-ignore-events")=="true"||p.parentNode==l.sizer&&p!=l.mover)return!0}function mn(l){return l.lineSpace.offsetTop}function tr(l){return l.mover.offsetHeight-l.lineSpace.offsetHeight}function hn(l){if(l.cachedPaddingH)return l.cachedPaddingH;var d=T(l.measure,O("pre","x","CodeMirror-line-like")),p=window.getComputedStyle?window.getComputedStyle(d):d.currentStyle,h={left:parseInt(p.paddingLeft),right:parseInt(p.paddingRight)};return!isNaN(h.left)&&!isNaN(h.right)&&(l.cachedPaddingH=h),h}function Dn(l){return de-l.display.nativeBarWidth}function Jn(l){return l.display.scroller.clientWidth-Dn(l)-l.display.barWidth}function P(l){return l.display.scroller.clientHeight-Dn(l)-l.display.barHeight}function z(l,d,p){var h=l.options.lineWrapping,m=h&&Jn(l);if(!d.measure.heights||h&&d.measure.width!=m){var w=d.measure.heights=[];if(h){d.measure.width=m;for(var x=d.text.firstChild.getClientRects(),A=0;A<x.length-1;A++){var M=x[A],F=x[A+1];Math.abs(M.bottom-F.bottom)>2&&w.push((M.bottom+F.top)/2-p.top)}}w.push(p.bottom-p.top)}}function ne(l,d,p){if(l.line==d)return{map:l.measure.map,cache:l.measure.cache};for(var h=0;h<l.rest.length;h++)if(l.rest[h]==d)return{map:l.measure.maps[h],cache:l.measure.caches[h]};for(var m=0;m<l.rest.length;m++)if(zt(l.rest[m])>p)return{map:l.measure.maps[m],cache:l.measure.caches[m],before:!0}}function ae(l,d){d=$t(d);var p=zt(d),h=l.display.externalMeasured=new Ma(l.doc,d,p);h.lineN=p;var m=h.built=Aa(l,h);return h.text=m.pre,T(l.display.lineMeasure,m.pre),h}function we(l,d,p,h){return et(l,Fe(l,d),p,h)}function me(l,d){if(d>=l.display.viewFrom&&d<l.display.viewTo)return l.display.view[gc(l,d)];var p=l.display.externalMeasured;if(p&&d>=p.lineN&&d<p.lineN+p.size)return p}function Fe(l,d){var p=zt(d),h=me(l,p);h&&!h.text?h=null:h&&h.changes&&(Bo(l,h,p,Uw(l)),l.curOp.forceUpdate=!0),h||(h=ae(l,d));var m=ne(h,d,p);return{line:d,view:h,rect:null,map:m.map,cache:m.cache,before:m.before,hasHeights:!1}}function et(l,d,p,h,m){d.before&&(p=-1);var w=p+(h||""),x;return d.cache.hasOwnProperty(w)?x=d.cache[w]:(d.rect||(d.rect=d.view.text.getBoundingClientRect()),d.hasHeights||(z(l,d.view,d.rect),d.hasHeights=!0),x=Si(l,d,p,h),x.bogus||(d.cache[w]=x)),{left:x.left,right:x.right,top:m?x.rtop:x.top,bottom:m?x.rbottom:x.bottom}}var Qt={left:0,right:0,top:0,bottom:0};function Wt(l,d,p){for(var h,m,w,x,A,M,F=0;F<l.length;F+=3)if(A=l[F],M=l[F+1],d<A?(m=0,w=1,x="left"):d<M?(m=d-A,w=m+1):(F==l.length-3||d==M&&l[F+3]>d)&&(w=M-A,m=w-1,d>=M&&(x="right")),m!=null){if(h=l[F+2],A==M&&p==(h.insertLeft?"left":"right")&&(x=p),p=="left"&&m==0)for(;F&&l[F-2]==l[F-3]&&l[F-1].insertLeft;)h=l[(F-=3)+2],x="left";if(p=="right"&&m==M-A)for(;F<l.length-3&&l[F+3]==l[F+4]&&!l[F+5].insertLeft;)h=l[(F+=3)+2],x="right";break}return{node:h,start:m,end:w,collapse:x,coverStart:A,coverEnd:M}}function Kr(l,d){var p=Qt;if(d=="left")for(var h=0;h<l.length&&(p=l[h]).left==p.right;h++);else for(var m=l.length-1;m>=0&&(p=l[m]).left==p.right;m--);return p}function Si(l,d,p,h){var m=Wt(d.map,p,h),w=m.node,x=m.start,A=m.end,M=m.collapse,F;if(w.nodeType==3){for(var te=0;te<4;te++){for(;x&&ve(d.line.text.charAt(m.coverStart+x));)--x;for(;m.coverStart+A<m.coverEnd&&ve(d.line.text.charAt(m.coverStart+A));)++A;if(a&&c<9&&x==0&&A==m.coverEnd-m.coverStart?F=w.parentNode.getBoundingClientRect():F=Kr(ce(w,x,A).getClientRects(),h),F.left||F.right||x==0)break;A=x,x=x-1,M="right"}a&&c<11&&(F=Qg(l.display.measure,F))}else{x>0&&(M=h="right");var ie;l.options.lineWrapping&&(ie=w.getClientRects()).length>1?F=ie[h=="right"?ie.length-1:0]:F=w.getBoundingClientRect()}if(a&&c<9&&!x&&(!F||!F.left&&!F.right)){var _e=w.parentNode.getClientRects()[0];_e?F={left:_e.left,right:_e.left+Lu(l.display),top:_e.top,bottom:_e.bottom}:F=Qt}for(var pe=F.top-d.rect.top,Pe=F.bottom-d.rect.top,Ve=(pe+Pe)/2,Ye=d.view.measure.heights,it=0;it<Ye.length-1&&!(Ve<Ye[it]);it++);var vt=it?Ye[it-1]:0,ot=Ye[it],_t={left:(M=="right"?F.right:F.left)-d.rect.left,right:(M=="left"?F.left:F.right)-d.rect.left,top:vt,bottom:ot};return!F.left&&!F.right&&(_t.bogus=!0),l.options.singleCursorHeightPerLine||(_t.rtop=pe,_t.rbottom=Pe),_t}function Qg(l,d){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!$n(l))return d;var p=screen.logicalXDPI/screen.deviceXDPI,h=screen.logicalYDPI/screen.deviceYDPI;return{left:d.left*p,right:d.right*p,top:d.top*h,bottom:d.bottom*h}}function Xf(l){if(l.measure&&(l.measure.cache={},l.measure.heights=null,l.rest))for(var d=0;d<l.rest.length;d++)l.measure.caches[d]={}}function qM(l){l.display.externalMeasure=null,I(l.display.lineMeasure);for(var d=0;d<l.display.view.length;d++)Xf(l.display.view[d])}function eh(l){qM(l),l.display.cachedCharWidth=l.display.cachedTextHeight=l.display.cachedPaddingH=null,l.options.lineWrapping||(l.display.maxLineChanged=!0),l.display.lineNumChars=null}function GM(){return g&&j?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function KM(){return g&&j?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fw(l){var d=0;if(l.widgets)for(var p=0;p<l.widgets.length;++p)l.widgets[p].above&&(d+=Oe(l.widgets[p]));return d}function Yg(l,d,p,h,m){if(!m){var w=Fw(d);p.top+=w,p.bottom+=w}if(h=="line")return p;h||(h="local");var x=li(d);if(h=="local"?x+=mn(l.display):x-=l.display.viewOffset,h=="page"||h=="window"){var A=l.display.lineSpace.getBoundingClientRect();x+=A.top+(h=="window"?0:KM());var M=A.left+(h=="window"?0:GM());p.left+=M,p.right+=M}return p.top+=x,p.bottom+=x,p}function QM(l,d,p){if(p=="div")return d;var h=d.left,m=d.top;if(p=="page")h-=GM(),m-=KM();else if(p=="local"||!p){var w=l.display.sizer.getBoundingClientRect();h+=w.left,m+=w.top}var x=l.display.lineSpace.getBoundingClientRect();return{left:h-x.left,top:m-x.top}}function Jg(l,d,p,h,m){return h||(h=ht(l.doc,d.line)),Yg(l,h,we(l,h,d.ch,m),p)}function Es(l,d,p,h,m,w){h=h||ht(l.doc,d.line),m||(m=Fe(l,h));function x(Pe,Ve){var Ye=et(l,m,Pe,Ve?"right":"left",w);return Ve?Ye.left=Ye.right:Ye.right=Ye.left,Yg(l,h,Ye,p)}var A=U(h,l.doc.direction),M=d.ch,F=d.sticky;if(M>=h.text.length?(M=h.text.length,F="before"):M<=0&&(M=0,F="after"),!A)return x(F=="before"?M-1:M,F=="before");function te(Pe,Ve,Ye){var it=A[Ve],vt=it.level==1;return x(Ye?Pe-1:Pe,vt!=Ye)}var ie=Q(A,M,F),_e=Ct,pe=te(M,ie,F=="before");return _e!=null&&(pe.other=te(M,_e,F!="before")),pe}function YM(l,d){var p=0;d=Ge(l.doc,d),l.options.lineWrapping||(p=Lu(l.display)*d.ch);var h=ht(l.doc,d.line),m=li(h)+mn(l.display);return{left:p,right:p,top:m,bottom:m+h.height}}function Lw(l,d,p,h,m){var w=Be(l,d,p);return w.xRel=m,h&&(w.outside=h),w}function Vw(l,d,p){var h=l.doc;if(p+=l.display.viewOffset,p<0)return Lw(h.first,0,null,-1,-1);var m=En(h,p),w=h.first+h.size-1;if(m>w)return Lw(h.first+h.size-1,ht(h,w).text.length,null,1,1);d<0&&(d=0);for(var x=ht(h,m);;){var A=zU(l,x,m,d,p),M=At(x,A.ch+(A.xRel>0||A.outside>0?1:0));if(!M)return A;var F=M.find(1);if(F.line==m)return F;x=ht(h,m=F.line)}}function JM(l,d,p,h){h-=Fw(d);var m=d.text.length,w=yt(function(x){return et(l,p,x-1).bottom<=h},m,0);return m=yt(function(x){return et(l,p,x).top>h},w,m),{begin:w,end:m}}function ZM(l,d,p,h){p||(p=Fe(l,d));var m=Yg(l,d,et(l,p,h),"line").top;return JM(l,d,p,m)}function Bw(l,d,p,h){return l.bottom<=p?!1:l.top>p?!0:(h?l.left:l.right)>d}function zU(l,d,p,h,m){m-=li(d);var w=Fe(l,d),x=Fw(d),A=0,M=d.text.length,F=!0,te=U(d,l.doc.direction);if(te){var ie=(l.options.lineWrapping?WU:$U)(l,d,p,w,te,h,m);F=ie.level!=1,A=F?ie.from:ie.to-1,M=F?ie.to:ie.from-1}var _e=null,pe=null,Pe=yt(function(jt){var kt=et(l,w,jt);return kt.top+=x,kt.bottom+=x,Bw(kt,h,m,!1)?(kt.top<=m&&kt.left<=h&&(_e=jt,pe=kt),!0):!1},A,M),Ve,Ye,it=!1;if(pe){var vt=h-pe.left<pe.right-h,ot=vt==F;Pe=_e+(ot?0:1),Ye=ot?"after":"before",Ve=vt?pe.left:pe.right}else{!F&&(Pe==M||Pe==A)&&Pe++,Ye=Pe==0?"after":Pe==d.text.length?"before":et(l,w,Pe-(F?1:0)).bottom+x<=m==F?"after":"before";var _t=Es(l,Be(p,Pe,Ye),"line",d,w);Ve=_t.left,it=m<_t.top?-1:m>=_t.bottom?1:0}return Pe=fe(d.text,Pe,1),Lw(p,Pe,Ye,it,h-Ve)}function $U(l,d,p,h,m,w,x){var A=yt(function(ie){var _e=m[ie],pe=_e.level!=1;return Bw(Es(l,Be(p,pe?_e.to:_e.from,pe?"before":"after"),"line",d,h),w,x,!0)},0,m.length-1),M=m[A];if(A>0){var F=M.level!=1,te=Es(l,Be(p,F?M.from:M.to,F?"after":"before"),"line",d,h);Bw(te,w,x,!0)&&te.top>x&&(M=m[A-1])}return M}function WU(l,d,p,h,m,w,x){var A=JM(l,d,h,x),M=A.begin,F=A.end;/\s/.test(d.text.charAt(F-1))&&F--;for(var te=null,ie=null,_e=0;_e<m.length;_e++){var pe=m[_e];if(!(pe.from>=F||pe.to<=M)){var Pe=pe.level!=1,Ve=et(l,h,Pe?Math.min(F,pe.to)-1:Math.max(M,pe.from)).right,Ye=Ve<w?w-Ve+1e9:Ve-w;(!te||ie>Ye)&&(te=pe,ie=Ye)}}return te||(te=m[m.length-1]),te.from<M&&(te={from:M,to:te.to,level:te.level}),te.to>F&&(te={from:te.from,to:F,level:te.level}),te}var hc;function Fu(l){if(l.cachedTextHeight!=null)return l.cachedTextHeight;if(hc==null){hc=O("pre",null,"CodeMirror-line-like");for(var d=0;d<49;++d)hc.appendChild(document.createTextNode("x")),hc.appendChild(O("br"));hc.appendChild(document.createTextNode("x"))}T(l.measure,hc);var p=hc.offsetHeight/50;return p>3&&(l.cachedTextHeight=p),I(l.measure),p||1}function Lu(l){if(l.cachedCharWidth!=null)return l.cachedCharWidth;var d=O("span","xxxxxxxxxx"),p=O("pre",[d],"CodeMirror-line-like");T(l.measure,p);var h=d.getBoundingClientRect(),m=(h.right-h.left)/10;return m>2&&(l.cachedCharWidth=m),m||10}function Uw(l){for(var d=l.display,p={},h={},m=d.gutters.clientLeft,w=d.gutters.firstChild,x=0;w;w=w.nextSibling,++x){var A=l.display.gutterSpecs[x].className;p[A]=w.offsetLeft+w.clientLeft+m,h[A]=w.clientWidth}return{fixedPos:Hw(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:p,gutterWidth:h,wrapperWidth:d.wrapper.clientWidth}}function Hw(l){return l.scroller.getBoundingClientRect().left-l.sizer.getBoundingClientRect().left}function XM(l){var d=Fu(l.display),p=l.options.lineWrapping,h=p&&Math.max(5,l.display.scroller.clientWidth/Lu(l.display)-3);return function(m){if(Er(l.doc,m))return 0;var w=0;if(m.widgets)for(var x=0;x<m.widgets.length;x++)m.widgets[x].height&&(w+=m.widgets[x].height);return p?w+(Math.ceil(m.text.length/h)||1)*d:w+d}}function zw(l){var d=l.doc,p=XM(l);d.iter(function(h){var m=p(h);m!=h.height&&Qn(h,m)})}function pc(l,d,p,h){var m=l.display;if(!p&&oe(d).getAttribute("cm-not-content")=="true")return null;var w,x,A=m.lineSpace.getBoundingClientRect();try{w=d.clientX-A.left,x=d.clientY-A.top}catch{return null}var M=Vw(l,w,x),F;if(h&&M.xRel>0&&(F=ht(l.doc,M.line).text).length==M.ch){var te=be(F,F.length,l.options.tabSize)-F.length;M=Be(M.line,Math.max(0,Math.round((w-hn(l.display).left)/Lu(l.display))-te))}return M}function gc(l,d){if(d>=l.display.viewTo||(d-=l.display.viewFrom,d<0))return null;for(var p=l.display.view,h=0;h<p.length;h++)if(d-=p[h].size,d<0)return h}function to(l,d,p,h){d==null&&(d=l.doc.first),p==null&&(p=l.doc.first+l.doc.size),h||(h=0);var m=l.display;if(h&&p<m.viewTo&&(m.updateLineNumbers==null||m.updateLineNumbers>d)&&(m.updateLineNumbers=d),l.curOp.viewChanged=!0,d>=m.viewTo)xr&&ki(l.doc,d)<m.viewTo&&hl(l);else if(p<=m.viewFrom)xr&&Ei(l.doc,p+h)>m.viewFrom?hl(l):(m.viewFrom+=h,m.viewTo+=h);else if(d<=m.viewFrom&&p>=m.viewTo)hl(l);else if(d<=m.viewFrom){var w=Zg(l,p,p+h,1);w?(m.view=m.view.slice(w.index),m.viewFrom=w.lineN,m.viewTo+=h):hl(l)}else if(p>=m.viewTo){var x=Zg(l,d,d,-1);x?(m.view=m.view.slice(0,x.index),m.viewTo=x.lineN):hl(l)}else{var A=Zg(l,d,d,-1),M=Zg(l,p,p+h,1);A&&M?(m.view=m.view.slice(0,A.index).concat(Qs(l,A.lineN,M.lineN)).concat(m.view.slice(M.index)),m.viewTo+=h):hl(l)}var F=m.externalMeasured;F&&(p<F.lineN?F.lineN+=h:d<F.lineN+F.size&&(m.externalMeasured=null))}function fl(l,d,p){l.curOp.viewChanged=!0;var h=l.display,m=l.display.externalMeasured;if(m&&d>=m.lineN&&d<m.lineN+m.size&&(h.externalMeasured=null),!(d<h.viewFrom||d>=h.viewTo)){var w=h.view[gc(l,d)];if(w.node!=null){var x=w.changes||(w.changes=[]);$e(x,p)==-1&&x.push(p)}}}function hl(l){l.display.viewFrom=l.display.viewTo=l.doc.first,l.display.view=[],l.display.viewOffset=0}function Zg(l,d,p,h){var m=gc(l,d),w,x=l.display.view;if(!xr||p==l.doc.first+l.doc.size)return{index:m,lineN:p};for(var A=l.display.viewFrom,M=0;M<m;M++)A+=x[M].size;if(A!=d){if(h>0){if(m==x.length-1)return null;w=A+x[m].size-d,m++}else w=A-d;d+=w,p+=w}for(;ki(l.doc,p)!=p;){if(m==(h<0?0:x.length-1))return null;p+=h*x[m-(h<0?1:0)].size,m+=h}return{index:m,lineN:p}}function qU(l,d,p){var h=l.display,m=h.view;m.length==0||d>=h.viewTo||p<=h.viewFrom?(h.view=Qs(l,d,p),h.viewFrom=d):(h.viewFrom>d?h.view=Qs(l,d,h.viewFrom).concat(h.view):h.viewFrom<d&&(h.view=h.view.slice(gc(l,d))),h.viewFrom=d,h.viewTo<p?h.view=h.view.concat(Qs(l,h.viewTo,p)):h.viewTo>p&&(h.view=h.view.slice(0,gc(l,p)))),h.viewTo=p}function eP(l){for(var d=l.display.view,p=0,h=0;h<d.length;h++){var m=d[h];!m.hidden&&(!m.node||m.changes)&&++p}return p}function th(l){l.display.input.showSelection(l.display.input.prepareSelection())}function tP(l,d){d===void 0&&(d=!0);for(var p=l.doc,h={},m=h.cursors=document.createDocumentFragment(),w=h.selection=document.createDocumentFragment(),x=0;x<p.sel.ranges.length;x++)if(!(!d&&x==p.sel.primIndex)){var A=p.sel.ranges[x];if(!(A.from().line>=l.display.viewTo||A.to().line<l.display.viewFrom)){var M=A.empty();(M||l.options.showCursorWhenSelecting)&&nP(l,A.head,m),M||GU(l,A,w)}}return h}function nP(l,d,p){var h=Es(l,d,"div",null,null,!l.options.singleCursorHeightPerLine),m=p.appendChild(O("div","\xA0","CodeMirror-cursor"));if(m.style.left=h.left+"px",m.style.top=h.top+"px",m.style.height=Math.max(0,h.bottom-h.top)*l.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(l.getWrapperElement().className)){var w=Jg(l,d,"div",null,null);w.right-w.left>0&&(m.style.width=w.right-w.left+"px")}if(h.other){var x=p.appendChild(O("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));x.style.display="",x.style.left=h.other.left+"px",x.style.top=h.other.top+"px",x.style.height=(h.other.bottom-h.other.top)*.85+"px"}}function Xg(l,d){return l.top-d.top||l.left-d.left}function GU(l,d,p){var h=l.display,m=l.doc,w=document.createDocumentFragment(),x=hn(l.display),A=x.left,M=Math.max(h.sizerWidth,Jn(l)-h.sizer.offsetLeft)-x.right,F=m.direction=="ltr";function te(ot,_t,jt,kt){_t<0&&(_t=0),_t=Math.round(_t),kt=Math.round(kt),w.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+ot+`px;
                             top: `+_t+"px; width: "+(jt??M-ot)+`px;
                             height: `+(kt-_t)+"px"))}function ie(ot,_t,jt){var kt=ht(m,ot),nn=kt.text.length,Hn,fi;function cr(Rr,io){return Jg(l,Be(ot,Rr),"div",kt,io)}function So(Rr,io,wi){var Qr=ZM(l,kt,null,Rr),Nr=io=="ltr"==(wi=="after")?"left":"right",_r=wi=="after"?Qr.begin:Qr.end-(/\s/.test(kt.text.charAt(Qr.end-1))?2:1);return cr(_r,Nr)[Nr]}var ro=U(kt,m.direction);return St(ro,_t||0,jt??nn,function(Rr,io,wi,Qr){var Nr=wi=="ltr",_r=cr(Rr,Nr?"left":"right"),oo=cr(io-1,Nr?"right":"left"),Ju=_t==null&&Rr==0,_l=jt==null&&io==nn,Ti=Qr==0,Ys=!ro||Qr==ro.length-1;if(oo.top-_r.top<=3){var hi=(F?Ju:_l)&&Ti,gb=(F?_l:Ju)&&Ys,Ra=hi?A:(Nr?_r:oo).left,wc=gb?M:(Nr?oo:_r).right;te(Ra,_r.top,wc-Ra,_r.bottom)}else{var bc,ji,Zu,mb;Nr?(bc=F&&Ju&&Ti?A:_r.left,ji=F?M:So(Rr,wi,"before"),Zu=F?A:So(io,wi,"after"),mb=F&&_l&&Ys?M:oo.right):(bc=F?So(Rr,wi,"before"):A,ji=!F&&Ju&&Ti?M:_r.right,Zu=!F&&_l&&Ys?A:oo.left,mb=F?So(io,wi,"after"):M),te(bc,_r.top,ji-bc,_r.bottom),_r.bottom<oo.top&&te(A,_r.bottom,null,oo.top),te(Zu,oo.top,mb-Zu,oo.bottom)}(!Hn||Xg(_r,Hn)<0)&&(Hn=_r),Xg(oo,Hn)<0&&(Hn=oo),(!fi||Xg(_r,fi)<0)&&(fi=_r),Xg(oo,fi)<0&&(fi=oo)}),{start:Hn,end:fi}}var _e=d.from(),pe=d.to();if(_e.line==pe.line)ie(_e.line,_e.ch,pe.ch);else{var Pe=ht(m,_e.line),Ve=ht(m,pe.line),Ye=$t(Pe)==$t(Ve),it=ie(_e.line,_e.ch,Ye?Pe.text.length+1:null).end,vt=ie(pe.line,Ye?0:null,pe.ch).start;Ye&&(it.top<vt.top-2?(te(it.right,it.top,null,it.bottom),te(A,vt.top,vt.left,vt.bottom)):te(it.right,it.top,vt.left-it.right,it.bottom)),it.bottom<vt.top&&te(A,it.bottom,null,vt.top)}p.appendChild(w)}function $w(l){if(l.state.focused){var d=l.display;clearInterval(d.blinker);var p=!0;d.cursorDiv.style.visibility="",l.options.cursorBlinkRate>0?d.blinker=setInterval(function(){l.hasFocus()||Vu(l),d.cursorDiv.style.visibility=(p=!p)?"":"hidden"},l.options.cursorBlinkRate):l.options.cursorBlinkRate<0&&(d.cursorDiv.style.visibility="hidden")}}function rP(l){l.hasFocus()||(l.display.input.focus(),l.state.focused||qw(l))}function Ww(l){l.state.delayingBlurEvent=!0,setTimeout(function(){l.state.delayingBlurEvent&&(l.state.delayingBlurEvent=!1,l.state.focused&&Vu(l))},100)}function qw(l,d){l.state.delayingBlurEvent&&!l.state.draggingText&&(l.state.delayingBlurEvent=!1),l.options.readOnly!="nocursor"&&(l.state.focused||(at(l,"focus",l,d),l.state.focused=!0,Ee(l.display.wrapper,"CodeMirror-focused"),!l.curOp&&l.display.selForContextMenu!=l.doc.sel&&(l.display.input.reset(),u&&setTimeout(function(){return l.display.input.reset(!0)},20)),l.display.input.receivedFocus()),$w(l))}function Vu(l,d){l.state.delayingBlurEvent||(l.state.focused&&(at(l,"blur",l,d),l.state.focused=!1,$(l.display.wrapper,"CodeMirror-focused")),clearInterval(l.display.blinker),setTimeout(function(){l.state.focused||(l.display.shift=!1)},150))}function em(l){for(var d=l.display,p=d.lineDiv.offsetTop,h=Math.max(0,d.scroller.getBoundingClientRect().top),m=d.lineDiv.getBoundingClientRect().top,w=0,x=0;x<d.view.length;x++){var A=d.view[x],M=l.options.lineWrapping,F=void 0,te=0;if(!A.hidden){if(m+=A.line.height,a&&c<8){var ie=A.node.offsetTop+A.node.offsetHeight;F=ie-p,p=ie}else{var _e=A.node.getBoundingClientRect();F=_e.bottom-_e.top,!M&&A.text.firstChild&&(te=A.text.firstChild.getBoundingClientRect().right-_e.left-1)}var pe=A.line.height-F;if((pe>.005||pe<-.005)&&(m<h&&(w-=pe),Qn(A.line,F),iP(A.line),A.rest))for(var Pe=0;Pe<A.rest.length;Pe++)iP(A.rest[Pe]);if(te>l.display.sizerWidth){var Ve=Math.ceil(te/Lu(l.display));Ve>l.display.maxLineLength&&(l.display.maxLineLength=Ve,l.display.maxLine=A.line,l.display.maxLineChanged=!0)}}}Math.abs(w)>2&&(d.scroller.scrollTop+=w)}function iP(l){if(l.widgets)for(var d=0;d<l.widgets.length;++d){var p=l.widgets[d],h=p.node.parentNode;h&&(p.height=h.offsetHeight)}}function tm(l,d,p){var h=p&&p.top!=null?Math.max(0,p.top):l.scroller.scrollTop;h=Math.floor(h-mn(l));var m=p&&p.bottom!=null?p.bottom:h+l.wrapper.clientHeight,w=En(d,h),x=En(d,m);if(p&&p.ensure){var A=p.ensure.from.line,M=p.ensure.to.line;A<w?(w=A,x=En(d,li(ht(d,A))+l.wrapper.clientHeight)):Math.min(M,d.lastLine())>=x&&(w=En(d,li(ht(d,M))-l.wrapper.clientHeight),x=M)}return{from:w,to:Math.max(x,w+1)}}function KU(l,d){if(!tt(l,"scrollCursorIntoView")){var p=l.display,h=p.sizer.getBoundingClientRect(),m=null;if(d.top+h.top<0?m=!0:d.bottom+h.top>(window.innerHeight||document.documentElement.clientHeight)&&(m=!1),m!=null&&!C){var w=O("div","\u200B",null,`position: absolute;
                         top: `+(d.top-p.viewOffset-mn(l.display))+`px;
                         height: `+(d.bottom-d.top+Dn(l)+p.barHeight)+`px;
                         left: `+d.left+"px; width: "+Math.max(2,d.right-d.left)+"px;");l.display.lineSpace.appendChild(w),w.scrollIntoView(m),l.display.lineSpace.removeChild(w)}}}function QU(l,d,p,h){h==null&&(h=0);var m;!l.options.lineWrapping&&d==p&&(p=d.sticky=="before"?Be(d.line,d.ch+1,"before"):d,d=d.ch?Be(d.line,d.sticky=="before"?d.ch-1:d.ch,"after"):d);for(var w=0;w<5;w++){var x=!1,A=Es(l,d),M=!p||p==d?A:Es(l,p);m={left:Math.min(A.left,M.left),top:Math.min(A.top,M.top)-h,right:Math.max(A.left,M.left),bottom:Math.max(A.bottom,M.bottom)+h};var F=Gw(l,m),te=l.doc.scrollTop,ie=l.doc.scrollLeft;if(F.scrollTop!=null&&(rh(l,F.scrollTop),Math.abs(l.doc.scrollTop-te)>1&&(x=!0)),F.scrollLeft!=null&&(mc(l,F.scrollLeft),Math.abs(l.doc.scrollLeft-ie)>1&&(x=!0)),!x)break}return m}function YU(l,d){var p=Gw(l,d);p.scrollTop!=null&&rh(l,p.scrollTop),p.scrollLeft!=null&&mc(l,p.scrollLeft)}function Gw(l,d){var p=l.display,h=Fu(l.display);d.top<0&&(d.top=0);var m=l.curOp&&l.curOp.scrollTop!=null?l.curOp.scrollTop:p.scroller.scrollTop,w=P(l),x={};d.bottom-d.top>w&&(d.bottom=d.top+w);var A=l.doc.height+tr(p),M=d.top<h,F=d.bottom>A-h;if(d.top<m)x.scrollTop=M?0:d.top;else if(d.bottom>m+w){var te=Math.min(d.top,(F?A:d.bottom)-w);te!=m&&(x.scrollTop=te)}var ie=l.options.fixedGutter?0:p.gutters.offsetWidth,_e=l.curOp&&l.curOp.scrollLeft!=null?l.curOp.scrollLeft:p.scroller.scrollLeft-ie,pe=Jn(l)-p.gutters.offsetWidth,Pe=d.right-d.left>pe;return Pe&&(d.right=d.left+pe),d.left<10?x.scrollLeft=0:d.left<_e?x.scrollLeft=Math.max(0,d.left+ie-(Pe?0:10)):d.right>pe+_e-3&&(x.scrollLeft=d.right+(Pe?0:10)-pe),x}function Kw(l,d){d!=null&&(nm(l),l.curOp.scrollTop=(l.curOp.scrollTop==null?l.doc.scrollTop:l.curOp.scrollTop)+d)}function Bu(l){nm(l);var d=l.getCursor();l.curOp.scrollToPos={from:d,to:d,margin:l.options.cursorScrollMargin}}function nh(l,d,p){(d!=null||p!=null)&&nm(l),d!=null&&(l.curOp.scrollLeft=d),p!=null&&(l.curOp.scrollTop=p)}function JU(l,d){nm(l),l.curOp.scrollToPos=d}function nm(l){var d=l.curOp.scrollToPos;if(d){l.curOp.scrollToPos=null;var p=YM(l,d.from),h=YM(l,d.to);oP(l,p,h,d.margin)}}function oP(l,d,p,h){var m=Gw(l,{left:Math.min(d.left,p.left),top:Math.min(d.top,p.top)-h,right:Math.max(d.right,p.right),bottom:Math.max(d.bottom,p.bottom)+h});nh(l,m.scrollLeft,m.scrollTop)}function rh(l,d){Math.abs(l.doc.scrollTop-d)<2||(n||Yw(l,{top:d}),sP(l,d,!0),n&&Yw(l),sh(l,100))}function sP(l,d,p){d=Math.max(0,Math.min(l.display.scroller.scrollHeight-l.display.scroller.clientHeight,d)),!(l.display.scroller.scrollTop==d&&!p)&&(l.doc.scrollTop=d,l.display.scrollbars.setScrollTop(d),l.display.scroller.scrollTop!=d&&(l.display.scroller.scrollTop=d))}function mc(l,d,p,h){d=Math.max(0,Math.min(d,l.display.scroller.scrollWidth-l.display.scroller.clientWidth)),!((p?d==l.doc.scrollLeft:Math.abs(l.doc.scrollLeft-d)<2)&&!h)&&(l.doc.scrollLeft=d,dP(l),l.display.scroller.scrollLeft!=d&&(l.display.scroller.scrollLeft=d),l.display.scrollbars.setScrollLeft(d))}function ih(l){var d=l.display,p=d.gutters.offsetWidth,h=Math.round(l.doc.height+tr(l.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:l.options.fixedGutter?p:0,docHeight:h,scrollHeight:h+Dn(l)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:p}}var vc=function(l,d,p){this.cm=p;var h=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),m=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");h.tabIndex=m.tabIndex=-1,l(h),l(m),ye(h,"scroll",function(){h.clientHeight&&d(h.scrollTop,"vertical")}),ye(m,"scroll",function(){m.clientWidth&&d(m.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&c<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};vc.prototype.update=function(l){var d=l.scrollWidth>l.clientWidth+1,p=l.scrollHeight>l.clientHeight+1,h=l.nativeBarWidth;if(p){this.vert.style.display="block",this.vert.style.bottom=d?h+"px":"0";var m=l.viewHeight-(d?h:0);this.vert.firstChild.style.height=Math.max(0,l.scrollHeight-l.clientHeight+m)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(d){this.horiz.style.display="block",this.horiz.style.right=p?h+"px":"0",this.horiz.style.left=l.barLeft+"px";var w=l.viewWidth-l.barLeft-(p?h:0);this.horiz.firstChild.style.width=Math.max(0,l.scrollWidth-l.clientWidth+w)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&l.clientHeight>0&&(h==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:p?h:0,bottom:d?h:0}},vc.prototype.setScrollLeft=function(l){this.horiz.scrollLeft!=l&&(this.horiz.scrollLeft=l),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},vc.prototype.setScrollTop=function(l){this.vert.scrollTop!=l&&(this.vert.scrollTop=l),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},vc.prototype.zeroWidthHack=function(){var l=N&&!b?"12px":"18px";this.horiz.style.height=this.vert.style.width=l,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Te,this.disableVert=new Te},vc.prototype.enableZeroWidthBar=function(l,d,p){l.style.pointerEvents="auto";function h(){var m=l.getBoundingClientRect(),w=p=="vert"?document.elementFromPoint(m.right-1,(m.top+m.bottom)/2):document.elementFromPoint((m.right+m.left)/2,m.bottom-1);w!=l?l.style.pointerEvents="none":d.set(1e3,h)}d.set(1e3,h)},vc.prototype.clear=function(){var l=this.horiz.parentNode;l.removeChild(this.horiz),l.removeChild(this.vert)};var oh=function(){};oh.prototype.update=function(){return{bottom:0,right:0}},oh.prototype.setScrollLeft=function(){},oh.prototype.setScrollTop=function(){},oh.prototype.clear=function(){};function Uu(l,d){d||(d=ih(l));var p=l.display.barWidth,h=l.display.barHeight;aP(l,d);for(var m=0;m<4&&p!=l.display.barWidth||h!=l.display.barHeight;m++)p!=l.display.barWidth&&l.options.lineWrapping&&em(l),aP(l,ih(l)),p=l.display.barWidth,h=l.display.barHeight}function aP(l,d){var p=l.display,h=p.scrollbars.update(d);p.sizer.style.paddingRight=(p.barWidth=h.right)+"px",p.sizer.style.paddingBottom=(p.barHeight=h.bottom)+"px",p.heightForcer.style.borderBottom=h.bottom+"px solid transparent",h.right&&h.bottom?(p.scrollbarFiller.style.display="block",p.scrollbarFiller.style.height=h.bottom+"px",p.scrollbarFiller.style.width=h.right+"px"):p.scrollbarFiller.style.display="",h.bottom&&l.options.coverGutterNextToScrollbar&&l.options.fixedGutter?(p.gutterFiller.style.display="block",p.gutterFiller.style.height=h.bottom+"px",p.gutterFiller.style.width=d.gutterWidth+"px"):p.gutterFiller.style.display=""}var lP={native:vc,null:oh};function cP(l){l.display.scrollbars&&(l.display.scrollbars.clear(),l.display.scrollbars.addClass&&$(l.display.wrapper,l.display.scrollbars.addClass)),l.display.scrollbars=new lP[l.options.scrollbarStyle](function(d){l.display.wrapper.insertBefore(d,l.display.scrollbarFiller),ye(d,"mousedown",function(){l.state.focused&&setTimeout(function(){return l.display.input.focus()},0)}),d.setAttribute("cm-not-content","true")},function(d,p){p=="horizontal"?mc(l,d):rh(l,d)},l),l.display.scrollbars.addClass&&Ee(l.display.wrapper,l.display.scrollbars.addClass)}var ZU=0;function yc(l){l.curOp={cm:l,viewChanged:!1,startHeight:l.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ZU,markArrays:null},Pa(l.curOp)}function _c(l){var d=l.curOp;d&&ul(d,function(p){for(var h=0;h<p.ops.length;h++)p.ops[h].cm.curOp=null;XU(p)})}function XU(l){for(var d=l.ops,p=0;p<d.length;p++)eH(d[p]);for(var h=0;h<d.length;h++)tH(d[h]);for(var m=0;m<d.length;m++)nH(d[m]);for(var w=0;w<d.length;w++)rH(d[w]);for(var x=0;x<d.length;x++)iH(d[x])}function eH(l){var d=l.cm,p=d.display;sH(d),l.updateMaxLine&&_i(d),l.mustUpdate=l.viewChanged||l.forceUpdate||l.scrollTop!=null||l.scrollToPos&&(l.scrollToPos.from.line<p.viewFrom||l.scrollToPos.to.line>=p.viewTo)||p.maxLineChanged&&d.options.lineWrapping,l.update=l.mustUpdate&&new rm(d,l.mustUpdate&&{top:l.scrollTop,ensure:l.scrollToPos},l.forceUpdate)}function tH(l){l.updatedDisplay=l.mustUpdate&&Qw(l.cm,l.update)}function nH(l){var d=l.cm,p=d.display;l.updatedDisplay&&em(d),l.barMeasure=ih(d),p.maxLineChanged&&!d.options.lineWrapping&&(l.adjustWidthTo=we(d,p.maxLine,p.maxLine.text.length).left+3,d.display.sizerWidth=l.adjustWidthTo,l.barMeasure.scrollWidth=Math.max(p.scroller.clientWidth,p.sizer.offsetLeft+l.adjustWidthTo+Dn(d)+d.display.barWidth),l.maxScrollLeft=Math.max(0,p.sizer.offsetLeft+l.adjustWidthTo-Jn(d))),(l.updatedDisplay||l.selectionChanged)&&(l.preparedSelection=p.input.prepareSelection())}function rH(l){var d=l.cm;l.adjustWidthTo!=null&&(d.display.sizer.style.minWidth=l.adjustWidthTo+"px",l.maxScrollLeft<d.doc.scrollLeft&&mc(d,Math.min(d.display.scroller.scrollLeft,l.maxScrollLeft),!0),d.display.maxLineChanged=!1);var p=l.focus&&l.focus==xe();l.preparedSelection&&d.display.input.showSelection(l.preparedSelection,p),(l.updatedDisplay||l.startHeight!=d.doc.height)&&Uu(d,l.barMeasure),l.updatedDisplay&&Zw(d,l.barMeasure),l.selectionChanged&&$w(d),d.state.focused&&l.updateInput&&d.display.input.reset(l.typing),p&&rP(l.cm)}function iH(l){var d=l.cm,p=d.display,h=d.doc;if(l.updatedDisplay&&uP(d,l.update),p.wheelStartX!=null&&(l.scrollTop!=null||l.scrollLeft!=null||l.scrollToPos)&&(p.wheelStartX=p.wheelStartY=null),l.scrollTop!=null&&sP(d,l.scrollTop,l.forceScroll),l.scrollLeft!=null&&mc(d,l.scrollLeft,!0,!0),l.scrollToPos){var m=QU(d,Ge(h,l.scrollToPos.from),Ge(h,l.scrollToPos.to),l.scrollToPos.margin);KU(d,m)}var w=l.maybeHiddenMarkers,x=l.maybeUnhiddenMarkers;if(w)for(var A=0;A<w.length;++A)w[A].lines.length||at(w[A],"hide");if(x)for(var M=0;M<x.length;++M)x[M].lines.length&&at(x[M],"unhide");p.wrapper.offsetHeight&&(h.scrollTop=d.display.scroller.scrollTop),l.changeObjs&&at(d,"changes",d,l.changeObjs),l.update&&l.update.finish()}function Eo(l,d){if(l.curOp)return d();yc(l);try{return d()}finally{_c(l)}}function ui(l,d){return function(){if(l.curOp)return d.apply(l,arguments);yc(l);try{return d.apply(l,arguments)}finally{_c(l)}}}function Ni(l){return function(){if(this.curOp)return l.apply(this,arguments);yc(this);try{return l.apply(this,arguments)}finally{_c(this)}}}function di(l){return function(){var d=this.cm;if(!d||d.curOp)return l.apply(this,arguments);yc(d);try{return l.apply(this,arguments)}finally{_c(d)}}}function sh(l,d){l.doc.highlightFrontier<l.display.viewTo&&l.state.highlight.set(d,ft(oH,l))}function oH(l){var d=l.doc;if(!(d.highlightFrontier>=l.display.viewTo)){var p=+new Date+l.options.workTime,h=gr(l,d.highlightFrontier),m=[];d.iter(h.line,Math.min(d.first+d.size,l.display.viewTo+500),function(w){if(h.line>=l.display.viewFrom){var x=w.styles,A=w.text.length>l.options.maxHighlightLength?Ir(d.mode,h.state):null,M=ys(l,w,h,!0);A&&(h.state=A),w.styles=M.styles;var F=w.styleClasses,te=M.classes;te?w.styleClasses=te:F&&(w.styleClasses=null);for(var ie=!x||x.length!=w.styles.length||F!=te&&(!F||!te||F.bgClass!=te.bgClass||F.textClass!=te.textClass),_e=0;!ie&&_e<x.length;++_e)ie=x[_e]!=w.styles[_e];ie&&m.push(h.line),w.stateAfter=h.save(),h.nextLine()}else w.text.length<=l.options.maxHighlightLength&&qr(l,w.text,h),w.stateAfter=h.line%5==0?h.save():null,h.nextLine();if(+new Date>p)return sh(l,l.options.workDelay),!0}),d.highlightFrontier=h.line,d.modeFrontier=Math.max(d.modeFrontier,h.line),m.length&&Eo(l,function(){for(var w=0;w<m.length;w++)fl(l,m[w],"text")})}}var rm=function(l,d,p){var h=l.display;this.viewport=d,this.visible=tm(h,l.doc,d),this.editorIsHidden=!h.wrapper.offsetWidth,this.wrapperHeight=h.wrapper.clientHeight,this.wrapperWidth=h.wrapper.clientWidth,this.oldDisplayWidth=Jn(l),this.force=p,this.dims=Uw(l),this.events=[]};rm.prototype.signal=function(l,d){qt(l,d)&&this.events.push(arguments)},rm.prototype.finish=function(){for(var l=0;l<this.events.length;l++)at.apply(null,this.events[l])};function sH(l){var d=l.display;!d.scrollbarsClipped&&d.scroller.offsetWidth&&(d.nativeBarWidth=d.scroller.offsetWidth-d.scroller.clientWidth,d.heightForcer.style.height=Dn(l)+"px",d.sizer.style.marginBottom=-d.nativeBarWidth+"px",d.sizer.style.borderRightWidth=Dn(l)+"px",d.scrollbarsClipped=!0)}function aH(l){if(l.hasFocus())return null;var d=xe();if(!d||!V(l.display.lineDiv,d))return null;var p={activeElt:d};if(window.getSelection){var h=window.getSelection();h.anchorNode&&h.extend&&V(l.display.lineDiv,h.anchorNode)&&(p.anchorNode=h.anchorNode,p.anchorOffset=h.anchorOffset,p.focusNode=h.focusNode,p.focusOffset=h.focusOffset)}return p}function lH(l){if(!(!l||!l.activeElt||l.activeElt==xe())&&(l.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(l.activeElt.nodeName)&&l.anchorNode&&V(document.body,l.anchorNode)&&V(document.body,l.focusNode))){var d=window.getSelection(),p=document.createRange();p.setEnd(l.anchorNode,l.anchorOffset),p.collapse(!1),d.removeAllRanges(),d.addRange(p),d.extend(l.focusNode,l.focusOffset)}}function Qw(l,d){var p=l.display,h=l.doc;if(d.editorIsHidden)return hl(l),!1;if(!d.force&&d.visible.from>=p.viewFrom&&d.visible.to<=p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo)&&p.renderedView==p.view&&eP(l)==0)return!1;fP(l)&&(hl(l),d.dims=Uw(l));var m=h.first+h.size,w=Math.max(d.visible.from-l.options.viewportMargin,h.first),x=Math.min(m,d.visible.to+l.options.viewportMargin);p.viewFrom<w&&w-p.viewFrom<20&&(w=Math.max(h.first,p.viewFrom)),p.viewTo>x&&p.viewTo-x<20&&(x=Math.min(m,p.viewTo)),xr&&(w=ki(l.doc,w),x=Ei(l.doc,x));var A=w!=p.viewFrom||x!=p.viewTo||p.lastWrapHeight!=d.wrapperHeight||p.lastWrapWidth!=d.wrapperWidth;qU(l,w,x),p.viewOffset=li(ht(l.doc,p.viewFrom)),l.display.mover.style.top=p.viewOffset+"px";var M=eP(l);if(!A&&M==0&&!d.force&&p.renderedView==p.view&&(p.updateLineNumbers==null||p.updateLineNumbers>=p.viewTo))return!1;var F=aH(l);return M>4&&(p.lineDiv.style.display="none"),cH(l,p.updateLineNumbers,d.dims),M>4&&(p.lineDiv.style.display=""),p.renderedView=p.view,lH(F),I(p.cursorDiv),I(p.selectionDiv),p.gutters.style.height=p.sizer.style.minHeight=0,A&&(p.lastWrapHeight=d.wrapperHeight,p.lastWrapWidth=d.wrapperWidth,sh(l,400)),p.updateLineNumbers=null,!0}function uP(l,d){for(var p=d.viewport,h=!0;;h=!1){if(!h||!l.options.lineWrapping||d.oldDisplayWidth==Jn(l)){if(p&&p.top!=null&&(p={top:Math.min(l.doc.height+tr(l.display)-P(l),p.top)}),d.visible=tm(l.display,l.doc,p),d.visible.from>=l.display.viewFrom&&d.visible.to<=l.display.viewTo)break}else h&&(d.visible=tm(l.display,l.doc,p));if(!Qw(l,d))break;em(l);var m=ih(l);th(l),Uu(l,m),Zw(l,m),d.force=!1}d.signal(l,"update",l),(l.display.viewFrom!=l.display.reportedViewFrom||l.display.viewTo!=l.display.reportedViewTo)&&(d.signal(l,"viewportChange",l,l.display.viewFrom,l.display.viewTo),l.display.reportedViewFrom=l.display.viewFrom,l.display.reportedViewTo=l.display.viewTo)}function Yw(l,d){var p=new rm(l,d);if(Qw(l,p)){em(l),uP(l,p);var h=ih(l);th(l),Uu(l,h),Zw(l,h),p.finish()}}function cH(l,d,p){var h=l.display,m=l.options.lineNumbers,w=h.lineDiv,x=w.firstChild;function A(Pe){var Ve=Pe.nextSibling;return u&&N&&l.display.currentWheelTarget==Pe?Pe.style.display="none":Pe.parentNode.removeChild(Pe),Ve}for(var M=h.view,F=h.viewFrom,te=0;te<M.length;te++){var ie=M[te];if(!ie.hidden)if(!ie.node||ie.node.parentNode!=w){var _e=E(l,ie,F,p);w.insertBefore(_e,x)}else{for(;x!=ie.node;)x=A(x);var pe=m&&d!=null&&d<=F&&ie.lineNumber;ie.changes&&($e(ie.changes,"gutter")>-1&&(pe=!1),Bo(l,ie,F,p)),pe&&(I(ie.lineNumber),ie.lineNumber.appendChild(document.createTextNode(Dr(l.options,F)))),x=ie.node.nextSibling}F+=ie.size}for(;x;)x=A(x)}function Jw(l){var d=l.gutters.offsetWidth;l.sizer.style.marginLeft=d+"px",Yn(l,"gutterChanged",l)}function Zw(l,d){l.display.sizer.style.minHeight=d.docHeight+"px",l.display.heightForcer.style.top=d.docHeight+"px",l.display.gutters.style.height=d.docHeight+l.display.barHeight+Dn(l)+"px"}function dP(l){var d=l.display,p=d.view;if(!(!d.alignWidgets&&(!d.gutters.firstChild||!l.options.fixedGutter))){for(var h=Hw(d)-d.scroller.scrollLeft+l.doc.scrollLeft,m=d.gutters.offsetWidth,w=h+"px",x=0;x<p.length;x++)if(!p[x].hidden){l.options.fixedGutter&&(p[x].gutter&&(p[x].gutter.style.left=w),p[x].gutterBackground&&(p[x].gutterBackground.style.left=w));var A=p[x].alignable;if(A)for(var M=0;M<A.length;M++)A[M].style.left=w}l.options.fixedGutter&&(d.gutters.style.left=h+m+"px")}}function fP(l){if(!l.options.lineNumbers)return!1;var d=l.doc,p=Dr(l.options,d.first+d.size-1),h=l.display;if(p.length!=h.lineNumChars){var m=h.measure.appendChild(O("div",[O("div",p)],"CodeMirror-linenumber CodeMirror-gutter-elt")),w=m.firstChild.offsetWidth,x=m.offsetWidth-w;return h.lineGutter.style.width="",h.lineNumInnerWidth=Math.max(w,h.lineGutter.offsetWidth-x)+1,h.lineNumWidth=h.lineNumInnerWidth+x,h.lineNumChars=h.lineNumInnerWidth?p.length:-1,h.lineGutter.style.width=h.lineNumWidth+"px",Jw(l.display),!0}return!1}function Xw(l,d){for(var p=[],h=!1,m=0;m<l.length;m++){var w=l[m],x=null;if(typeof w!="string"&&(x=w.style,w=w.className),w=="CodeMirror-linenumbers")if(d)h=!0;else continue;p.push({className:w,style:x})}return d&&!h&&p.push({className:"CodeMirror-linenumbers",style:null}),p}function hP(l){var d=l.gutters,p=l.gutterSpecs;I(d),l.lineGutter=null;for(var h=0;h<p.length;++h){var m=p[h],w=m.className,x=m.style,A=d.appendChild(O("div",null,"CodeMirror-gutter "+w));x&&(A.style.cssText=x),w=="CodeMirror-linenumbers"&&(l.lineGutter=A,A.style.width=(l.lineNumWidth||1)+"px")}d.style.display=p.length?"":"none",Jw(l)}function ah(l){hP(l.display),to(l),dP(l)}function uH(l,d,p,h){var m=this;this.input=p,m.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),m.scrollbarFiller.setAttribute("cm-not-content","true"),m.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),m.gutterFiller.setAttribute("cm-not-content","true"),m.lineDiv=Z("div",null,"CodeMirror-code"),m.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),m.cursorDiv=O("div",null,"CodeMirror-cursors"),m.measure=O("div",null,"CodeMirror-measure"),m.lineMeasure=O("div",null,"CodeMirror-measure"),m.lineSpace=Z("div",[m.measure,m.lineMeasure,m.selectionDiv,m.cursorDiv,m.lineDiv],null,"position: relative; outline: none");var w=Z("div",[m.lineSpace],"CodeMirror-lines");m.mover=O("div",[w],null,"position: relative"),m.sizer=O("div",[m.mover],"CodeMirror-sizer"),m.sizerWidth=null,m.heightForcer=O("div",null,null,"position: absolute; height: "+de+"px; width: 1px;"),m.gutters=O("div",null,"CodeMirror-gutters"),m.lineGutter=null,m.scroller=O("div",[m.sizer,m.heightForcer,m.gutters],"CodeMirror-scroll"),m.scroller.setAttribute("tabIndex","-1"),m.wrapper=O("div",[m.scrollbarFiller,m.gutterFiller,m.scroller],"CodeMirror"),m.wrapper.setAttribute("translate","no"),a&&c<8&&(m.gutters.style.zIndex=-1,m.scroller.style.paddingRight=0),!u&&!(n&&q)&&(m.scroller.draggable=!0),l&&(l.appendChild?l.appendChild(m.wrapper):l(m.wrapper)),m.viewFrom=m.viewTo=d.first,m.reportedViewFrom=m.reportedViewTo=d.first,m.view=[],m.renderedView=null,m.externalMeasured=null,m.viewOffset=0,m.lastWrapHeight=m.lastWrapWidth=0,m.updateLineNumbers=null,m.nativeBarWidth=m.barHeight=m.barWidth=0,m.scrollbarsClipped=!1,m.lineNumWidth=m.lineNumInnerWidth=m.lineNumChars=null,m.alignWidgets=!1,m.cachedCharWidth=m.cachedTextHeight=m.cachedPaddingH=null,m.maxLine=null,m.maxLineLength=0,m.maxLineChanged=!1,m.wheelDX=m.wheelDY=m.wheelStartX=m.wheelStartY=null,m.shift=!1,m.selForContextMenu=null,m.activeTouch=null,m.gutterSpecs=Xw(h.gutters,h.lineNumbers),hP(m),p.init(m)}var im=0,Uo=null;a?Uo=-.53:n?Uo=15:g?Uo=-.7:_&&(Uo=-.3333333333333333);function pP(l){var d=l.wheelDeltaX,p=l.wheelDeltaY;return d==null&&l.detail&&l.axis==l.HORIZONTAL_AXIS&&(d=l.detail),p==null&&l.detail&&l.axis==l.VERTICAL_AXIS?p=l.detail:p==null&&(p=l.wheelDelta),{x:d,y:p}}function dH(l){var d=pP(l);return d.x*=Uo,d.y*=Uo,d}function gP(l,d){var p=pP(d),h=p.x,m=p.y,w=l.display,x=w.scroller,A=x.scrollWidth>x.clientWidth,M=x.scrollHeight>x.clientHeight;if(h&&A||m&&M){if(m&&N&&u){e:for(var F=d.target,te=w.view;F!=x;F=F.parentNode)for(var ie=0;ie<te.length;ie++)if(te[ie].node==F){l.display.currentWheelTarget=F;break e}}if(h&&!n&&!v&&Uo!=null){m&&M&&rh(l,Math.max(0,x.scrollTop+m*Uo)),mc(l,Math.max(0,x.scrollLeft+h*Uo)),(!m||m&&M)&&Jt(d),w.wheelStartX=null;return}if(m&&Uo!=null){var _e=m*Uo,pe=l.doc.scrollTop,Pe=pe+w.wrapper.clientHeight;_e<0?pe=Math.max(0,pe+_e-50):Pe=Math.min(l.doc.height,Pe+_e+50),Yw(l,{top:pe,bottom:Pe})}im<20&&(w.wheelStartX==null?(w.wheelStartX=x.scrollLeft,w.wheelStartY=x.scrollTop,w.wheelDX=h,w.wheelDY=m,setTimeout(function(){if(w.wheelStartX!=null){var Ve=x.scrollLeft-w.wheelStartX,Ye=x.scrollTop-w.wheelStartY,it=Ye&&w.wheelDY&&Ye/w.wheelDY||Ve&&w.wheelDX&&Ve/w.wheelDX;w.wheelStartX=w.wheelStartY=null,it&&(Uo=(Uo*im+it)/(im+1),++im)}},200)):(w.wheelDX+=h,w.wheelDY+=m))}}var Ho=function(l,d){this.ranges=l,this.primIndex=d};Ho.prototype.primary=function(){return this.ranges[this.primIndex]},Ho.prototype.equals=function(l){if(l==this)return!0;if(l.primIndex!=this.primIndex||l.ranges.length!=this.ranges.length)return!1;for(var d=0;d<this.ranges.length;d++){var p=this.ranges[d],h=l.ranges[d];if(!yi(p.anchor,h.anchor)||!yi(p.head,h.head))return!1}return!0},Ho.prototype.deepCopy=function(){for(var l=[],d=0;d<this.ranges.length;d++)l[d]=new Mn(H(this.ranges[d].anchor),H(this.ranges[d].head));return new Ho(l,this.primIndex)},Ho.prototype.somethingSelected=function(){for(var l=0;l<this.ranges.length;l++)if(!this.ranges[l].empty())return!0;return!1},Ho.prototype.contains=function(l,d){d||(d=l);for(var p=0;p<this.ranges.length;p++){var h=this.ranges[p];if(Nt(d,h.from())>=0&&Nt(l,h.to())<=0)return p}return-1};var Mn=function(l,d){this.anchor=l,this.head=d};Mn.prototype.from=function(){return De(this.anchor,this.head)},Mn.prototype.to=function(){return re(this.anchor,this.head)},Mn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Ss(l,d,p){var h=l&&l.options.selectionsMayTouch,m=d[p];d.sort(function(_e,pe){return Nt(_e.from(),pe.from())}),p=$e(d,m);for(var w=1;w<d.length;w++){var x=d[w],A=d[w-1],M=Nt(A.to(),x.from());if(h&&!x.empty()?M>0:M>=0){var F=De(A.from(),x.from()),te=re(A.to(),x.to()),ie=A.empty()?x.from()==x.head:A.from()==A.head;w<=p&&--p,d.splice(--w,2,new Mn(ie?te:F,ie?F:te))}}return new Ho(d,p)}function pl(l,d){return new Ho([new Mn(l,d||l)],0)}function gl(l){return l.text?Be(l.from.line+l.text.length-1,It(l.text).length+(l.text.length==1?l.from.ch:0)):l.to}function mP(l,d){if(Nt(l,d.from)<0)return l;if(Nt(l,d.to)<=0)return gl(d);var p=l.line+d.text.length-(d.to.line-d.from.line)-1,h=l.ch;return l.line==d.to.line&&(h+=gl(d).ch-d.to.ch),Be(p,h)}function eb(l,d){for(var p=[],h=0;h<l.sel.ranges.length;h++){var m=l.sel.ranges[h];p.push(new Mn(mP(m.anchor,d),mP(m.head,d)))}return Ss(l.cm,p,l.sel.primIndex)}function vP(l,d,p){return l.line==d.line?Be(p.line,l.ch-d.ch+p.ch):Be(p.line+(l.line-d.line),l.ch)}function fH(l,d,p){for(var h=[],m=Be(l.first,0),w=m,x=0;x<d.length;x++){var A=d[x],M=vP(A.from,m,w),F=vP(gl(A),m,w);if(m=A.to,w=F,p=="around"){var te=l.sel.ranges[x],ie=Nt(te.head,te.anchor)<0;h[x]=new Mn(ie?F:M,ie?M:F)}else h[x]=new Mn(M,M)}return new Ho(h,l.sel.primIndex)}function tb(l){l.doc.mode=cn(l.options,l.doc.modeOption),lh(l)}function lh(l){l.doc.iter(function(d){d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null)}),l.doc.modeFrontier=l.doc.highlightFrontier=l.doc.first,sh(l,100),l.state.modeGen++,l.curOp&&to(l)}function yP(l,d){return d.from.ch==0&&d.to.ch==0&&It(d.text)==""&&(!l.cm||l.cm.options.wholeLineUpdateBefore)}function nb(l,d,p,h){function m(vt){return p?p[vt]:null}function w(vt,ot,_t){Ru(vt,ot,_t,h),Yn(vt,"change",vt,d)}function x(vt,ot){for(var _t=[],jt=vt;jt<ot;++jt)_t.push(new Sr(F[jt],m(jt),h));return _t}var A=d.from,M=d.to,F=d.text,te=ht(l,A.line),ie=ht(l,M.line),_e=It(F),pe=m(F.length-1),Pe=M.line-A.line;if(d.full)l.insert(0,x(0,F.length)),l.remove(F.length,l.size-F.length);else if(yP(l,d)){var Ve=x(0,F.length-1);w(ie,ie.text,pe),Pe&&l.remove(A.line,Pe),Ve.length&&l.insert(A.line,Ve)}else if(te==ie)if(F.length==1)w(te,te.text.slice(0,A.ch)+_e+te.text.slice(M.ch),pe);else{var Ye=x(1,F.length-1);Ye.push(new Sr(_e+te.text.slice(M.ch),pe,h)),w(te,te.text.slice(0,A.ch)+F[0],m(0)),l.insert(A.line+1,Ye)}else if(F.length==1)w(te,te.text.slice(0,A.ch)+F[0]+ie.text.slice(M.ch),m(0)),l.remove(A.line+1,Pe);else{w(te,te.text.slice(0,A.ch)+F[0],m(0)),w(ie,_e+ie.text.slice(M.ch),pe);var it=x(1,F.length-1);Pe>1&&l.remove(A.line+1,Pe-1),l.insert(A.line+1,it)}Yn(l,"change",l,d)}function ml(l,d,p){function h(m,w,x){if(m.linked)for(var A=0;A<m.linked.length;++A){var M=m.linked[A];if(M.doc!=w){var F=x&&M.sharedHist;p&&!F||(d(M.doc,F),h(M.doc,m,F))}}}h(l,null,!0)}function _P(l,d){if(d.cm)throw new Error("This document is already in use.");l.doc=d,d.cm=l,zw(l),tb(l),wP(l),l.options.direction=d.direction,l.options.lineWrapping||_i(l),l.options.mode=d.modeOption,to(l)}function wP(l){(l.doc.direction=="rtl"?Ee:$)(l.display.lineDiv,"CodeMirror-rtl")}function hH(l){Eo(l,function(){wP(l),to(l)})}function om(l){this.done=[],this.undone=[],this.undoDepth=l?l.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=l?l.maxGeneration:1}function rb(l,d){var p={from:H(d.from),to:gl(d),text:pr(l,d.from,d.to)};return xP(l,p,d.from.line,d.to.line+1),ml(l,function(h){return xP(h,p,d.from.line,d.to.line+1)},!0),p}function bP(l){for(;l.length;){var d=It(l);if(d.ranges)l.pop();else break}}function pH(l,d){if(d)return bP(l.done),It(l.done);if(l.done.length&&!It(l.done).ranges)return It(l.done);if(l.done.length>1&&!l.done[l.done.length-2].ranges)return l.done.pop(),It(l.done)}function CP(l,d,p,h){var m=l.history;m.undone.length=0;var w=+new Date,x,A;if((m.lastOp==h||m.lastOrigin==d.origin&&d.origin&&(d.origin.charAt(0)=="+"&&m.lastModTime>w-(l.cm?l.cm.options.historyEventDelay:500)||d.origin.charAt(0)=="*"))&&(x=pH(m,m.lastOp==h)))A=It(x.changes),Nt(d.from,d.to)==0&&Nt(d.from,A.to)==0?A.to=gl(d):x.changes.push(rb(l,d));else{var M=It(m.done);for((!M||!M.ranges)&&sm(l.sel,m.done),x={changes:[rb(l,d)],generation:m.generation},m.done.push(x);m.done.length>m.undoDepth;)m.done.shift(),m.done[0].ranges||m.done.shift()}m.done.push(p),m.generation=++m.maxGeneration,m.lastModTime=m.lastSelTime=w,m.lastOp=m.lastSelOp=h,m.lastOrigin=m.lastSelOrigin=d.origin,A||at(l,"historyAdded")}function gH(l,d,p,h){var m=d.charAt(0);return m=="*"||m=="+"&&p.ranges.length==h.ranges.length&&p.somethingSelected()==h.somethingSelected()&&new Date-l.history.lastSelTime<=(l.cm?l.cm.options.historyEventDelay:500)}function mH(l,d,p,h){var m=l.history,w=h&&h.origin;p==m.lastSelOp||w&&m.lastSelOrigin==w&&(m.lastModTime==m.lastSelTime&&m.lastOrigin==w||gH(l,w,It(m.done),d))?m.done[m.done.length-1]=d:sm(d,m.done),m.lastSelTime=+new Date,m.lastSelOrigin=w,m.lastSelOp=p,h&&h.clearRedo!==!1&&bP(m.undone)}function sm(l,d){var p=It(d);p&&p.ranges&&p.equals(l)||d.push(l)}function xP(l,d,p,h){var m=d["spans_"+l.id],w=0;l.iter(Math.max(l.first,p),Math.min(l.first+l.size,h),function(x){x.markedSpans&&((m||(m=d["spans_"+l.id]={}))[w]=x.markedSpans),++w})}function vH(l){if(!l)return null;for(var d,p=0;p<l.length;++p)l[p].marker.explicitlyCleared?d||(d=l.slice(0,p)):d&&d.push(l[p]);return d?d.length?d:null:l}function yH(l,d){var p=d["spans_"+l.id];if(!p)return null;for(var h=[],m=0;m<d.text.length;++m)h.push(vH(p[m]));return h}function EP(l,d){var p=yH(l,d),h=Gr(l,d);if(!p)return h;if(!h)return p;for(var m=0;m<p.length;++m){var w=p[m],x=h[m];if(w&&x)e:for(var A=0;A<x.length;++A){for(var M=x[A],F=0;F<w.length;++F)if(w[F].marker==M.marker)continue e;w.push(M)}else x&&(p[m]=x)}return p}function Hu(l,d,p){for(var h=[],m=0;m<l.length;++m){var w=l[m];if(w.ranges){h.push(p?Ho.prototype.deepCopy.call(w):w);continue}var x=w.changes,A=[];h.push({changes:A});for(var M=0;M<x.length;++M){var F=x[M],te=void 0;if(A.push({from:F.from,to:F.to,text:F.text}),d)for(var ie in F)(te=ie.match(/^spans_(\d+)$/))&&$e(d,Number(te[1]))>-1&&(It(A)[ie]=F[ie],delete F[ie])}}return h}function ib(l,d,p,h){if(h){var m=l.anchor;if(p){var w=Nt(d,m)<0;w!=Nt(p,m)<0?(m=d,d=p):w!=Nt(d,p)<0&&(d=p)}return new Mn(m,d)}else return new Mn(p||d,d)}function am(l,d,p,h,m){m==null&&(m=l.cm&&(l.cm.display.shift||l.extend)),Ai(l,new Ho([ib(l.sel.primary(),d,p,m)],0),h)}function SP(l,d,p){for(var h=[],m=l.cm&&(l.cm.display.shift||l.extend),w=0;w<l.sel.ranges.length;w++)h[w]=ib(l.sel.ranges[w],d[w],null,m);var x=Ss(l.cm,h,l.sel.primIndex);Ai(l,x,p)}function ob(l,d,p,h){var m=l.sel.ranges.slice(0);m[d]=p,Ai(l,Ss(l.cm,m,l.sel.primIndex),h)}function AP(l,d,p,h){Ai(l,pl(d,p),h)}function _H(l,d,p){var h={ranges:d.ranges,update:function(m){this.ranges=[];for(var w=0;w<m.length;w++)this.ranges[w]=new Mn(Ge(l,m[w].anchor),Ge(l,m[w].head))},origin:p&&p.origin};return at(l,"beforeSelectionChange",l,h),l.cm&&at(l.cm,"beforeSelectionChange",l.cm,h),h.ranges!=d.ranges?Ss(l.cm,h.ranges,h.ranges.length-1):d}function TP(l,d,p){var h=l.history.done,m=It(h);m&&m.ranges?(h[h.length-1]=d,lm(l,d,p)):Ai(l,d,p)}function Ai(l,d,p){lm(l,d,p),mH(l,l.sel,l.cm?l.cm.curOp.id:NaN,p)}function lm(l,d,p){(qt(l,"beforeSelectionChange")||l.cm&&qt(l.cm,"beforeSelectionChange"))&&(d=_H(l,d,p));var h=p&&p.bias||(Nt(d.primary().head,l.sel.primary().head)<0?-1:1);OP(l,PP(l,d,h,!0)),!(p&&p.scroll===!1)&&l.cm&&l.cm.getOption("readOnly")!="nocursor"&&Bu(l.cm)}function OP(l,d){d.equals(l.sel)||(l.sel=d,l.cm&&(l.cm.curOp.updateInput=1,l.cm.curOp.selectionChanged=!0,Tt(l.cm)),Yn(l,"cursorActivity",l))}function MP(l){OP(l,PP(l,l.sel,null,!1))}function PP(l,d,p,h){for(var m,w=0;w<d.ranges.length;w++){var x=d.ranges[w],A=d.ranges.length==l.sel.ranges.length&&l.sel.ranges[w],M=cm(l,x.anchor,A&&A.anchor,p,h),F=cm(l,x.head,A&&A.head,p,h);(m||M!=x.anchor||F!=x.head)&&(m||(m=d.ranges.slice(0,w)),m[w]=new Mn(M,F))}return m?Ss(l.cm,m,d.primIndex):d}function zu(l,d,p,h,m){var w=ht(l,d.line);if(w.markedSpans)for(var x=0;x<w.markedSpans.length;++x){var A=w.markedSpans[x],M=A.marker,F="selectLeft"in M?!M.selectLeft:M.inclusiveLeft,te="selectRight"in M?!M.selectRight:M.inclusiveRight;if((A.from==null||(F?A.from<=d.ch:A.from<d.ch))&&(A.to==null||(te?A.to>=d.ch:A.to>d.ch))){if(m&&(at(M,"beforeCursorEnter"),M.explicitlyCleared))if(w.markedSpans){--x;continue}else break;if(!M.atomic)continue;if(p){var ie=M.find(h<0?1:-1),_e=void 0;if((h<0?te:F)&&(ie=IP(l,ie,-h,ie&&ie.line==d.line?w:null)),ie&&ie.line==d.line&&(_e=Nt(ie,p))&&(h<0?_e<0:_e>0))return zu(l,ie,d,h,m)}var pe=M.find(h<0?-1:1);return(h<0?F:te)&&(pe=IP(l,pe,h,pe.line==d.line?w:null)),pe?zu(l,pe,d,h,m):null}}return d}function cm(l,d,p,h,m){var w=h||1,x=zu(l,d,p,w,m)||!m&&zu(l,d,p,w,!0)||zu(l,d,p,-w,m)||!m&&zu(l,d,p,-w,!0);return x||(l.cantEdit=!0,Be(l.first,0))}function IP(l,d,p,h){return p<0&&d.ch==0?d.line>l.first?Ge(l,Be(d.line-1)):null:p>0&&d.ch==(h||ht(l,d.line)).text.length?d.line<l.first+l.size-1?Be(d.line+1,0):null:new Be(d.line,d.ch+p)}function DP(l){l.setSelection(Be(l.firstLine(),0),Be(l.lastLine()),Re)}function kP(l,d,p){var h={canceled:!1,from:d.from,to:d.to,text:d.text,origin:d.origin,cancel:function(){return h.canceled=!0}};return p&&(h.update=function(m,w,x,A){m&&(h.from=Ge(l,m)),w&&(h.to=Ge(l,w)),x&&(h.text=x),A!==void 0&&(h.origin=A)}),at(l,"beforeChange",l,h),l.cm&&at(l.cm,"beforeChange",l.cm,h),h.canceled?(l.cm&&(l.cm.curOp.updateInput=2),null):{from:h.from,to:h.to,text:h.text,origin:h.origin}}function $u(l,d,p){if(l.cm){if(!l.cm.curOp)return ui(l.cm,$u)(l,d,p);if(l.cm.state.suppressEdits)return}if(!((qt(l,"beforeChange")||l.cm&&qt(l.cm,"beforeChange"))&&(d=kP(l,d,!0),!d))){var h=lr&&!p&&Ws(l,d.from,d.to);if(h)for(var m=h.length-1;m>=0;--m)RP(l,{from:h[m].from,to:h[m].to,text:m?[""]:d.text,origin:d.origin});else RP(l,d)}}function RP(l,d){if(!(d.text.length==1&&d.text[0]==""&&Nt(d.from,d.to)==0)){var p=eb(l,d);CP(l,d,p,l.cm?l.cm.curOp.id:NaN),ch(l,d,p,Gr(l,d));var h=[];ml(l,function(m,w){!w&&$e(h,m.history)==-1&&(LP(m.history,d),h.push(m.history)),ch(m,d,null,Gr(m,d))})}}function um(l,d,p){var h=l.cm&&l.cm.state.suppressEdits;if(!(h&&!p)){for(var m=l.history,w,x=l.sel,A=d=="undo"?m.done:m.undone,M=d=="undo"?m.undone:m.done,F=0;F<A.length&&(w=A[F],!(p?w.ranges&&!w.equals(l.sel):!w.ranges));F++);if(F!=A.length){for(m.lastOrigin=m.lastSelOrigin=null;;)if(w=A.pop(),w.ranges){if(sm(w,M),p&&!w.equals(l.sel)){Ai(l,w,{clearRedo:!1});return}x=w}else if(h){A.push(w);return}else break;var te=[];sm(x,M),M.push({changes:te,generation:m.generation}),m.generation=w.generation||++m.maxGeneration;for(var ie=qt(l,"beforeChange")||l.cm&&qt(l.cm,"beforeChange"),_e=function(Ve){var Ye=w.changes[Ve];if(Ye.origin=d,ie&&!kP(l,Ye,!1))return A.length=0,{};te.push(rb(l,Ye));var it=Ve?eb(l,Ye):It(A);ch(l,Ye,it,EP(l,Ye)),!Ve&&l.cm&&l.cm.scrollIntoView({from:Ye.from,to:gl(Ye)});var vt=[];ml(l,function(ot,_t){!_t&&$e(vt,ot.history)==-1&&(LP(ot.history,Ye),vt.push(ot.history)),ch(ot,Ye,null,EP(ot,Ye))})},pe=w.changes.length-1;pe>=0;--pe){var Pe=_e(pe);if(Pe)return Pe.v}}}}function NP(l,d){if(d!=0&&(l.first+=d,l.sel=new Ho(Ln(l.sel.ranges,function(m){return new Mn(Be(m.anchor.line+d,m.anchor.ch),Be(m.head.line+d,m.head.ch))}),l.sel.primIndex),l.cm)){to(l.cm,l.first,l.first-d,d);for(var p=l.cm.display,h=p.viewFrom;h<p.viewTo;h++)fl(l.cm,h,"gutter")}}function ch(l,d,p,h){if(l.cm&&!l.cm.curOp)return ui(l.cm,ch)(l,d,p,h);if(d.to.line<l.first){NP(l,d.text.length-1-(d.to.line-d.from.line));return}if(!(d.from.line>l.lastLine())){if(d.from.line<l.first){var m=d.text.length-1-(l.first-d.from.line);NP(l,m),d={from:Be(l.first,0),to:Be(d.to.line+m,d.to.ch),text:[It(d.text)],origin:d.origin}}var w=l.lastLine();d.to.line>w&&(d={from:d.from,to:Be(w,ht(l,w).text.length),text:[d.text[0]],origin:d.origin}),d.removed=pr(l,d.from,d.to),p||(p=eb(l,d)),l.cm?wH(l.cm,d,h):nb(l,d,h),lm(l,p,Re),l.cantEdit&&cm(l,Be(l.firstLine(),0))&&(l.cantEdit=!1)}}function wH(l,d,p){var h=l.doc,m=l.display,w=d.from,x=d.to,A=!1,M=w.line;l.options.lineWrapping||(M=zt($t(ht(h,w.line))),h.iter(M,x.line+1,function(pe){if(pe==m.maxLine)return A=!0,!0})),h.sel.contains(d.from,d.to)>-1&&Tt(l),nb(h,d,p,XM(l)),l.options.lineWrapping||(h.iter(M,w.line+d.text.length,function(pe){var Pe=xo(pe);Pe>m.maxLineLength&&(m.maxLine=pe,m.maxLineLength=Pe,m.maxLineChanged=!0,A=!1)}),A&&(l.curOp.updateMaxLine=!0)),_s(h,w.line),sh(l,400);var F=d.text.length-(x.line-w.line)-1;d.full?to(l):w.line==x.line&&d.text.length==1&&!yP(l.doc,d)?fl(l,w.line,"text"):to(l,w.line,x.line+1,F);var te=qt(l,"changes"),ie=qt(l,"change");if(ie||te){var _e={from:w,to:x,text:d.text,removed:d.removed,origin:d.origin};ie&&Yn(l,"change",l,_e),te&&(l.curOp.changeObjs||(l.curOp.changeObjs=[])).push(_e)}l.display.selForContextMenu=null}function Wu(l,d,p,h,m){var w;h||(h=p),Nt(h,p)<0&&(w=[h,p],p=w[0],h=w[1]),typeof d=="string"&&(d=l.splitLines(d)),$u(l,{from:p,to:h,text:d,origin:m})}function jP(l,d,p,h){p<l.line?l.line+=h:d<l.line&&(l.line=d,l.ch=0)}function FP(l,d,p,h){for(var m=0;m<l.length;++m){var w=l[m],x=!0;if(w.ranges){w.copied||(w=l[m]=w.deepCopy(),w.copied=!0);for(var A=0;A<w.ranges.length;A++)jP(w.ranges[A].anchor,d,p,h),jP(w.ranges[A].head,d,p,h);continue}for(var M=0;M<w.changes.length;++M){var F=w.changes[M];if(p<F.from.line)F.from=Be(F.from.line+h,F.from.ch),F.to=Be(F.to.line+h,F.to.ch);else if(d<=F.to.line){x=!1;break}}x||(l.splice(0,m+1),m=0)}}function LP(l,d){var p=d.from.line,h=d.to.line,m=d.text.length-(h-p)-1;FP(l.done,p,h,m),FP(l.undone,p,h,m)}function uh(l,d,p,h){var m=d,w=d;return typeof d=="number"?w=ht(l,He(l,d)):m=zt(d),m==null?null:(h(w,m)&&l.cm&&fl(l.cm,m,p),w)}function dh(l){this.lines=l,this.parent=null;for(var d=0,p=0;p<l.length;++p)l[p].parent=this,d+=l[p].height;this.height=d}dh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(l,d){for(var p=l,h=l+d;p<h;++p){var m=this.lines[p];this.height-=m.height,ns(m),Yn(m,"delete")}this.lines.splice(l,d)},collapse:function(l){l.push.apply(l,this.lines)},insertInner:function(l,d,p){this.height+=p,this.lines=this.lines.slice(0,l).concat(d).concat(this.lines.slice(l));for(var h=0;h<d.length;++h)d[h].parent=this},iterN:function(l,d,p){for(var h=l+d;l<h;++l)if(p(this.lines[l]))return!0}};function fh(l){this.children=l;for(var d=0,p=0,h=0;h<l.length;++h){var m=l[h];d+=m.chunkSize(),p+=m.height,m.parent=this}this.size=d,this.height=p,this.parent=null}fh.prototype={chunkSize:function(){return this.size},removeInner:function(l,d){this.size-=d;for(var p=0;p<this.children.length;++p){var h=this.children[p],m=h.chunkSize();if(l<m){var w=Math.min(d,m-l),x=h.height;if(h.removeInner(l,w),this.height-=x-h.height,m==w&&(this.children.splice(p--,1),h.parent=null),(d-=w)==0)break;l=0}else l-=m}if(this.size-d<25&&(this.children.length>1||!(this.children[0]instanceof dh))){var A=[];this.collapse(A),this.children=[new dh(A)],this.children[0].parent=this}},collapse:function(l){for(var d=0;d<this.children.length;++d)this.children[d].collapse(l)},insertInner:function(l,d,p){this.size+=d.length,this.height+=p;for(var h=0;h<this.children.length;++h){var m=this.children[h],w=m.chunkSize();if(l<=w){if(m.insertInner(l,d,p),m.lines&&m.lines.length>50){for(var x=m.lines.length%25+25,A=x;A<m.lines.length;){var M=new dh(m.lines.slice(A,A+=25));m.height-=M.height,this.children.splice(++h,0,M),M.parent=this}m.lines=m.lines.slice(0,x),this.maybeSpill()}break}l-=w}},maybeSpill:function(){if(!(this.children.length<=10)){var l=this;do{var d=l.children.splice(l.children.length-5,5),p=new fh(d);if(l.parent){l.size-=p.size,l.height-=p.height;var m=$e(l.parent.children,l);l.parent.children.splice(m+1,0,p)}else{var h=new fh(l.children);h.parent=l,l.children=[h,p],l=h}p.parent=l.parent}while(l.children.length>10);l.parent.maybeSpill()}},iterN:function(l,d,p){for(var h=0;h<this.children.length;++h){var m=this.children[h],w=m.chunkSize();if(l<w){var x=Math.min(d,w-l);if(m.iterN(l,x,p))return!0;if((d-=x)==0)break;l=0}else l-=w}}};var hh=function(l,d,p){if(p)for(var h in p)p.hasOwnProperty(h)&&(this[h]=p[h]);this.doc=l,this.node=d};hh.prototype.clear=function(){var l=this.doc.cm,d=this.line.widgets,p=this.line,h=zt(p);if(!(h==null||!d)){for(var m=0;m<d.length;++m)d[m]==this&&d.splice(m--,1);d.length||(p.widgets=null);var w=Oe(this);Qn(p,Math.max(0,p.height-w)),l&&(Eo(l,function(){VP(l,p,-w),fl(l,h,"widget")}),Yn(l,"lineWidgetCleared",l,this,h))}},hh.prototype.changed=function(){var l=this,d=this.height,p=this.doc.cm,h=this.line;this.height=null;var m=Oe(this)-d;m&&(Er(this.doc,h)||Qn(h,h.height+m),p&&Eo(p,function(){p.curOp.forceUpdate=!0,VP(p,h,m),Yn(p,"lineWidgetChanged",p,l,zt(h))}))},en(hh);function VP(l,d,p){li(d)<(l.curOp&&l.curOp.scrollTop||l.doc.scrollTop)&&Kw(l,p)}function bH(l,d,p,h){var m=new hh(l,p,h),w=l.cm;return w&&m.noHScroll&&(w.display.alignWidgets=!0),uh(l,d,"widget",function(x){var A=x.widgets||(x.widgets=[]);if(m.insertAt==null?A.push(m):A.splice(Math.min(A.length,Math.max(0,m.insertAt)),0,m),m.line=x,w&&!Er(l,x)){var M=li(x)<l.scrollTop;Qn(x,x.height+Oe(m)),M&&Kw(w,m.height),w.curOp.forceUpdate=!0}return!0}),w&&Yn(w,"lineWidgetAdded",w,m,typeof d=="number"?d:zt(d)),m}var BP=0,vl=function(l,d){this.lines=[],this.type=d,this.doc=l,this.id=++BP};vl.prototype.clear=function(){if(!this.explicitlyCleared){var l=this.doc.cm,d=l&&!l.curOp;if(d&&yc(l),qt(this,"clear")){var p=this.find();p&&Yn(this,"clear",p.from,p.to)}for(var h=null,m=null,w=0;w<this.lines.length;++w){var x=this.lines[w],A=mr(x.markedSpans,this);l&&!this.collapsed?fl(l,zt(x),"text"):l&&(A.to!=null&&(m=zt(x)),A.from!=null&&(h=zt(x))),x.markedSpans=Di(x.markedSpans,A),A.from==null&&this.collapsed&&!Er(this.doc,x)&&l&&Qn(x,Fu(l.display))}if(l&&this.collapsed&&!l.options.lineWrapping)for(var M=0;M<this.lines.length;++M){var F=$t(this.lines[M]),te=xo(F);te>l.display.maxLineLength&&(l.display.maxLine=F,l.display.maxLineLength=te,l.display.maxLineChanged=!0)}h!=null&&l&&this.collapsed&&to(l,h,m+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,l&&MP(l.doc)),l&&Yn(l,"markerCleared",l,this,h,m),d&&_c(l),this.parent&&this.parent.clear()}},vl.prototype.find=function(l,d){l==null&&this.type=="bookmark"&&(l=1);for(var p,h,m=0;m<this.lines.length;++m){var w=this.lines[m],x=mr(w.markedSpans,this);if(x.from!=null&&(p=Be(d?w:zt(w),x.from),l==-1))return p;if(x.to!=null&&(h=Be(d?w:zt(w),x.to),l==1))return h}return p&&{from:p,to:h}},vl.prototype.changed=function(){var l=this,d=this.find(-1,!0),p=this,h=this.doc.cm;!d||!h||Eo(h,function(){var m=d.line,w=zt(d.line),x=me(h,w);if(x&&(Xf(x),h.curOp.selectionChanged=h.curOp.forceUpdate=!0),h.curOp.updateMaxLine=!0,!Er(p.doc,m)&&p.height!=null){var A=p.height;p.height=null;var M=Oe(p)-A;M&&Qn(m,m.height+M)}Yn(h,"markerChanged",h,l)})},vl.prototype.attachLine=function(l){if(!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(!d.maybeHiddenMarkers||$e(d.maybeHiddenMarkers,this)==-1)&&(d.maybeUnhiddenMarkers||(d.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(l)},vl.prototype.detachLine=function(l){if(this.lines.splice($e(this.lines,l),1),!this.lines.length&&this.doc.cm){var d=this.doc.cm.curOp;(d.maybeHiddenMarkers||(d.maybeHiddenMarkers=[])).push(this)}},en(vl);function qu(l,d,p,h,m){if(h&&h.shared)return CH(l,d,p,h,m);if(l.cm&&!l.cm.curOp)return ui(l.cm,qu)(l,d,p,h,m);var w=new vl(l,m),x=Nt(d,p);if(h&&Pt(h,w,!1),x>0||x==0&&w.clearWhenEmpty!==!1)return w;if(w.replacedWith&&(w.collapsed=!0,w.widgetNode=Z("span",[w.replacedWith],"CodeMirror-widget"),h.handleMouseEvents||w.widgetNode.setAttribute("cm-ignore-events","true"),h.insertLeft&&(w.widgetNode.insertLeft=!0)),w.collapsed){if(Ot(l,d.line,d,p,w)||d.line!=p.line&&Ot(l,p.line,d,p,w))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ea()}w.addToHistory&&CP(l,{from:d,to:p,origin:"markText"},l.sel,NaN);var A=d.line,M=l.cm,F;if(l.iter(A,p.line+1,function(ie){M&&w.collapsed&&!M.options.lineWrapping&&$t(ie)==M.display.maxLine&&(F=!0),w.collapsed&&A!=d.line&&Qn(ie,0),Ji(ie,new Lo(w,A==d.line?d.ch:null,A==p.line?p.ch:null),l.cm&&l.cm.curOp),++A}),w.collapsed&&l.iter(d.line,p.line+1,function(ie){Er(l,ie)&&Qn(ie,0)}),w.clearOnEnter&&ye(w,"beforeCursorEnter",function(){return w.clear()}),w.readOnly&&($s(),(l.history.done.length||l.history.undone.length)&&l.clearHistory()),w.collapsed&&(w.id=++BP,w.atomic=!0),M){if(F&&(M.curOp.updateMaxLine=!0),w.collapsed)to(M,d.line,p.line+1);else if(w.className||w.startStyle||w.endStyle||w.css||w.attributes||w.title)for(var te=d.line;te<=p.line;te++)fl(M,te,"text");w.atomic&&MP(M.doc),Yn(M,"markerAdded",M,w)}return w}var ph=function(l,d){this.markers=l,this.primary=d;for(var p=0;p<l.length;++p)l[p].parent=this};ph.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var l=0;l<this.markers.length;++l)this.markers[l].clear();Yn(this,"clear")}},ph.prototype.find=function(l,d){return this.primary.find(l,d)},en(ph);function CH(l,d,p,h,m){h=Pt(h),h.shared=!1;var w=[qu(l,d,p,h,m)],x=w[0],A=h.widgetNode;return ml(l,function(M){A&&(h.widgetNode=A.cloneNode(!0)),w.push(qu(M,Ge(M,d),Ge(M,p),h,m));for(var F=0;F<M.linked.length;++F)if(M.linked[F].isParent)return;x=It(w)}),new ph(w,x)}function UP(l){return l.findMarks(Be(l.first,0),l.clipPos(Be(l.lastLine())),function(d){return d.parent})}function xH(l,d){for(var p=0;p<d.length;p++){var h=d[p],m=h.find(),w=l.clipPos(m.from),x=l.clipPos(m.to);if(Nt(w,x)){var A=qu(l,w,x,h.primary,h.primary.type);h.markers.push(A),A.parent=h}}}function EH(l){for(var d=function(h){var m=l[h],w=[m.primary.doc];ml(m.primary.doc,function(M){return w.push(M)});for(var x=0;x<m.markers.length;x++){var A=m.markers[x];$e(w,A.doc)==-1&&(A.parent=null,m.markers.splice(x--,1))}},p=0;p<l.length;p++)d(p)}var SH=0,no=function(l,d,p,h,m){if(!(this instanceof no))return new no(l,d,p,h,m);p==null&&(p=0),fh.call(this,[new dh([new Sr("",null)])]),this.first=p,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=p;var w=Be(p,0);this.sel=pl(w),this.history=new om(null),this.id=++SH,this.modeOption=d,this.lineSep=h,this.direction=m=="rtl"?"rtl":"ltr",this.extend=!1,typeof l=="string"&&(l=this.splitLines(l)),nb(this,{from:w,to:w,text:l}),Ai(this,pl(w),Re)};no.prototype=R(fh.prototype,{constructor:no,iter:function(l,d,p){p?this.iterN(l-this.first,d-l,p):this.iterN(this.first,this.first+this.size,l)},insert:function(l,d){for(var p=0,h=0;h<d.length;++h)p+=d[h].height;this.insertInner(l-this.first,d,p)},remove:function(l,d){this.removeInner(l-this.first,d)},getValue:function(l){var d=oi(this,this.first,this.first+this.size);return l===!1?d:d.join(l||this.lineSeparator())},setValue:di(function(l){var d=Be(this.first,0),p=this.first+this.size-1;$u(this,{from:d,to:Be(p,ht(this,p).text.length),text:this.splitLines(l),origin:"setValue",full:!0},!0),this.cm&&nh(this.cm,0,0),Ai(this,pl(d),Re)}),replaceRange:function(l,d,p,h){d=Ge(this,d),p=p?Ge(this,p):d,Wu(this,l,d,p,h)},getRange:function(l,d,p){var h=pr(this,Ge(this,l),Ge(this,d));return p===!1?h:p===""?h.join(""):h.join(p||this.lineSeparator())},getLine:function(l){var d=this.getLineHandle(l);return d&&d.text},getLineHandle:function(l){if(si(this,l))return ht(this,l)},getLineNumber:function(l){return zt(l)},getLineHandleVisualStart:function(l){return typeof l=="number"&&(l=ht(this,l)),$t(l)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(l){return Ge(this,l)},getCursor:function(l){var d=this.sel.primary(),p;return l==null||l=="head"?p=d.head:l=="anchor"?p=d.anchor:l=="end"||l=="to"||l===!1?p=d.to():p=d.from(),p},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:di(function(l,d,p){AP(this,Ge(this,typeof l=="number"?Be(l,d||0):l),null,p)}),setSelection:di(function(l,d,p){AP(this,Ge(this,l),Ge(this,d||l),p)}),extendSelection:di(function(l,d,p){am(this,Ge(this,l),d&&Ge(this,d),p)}),extendSelections:di(function(l,d){SP(this,tn(this,l),d)}),extendSelectionsBy:di(function(l,d){var p=Ln(this.sel.ranges,l);SP(this,tn(this,p),d)}),setSelections:di(function(l,d,p){if(l.length){for(var h=[],m=0;m<l.length;m++)h[m]=new Mn(Ge(this,l[m].anchor),Ge(this,l[m].head||l[m].anchor));d==null&&(d=Math.min(l.length-1,this.sel.primIndex)),Ai(this,Ss(this.cm,h,d),p)}}),addSelection:di(function(l,d,p){var h=this.sel.ranges.slice(0);h.push(new Mn(Ge(this,l),Ge(this,d||l))),Ai(this,Ss(this.cm,h,h.length-1),p)}),getSelection:function(l){for(var d=this.sel.ranges,p,h=0;h<d.length;h++){var m=pr(this,d[h].from(),d[h].to());p=p?p.concat(m):m}return l===!1?p:p.join(l||this.lineSeparator())},getSelections:function(l){for(var d=[],p=this.sel.ranges,h=0;h<p.length;h++){var m=pr(this,p[h].from(),p[h].to());l!==!1&&(m=m.join(l||this.lineSeparator())),d[h]=m}return d},replaceSelection:function(l,d,p){for(var h=[],m=0;m<this.sel.ranges.length;m++)h[m]=l;this.replaceSelections(h,d,p||"+input")},replaceSelections:di(function(l,d,p){for(var h=[],m=this.sel,w=0;w<m.ranges.length;w++){var x=m.ranges[w];h[w]={from:x.from(),to:x.to(),text:this.splitLines(l[w]),origin:p}}for(var A=d&&d!="end"&&fH(this,h,d),M=h.length-1;M>=0;M--)$u(this,h[M]);A?TP(this,A):this.cm&&Bu(this.cm)}),undo:di(function(){um(this,"undo")}),redo:di(function(){um(this,"redo")}),undoSelection:di(function(){um(this,"undo",!0)}),redoSelection:di(function(){um(this,"redo",!0)}),setExtending:function(l){this.extend=l},getExtending:function(){return this.extend},historySize:function(){for(var l=this.history,d=0,p=0,h=0;h<l.done.length;h++)l.done[h].ranges||++d;for(var m=0;m<l.undone.length;m++)l.undone[m].ranges||++p;return{undo:d,redo:p}},clearHistory:function(){var l=this;this.history=new om(this.history),ml(this,function(d){return d.history=l.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(l){return l&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(l){return this.history.generation==(l||this.cleanGeneration)},getHistory:function(){return{done:Hu(this.history.done),undone:Hu(this.history.undone)}},setHistory:function(l){var d=this.history=new om(this.history);d.done=Hu(l.done.slice(0),null,!0),d.undone=Hu(l.undone.slice(0),null,!0)},setGutterMarker:di(function(l,d,p){return uh(this,l,"gutter",function(h){var m=h.gutterMarkers||(h.gutterMarkers={});return m[d]=p,!p&&Se(m)&&(h.gutterMarkers=null),!0})}),clearGutter:di(function(l){var d=this;this.iter(function(p){p.gutterMarkers&&p.gutterMarkers[l]&&uh(d,p,"gutter",function(){return p.gutterMarkers[l]=null,Se(p.gutterMarkers)&&(p.gutterMarkers=null),!0})})}),lineInfo:function(l){var d;if(typeof l=="number"){if(!si(this,l)||(d=l,l=ht(this,l),!l))return null}else if(d=zt(l),d==null)return null;return{line:d,handle:l,text:l.text,gutterMarkers:l.gutterMarkers,textClass:l.textClass,bgClass:l.bgClass,wrapClass:l.wrapClass,widgets:l.widgets}},addLineClass:di(function(l,d,p){return uh(this,l,d=="gutter"?"gutter":"class",function(h){var m=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass";if(!h[m])h[m]=p;else{if(k(p).test(h[m]))return!1;h[m]+=" "+p}return!0})}),removeLineClass:di(function(l,d,p){return uh(this,l,d=="gutter"?"gutter":"class",function(h){var m=d=="text"?"textClass":d=="background"?"bgClass":d=="gutter"?"gutterClass":"wrapClass",w=h[m];if(w)if(p==null)h[m]=null;else{var x=w.match(k(p));if(!x)return!1;var A=x.index+x[0].length;h[m]=w.slice(0,x.index)+(!x.index||A==w.length?"":" ")+w.slice(A)||null}else return!1;return!0})}),addLineWidget:di(function(l,d,p){return bH(this,l,d,p)}),removeLineWidget:function(l){l.clear()},markText:function(l,d,p){return qu(this,Ge(this,l),Ge(this,d),p,p&&p.type||"range")},setBookmark:function(l,d){var p={replacedWith:d&&(d.nodeType==null?d.widget:d),insertLeft:d&&d.insertLeft,clearWhenEmpty:!1,shared:d&&d.shared,handleMouseEvents:d&&d.handleMouseEvents};return l=Ge(this,l),qu(this,l,l,p,"bookmark")},findMarksAt:function(l){l=Ge(this,l);var d=[],p=ht(this,l.line).markedSpans;if(p)for(var h=0;h<p.length;++h){var m=p[h];(m.from==null||m.from<=l.ch)&&(m.to==null||m.to>=l.ch)&&d.push(m.marker.parent||m.marker)}return d},findMarks:function(l,d,p){l=Ge(this,l),d=Ge(this,d);var h=[],m=l.line;return this.iter(l.line,d.line+1,function(w){var x=w.markedSpans;if(x)for(var A=0;A<x.length;A++){var M=x[A];!(M.to!=null&&m==l.line&&l.ch>=M.to||M.from==null&&m!=l.line||M.from!=null&&m==d.line&&M.from>=d.ch)&&(!p||p(M.marker))&&h.push(M.marker.parent||M.marker)}++m}),h},getAllMarks:function(){var l=[];return this.iter(function(d){var p=d.markedSpans;if(p)for(var h=0;h<p.length;++h)p[h].from!=null&&l.push(p[h].marker)}),l},posFromIndex:function(l){var d,p=this.first,h=this.lineSeparator().length;return this.iter(function(m){var w=m.text.length+h;if(w>l)return d=l,!0;l-=w,++p}),Ge(this,Be(p,d))},indexFromPos:function(l){l=Ge(this,l);var d=l.ch;if(l.line<this.first||l.ch<0)return 0;var p=this.lineSeparator().length;return this.iter(this.first,l.line,function(h){d+=h.text.length+p}),d},copy:function(l){var d=new no(oi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return d.scrollTop=this.scrollTop,d.scrollLeft=this.scrollLeft,d.sel=this.sel,d.extend=!1,l&&(d.history.undoDepth=this.history.undoDepth,d.setHistory(this.getHistory())),d},linkedDoc:function(l){l||(l={});var d=this.first,p=this.first+this.size;l.from!=null&&l.from>d&&(d=l.from),l.to!=null&&l.to<p&&(p=l.to);var h=new no(oi(this,d,p),l.mode||this.modeOption,d,this.lineSep,this.direction);return l.sharedHist&&(h.history=this.history),(this.linked||(this.linked=[])).push({doc:h,sharedHist:l.sharedHist}),h.linked=[{doc:this,isParent:!0,sharedHist:l.sharedHist}],xH(h,UP(this)),h},unlinkDoc:function(l){if(l instanceof nr&&(l=l.doc),this.linked)for(var d=0;d<this.linked.length;++d){var p=this.linked[d];if(p.doc==l){this.linked.splice(d,1),l.unlinkDoc(this),EH(UP(this));break}}if(l.history==this.history){var h=[l.id];ml(l,function(m){return h.push(m.id)},!0),l.history=new om(null),l.history.done=Hu(this.history.done,h),l.history.undone=Hu(this.history.undone,h)}},iterLinkedDocs:function(l){ml(this,l)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(l){return this.lineSep?l.split(this.lineSep):Pn(l)},lineSeparator:function(){return this.lineSep||`
`},setDirection:di(function(l){l!="rtl"&&(l="ltr"),l!=this.direction&&(this.direction=l,this.iter(function(d){return d.order=null}),this.cm&&hH(this.cm))})}),no.prototype.eachLine=no.prototype.iter;var HP=0;function AH(l){var d=this;if(zP(d),!(tt(d,l)||Ze(d.display,l))){Jt(l),a&&(HP=+new Date);var p=pc(d,l,!0),h=l.dataTransfer.files;if(!(!p||d.isReadOnly()))if(h&&h.length&&window.FileReader&&window.File)for(var m=h.length,w=Array(m),x=0,A=function(){++x==m&&ui(d,function(){p=Ge(d.doc,p);var pe={from:p,to:p,text:d.doc.splitLines(w.filter(function(Pe){return Pe!=null}).join(d.doc.lineSeparator())),origin:"paste"};$u(d.doc,pe),TP(d.doc,pl(Ge(d.doc,p),Ge(d.doc,gl(pe))))})()},M=function(pe,Pe){if(d.options.allowDropFileTypes&&$e(d.options.allowDropFileTypes,pe.type)==-1){A();return}var Ve=new FileReader;Ve.onerror=function(){return A()},Ve.onload=function(){var Ye=Ve.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ye)){A();return}w[Pe]=Ye,A()},Ve.readAsText(pe)},F=0;F<h.length;F++)M(h[F],F);else{if(d.state.draggingText&&d.doc.sel.contains(p)>-1){d.state.draggingText(l),setTimeout(function(){return d.display.input.focus()},20);return}try{var te=l.dataTransfer.getData("Text");if(te){var ie;if(d.state.draggingText&&!d.state.draggingText.copy&&(ie=d.listSelections()),lm(d.doc,pl(p,p)),ie)for(var _e=0;_e<ie.length;++_e)Wu(d.doc,"",ie[_e].anchor,ie[_e].head,"drag");d.replaceSelection(te,"around","paste"),d.display.input.focus()}}catch{}}}}function TH(l,d){if(a&&(!l.state.draggingText||+new Date-HP<100)){W(d);return}if(!(tt(l,d)||Ze(l.display,d))&&(d.dataTransfer.setData("Text",l.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!_)){var p=O("img",null,null,"position: fixed; left: 0; top: 0;");p.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",v&&(p.width=p.height=1,l.display.wrapper.appendChild(p),p._top=p.offsetTop),d.dataTransfer.setDragImage(p,0,0),v&&p.parentNode.removeChild(p)}}function OH(l,d){var p=pc(l,d);if(p){var h=document.createDocumentFragment();nP(l,p,h),l.display.dragCursor||(l.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),l.display.lineSpace.insertBefore(l.display.dragCursor,l.display.cursorDiv)),T(l.display.dragCursor,h)}}function zP(l){l.display.dragCursor&&(l.display.lineSpace.removeChild(l.display.dragCursor),l.display.dragCursor=null)}function $P(l){if(document.getElementsByClassName){for(var d=document.getElementsByClassName("CodeMirror"),p=[],h=0;h<d.length;h++){var m=d[h].CodeMirror;m&&p.push(m)}p.length&&p[0].operation(function(){for(var w=0;w<p.length;w++)l(p[w])})}}var WP=!1;function MH(){WP||(PH(),WP=!0)}function PH(){var l;ye(window,"resize",function(){l==null&&(l=setTimeout(function(){l=null,$P(IH)},100))}),ye(window,"blur",function(){return $P(Vu)})}function IH(l){var d=l.display;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,l.setSize()}for(var yl={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},gh=0;gh<10;gh++)yl[gh+48]=yl[gh+96]=String(gh);for(var dm=65;dm<=90;dm++)yl[dm]=String.fromCharCode(dm);for(var mh=1;mh<=12;mh++)yl[mh+111]=yl[mh+63235]="F"+mh;var ka={};ka.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ka.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ka.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ka.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ka.default=N?ka.macDefault:ka.pcDefault;function DH(l){var d=l.split(/-(?!$)/);l=d[d.length-1];for(var p,h,m,w,x=0;x<d.length-1;x++){var A=d[x];if(/^(cmd|meta|m)$/i.test(A))w=!0;else if(/^a(lt)?$/i.test(A))p=!0;else if(/^(c|ctrl|control)$/i.test(A))h=!0;else if(/^s(hift)?$/i.test(A))m=!0;else throw new Error("Unrecognized modifier name: "+A)}return p&&(l="Alt-"+l),h&&(l="Ctrl-"+l),w&&(l="Cmd-"+l),m&&(l="Shift-"+l),l}function kH(l){var d={};for(var p in l)if(l.hasOwnProperty(p)){var h=l[p];if(/^(name|fallthrough|(de|at)tach)$/.test(p))continue;if(h=="..."){delete l[p];continue}for(var m=Ln(p.split(" "),DH),w=0;w<m.length;w++){var x=void 0,A=void 0;w==m.length-1?(A=m.join(" "),x=h):(A=m.slice(0,w+1).join(" "),x="...");var M=d[A];if(!M)d[A]=x;else if(M!=x)throw new Error("Inconsistent bindings for "+A)}delete l[p]}for(var F in d)l[F]=d[F];return l}function Gu(l,d,p,h){d=fm(d);var m=d.call?d.call(l,h):d[l];if(m===!1)return"nothing";if(m==="...")return"multi";if(m!=null&&p(m))return"handled";if(d.fallthrough){if(Object.prototype.toString.call(d.fallthrough)!="[object Array]")return Gu(l,d.fallthrough,p,h);for(var w=0;w<d.fallthrough.length;w++){var x=Gu(l,d.fallthrough[w],p,h);if(x)return x}}}function qP(l){var d=typeof l=="string"?l:yl[l.keyCode];return d=="Ctrl"||d=="Alt"||d=="Shift"||d=="Mod"}function GP(l,d,p){var h=l;return d.altKey&&h!="Alt"&&(l="Alt-"+l),(Y?d.metaKey:d.ctrlKey)&&h!="Ctrl"&&(l="Ctrl-"+l),(Y?d.ctrlKey:d.metaKey)&&h!="Mod"&&(l="Cmd-"+l),!p&&d.shiftKey&&h!="Shift"&&(l="Shift-"+l),l}function KP(l,d){if(v&&l.keyCode==34&&l.char)return!1;var p=yl[l.keyCode];return p==null||l.altGraphKey?!1:(l.keyCode==3&&l.code&&(p=l.code),GP(p,l,d))}function fm(l){return typeof l=="string"?ka[l]:l}function Ku(l,d){for(var p=l.doc.sel.ranges,h=[],m=0;m<p.length;m++){for(var w=d(p[m]);h.length&&Nt(w.from,It(h).to)<=0;){var x=h.pop();if(Nt(x.from,w.from)<0){w.from=x.from;break}}h.push(w)}Eo(l,function(){for(var A=h.length-1;A>=0;A--)Wu(l.doc,"",h[A].from,h[A].to,"+delete");Bu(l)})}function sb(l,d,p){var h=fe(l.text,d+p,p);return h<0||h>l.text.length?null:h}function ab(l,d,p){var h=sb(l,d.ch,p);return h==null?null:new Be(d.line,h,p<0?"after":"before")}function lb(l,d,p,h,m){if(l){d.doc.direction=="rtl"&&(m=-m);var w=U(p,d.doc.direction);if(w){var x=m<0?It(w):w[0],A=m<0==(x.level==1),M=A?"after":"before",F;if(x.level>0||d.doc.direction=="rtl"){var te=Fe(d,p);F=m<0?p.text.length-1:0;var ie=et(d,te,F).top;F=yt(function(_e){return et(d,te,_e).top==ie},m<0==(x.level==1)?x.from:x.to-1,F),M=="before"&&(F=sb(p,F,1))}else F=m<0?x.to:x.from;return new Be(h,F,M)}}return new Be(h,m<0?p.text.length:0,m<0?"before":"after")}function RH(l,d,p,h){var m=U(d,l.doc.direction);if(!m)return ab(d,p,h);p.ch>=d.text.length?(p.ch=d.text.length,p.sticky="before"):p.ch<=0&&(p.ch=0,p.sticky="after");var w=Q(m,p.ch,p.sticky),x=m[w];if(l.doc.direction=="ltr"&&x.level%2==0&&(h>0?x.to>p.ch:x.from<p.ch))return ab(d,p,h);var A=function(it,vt){return sb(d,it instanceof Be?it.ch:it,vt)},M,F=function(it){return l.options.lineWrapping?(M=M||Fe(l,d),ZM(l,d,M,it)):{begin:0,end:d.text.length}},te=F(p.sticky=="before"?A(p,-1):p.ch);if(l.doc.direction=="rtl"||x.level==1){var ie=x.level==1==h<0,_e=A(p,ie?1:-1);if(_e!=null&&(ie?_e<=x.to&&_e<=te.end:_e>=x.from&&_e>=te.begin)){var pe=ie?"before":"after";return new Be(p.line,_e,pe)}}var Pe=function(it,vt,ot){for(var _t=function(Hn,fi){return fi?new Be(p.line,A(Hn,1),"before"):new Be(p.line,Hn,"after")};it>=0&&it<m.length;it+=vt){var jt=m[it],kt=vt>0==(jt.level!=1),nn=kt?ot.begin:A(ot.end,-1);if(jt.from<=nn&&nn<jt.to||(nn=kt?jt.from:A(jt.to,-1),ot.begin<=nn&&nn<ot.end))return _t(nn,kt)}},Ve=Pe(w+h,h,te);if(Ve)return Ve;var Ye=h>0?te.end:A(te.begin,-1);return Ye!=null&&!(h>0&&Ye==d.text.length)&&(Ve=Pe(h>0?0:m.length-1,h,F(Ye)),Ve)?Ve:null}var vh={selectAll:DP,singleSelection:function(l){return l.setSelection(l.getCursor("anchor"),l.getCursor("head"),Re)},killLine:function(l){return Ku(l,function(d){if(d.empty()){var p=ht(l.doc,d.head.line).text.length;return d.head.ch==p&&d.head.line<l.lastLine()?{from:d.head,to:Be(d.head.line+1,0)}:{from:d.head,to:Be(d.head.line,p)}}else return{from:d.from(),to:d.to()}})},deleteLine:function(l){return Ku(l,function(d){return{from:Be(d.from().line,0),to:Ge(l.doc,Be(d.to().line+1,0))}})},delLineLeft:function(l){return Ku(l,function(d){return{from:Be(d.from().line,0),to:d.from()}})},delWrappedLineLeft:function(l){return Ku(l,function(d){var p=l.charCoords(d.head,"div").top+5,h=l.coordsChar({left:0,top:p},"div");return{from:h,to:d.from()}})},delWrappedLineRight:function(l){return Ku(l,function(d){var p=l.charCoords(d.head,"div").top+5,h=l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:p},"div");return{from:d.from(),to:h}})},undo:function(l){return l.undo()},redo:function(l){return l.redo()},undoSelection:function(l){return l.undoSelection()},redoSelection:function(l){return l.redoSelection()},goDocStart:function(l){return l.extendSelection(Be(l.firstLine(),0))},goDocEnd:function(l){return l.extendSelection(Be(l.lastLine()))},goLineStart:function(l){return l.extendSelectionsBy(function(d){return QP(l,d.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(l){return l.extendSelectionsBy(function(d){return YP(l,d.head)},{origin:"+move",bias:1})},goLineEnd:function(l){return l.extendSelectionsBy(function(d){return NH(l,d.head.line)},{origin:"+move",bias:-1})},goLineRight:function(l){return l.extendSelectionsBy(function(d){var p=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:l.display.lineDiv.offsetWidth+100,top:p},"div")},Qe)},goLineLeft:function(l){return l.extendSelectionsBy(function(d){var p=l.cursorCoords(d.head,"div").top+5;return l.coordsChar({left:0,top:p},"div")},Qe)},goLineLeftSmart:function(l){return l.extendSelectionsBy(function(d){var p=l.cursorCoords(d.head,"div").top+5,h=l.coordsChar({left:0,top:p},"div");return h.ch<l.getLine(h.line).search(/\S/)?YP(l,d.head):h},Qe)},goLineUp:function(l){return l.moveV(-1,"line")},goLineDown:function(l){return l.moveV(1,"line")},goPageUp:function(l){return l.moveV(-1,"page")},goPageDown:function(l){return l.moveV(1,"page")},goCharLeft:function(l){return l.moveH(-1,"char")},goCharRight:function(l){return l.moveH(1,"char")},goColumnLeft:function(l){return l.moveH(-1,"column")},goColumnRight:function(l){return l.moveH(1,"column")},goWordLeft:function(l){return l.moveH(-1,"word")},goGroupRight:function(l){return l.moveH(1,"group")},goGroupLeft:function(l){return l.moveH(-1,"group")},goWordRight:function(l){return l.moveH(1,"word")},delCharBefore:function(l){return l.deleteH(-1,"codepoint")},delCharAfter:function(l){return l.deleteH(1,"char")},delWordBefore:function(l){return l.deleteH(-1,"word")},delWordAfter:function(l){return l.deleteH(1,"word")},delGroupBefore:function(l){return l.deleteH(-1,"group")},delGroupAfter:function(l){return l.deleteH(1,"group")},indentAuto:function(l){return l.indentSelection("smart")},indentMore:function(l){return l.indentSelection("add")},indentLess:function(l){return l.indentSelection("subtract")},insertTab:function(l){return l.replaceSelection("	")},insertSoftTab:function(l){for(var d=[],p=l.listSelections(),h=l.options.tabSize,m=0;m<p.length;m++){var w=p[m].from(),x=be(l.getLine(w.line),w.ch,h);d.push(Xt(h-x%h))}l.replaceSelections(d)},defaultTab:function(l){l.somethingSelected()?l.indentSelection("add"):l.execCommand("insertTab")},transposeChars:function(l){return Eo(l,function(){for(var d=l.listSelections(),p=[],h=0;h<d.length;h++)if(d[h].empty()){var m=d[h].head,w=ht(l.doc,m.line).text;if(w){if(m.ch==w.length&&(m=new Be(m.line,m.ch-1)),m.ch>0)m=new Be(m.line,m.ch+1),l.replaceRange(w.charAt(m.ch-1)+w.charAt(m.ch-2),Be(m.line,m.ch-2),m,"+transpose");else if(m.line>l.doc.first){var x=ht(l.doc,m.line-1).text;x&&(m=new Be(m.line,1),l.replaceRange(w.charAt(0)+l.doc.lineSeparator()+x.charAt(x.length-1),Be(m.line-1,x.length-1),m,"+transpose"))}}p.push(new Mn(m,m))}l.setSelections(p)})},newlineAndIndent:function(l){return Eo(l,function(){for(var d=l.listSelections(),p=d.length-1;p>=0;p--)l.replaceRange(l.doc.lineSeparator(),d[p].anchor,d[p].head,"+input");d=l.listSelections();for(var h=0;h<d.length;h++)l.indentLine(d[h].from().line,null,!0);Bu(l)})},openLine:function(l){return l.replaceSelection(`
`,"start")},toggleOverwrite:function(l){return l.toggleOverwrite()}};function QP(l,d){var p=ht(l.doc,d),h=$t(p);return h!=p&&(d=zt(h)),lb(!0,l,h,d,1)}function NH(l,d){var p=ht(l.doc,d),h=dt(p);return h!=p&&(d=zt(h)),lb(!0,l,p,d,-1)}function YP(l,d){var p=QP(l,d.line),h=ht(l.doc,p.line),m=U(h,l.doc.direction);if(!m||m[0].level==0){var w=Math.max(p.ch,h.text.search(/\S/)),x=d.line==p.line&&d.ch<=w&&d.ch;return Be(p.line,x?0:w,p.sticky)}return p}function hm(l,d,p){if(typeof d=="string"&&(d=vh[d],!d))return!1;l.display.input.ensurePolled();var h=l.display.shift,m=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),p&&(l.display.shift=!1),m=d(l)!=Ae}finally{l.display.shift=h,l.state.suppressEdits=!1}return m}function jH(l,d,p){for(var h=0;h<l.state.keyMaps.length;h++){var m=Gu(d,l.state.keyMaps[h],p,l);if(m)return m}return l.options.extraKeys&&Gu(d,l.options.extraKeys,p,l)||Gu(d,l.options.keyMap,p,l)}var FH=new Te;function yh(l,d,p,h){var m=l.state.keySeq;if(m){if(qP(d))return"handled";if(/\'$/.test(d)?l.state.keySeq=null:FH.set(50,function(){l.state.keySeq==m&&(l.state.keySeq=null,l.display.input.reset())}),JP(l,m+" "+d,p,h))return!0}return JP(l,d,p,h)}function JP(l,d,p,h){var m=jH(l,d,h);return m=="multi"&&(l.state.keySeq=d),m=="handled"&&Yn(l,"keyHandled",l,d,p),(m=="handled"||m=="multi")&&(Jt(p),$w(l)),!!m}function ZP(l,d){var p=KP(d,!0);return p?d.shiftKey&&!l.state.keySeq?yh(l,"Shift-"+p,d,function(h){return hm(l,h,!0)})||yh(l,p,d,function(h){if(typeof h=="string"?/^go[A-Z]/.test(h):h.motion)return hm(l,h)}):yh(l,p,d,function(h){return hm(l,h)}):!1}function LH(l,d,p){return yh(l,"'"+p+"'",d,function(h){return hm(l,h,!0)})}var cb=null;function XP(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&(d.curOp.focus=xe(),!tt(d,l))){a&&c<11&&l.keyCode==27&&(l.returnValue=!1);var p=l.keyCode;d.display.shift=p==16||l.shiftKey;var h=ZP(d,l);v&&(cb=h?p:null,!h&&p==88&&!zr&&(N?l.metaKey:l.ctrlKey)&&d.replaceSelection("",null,"cut")),n&&!N&&!h&&p==46&&l.shiftKey&&!l.ctrlKey&&document.execCommand&&document.execCommand("cut"),p==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)&&VH(d)}}function VH(l){var d=l.display.lineDiv;Ee(d,"CodeMirror-crosshair");function p(h){(h.keyCode==18||!h.altKey)&&($(d,"CodeMirror-crosshair"),lt(document,"keyup",p),lt(document,"mouseover",p))}ye(document,"keyup",p),ye(document,"mouseover",p)}function eI(l){l.keyCode==16&&(this.doc.sel.shift=!1),tt(this,l)}function tI(l){var d=this;if(!(l.target&&l.target!=d.display.input.getField())&&!(Ze(d.display,l)||tt(d,l)||l.ctrlKey&&!l.altKey||N&&l.metaKey)){var p=l.keyCode,h=l.charCode;if(v&&p==cb){cb=null,Jt(l);return}if(!(v&&(!l.which||l.which<10)&&ZP(d,l))){var m=String.fromCharCode(h??p);m!="\b"&&(LH(d,l,m)||d.display.input.onKeyPress(l))}}}var BH=400,ub=function(l,d,p){this.time=l,this.pos=d,this.button=p};ub.prototype.compare=function(l,d,p){return this.time+BH>l&&Nt(d,this.pos)==0&&p==this.button};var _h,wh;function UH(l,d){var p=+new Date;return wh&&wh.compare(p,l,d)?(_h=wh=null,"triple"):_h&&_h.compare(p,l,d)?(wh=new ub(p,l,d),_h=null,"double"):(_h=new ub(p,l,d),wh=null,"single")}function nI(l){var d=this,p=d.display;if(!(tt(d,l)||p.activeTouch&&p.input.supportsTouch())){if(p.input.ensurePolled(),p.shift=l.shiftKey,Ze(p,l)){u||(p.scroller.draggable=!1,setTimeout(function(){return p.scroller.draggable=!0},100));return}if(!db(d,l)){var h=pc(d,l),m=ge(l),w=h?UH(h,m):"single";window.focus(),m==1&&d.state.selectingText&&d.state.selectingText(l),!(h&&HH(d,m,h,w,l))&&(m==1?h?$H(d,h,w,l):oe(l)==p.scroller&&Jt(l):m==2?(h&&am(d.doc,h),setTimeout(function(){return p.input.focus()},20)):m==3&&(L?d.display.input.onContextMenu(l):Ww(d)))}}}function HH(l,d,p,h,m){var w="Click";return h=="double"?w="Double"+w:h=="triple"&&(w="Triple"+w),w=(d==1?"Left":d==2?"Middle":"Right")+w,yh(l,GP(w,m),m,function(x){if(typeof x=="string"&&(x=vh[x]),!x)return!1;var A=!1;try{l.isReadOnly()&&(l.state.suppressEdits=!0),A=x(l,p)!=Ae}finally{l.state.suppressEdits=!1}return A})}function zH(l,d,p){var h=l.getOption("configureMouse"),m=h?h(l,d,p):{};if(m.unit==null){var w=G?p.shiftKey&&p.metaKey:p.altKey;m.unit=w?"rectangle":d=="single"?"char":d=="double"?"word":"line"}return(m.extend==null||l.doc.extend)&&(m.extend=l.doc.extend||p.shiftKey),m.addNew==null&&(m.addNew=N?p.metaKey:p.ctrlKey),m.moveOnDrag==null&&(m.moveOnDrag=!(N?p.altKey:p.ctrlKey)),m}function $H(l,d,p,h){a?setTimeout(ft(rP,l),0):l.curOp.focus=xe();var m=zH(l,p,h),w=l.doc.sel,x;l.options.dragDrop&&je&&!l.isReadOnly()&&p=="single"&&(x=w.contains(d))>-1&&(Nt((x=w.ranges[x]).from(),d)<0||d.xRel>0)&&(Nt(x.to(),d)>0||d.xRel<0)?WH(l,h,d,m):qH(l,h,d,m)}function WH(l,d,p,h){var m=l.display,w=!1,x=ui(l,function(F){u&&(m.scroller.draggable=!1),l.state.draggingText=!1,l.state.delayingBlurEvent&&(l.hasFocus()?l.state.delayingBlurEvent=!1:Ww(l)),lt(m.wrapper.ownerDocument,"mouseup",x),lt(m.wrapper.ownerDocument,"mousemove",A),lt(m.scroller,"dragstart",M),lt(m.scroller,"drop",x),w||(Jt(F),h.addNew||am(l.doc,p,null,null,h.extend),u&&!_||a&&c==9?setTimeout(function(){m.wrapper.ownerDocument.body.focus({preventScroll:!0}),m.input.focus()},20):m.input.focus())}),A=function(F){w=w||Math.abs(d.clientX-F.clientX)+Math.abs(d.clientY-F.clientY)>=10},M=function(){return w=!0};u&&(m.scroller.draggable=!0),l.state.draggingText=x,x.copy=!h.moveOnDrag,ye(m.wrapper.ownerDocument,"mouseup",x),ye(m.wrapper.ownerDocument,"mousemove",A),ye(m.scroller,"dragstart",M),ye(m.scroller,"drop",x),l.state.delayingBlurEvent=!0,setTimeout(function(){return m.input.focus()},20),m.scroller.dragDrop&&m.scroller.dragDrop()}function rI(l,d,p){if(p=="char")return new Mn(d,d);if(p=="word")return l.findWordAt(d);if(p=="line")return new Mn(Be(d.line,0),Ge(l.doc,Be(d.line+1,0)));var h=p(l,d);return new Mn(h.from,h.to)}function qH(l,d,p,h){a&&Ww(l);var m=l.display,w=l.doc;Jt(d);var x,A,M=w.sel,F=M.ranges;if(h.addNew&&!h.extend?(A=w.sel.contains(p),A>-1?x=F[A]:x=new Mn(p,p)):(x=w.sel.primary(),A=w.sel.primIndex),h.unit=="rectangle")h.addNew||(x=new Mn(p,p)),p=pc(l,d,!0,!0),A=-1;else{var te=rI(l,p,h.unit);h.extend?x=ib(x,te.anchor,te.head,h.extend):x=te}h.addNew?A==-1?(A=F.length,Ai(w,Ss(l,F.concat([x]),A),{scroll:!1,origin:"*mouse"})):F.length>1&&F[A].empty()&&h.unit=="char"&&!h.extend?(Ai(w,Ss(l,F.slice(0,A).concat(F.slice(A+1)),0),{scroll:!1,origin:"*mouse"}),M=w.sel):ob(w,A,x,Je):(A=0,Ai(w,new Ho([x],0),Je),M=w.sel);var ie=p;function _e(ot){if(Nt(ie,ot)!=0)if(ie=ot,h.unit=="rectangle"){for(var _t=[],jt=l.options.tabSize,kt=be(ht(w,p.line).text,p.ch,jt),nn=be(ht(w,ot.line).text,ot.ch,jt),Hn=Math.min(kt,nn),fi=Math.max(kt,nn),cr=Math.min(p.line,ot.line),So=Math.min(l.lastLine(),Math.max(p.line,ot.line));cr<=So;cr++){var ro=ht(w,cr).text,Rr=qe(ro,Hn,jt);Hn==fi?_t.push(new Mn(Be(cr,Rr),Be(cr,Rr))):ro.length>Rr&&_t.push(new Mn(Be(cr,Rr),Be(cr,qe(ro,fi,jt))))}_t.length||_t.push(new Mn(p,p)),Ai(w,Ss(l,M.ranges.slice(0,A).concat(_t),A),{origin:"*mouse",scroll:!1}),l.scrollIntoView(ot)}else{var io=x,wi=rI(l,ot,h.unit),Qr=io.anchor,Nr;Nt(wi.anchor,Qr)>0?(Nr=wi.head,Qr=De(io.from(),wi.anchor)):(Nr=wi.anchor,Qr=re(io.to(),wi.head));var _r=M.ranges.slice(0);_r[A]=GH(l,new Mn(Ge(w,Qr),Nr)),Ai(w,Ss(l,_r,A),Je)}}var pe=m.wrapper.getBoundingClientRect(),Pe=0;function Ve(ot){var _t=++Pe,jt=pc(l,ot,!0,h.unit=="rectangle");if(jt)if(Nt(jt,ie)!=0){l.curOp.focus=xe(),_e(jt);var kt=tm(m,w);(jt.line>=kt.to||jt.line<kt.from)&&setTimeout(ui(l,function(){Pe==_t&&Ve(ot)}),150)}else{var nn=ot.clientY<pe.top?-20:ot.clientY>pe.bottom?20:0;nn&&setTimeout(ui(l,function(){Pe==_t&&(m.scroller.scrollTop+=nn,Ve(ot))}),50)}}function Ye(ot){l.state.selectingText=!1,Pe=1/0,ot&&(Jt(ot),m.input.focus()),lt(m.wrapper.ownerDocument,"mousemove",it),lt(m.wrapper.ownerDocument,"mouseup",vt),w.history.lastSelOrigin=null}var it=ui(l,function(ot){ot.buttons===0||!ge(ot)?Ye(ot):Ve(ot)}),vt=ui(l,Ye);l.state.selectingText=vt,ye(m.wrapper.ownerDocument,"mousemove",it),ye(m.wrapper.ownerDocument,"mouseup",vt)}function GH(l,d){var p=d.anchor,h=d.head,m=ht(l.doc,p.line);if(Nt(p,h)==0&&p.sticky==h.sticky)return d;var w=U(m);if(!w)return d;var x=Q(w,p.ch,p.sticky),A=w[x];if(A.from!=p.ch&&A.to!=p.ch)return d;var M=x+(A.from==p.ch==(A.level!=1)?0:1);if(M==0||M==w.length)return d;var F;if(h.line!=p.line)F=(h.line-p.line)*(l.doc.direction=="ltr"?1:-1)>0;else{var te=Q(w,h.ch,h.sticky),ie=te-x||(h.ch-p.ch)*(A.level==1?-1:1);te==M-1||te==M?F=ie<0:F=ie>0}var _e=w[M+(F?-1:0)],pe=F==(_e.level==1),Pe=pe?_e.from:_e.to,Ve=pe?"after":"before";return p.ch==Pe&&p.sticky==Ve?d:new Mn(new Be(p.line,Pe,Ve),h)}function iI(l,d,p,h){var m,w;if(d.touches)m=d.touches[0].clientX,w=d.touches[0].clientY;else try{m=d.clientX,w=d.clientY}catch{return!1}if(m>=Math.floor(l.display.gutters.getBoundingClientRect().right))return!1;h&&Jt(d);var x=l.display,A=x.lineDiv.getBoundingClientRect();if(w>A.bottom||!qt(l,p))return ar(d);w-=A.top-x.viewOffset;for(var M=0;M<l.display.gutterSpecs.length;++M){var F=x.gutters.childNodes[M];if(F&&F.getBoundingClientRect().right>=m){var te=En(l.doc,w),ie=l.display.gutterSpecs[M];return at(l,p,l,te,ie.className,d),ar(d)}}}function db(l,d){return iI(l,d,"gutterClick",!0)}function oI(l,d){Ze(l.display,d)||KH(l,d)||tt(l,d,"contextmenu")||L||l.display.input.onContextMenu(d)}function KH(l,d){return qt(l,"gutterContextMenu")?iI(l,d,"gutterContextMenu",!1):!1}function sI(l){l.display.wrapper.className=l.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+l.options.theme.replace(/(^|\s)\s*/g," cm-s-"),eh(l)}var Qu={toString:function(){return"CodeMirror.Init"}},aI={},pm={};function QH(l){var d=l.optionHandlers;function p(h,m,w,x){l.defaults[h]=m,w&&(d[h]=x?function(A,M,F){F!=Qu&&w(A,M,F)}:w)}l.defineOption=p,l.Init=Qu,p("value","",function(h,m){return h.setValue(m)},!0),p("mode",null,function(h,m){h.doc.modeOption=m,tb(h)},!0),p("indentUnit",2,tb,!0),p("indentWithTabs",!1),p("smartIndent",!0),p("tabSize",4,function(h){lh(h),eh(h),to(h)},!0),p("lineSeparator",null,function(h,m){if(h.doc.lineSep=m,!!m){var w=[],x=h.doc.first;h.doc.iter(function(M){for(var F=0;;){var te=M.text.indexOf(m,F);if(te==-1)break;F=te+m.length,w.push(Be(x,te))}x++});for(var A=w.length-1;A>=0;A--)Wu(h.doc,m,w[A],Be(w[A].line,w[A].ch+m.length))}}),p("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(h,m,w){h.state.specialChars=new RegExp(m.source+(m.test("	")?"":"|	"),"g"),w!=Qu&&h.refresh()}),p("specialCharPlaceholder",Ta,function(h){return h.refresh()},!0),p("electricChars",!0),p("inputStyle",q?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),p("spellcheck",!1,function(h,m){return h.getInputField().spellcheck=m},!0),p("autocorrect",!1,function(h,m){return h.getInputField().autocorrect=m},!0),p("autocapitalize",!1,function(h,m){return h.getInputField().autocapitalize=m},!0),p("rtlMoveVisually",!se),p("wholeLineUpdateBefore",!0),p("theme","default",function(h){sI(h),ah(h)},!0),p("keyMap","default",function(h,m,w){var x=fm(m),A=w!=Qu&&fm(w);A&&A.detach&&A.detach(h,x),x.attach&&x.attach(h,A||null)}),p("extraKeys",null),p("configureMouse",null),p("lineWrapping",!1,JH,!0),p("gutters",[],function(h,m){h.display.gutterSpecs=Xw(m,h.options.lineNumbers),ah(h)},!0),p("fixedGutter",!0,function(h,m){h.display.gutters.style.left=m?Hw(h.display)+"px":"0",h.refresh()},!0),p("coverGutterNextToScrollbar",!1,function(h){return Uu(h)},!0),p("scrollbarStyle","native",function(h){cP(h),Uu(h),h.display.scrollbars.setScrollTop(h.doc.scrollTop),h.display.scrollbars.setScrollLeft(h.doc.scrollLeft)},!0),p("lineNumbers",!1,function(h,m){h.display.gutterSpecs=Xw(h.options.gutters,m),ah(h)},!0),p("firstLineNumber",1,ah,!0),p("lineNumberFormatter",function(h){return h},ah,!0),p("showCursorWhenSelecting",!1,th,!0),p("resetSelectionOnContextMenu",!0),p("lineWiseCopyCut",!0),p("pasteLinesPerSelection",!0),p("selectionsMayTouch",!1),p("readOnly",!1,function(h,m){m=="nocursor"&&(Vu(h),h.display.input.blur()),h.display.input.readOnlyChanged(m)}),p("screenReaderLabel",null,function(h,m){m=m===""?null:m,h.display.input.screenReaderLabelChanged(m)}),p("disableInput",!1,function(h,m){m||h.display.input.reset()},!0),p("dragDrop",!0,YH),p("allowDropFileTypes",null),p("cursorBlinkRate",530),p("cursorScrollMargin",0),p("cursorHeight",1,th,!0),p("singleCursorHeightPerLine",!0,th,!0),p("workTime",100),p("workDelay",100),p("flattenSpans",!0,lh,!0),p("addModeClass",!1,lh,!0),p("pollInterval",100),p("undoDepth",200,function(h,m){return h.doc.history.undoDepth=m}),p("historyEventDelay",1250),p("viewportMargin",10,function(h){return h.refresh()},!0),p("maxHighlightLength",1e4,lh,!0),p("moveInputWithCursor",!0,function(h,m){m||h.display.input.resetPosition()}),p("tabindex",null,function(h,m){return h.display.input.getField().tabIndex=m||""}),p("autofocus",null),p("direction","ltr",function(h,m){return h.doc.setDirection(m)},!0),p("phrases",null)}function YH(l,d,p){var h=p&&p!=Qu;if(!d!=!h){var m=l.display.dragFunctions,w=d?ye:lt;w(l.display.scroller,"dragstart",m.start),w(l.display.scroller,"dragenter",m.enter),w(l.display.scroller,"dragover",m.over),w(l.display.scroller,"dragleave",m.leave),w(l.display.scroller,"drop",m.drop)}}function JH(l){l.options.lineWrapping?(Ee(l.display.wrapper,"CodeMirror-wrap"),l.display.sizer.style.minWidth="",l.display.sizerWidth=null):($(l.display.wrapper,"CodeMirror-wrap"),_i(l)),zw(l),to(l),eh(l),setTimeout(function(){return Uu(l)},100)}function nr(l,d){var p=this;if(!(this instanceof nr))return new nr(l,d);this.options=d=d?Pt(d):{},Pt(aI,d,!1);var h=d.value;typeof h=="string"?h=new no(h,d.mode,null,d.lineSeparator,d.direction):d.mode&&(h.modeOption=d.mode),this.doc=h;var m=new nr.inputStyles[d.inputStyle](this),w=this.display=new uH(l,h,m,d);w.wrapper.CodeMirror=this,sI(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),cP(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Te,keySeq:null,specialChars:null},d.autofocus&&!q&&w.input.focus(),a&&c<11&&setTimeout(function(){return p.display.input.reset(!0)},20),ZH(this),MH(),yc(this),this.curOp.forceUpdate=!0,_P(this,h),d.autofocus&&!q||this.hasFocus()?setTimeout(function(){p.hasFocus()&&!p.state.focused&&qw(p)},20):Vu(this);for(var x in pm)pm.hasOwnProperty(x)&&pm[x](this,d[x],Qu);fP(this),d.finishInit&&d.finishInit(this);for(var A=0;A<fb.length;++A)fb[A](this);_c(this),u&&d.lineWrapping&&getComputedStyle(w.lineDiv).textRendering=="optimizelegibility"&&(w.lineDiv.style.textRendering="auto")}nr.defaults=aI,nr.optionHandlers=pm;function ZH(l){var d=l.display;ye(d.scroller,"mousedown",ui(l,nI)),a&&c<11?ye(d.scroller,"dblclick",ui(l,function(M){if(!tt(l,M)){var F=pc(l,M);if(!(!F||db(l,M)||Ze(l.display,M))){Jt(M);var te=l.findWordAt(F);am(l.doc,te.anchor,te.head)}}})):ye(d.scroller,"dblclick",function(M){return tt(l,M)||Jt(M)}),ye(d.scroller,"contextmenu",function(M){return oI(l,M)}),ye(d.input.getField(),"contextmenu",function(M){d.scroller.contains(M.target)||oI(l,M)});var p,h={end:0};function m(){d.activeTouch&&(p=setTimeout(function(){return d.activeTouch=null},1e3),h=d.activeTouch,h.end=+new Date)}function w(M){if(M.touches.length!=1)return!1;var F=M.touches[0];return F.radiusX<=1&&F.radiusY<=1}function x(M,F){if(F.left==null)return!0;var te=F.left-M.left,ie=F.top-M.top;return te*te+ie*ie>400}ye(d.scroller,"touchstart",function(M){if(!tt(l,M)&&!w(M)&&!db(l,M)){d.input.ensurePolled(),clearTimeout(p);var F=+new Date;d.activeTouch={start:F,moved:!1,prev:F-h.end<=300?h:null},M.touches.length==1&&(d.activeTouch.left=M.touches[0].pageX,d.activeTouch.top=M.touches[0].pageY)}}),ye(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),ye(d.scroller,"touchend",function(M){var F=d.activeTouch;if(F&&!Ze(d,M)&&F.left!=null&&!F.moved&&new Date-F.start<300){var te=l.coordsChar(d.activeTouch,"page"),ie;!F.prev||x(F,F.prev)?ie=new Mn(te,te):!F.prev.prev||x(F,F.prev.prev)?ie=l.findWordAt(te):ie=new Mn(Be(te.line,0),Ge(l.doc,Be(te.line+1,0))),l.setSelection(ie.anchor,ie.head),l.focus(),Jt(M)}m()}),ye(d.scroller,"touchcancel",m),ye(d.scroller,"scroll",function(){d.scroller.clientHeight&&(rh(l,d.scroller.scrollTop),mc(l,d.scroller.scrollLeft,!0),at(l,"scroll",l))}),ye(d.scroller,"mousewheel",function(M){return gP(l,M)}),ye(d.scroller,"DOMMouseScroll",function(M){return gP(l,M)}),ye(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(M){tt(l,M)||W(M)},over:function(M){tt(l,M)||(OH(l,M),W(M))},start:function(M){return TH(l,M)},drop:ui(l,AH),leave:function(M){tt(l,M)||zP(l)}};var A=d.input.getField();ye(A,"keyup",function(M){return eI.call(l,M)}),ye(A,"keydown",ui(l,XP)),ye(A,"keypress",ui(l,tI)),ye(A,"focus",function(M){return qw(l,M)}),ye(A,"blur",function(M){return Vu(l,M)})}var fb=[];nr.defineInitHook=function(l){return fb.push(l)};function bh(l,d,p,h){var m=l.doc,w;p==null&&(p="add"),p=="smart"&&(m.mode.indent?w=gr(l,d).state:p="prev");var x=l.options.tabSize,A=ht(m,d),M=be(A.text,null,x);A.stateAfter&&(A.stateAfter=null);var F=A.text.match(/^\s*/)[0],te;if(!h&&!/\S/.test(A.text))te=0,p="not";else if(p=="smart"&&(te=m.mode.indent(w,A.text.slice(F.length),A.text),te==Ae||te>150)){if(!h)return;p="prev"}p=="prev"?d>m.first?te=be(ht(m,d-1).text,null,x):te=0:p=="add"?te=M+l.options.indentUnit:p=="subtract"?te=M-l.options.indentUnit:typeof p=="number"&&(te=M+p),te=Math.max(0,te);var ie="",_e=0;if(l.options.indentWithTabs)for(var pe=Math.floor(te/x);pe;--pe)_e+=x,ie+="	";if(_e<te&&(ie+=Xt(te-_e)),ie!=F)return Wu(m,ie,Be(d,0),Be(d,F.length),"+input"),A.stateAfter=null,!0;for(var Pe=0;Pe<m.sel.ranges.length;Pe++){var Ve=m.sel.ranges[Pe];if(Ve.head.line==d&&Ve.head.ch<F.length){var Ye=Be(d,F.length);ob(m,Pe,new Mn(Ye,Ye));break}}}var As=null;function gm(l){As=l}function hb(l,d,p,h,m){var w=l.doc;l.display.shift=!1,h||(h=w.sel);var x=+new Date-200,A=m=="paste"||l.state.pasteIncoming>x,M=Pn(d),F=null;if(A&&h.ranges.length>1)if(As&&As.text.join(`
`)==d){if(h.ranges.length%As.text.length==0){F=[];for(var te=0;te<As.text.length;te++)F.push(w.splitLines(As.text[te]))}}else M.length==h.ranges.length&&l.options.pasteLinesPerSelection&&(F=Ln(M,function(it){return[it]}));for(var ie=l.curOp.updateInput,_e=h.ranges.length-1;_e>=0;_e--){var pe=h.ranges[_e],Pe=pe.from(),Ve=pe.to();pe.empty()&&(p&&p>0?Pe=Be(Pe.line,Pe.ch-p):l.state.overwrite&&!A?Ve=Be(Ve.line,Math.min(ht(w,Ve.line).text.length,Ve.ch+It(M).length)):A&&As&&As.lineWise&&As.text.join(`
`)==M.join(`
`)&&(Pe=Ve=Be(Pe.line,0)));var Ye={from:Pe,to:Ve,text:F?F[_e%F.length]:M,origin:m||(A?"paste":l.state.cutIncoming>x?"cut":"+input")};$u(l.doc,Ye),Yn(l,"inputRead",l,Ye)}d&&!A&&cI(l,d),Bu(l),l.curOp.updateInput<2&&(l.curOp.updateInput=ie),l.curOp.typing=!0,l.state.pasteIncoming=l.state.cutIncoming=-1}function lI(l,d){var p=l.clipboardData&&l.clipboardData.getData("Text");if(p)return l.preventDefault(),!d.isReadOnly()&&!d.options.disableInput&&Eo(d,function(){return hb(d,p,0,null,"paste")}),!0}function cI(l,d){if(!(!l.options.electricChars||!l.options.smartIndent))for(var p=l.doc.sel,h=p.ranges.length-1;h>=0;h--){var m=p.ranges[h];if(!(m.head.ch>100||h&&p.ranges[h-1].head.line==m.head.line)){var w=l.getModeAt(m.head),x=!1;if(w.electricChars){for(var A=0;A<w.electricChars.length;A++)if(d.indexOf(w.electricChars.charAt(A))>-1){x=bh(l,m.head.line,"smart");break}}else w.electricInput&&w.electricInput.test(ht(l.doc,m.head.line).text.slice(0,m.head.ch))&&(x=bh(l,m.head.line,"smart"));x&&Yn(l,"electricInput",l,m.head.line)}}}function uI(l){for(var d=[],p=[],h=0;h<l.doc.sel.ranges.length;h++){var m=l.doc.sel.ranges[h].head.line,w={anchor:Be(m,0),head:Be(m+1,0)};p.push(w),d.push(l.getRange(w.anchor,w.head))}return{text:d,ranges:p}}function dI(l,d,p,h){l.setAttribute("autocorrect",p?"":"off"),l.setAttribute("autocapitalize",h?"":"off"),l.setAttribute("spellcheck",!!d)}function fI(){var l=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),d=O("div",[l],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?l.style.width="1000px":l.setAttribute("wrap","off"),S&&(l.style.border="1px solid black"),dI(l),d}function XH(l){var d=l.optionHandlers,p=l.helpers={};l.prototype={constructor:l,focus:function(){window.focus(),this.display.input.focus()},setOption:function(h,m){var w=this.options,x=w[h];w[h]==m&&h!="mode"||(w[h]=m,d.hasOwnProperty(h)&&ui(this,d[h])(this,m,x),at(this,"optionChange",this,h))},getOption:function(h){return this.options[h]},getDoc:function(){return this.doc},addKeyMap:function(h,m){this.state.keyMaps[m?"push":"unshift"](fm(h))},removeKeyMap:function(h){for(var m=this.state.keyMaps,w=0;w<m.length;++w)if(m[w]==h||m[w].name==h)return m.splice(w,1),!0},addOverlay:Ni(function(h,m){var w=h.token?h:l.getMode(this.options,h);if(w.startState)throw new Error("Overlays may not be stateful.");xn(this.state.overlays,{mode:w,modeSpec:h,opaque:m&&m.opaque,priority:m&&m.priority||0},function(x){return x.priority}),this.state.modeGen++,to(this)}),removeOverlay:Ni(function(h){for(var m=this.state.overlays,w=0;w<m.length;++w){var x=m[w].modeSpec;if(x==h||typeof h=="string"&&x.name==h){m.splice(w,1),this.state.modeGen++,to(this);return}}}),indentLine:Ni(function(h,m,w){typeof m!="string"&&typeof m!="number"&&(m==null?m=this.options.smartIndent?"smart":"prev":m=m?"add":"subtract"),si(this.doc,h)&&bh(this,h,m,w)}),indentSelection:Ni(function(h){for(var m=this.doc.sel.ranges,w=-1,x=0;x<m.length;x++){var A=m[x];if(A.empty())A.head.line>w&&(bh(this,A.head.line,h,!0),w=A.head.line,x==this.doc.sel.primIndex&&Bu(this));else{var M=A.from(),F=A.to(),te=Math.max(w,M.line);w=Math.min(this.lastLine(),F.line-(F.ch?0:1))+1;for(var ie=te;ie<w;++ie)bh(this,ie,h);var _e=this.doc.sel.ranges;M.ch==0&&m.length==_e.length&&_e[x].from().ch>0&&ob(this.doc,x,new Mn(M,_e[x].to()),Re)}}}),getTokenAt:function(h,m){return Tn(this,h,m)},getLineTokens:function(h,m){return Tn(this,Be(h),m,!0)},getTokenTypeAt:function(h){h=Ge(this.doc,h);var m=Qi(this,ht(this.doc,h.line)),w=0,x=(m.length-1)/2,A=h.ch,M;if(A==0)M=m[2];else for(;;){var F=w+x>>1;if((F?m[F*2-1]:0)>=A)x=F;else if(m[F*2+1]<A)w=F+1;else{M=m[F*2+2];break}}var te=M?M.indexOf("overlay "):-1;return te<0?M:te==0?null:M.slice(0,te-1)},getModeAt:function(h){var m=this.doc.mode;return m.innerMode?l.innerMode(m,this.getTokenAt(h).state).mode:m},getHelper:function(h,m){return this.getHelpers(h,m)[0]},getHelpers:function(h,m){var w=[];if(!p.hasOwnProperty(m))return w;var x=p[m],A=this.getModeAt(h);if(typeof A[m]=="string")x[A[m]]&&w.push(x[A[m]]);else if(A[m])for(var M=0;M<A[m].length;M++){var F=x[A[m][M]];F&&w.push(F)}else A.helperType&&x[A.helperType]?w.push(x[A.helperType]):x[A.name]&&w.push(x[A.name]);for(var te=0;te<x._global.length;te++){var ie=x._global[te];ie.pred(A,this)&&$e(w,ie.val)==-1&&w.push(ie.val)}return w},getStateAfter:function(h,m){var w=this.doc;return h=He(w,h??w.first+w.size-1),gr(this,h+1,m).state},cursorCoords:function(h,m){var w,x=this.doc.sel.primary();return h==null?w=x.head:typeof h=="object"?w=Ge(this.doc,h):w=h?x.from():x.to(),Es(this,w,m||"page")},charCoords:function(h,m){return Jg(this,Ge(this.doc,h),m||"page")},coordsChar:function(h,m){return h=QM(this,h,m||"page"),Vw(this,h.left,h.top)},lineAtHeight:function(h,m){return h=QM(this,{top:h,left:0},m||"page").top,En(this.doc,h+this.display.viewOffset)},heightAtLine:function(h,m,w){var x=!1,A;if(typeof h=="number"){var M=this.doc.first+this.doc.size-1;h<this.doc.first?h=this.doc.first:h>M&&(h=M,x=!0),A=ht(this.doc,h)}else A=h;return Yg(this,A,{top:0,left:0},m||"page",w||x).top+(x?this.doc.height-li(A):0)},defaultTextHeight:function(){return Fu(this.display)},defaultCharWidth:function(){return Lu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(h,m,w,x,A){var M=this.display;h=Es(this,Ge(this.doc,h));var F=h.bottom,te=h.left;if(m.style.position="absolute",m.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(m),M.sizer.appendChild(m),x=="over")F=h.top;else if(x=="above"||x=="near"){var ie=Math.max(M.wrapper.clientHeight,this.doc.height),_e=Math.max(M.sizer.clientWidth,M.lineSpace.clientWidth);(x=="above"||h.bottom+m.offsetHeight>ie)&&h.top>m.offsetHeight?F=h.top-m.offsetHeight:h.bottom+m.offsetHeight<=ie&&(F=h.bottom),te+m.offsetWidth>_e&&(te=_e-m.offsetWidth)}m.style.top=F+"px",m.style.left=m.style.right="",A=="right"?(te=M.sizer.clientWidth-m.offsetWidth,m.style.right="0px"):(A=="left"?te=0:A=="middle"&&(te=(M.sizer.clientWidth-m.offsetWidth)/2),m.style.left=te+"px"),w&&YU(this,{left:te,top:F,right:te+m.offsetWidth,bottom:F+m.offsetHeight})},triggerOnKeyDown:Ni(XP),triggerOnKeyPress:Ni(tI),triggerOnKeyUp:eI,triggerOnMouseDown:Ni(nI),execCommand:function(h){if(vh.hasOwnProperty(h))return vh[h].call(null,this)},triggerElectric:Ni(function(h){cI(this,h)}),findPosH:function(h,m,w,x){var A=1;m<0&&(A=-1,m=-m);for(var M=Ge(this.doc,h),F=0;F<m&&(M=pb(this.doc,M,A,w,x),!M.hitSide);++F);return M},moveH:Ni(function(h,m){var w=this;this.extendSelectionsBy(function(x){return w.display.shift||w.doc.extend||x.empty()?pb(w.doc,x.head,h,m,w.options.rtlMoveVisually):h<0?x.from():x.to()},Qe)}),deleteH:Ni(function(h,m){var w=this.doc.sel,x=this.doc;w.somethingSelected()?x.replaceSelection("",null,"+delete"):Ku(this,function(A){var M=pb(x,A.head,h,m,!1);return h<0?{from:M,to:A.head}:{from:A.head,to:M}})}),findPosV:function(h,m,w,x){var A=1,M=x;m<0&&(A=-1,m=-m);for(var F=Ge(this.doc,h),te=0;te<m;++te){var ie=Es(this,F,"div");if(M==null?M=ie.left:ie.left=M,F=hI(this,ie,A,w),F.hitSide)break}return F},moveV:Ni(function(h,m){var w=this,x=this.doc,A=[],M=!this.display.shift&&!x.extend&&x.sel.somethingSelected();if(x.extendSelectionsBy(function(te){if(M)return h<0?te.from():te.to();var ie=Es(w,te.head,"div");te.goalColumn!=null&&(ie.left=te.goalColumn),A.push(ie.left);var _e=hI(w,ie,h,m);return m=="page"&&te==x.sel.primary()&&Kw(w,Jg(w,_e,"div").top-ie.top),_e},Qe),A.length)for(var F=0;F<x.sel.ranges.length;F++)x.sel.ranges[F].goalColumn=A[F]}),findWordAt:function(h){var m=this.doc,w=ht(m,h.line).text,x=h.ch,A=h.ch;if(w){var M=this.getHelper(h,"wordChars");(h.sticky=="before"||A==w.length)&&x?--x:++A;for(var F=w.charAt(x),te=he(F,M)?function(ie){return he(ie,M)}:/\s/.test(F)?function(ie){return/\s/.test(ie)}:function(ie){return!/\s/.test(ie)&&!he(ie)};x>0&&te(w.charAt(x-1));)--x;for(;A<w.length&&te(w.charAt(A));)++A}return new Mn(Be(h.line,x),Be(h.line,A))},toggleOverwrite:function(h){h!=null&&h==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ee(this.display.cursorDiv,"CodeMirror-overwrite"):$(this.display.cursorDiv,"CodeMirror-overwrite"),at(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==xe()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ni(function(h,m){nh(this,h,m)}),getScrollInfo:function(){var h=this.display.scroller;return{left:h.scrollLeft,top:h.scrollTop,height:h.scrollHeight-Dn(this)-this.display.barHeight,width:h.scrollWidth-Dn(this)-this.display.barWidth,clientHeight:P(this),clientWidth:Jn(this)}},scrollIntoView:Ni(function(h,m){h==null?(h={from:this.doc.sel.primary().head,to:null},m==null&&(m=this.options.cursorScrollMargin)):typeof h=="number"?h={from:Be(h,0),to:null}:h.from==null&&(h={from:h,to:null}),h.to||(h.to=h.from),h.margin=m||0,h.from.line!=null?JU(this,h):oP(this,h.from,h.to,h.margin)}),setSize:Ni(function(h,m){var w=this,x=function(M){return typeof M=="number"||/^\d+$/.test(String(M))?M+"px":M};h!=null&&(this.display.wrapper.style.width=x(h)),m!=null&&(this.display.wrapper.style.height=x(m)),this.options.lineWrapping&&qM(this);var A=this.display.viewFrom;this.doc.iter(A,this.display.viewTo,function(M){if(M.widgets){for(var F=0;F<M.widgets.length;F++)if(M.widgets[F].noHScroll){fl(w,A,"widget");break}}++A}),this.curOp.forceUpdate=!0,at(this,"refresh",this)}),operation:function(h){return Eo(this,h)},startOperation:function(){return yc(this)},endOperation:function(){return _c(this)},refresh:Ni(function(){var h=this.display.cachedTextHeight;to(this),this.curOp.forceUpdate=!0,eh(this),nh(this,this.doc.scrollLeft,this.doc.scrollTop),Jw(this.display),(h==null||Math.abs(h-Fu(this.display))>.5||this.options.lineWrapping)&&zw(this),at(this,"refresh",this)}),swapDoc:Ni(function(h){var m=this.doc;return m.cm=null,this.state.selectingText&&this.state.selectingText(),_P(this,h),eh(this),this.display.input.reset(),nh(this,h.scrollLeft,h.scrollTop),this.curOp.forceScroll=!0,Yn(this,"swapDoc",this,m),m}),phrase:function(h){var m=this.options.phrases;return m&&Object.prototype.hasOwnProperty.call(m,h)?m[h]:h},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},en(l),l.registerHelper=function(h,m,w){p.hasOwnProperty(h)||(p[h]=l[h]={_global:[]}),p[h][m]=w},l.registerGlobalHelper=function(h,m,w,x){l.registerHelper(h,m,x),p[h]._global.push({pred:w,val:x})}}function pb(l,d,p,h,m){var w=d,x=p,A=ht(l,d.line),M=m&&l.direction=="rtl"?-p:p;function F(){var vt=d.line+M;return vt<l.first||vt>=l.first+l.size?!1:(d=new Be(vt,d.ch,d.sticky),A=ht(l,vt))}function te(vt){var ot;if(h=="codepoint"){var _t=A.text.charCodeAt(d.ch+(p>0?0:-1));if(isNaN(_t))ot=null;else{var jt=p>0?_t>=55296&&_t<56320:_t>=56320&&_t<57343;ot=new Be(d.line,Math.max(0,Math.min(A.text.length,d.ch+p*(jt?2:1))),-p)}}else m?ot=RH(l.cm,A,d,p):ot=ab(A,d,p);if(ot==null)if(!vt&&F())d=lb(m,l.cm,A,d.line,M);else return!1;else d=ot;return!0}if(h=="char"||h=="codepoint")te();else if(h=="column")te(!0);else if(h=="word"||h=="group")for(var ie=null,_e=h=="group",pe=l.cm&&l.cm.getHelper(d,"wordChars"),Pe=!0;!(p<0&&!te(!Pe));Pe=!1){var Ve=A.text.charAt(d.ch)||`
`,Ye=he(Ve,pe)?"w":_e&&Ve==`
`?"n":!_e||/\s/.test(Ve)?null:"p";if(_e&&!Pe&&!Ye&&(Ye="s"),ie&&ie!=Ye){p<0&&(p=1,te(),d.sticky="after");break}if(Ye&&(ie=Ye),p>0&&!te(!Pe))break}var it=cm(l,d,w,x,!0);return yi(w,it)&&(it.hitSide=!0),it}function hI(l,d,p,h){var m=l.doc,w=d.left,x;if(h=="page"){var A=Math.min(l.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),M=Math.max(A-.5*Fu(l.display),3);x=(p>0?d.bottom:d.top)+p*M}else h=="line"&&(x=p>0?d.bottom+3:d.top-3);for(var F;F=Vw(l,w,x),!!F.outside;){if(p<0?x<=0:x>=m.height){F.hitSide=!0;break}x+=p*5}return F}var jn=function(l){this.cm=l,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Te,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};jn.prototype.init=function(l){var d=this,p=this,h=p.cm,m=p.div=l.lineDiv;m.contentEditable=!0,dI(m,h.options.spellcheck,h.options.autocorrect,h.options.autocapitalize);function w(A){for(var M=A.target;M;M=M.parentNode){if(M==m)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(M.className))break}return!1}ye(m,"paste",function(A){!w(A)||tt(h,A)||lI(A,h)||c<=11&&setTimeout(ui(h,function(){return d.updateFromDOM()}),20)}),ye(m,"compositionstart",function(A){d.composing={data:A.data,done:!1}}),ye(m,"compositionupdate",function(A){d.composing||(d.composing={data:A.data,done:!1})}),ye(m,"compositionend",function(A){d.composing&&(A.data!=d.composing.data&&d.readFromDOMSoon(),d.composing.done=!0)}),ye(m,"touchstart",function(){return p.forceCompositionEnd()}),ye(m,"input",function(){d.composing||d.readFromDOMSoon()});function x(A){if(!(!w(A)||tt(h,A))){if(h.somethingSelected())gm({lineWise:!1,text:h.getSelections()}),A.type=="cut"&&h.replaceSelection("",null,"cut");else if(h.options.lineWiseCopyCut){var M=uI(h);gm({lineWise:!0,text:M.text}),A.type=="cut"&&h.operation(function(){h.setSelections(M.ranges,0,Re),h.replaceSelection("",null,"cut")})}else return;if(A.clipboardData){A.clipboardData.clearData();var F=As.text.join(`
`);if(A.clipboardData.setData("Text",F),A.clipboardData.getData("Text")==F){A.preventDefault();return}}var te=fI(),ie=te.firstChild;h.display.lineSpace.insertBefore(te,h.display.lineSpace.firstChild),ie.value=As.text.join(`
`);var _e=xe();pt(ie),setTimeout(function(){h.display.lineSpace.removeChild(te),_e.focus(),_e==m&&p.showPrimarySelection()},50)}}ye(m,"copy",x),ye(m,"cut",x)},jn.prototype.screenReaderLabelChanged=function(l){l?this.div.setAttribute("aria-label",l):this.div.removeAttribute("aria-label")},jn.prototype.prepareSelection=function(){var l=tP(this.cm,!1);return l.focus=xe()==this.div,l},jn.prototype.showSelection=function(l,d){!l||!this.cm.display.view.length||((l.focus||d)&&this.showPrimarySelection(),this.showMultipleSelections(l))},jn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},jn.prototype.showPrimarySelection=function(){var l=this.getSelection(),d=this.cm,p=d.doc.sel.primary(),h=p.from(),m=p.to();if(d.display.viewTo==d.display.viewFrom||h.line>=d.display.viewTo||m.line<d.display.viewFrom){l.removeAllRanges();return}var w=mm(d,l.anchorNode,l.anchorOffset),x=mm(d,l.focusNode,l.focusOffset);if(!(w&&!w.bad&&x&&!x.bad&&Nt(De(w,x),h)==0&&Nt(re(w,x),m)==0)){var A=d.display.view,M=h.line>=d.display.viewFrom&&pI(d,h)||{node:A[0].measure.map[2],offset:0},F=m.line<d.display.viewTo&&pI(d,m);if(!F){var te=A[A.length-1].measure,ie=te.maps?te.maps[te.maps.length-1]:te.map;F={node:ie[ie.length-1],offset:ie[ie.length-2]-ie[ie.length-3]}}if(!M||!F){l.removeAllRanges();return}var _e=l.rangeCount&&l.getRangeAt(0),pe;try{pe=ce(M.node,M.offset,F.offset,F.node)}catch{}pe&&(!n&&d.state.focused?(l.collapse(M.node,M.offset),pe.collapsed||(l.removeAllRanges(),l.addRange(pe))):(l.removeAllRanges(),l.addRange(pe)),_e&&l.anchorNode==null?l.addRange(_e):n&&this.startGracePeriod()),this.rememberSelection()}},jn.prototype.startGracePeriod=function(){var l=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){l.gracePeriod=!1,l.selectionChanged()&&l.cm.operation(function(){return l.cm.curOp.selectionChanged=!0})},20)},jn.prototype.showMultipleSelections=function(l){T(this.cm.display.cursorDiv,l.cursors),T(this.cm.display.selectionDiv,l.selection)},jn.prototype.rememberSelection=function(){var l=this.getSelection();this.lastAnchorNode=l.anchorNode,this.lastAnchorOffset=l.anchorOffset,this.lastFocusNode=l.focusNode,this.lastFocusOffset=l.focusOffset},jn.prototype.selectionInEditor=function(){var l=this.getSelection();if(!l.rangeCount)return!1;var d=l.getRangeAt(0).commonAncestorContainer;return V(this.div,d)},jn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||xe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},jn.prototype.blur=function(){this.div.blur()},jn.prototype.getField=function(){return this.div},jn.prototype.supportsTouch=function(){return!0},jn.prototype.receivedFocus=function(){var l=this,d=this;this.selectionInEditor()?setTimeout(function(){return l.pollSelection()},20):Eo(this.cm,function(){return d.cm.curOp.selectionChanged=!0});function p(){d.cm.state.focused&&(d.pollSelection(),d.polling.set(d.cm.options.pollInterval,p))}this.polling.set(this.cm.options.pollInterval,p)},jn.prototype.selectionChanged=function(){var l=this.getSelection();return l.anchorNode!=this.lastAnchorNode||l.anchorOffset!=this.lastAnchorOffset||l.focusNode!=this.lastFocusNode||l.focusOffset!=this.lastFocusOffset},jn.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var l=this.getSelection(),d=this.cm;if(j&&g&&this.cm.display.gutterSpecs.length&&e5(l.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var p=mm(d,l.anchorNode,l.anchorOffset),h=mm(d,l.focusNode,l.focusOffset);p&&h&&Eo(d,function(){Ai(d.doc,pl(p,h),Re),(p.bad||h.bad)&&(d.curOp.selectionChanged=!0)})}}},jn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var l=this.cm,d=l.display,p=l.doc.sel.primary(),h=p.from(),m=p.to();if(h.ch==0&&h.line>l.firstLine()&&(h=Be(h.line-1,ht(l.doc,h.line-1).length)),m.ch==ht(l.doc,m.line).text.length&&m.line<l.lastLine()&&(m=Be(m.line+1,0)),h.line<d.viewFrom||m.line>d.viewTo-1)return!1;var w,x,A;h.line==d.viewFrom||(w=gc(l,h.line))==0?(x=zt(d.view[0].line),A=d.view[0].node):(x=zt(d.view[w].line),A=d.view[w-1].node.nextSibling);var M=gc(l,m.line),F,te;if(M==d.view.length-1?(F=d.viewTo-1,te=d.lineDiv.lastChild):(F=zt(d.view[M+1].line)-1,te=d.view[M+1].node.previousSibling),!A)return!1;for(var ie=l.doc.splitLines(t5(l,A,te,x,F)),_e=pr(l.doc,Be(x,0),Be(F,ht(l.doc,F).text.length));ie.length>1&&_e.length>1;)if(It(ie)==It(_e))ie.pop(),_e.pop(),F--;else if(ie[0]==_e[0])ie.shift(),_e.shift(),x++;else break;for(var pe=0,Pe=0,Ve=ie[0],Ye=_e[0],it=Math.min(Ve.length,Ye.length);pe<it&&Ve.charCodeAt(pe)==Ye.charCodeAt(pe);)++pe;for(var vt=It(ie),ot=It(_e),_t=Math.min(vt.length-(ie.length==1?pe:0),ot.length-(_e.length==1?pe:0));Pe<_t&&vt.charCodeAt(vt.length-Pe-1)==ot.charCodeAt(ot.length-Pe-1);)++Pe;if(ie.length==1&&_e.length==1&&x==h.line)for(;pe&&pe>h.ch&&vt.charCodeAt(vt.length-Pe-1)==ot.charCodeAt(ot.length-Pe-1);)pe--,Pe++;ie[ie.length-1]=vt.slice(0,vt.length-Pe).replace(/^\u200b+/,""),ie[0]=ie[0].slice(pe).replace(/\u200b+$/,"");var jt=Be(x,pe),kt=Be(F,_e.length?It(_e).length-Pe:0);if(ie.length>1||ie[0]||Nt(jt,kt))return Wu(l.doc,ie,jt,kt,"+input"),!0},jn.prototype.ensurePolled=function(){this.forceCompositionEnd()},jn.prototype.reset=function(){this.forceCompositionEnd()},jn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},jn.prototype.readFromDOMSoon=function(){var l=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(l.readDOMTimeout=null,l.composing)if(l.composing.done)l.composing=null;else return;l.updateFromDOM()},80))},jn.prototype.updateFromDOM=function(){var l=this;(this.cm.isReadOnly()||!this.pollContent())&&Eo(this.cm,function(){return to(l.cm)})},jn.prototype.setUneditable=function(l){l.contentEditable="false"},jn.prototype.onKeyPress=function(l){l.charCode==0||this.composing||(l.preventDefault(),this.cm.isReadOnly()||ui(this.cm,hb)(this.cm,String.fromCharCode(l.charCode==null?l.keyCode:l.charCode),0))},jn.prototype.readOnlyChanged=function(l){this.div.contentEditable=String(l!="nocursor")},jn.prototype.onContextMenu=function(){},jn.prototype.resetPosition=function(){},jn.prototype.needsContentAttribute=!0;function pI(l,d){var p=me(l,d.line);if(!p||p.hidden)return null;var h=ht(l.doc,d.line),m=ne(p,h,d.line),w=U(h,l.doc.direction),x="left";if(w){var A=Q(w,d.ch);x=A%2?"right":"left"}var M=Wt(m.map,d.ch,x);return M.offset=M.collapse=="right"?M.end:M.start,M}function e5(l){for(var d=l;d;d=d.parentNode)if(/CodeMirror-gutter-wrapper/.test(d.className))return!0;return!1}function Yu(l,d){return d&&(l.bad=!0),l}function t5(l,d,p,h,m){var w="",x=!1,A=l.doc.lineSeparator(),M=!1;function F(pe){return function(Pe){return Pe.id==pe}}function te(){x&&(w+=A,M&&(w+=A),x=M=!1)}function ie(pe){pe&&(te(),w+=pe)}function _e(pe){if(pe.nodeType==1){var Pe=pe.getAttribute("cm-text");if(Pe){ie(Pe);return}var Ve=pe.getAttribute("cm-marker"),Ye;if(Ve){var it=l.findMarks(Be(h,0),Be(m+1,0),F(+Ve));it.length&&(Ye=it[0].find(0))&&ie(pr(l.doc,Ye.from,Ye.to).join(A));return}if(pe.getAttribute("contenteditable")=="false")return;var vt=/^(pre|div|p|li|table|br)$/i.test(pe.nodeName);if(!/^br$/i.test(pe.nodeName)&&pe.textContent.length==0)return;vt&&te();for(var ot=0;ot<pe.childNodes.length;ot++)_e(pe.childNodes[ot]);/^(pre|p)$/i.test(pe.nodeName)&&(M=!0),vt&&(x=!0)}else pe.nodeType==3&&ie(pe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_e(d),d!=p;)d=d.nextSibling,M=!1;return w}function mm(l,d,p){var h;if(d==l.display.lineDiv){if(h=l.display.lineDiv.childNodes[p],!h)return Yu(l.clipPos(Be(l.display.viewTo-1)),!0);d=null,p=0}else for(h=d;;h=h.parentNode){if(!h||h==l.display.lineDiv)return null;if(h.parentNode&&h.parentNode==l.display.lineDiv)break}for(var m=0;m<l.display.view.length;m++){var w=l.display.view[m];if(w.node==h)return n5(w,d,p)}}function n5(l,d,p){var h=l.text.firstChild,m=!1;if(!d||!V(h,d))return Yu(Be(zt(l.line),0),!0);if(d==h&&(m=!0,d=h.childNodes[p],p=0,!d)){var w=l.rest?It(l.rest):l.line;return Yu(Be(zt(w),w.text.length),m)}var x=d.nodeType==3?d:null,A=d;for(!x&&d.childNodes.length==1&&d.firstChild.nodeType==3&&(x=d.firstChild,p&&(p=x.nodeValue.length));A.parentNode!=h;)A=A.parentNode;var M=l.measure,F=M.maps;function te(Ye,it,vt){for(var ot=-1;ot<(F?F.length:0);ot++)for(var _t=ot<0?M.map:F[ot],jt=0;jt<_t.length;jt+=3){var kt=_t[jt+2];if(kt==Ye||kt==it){var nn=zt(ot<0?l.line:l.rest[ot]),Hn=_t[jt]+vt;return(vt<0||kt!=Ye)&&(Hn=_t[jt+(vt?1:0)]),Be(nn,Hn)}}}var ie=te(x,A,p);if(ie)return Yu(ie,m);for(var _e=A.nextSibling,pe=x?x.nodeValue.length-p:0;_e;_e=_e.nextSibling){if(ie=te(_e,_e.firstChild,0),ie)return Yu(Be(ie.line,ie.ch-pe),m);pe+=_e.textContent.length}for(var Pe=A.previousSibling,Ve=p;Pe;Pe=Pe.previousSibling){if(ie=te(Pe,Pe.firstChild,-1),ie)return Yu(Be(ie.line,ie.ch+Ve),m);Ve+=Pe.textContent.length}}var Ar=function(l){this.cm=l,this.prevInput="",this.pollingFast=!1,this.polling=new Te,this.hasSelection=!1,this.composing=null};Ar.prototype.init=function(l){var d=this,p=this,h=this.cm;this.createField(l);var m=this.textarea;l.wrapper.insertBefore(this.wrapper,l.wrapper.firstChild),S&&(m.style.width="0px"),ye(m,"input",function(){a&&c>=9&&d.hasSelection&&(d.hasSelection=null),p.poll()}),ye(m,"paste",function(x){tt(h,x)||lI(x,h)||(h.state.pasteIncoming=+new Date,p.fastPoll())});function w(x){if(!tt(h,x)){if(h.somethingSelected())gm({lineWise:!1,text:h.getSelections()});else if(h.options.lineWiseCopyCut){var A=uI(h);gm({lineWise:!0,text:A.text}),x.type=="cut"?h.setSelections(A.ranges,null,Re):(p.prevInput="",m.value=A.text.join(`
`),pt(m))}else return;x.type=="cut"&&(h.state.cutIncoming=+new Date)}}ye(m,"cut",w),ye(m,"copy",w),ye(l.scroller,"paste",function(x){if(!(Ze(l,x)||tt(h,x))){if(!m.dispatchEvent){h.state.pasteIncoming=+new Date,p.focus();return}var A=new Event("paste");A.clipboardData=x.clipboardData,m.dispatchEvent(A)}}),ye(l.lineSpace,"selectstart",function(x){Ze(l,x)||Jt(x)}),ye(m,"compositionstart",function(){var x=h.getCursor("from");p.composing&&p.composing.range.clear(),p.composing={start:x,range:h.markText(x,h.getCursor("to"),{className:"CodeMirror-composing"})}}),ye(m,"compositionend",function(){p.composing&&(p.poll(),p.composing.range.clear(),p.composing=null)})},Ar.prototype.createField=function(l){this.wrapper=fI(),this.textarea=this.wrapper.firstChild},Ar.prototype.screenReaderLabelChanged=function(l){l?this.textarea.setAttribute("aria-label",l):this.textarea.removeAttribute("aria-label")},Ar.prototype.prepareSelection=function(){var l=this.cm,d=l.display,p=l.doc,h=tP(l);if(l.options.moveInputWithCursor){var m=Es(l,p.sel.primary().head,"div"),w=d.wrapper.getBoundingClientRect(),x=d.lineDiv.getBoundingClientRect();h.teTop=Math.max(0,Math.min(d.wrapper.clientHeight-10,m.top+x.top-w.top)),h.teLeft=Math.max(0,Math.min(d.wrapper.clientWidth-10,m.left+x.left-w.left))}return h},Ar.prototype.showSelection=function(l){var d=this.cm,p=d.display;T(p.cursorDiv,l.cursors),T(p.selectionDiv,l.selection),l.teTop!=null&&(this.wrapper.style.top=l.teTop+"px",this.wrapper.style.left=l.teLeft+"px")},Ar.prototype.reset=function(l){if(!(this.contextMenuPending||this.composing)){var d=this.cm;if(d.somethingSelected()){this.prevInput="";var p=d.getSelection();this.textarea.value=p,d.state.focused&&pt(this.textarea),a&&c>=9&&(this.hasSelection=p)}else l||(this.prevInput=this.textarea.value="",a&&c>=9&&(this.hasSelection=null))}},Ar.prototype.getField=function(){return this.textarea},Ar.prototype.supportsTouch=function(){return!1},Ar.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!q||xe()!=this.textarea))try{this.textarea.focus()}catch{}},Ar.prototype.blur=function(){this.textarea.blur()},Ar.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ar.prototype.receivedFocus=function(){this.slowPoll()},Ar.prototype.slowPoll=function(){var l=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){l.poll(),l.cm.state.focused&&l.slowPoll()})},Ar.prototype.fastPoll=function(){var l=!1,d=this;d.pollingFast=!0;function p(){var h=d.poll();!h&&!l?(l=!0,d.polling.set(60,p)):(d.pollingFast=!1,d.slowPoll())}d.polling.set(20,p)},Ar.prototype.poll=function(){var l=this,d=this.cm,p=this.textarea,h=this.prevInput;if(this.contextMenuPending||!d.state.focused||In(p)&&!h&&!this.composing||d.isReadOnly()||d.options.disableInput||d.state.keySeq)return!1;var m=p.value;if(m==h&&!d.somethingSelected())return!1;if(a&&c>=9&&this.hasSelection===m||N&&/[\uf700-\uf7ff]/.test(m))return d.display.input.reset(),!1;if(d.doc.sel==d.display.selForContextMenu){var w=m.charCodeAt(0);if(w==8203&&!h&&(h="\u200B"),w==8666)return this.reset(),this.cm.execCommand("undo")}for(var x=0,A=Math.min(h.length,m.length);x<A&&h.charCodeAt(x)==m.charCodeAt(x);)++x;return Eo(d,function(){hb(d,m.slice(x),h.length-x,null,l.composing?"*compose":null),m.length>1e3||m.indexOf(`
`)>-1?p.value=l.prevInput="":l.prevInput=m,l.composing&&(l.composing.range.clear(),l.composing.range=d.markText(l.composing.start,d.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ar.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ar.prototype.onKeyPress=function(){a&&c>=9&&(this.hasSelection=null),this.fastPoll()},Ar.prototype.onContextMenu=function(l){var d=this,p=d.cm,h=p.display,m=d.textarea;d.contextMenuPending&&d.contextMenuPending();var w=pc(p,l),x=h.scroller.scrollTop;if(!w||v)return;var A=p.options.resetSelectionOnContextMenu;A&&p.doc.sel.contains(w)==-1&&ui(p,Ai)(p.doc,pl(w),Re);var M=m.style.cssText,F=d.wrapper.style.cssText,te=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",m.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(l.clientY-te.top-5)+"px; left: "+(l.clientX-te.left-5)+`px;
      z-index: 1000; background: `+(a?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var ie;u&&(ie=window.scrollY),h.input.focus(),u&&window.scrollTo(null,ie),h.input.reset(),p.somethingSelected()||(m.value=d.prevInput=" "),d.contextMenuPending=pe,h.selForContextMenu=p.doc.sel,clearTimeout(h.detectingSelectAll);function _e(){if(m.selectionStart!=null){var Ve=p.somethingSelected(),Ye="\u200B"+(Ve?m.value:"");m.value="\u21DA",m.value=Ye,d.prevInput=Ve?"":"\u200B",m.selectionStart=1,m.selectionEnd=Ye.length,h.selForContextMenu=p.doc.sel}}function pe(){if(d.contextMenuPending==pe&&(d.contextMenuPending=!1,d.wrapper.style.cssText=F,m.style.cssText=M,a&&c<9&&h.scrollbars.setScrollTop(h.scroller.scrollTop=x),m.selectionStart!=null)){(!a||a&&c<9)&&_e();var Ve=0,Ye=function(){h.selForContextMenu==p.doc.sel&&m.selectionStart==0&&m.selectionEnd>0&&d.prevInput=="\u200B"?ui(p,DP)(p):Ve++<10?h.detectingSelectAll=setTimeout(Ye,500):(h.selForContextMenu=null,h.input.reset())};h.detectingSelectAll=setTimeout(Ye,200)}}if(a&&c>=9&&_e(),L){W(l);var Pe=function(){lt(window,"mouseup",Pe),setTimeout(pe,20)};ye(window,"mouseup",Pe)}else setTimeout(pe,50)},Ar.prototype.readOnlyChanged=function(l){l||this.reset(),this.textarea.disabled=l=="nocursor",this.textarea.readOnly=!!l},Ar.prototype.setUneditable=function(){},Ar.prototype.needsContentAttribute=!1;function r5(l,d){if(d=d?Pt(d):{},d.value=l.value,!d.tabindex&&l.tabIndex&&(d.tabindex=l.tabIndex),!d.placeholder&&l.placeholder&&(d.placeholder=l.placeholder),d.autofocus==null){var p=xe();d.autofocus=p==l||l.getAttribute("autofocus")!=null&&p==document.body}function h(){l.value=A.getValue()}var m;if(l.form&&(ye(l.form,"submit",h),!d.leaveSubmitMethodAlone)){var w=l.form;m=w.submit;try{var x=w.submit=function(){h(),w.submit=m,w.submit(),w.submit=x}}catch{}}d.finishInit=function(M){M.save=h,M.getTextArea=function(){return l},M.toTextArea=function(){M.toTextArea=isNaN,h(),l.parentNode.removeChild(M.getWrapperElement()),l.style.display="",l.form&&(lt(l.form,"submit",h),!d.leaveSubmitMethodAlone&&typeof l.form.submit=="function"&&(l.form.submit=m))}},l.style.display="none";var A=nr(function(M){return l.parentNode.insertBefore(M,l.nextSibling)},d);return A}function i5(l){l.off=lt,l.on=ye,l.wheelEventPixels=dH,l.Doc=no,l.splitLines=Pn,l.countColumn=be,l.findColumn=qe,l.isWordChar=ee,l.Pass=Ae,l.signal=at,l.Line=Sr,l.changeEnd=gl,l.scrollbarModel=lP,l.Pos=Be,l.cmpPos=Nt,l.modes=$r,l.mimeModes=Nn,l.resolveMode=Ci,l.getMode=cn,l.modeExtensions=Pr,l.extendMode=Dt,l.copyState=Ir,l.startState=Wr,l.innerMode=Xn,l.commands=vh,l.keyMap=ka,l.keyName=KP,l.isModifierKey=qP,l.lookupKey=Gu,l.normalizeKeyMap=kH,l.StringStream=gn,l.SharedTextMarker=ph,l.TextMarker=vl,l.LineWidget=hh,l.e_preventDefault=Jt,l.e_stopPropagation=Rn,l.e_stop=W,l.addClass=Ee,l.contains=V,l.rmClass=$,l.keyNames=yl}QH(nr),XH(nr);var o5="iter insert remove copy getEditor constructor".split(" ");for(var vm in no.prototype)no.prototype.hasOwnProperty(vm)&&$e(o5,vm)<0&&(nr.prototype[vm]=function(l){return function(){return l.apply(this.doc,arguments)}}(no.prototype[vm]));return en(no),nr.inputStyles={textarea:Ar,contenteditable:jn},nr.defineMode=function(l){!nr.defaults.mode&&l!="null"&&(nr.defaults.mode=l),Wn.apply(this,arguments)},nr.defineMIME=Vn,nr.defineMode("null",function(){return{token:function(l){return l.skipToEnd()}}}),nr.defineMIME("text/plain","null"),nr.defineExtension=function(l,d){nr.prototype[l]=d},nr.defineDocExtension=function(l,d){no.prototype[l]=d},nr.fromTextArea=r5,i5(nr),nr.version="5.63.0",nr})},656:(r,t,e)=>{(function(n){n(e(237))})(function(n){"use strict";n.defineMode("css",function(I,T){var O=T.inline;T.propertyKeywords||(T=n.resolveMode("text/css"));var Z=I.indentUnit,ce=T.tokenHooks,V=T.documentTypes||{},xe=T.mediaTypes||{},Ee=T.mediaFeatures||{},ze=T.mediaValueKeywords||{},pt=T.propertyKeywords||{},ft=T.nonStandardPropertyKeywords||{},Pt=T.fontProperties||{},be=T.counterDescriptors||{},Te=T.colorKeywords||{},$e=T.valueKeywords||{},de=T.allowNested,Ae=T.lineComment,Re=T.supportsAtComponent===!0,Je=I.highlightNonStandardPropertyKeywords!==!1,Qe,qe;function ut(X,ve){return Qe=ve,X}function Xt(X,ve){var fe=X.next();if(ce[fe]){var yt=ce[fe](X,ve);if(yt!==!1)return yt}if(fe=="@")return X.eatWhile(/[\w\\\-]/),ut("def",X.current());if(fe=="="||(fe=="~"||fe=="|")&&X.eat("="))return ut(null,"compare");if(fe=='"'||fe=="'")return ve.tokenize=It(fe),ve.tokenize(X,ve);if(fe=="#")return X.eatWhile(/[\w\\\-]/),ut("atom","hash");if(fe=="!")return X.match(/^\s*\w*/),ut("keyword","important");if(/\d/.test(fe)||fe=="."&&X.eat(/\d/))return X.eatWhile(/[\w.%]/),ut("number","unit");if(fe==="-"){if(/[\d.]/.test(X.peek()))return X.eatWhile(/[\w.%]/),ut("number","unit");if(X.match(/^-[\w\\\-]*/))return X.eatWhile(/[\w\\\-]/),X.match(/^\s*:/,!1)?ut("variable-2","variable-definition"):ut("variable-2","variable");if(X.match(/^\w+-/))return ut("meta","meta")}else return/[,+>*\/]/.test(fe)?ut(null,"select-op"):fe=="."&&X.match(/^-?[_a-z][_a-z0-9-]*/i)?ut("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(fe)?ut(null,fe):X.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(X.current())&&(ve.tokenize=Ln),ut("variable callee","variable")):/[\w\\\-]/.test(fe)?(X.eatWhile(/[\w\\\-]/),ut("property","word")):ut(null,null)}function It(X){return function(ve,fe){for(var yt=!1,St;(St=ve.next())!=null;){if(St==X&&!yt){X==")"&&ve.backUp(1);break}yt=!yt&&St=="\\"}return(St==X||!yt&&X!=")")&&(fe.tokenize=null),ut("string","string")}}function Ln(X,ve){return X.next(),X.match(/^\s*[\"\')]/,!1)?ve.tokenize=null:ve.tokenize=It(")"),ut(null,"(")}function xn(X,ve,fe){this.type=X,this.indent=ve,this.prev=fe}function Lt(X,ve,fe,yt){return X.context=new xn(fe,ve.indentation()+(yt===!1?0:Z),X.context),fe}function R(X){return X.context.prev&&(X.context=X.context.prev),X.context.type}function K(X,ve,fe){return Se[fe.context.type](X,ve,fe)}function ee(X,ve,fe,yt){for(var St=yt||1;St>0;St--)fe.context=fe.context.prev;return K(X,ve,fe)}function he(X){var ve=X.current().toLowerCase();$e.hasOwnProperty(ve)?qe="atom":Te.hasOwnProperty(ve)?qe="keyword":qe="variable"}var Se={};return Se.top=function(X,ve,fe){if(X=="{")return Lt(fe,ve,"block");if(X=="}"&&fe.context.prev)return R(fe);if(Re&&/@component/i.test(X))return Lt(fe,ve,"atComponentBlock");if(/^@(-moz-)?document$/i.test(X))return Lt(fe,ve,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(X))return Lt(fe,ve,"atBlock");if(/^@(font-face|counter-style)/i.test(X))return fe.stateArg=X,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(X))return"keyframes";if(X&&X.charAt(0)=="@")return Lt(fe,ve,"at");if(X=="hash")qe="builtin";else if(X=="word")qe="tag";else{if(X=="variable-definition")return"maybeprop";if(X=="interpolation")return Lt(fe,ve,"interpolation");if(X==":")return"pseudo";if(de&&X=="(")return Lt(fe,ve,"parens")}return fe.context.type},Se.block=function(X,ve,fe){if(X=="word"){var yt=ve.current().toLowerCase();return pt.hasOwnProperty(yt)?(qe="property","maybeprop"):ft.hasOwnProperty(yt)?(qe=Je?"string-2":"property","maybeprop"):de?(qe=ve.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(qe+=" error","maybeprop")}else return X=="meta"?"block":!de&&(X=="hash"||X=="qualifier")?(qe="error","block"):Se.top(X,ve,fe)},Se.maybeprop=function(X,ve,fe){return X==":"?Lt(fe,ve,"prop"):K(X,ve,fe)},Se.prop=function(X,ve,fe){if(X==";")return R(fe);if(X=="{"&&de)return Lt(fe,ve,"propBlock");if(X=="}"||X=="{")return ee(X,ve,fe);if(X=="(")return Lt(fe,ve,"parens");if(X=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(ve.current()))qe+=" error";else if(X=="word")he(ve);else if(X=="interpolation")return Lt(fe,ve,"interpolation");return"prop"},Se.propBlock=function(X,ve,fe){return X=="}"?R(fe):X=="word"?(qe="property","maybeprop"):fe.context.type},Se.parens=function(X,ve,fe){return X=="{"||X=="}"?ee(X,ve,fe):X==")"?R(fe):X=="("?Lt(fe,ve,"parens"):X=="interpolation"?Lt(fe,ve,"interpolation"):(X=="word"&&he(ve),"parens")},Se.pseudo=function(X,ve,fe){return X=="meta"?"pseudo":X=="word"?(qe="variable-3",fe.context.type):K(X,ve,fe)},Se.documentTypes=function(X,ve,fe){return X=="word"&&V.hasOwnProperty(ve.current())?(qe="tag",fe.context.type):Se.atBlock(X,ve,fe)},Se.atBlock=function(X,ve,fe){if(X=="(")return Lt(fe,ve,"atBlock_parens");if(X=="}"||X==";")return ee(X,ve,fe);if(X=="{")return R(fe)&&Lt(fe,ve,de?"block":"top");if(X=="interpolation")return Lt(fe,ve,"interpolation");if(X=="word"){var yt=ve.current().toLowerCase();yt=="only"||yt=="not"||yt=="and"||yt=="or"?qe="keyword":xe.hasOwnProperty(yt)?qe="attribute":Ee.hasOwnProperty(yt)?qe="property":ze.hasOwnProperty(yt)?qe="keyword":pt.hasOwnProperty(yt)?qe="property":ft.hasOwnProperty(yt)?qe=Je?"string-2":"property":$e.hasOwnProperty(yt)?qe="atom":Te.hasOwnProperty(yt)?qe="keyword":qe="error"}return fe.context.type},Se.atComponentBlock=function(X,ve,fe){return X=="}"?ee(X,ve,fe):X=="{"?R(fe)&&Lt(fe,ve,de?"block":"top",!1):(X=="word"&&(qe="error"),fe.context.type)},Se.atBlock_parens=function(X,ve,fe){return X==")"?R(fe):X=="{"||X=="}"?ee(X,ve,fe,2):Se.atBlock(X,ve,fe)},Se.restricted_atBlock_before=function(X,ve,fe){return X=="{"?Lt(fe,ve,"restricted_atBlock"):X=="word"&&fe.stateArg=="@counter-style"?(qe="variable","restricted_atBlock_before"):K(X,ve,fe)},Se.restricted_atBlock=function(X,ve,fe){return X=="}"?(fe.stateArg=null,R(fe)):X=="word"?(fe.stateArg=="@font-face"&&!Pt.hasOwnProperty(ve.current().toLowerCase())||fe.stateArg=="@counter-style"&&!be.hasOwnProperty(ve.current().toLowerCase())?qe="error":qe="property","maybeprop"):"restricted_atBlock"},Se.keyframes=function(X,ve,fe){return X=="word"?(qe="variable","keyframes"):X=="{"?Lt(fe,ve,"top"):K(X,ve,fe)},Se.at=function(X,ve,fe){return X==";"?R(fe):X=="{"||X=="}"?ee(X,ve,fe):(X=="word"?qe="tag":X=="hash"&&(qe="builtin"),"at")},Se.interpolation=function(X,ve,fe){return X=="}"?R(fe):X=="{"||X==";"?ee(X,ve,fe):(X=="word"?qe="variable":X!="variable"&&X!="("&&X!=")"&&(qe="error"),"interpolation")},{startState:function(X){return{tokenize:null,state:O?"block":"top",stateArg:null,context:new xn(O?"block":"top",X||0,null)}},token:function(X,ve){if(!ve.tokenize&&X.eatSpace())return null;var fe=(ve.tokenize||Xt)(X,ve);return fe&&typeof fe=="object"&&(Qe=fe[1],fe=fe[0]),qe=fe,Qe!="comment"&&(ve.state=Se[ve.state](Qe,X,ve)),qe},indent:function(X,ve){var fe=X.context,yt=ve&&ve.charAt(0),St=fe.indent;return fe.type=="prop"&&(yt=="}"||yt==")")&&(fe=fe.prev),fe.prev&&(yt=="}"&&(fe.type=="block"||fe.type=="top"||fe.type=="interpolation"||fe.type=="restricted_atBlock")?(fe=fe.prev,St=fe.indent):(yt==")"&&(fe.type=="parens"||fe.type=="atBlock_parens")||yt=="{"&&(fe.type=="at"||fe.type=="atBlock"))&&(St=Math.max(0,fe.indent-Z))),St},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Ae,fold:"brace"}});function i(I){for(var T={},O=0;O<I.length;++O)T[I[O].toLowerCase()]=!0;return T}var o=["domain","regexp","url","url-prefix"],s=i(o),a=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],c=i(a),u=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],f=i(u),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],v=i(g),_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],b=i(_),C=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],S=i(C),j=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],q=i(j),N=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],G=i(N),se=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],ue=i(se),Y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],L=i(Y),k=o.concat(a).concat(u).concat(g).concat(_).concat(C).concat(se).concat(Y);n.registerHelper("hintWords","css",k);function $(I,T){for(var O=!1,Z;(Z=I.next())!=null;){if(O&&Z=="/"){T.tokenize=null;break}O=Z=="*"}return["comment","comment"]}n.defineMIME("text/css",{documentTypes:s,mediaTypes:c,mediaFeatures:f,mediaValueKeywords:v,propertyKeywords:b,nonStandardPropertyKeywords:S,fontProperties:q,counterDescriptors:G,colorKeywords:ue,valueKeywords:L,tokenHooks:{"/":function(I,T){return I.eat("*")?(T.tokenize=$,$(I,T)):!1}},name:"css"}),n.defineMIME("text/x-scss",{mediaTypes:c,mediaFeatures:f,mediaValueKeywords:v,propertyKeywords:b,nonStandardPropertyKeywords:S,colorKeywords:ue,valueKeywords:L,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(I,T){return I.eat("/")?(I.skipToEnd(),["comment","comment"]):I.eat("*")?(T.tokenize=$,$(I,T)):["operator","operator"]},":":function(I){return I.match(/^\s*\{/,!1)?[null,null]:!1},$:function(I){return I.match(/^[\w-]+/),I.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(I){return I.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),n.defineMIME("text/x-less",{mediaTypes:c,mediaFeatures:f,mediaValueKeywords:v,propertyKeywords:b,nonStandardPropertyKeywords:S,colorKeywords:ue,valueKeywords:L,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(I,T){return I.eat("/")?(I.skipToEnd(),["comment","comment"]):I.eat("*")?(T.tokenize=$,$(I,T)):["operator","operator"]},"@":function(I){return I.eat("{")?[null,"interpolation"]:I.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(I.eatWhile(/[\w\\\-]/),I.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),n.defineMIME("text/x-gss",{documentTypes:s,mediaTypes:c,mediaFeatures:f,propertyKeywords:b,nonStandardPropertyKeywords:S,fontProperties:q,counterDescriptors:G,colorKeywords:ue,valueKeywords:L,supportsAtComponent:!0,tokenHooks:{"/":function(I,T){return I.eat("*")?(T.tokenize=$,$(I,T)):!1}},name:"css",helperType:"gss"})})},520:(r,t,e)=>{(function(n){n(e(237),e(576),e(792),e(656))})(function(n){"use strict";var i={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function o(v,_,b){var C=v.current(),S=C.search(_);return S>-1?v.backUp(C.length-S):C.match(/<\/?$/)&&(v.backUp(C.length),v.match(_,!1)||v.match(C)),b}var s={};function a(v){var _=s[v];return _||(s[v]=new RegExp("\\s+"+v+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function c(v,_){var b=v.match(a(_));return b?/^\s*(.*?)\s*$/.exec(b[2])[1]:""}function u(v,_){return new RegExp((_?"^":"")+"</s*"+v+"s*>","i")}function f(v,_){for(var b in v)for(var C=_[b]||(_[b]=[]),S=v[b],j=S.length-1;j>=0;j--)C.unshift(S[j])}function g(v,_){for(var b=0;b<v.length;b++){var C=v[b];if(!C[0]||C[1].test(c(_,C[0])))return C[2]}}n.defineMode("htmlmixed",function(v,_){var b=n.getMode(v,{name:"xml",htmlMode:!0,multilineTagIndentFactor:_.multilineTagIndentFactor,multilineTagIndentPastTag:_.multilineTagIndentPastTag,allowMissingTagName:_.allowMissingTagName}),C={},S=_&&_.tags,j=_&&_.scriptTypes;if(f(i,C),S&&f(S,C),j)for(var q=j.length-1;q>=0;q--)C.script.unshift(["type",j[q].matches,j[q].mode]);function N(G,se){var ue=b.token(G,se.htmlState),Y=/\btag\b/.test(ue),L;if(Y&&!/[<>\s\/]/.test(G.current())&&(L=se.htmlState.tagName&&se.htmlState.tagName.toLowerCase())&&C.hasOwnProperty(L))se.inTag=L+" ";else if(se.inTag&&Y&&/>$/.test(G.current())){var k=/^([\S]+) (.*)/.exec(se.inTag);se.inTag=null;var $=G.current()==">"&&g(C[k[1]],k[2]),I=n.getMode(v,$),T=u(k[1],!0),O=u(k[1],!1);se.token=function(Z,ce){return Z.match(T,!1)?(ce.token=N,ce.localState=ce.localMode=null,null):o(Z,O,ce.localMode.token(Z,ce.localState))},se.localMode=I,se.localState=n.startState(I,b.indent(se.htmlState,"",""))}else se.inTag&&(se.inTag+=G.current(),G.eol()&&(se.inTag+=" "));return ue}return{startState:function(){var G=n.startState(b);return{token:N,inTag:null,localMode:null,localState:null,htmlState:G}},copyState:function(G){var se;return G.localState&&(se=n.copyState(G.localMode,G.localState)),{token:G.token,inTag:G.inTag,localMode:G.localMode,localState:se,htmlState:n.copyState(b,G.htmlState)}},token:function(G,se){return se.token(G,se)},indent:function(G,se,ue){return!G.localMode||/^\s*<\//.test(se)?b.indent(G.htmlState,se,ue):G.localMode.indent?G.localMode.indent(G.localState,se,ue):n.Pass},innerMode:function(G){return{state:G.localState||G.htmlState,mode:G.localMode||b}}}},"xml","javascript","css"),n.defineMIME("text/html","htmlmixed")})},792:(r,t,e)=>{(function(n){n(e(237))})(function(n){"use strict";n.defineMode("javascript",function(i,o){var s=i.indentUnit,a=o.statementIndent,c=o.jsonld,u=o.json||c,f=o.trackScope!==!1,g=o.typescript,v=o.wordCharacters||/[\w$\xa1-\uffff]/,_=function(){function H(Sn){return{type:Sn,style:"keyword"}}var re=H("keyword a"),De=H("keyword b"),He=H("keyword c"),Ge=H("keyword d"),Gt=H("operator"),tn={type:"atom",style:"atom"};return{if:H("if"),while:re,with:re,else:De,do:De,try:De,finally:De,return:Ge,break:Ge,continue:Ge,new:H("new"),delete:He,void:He,throw:He,debugger:H("debugger"),var:H("var"),const:H("var"),let:H("var"),function:H("function"),catch:H("catch"),for:H("for"),switch:H("switch"),case:H("case"),default:H("default"),in:Gt,typeof:Gt,instanceof:Gt,true:tn,false:tn,null:tn,undefined:tn,NaN:tn,Infinity:tn,this:H("this"),class:H("class"),super:H("atom"),yield:He,export:H("export"),import:H("import"),extends:He,await:He}}(),b=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function S(H){for(var re=!1,De,He=!1;(De=H.next())!=null;){if(!re){if(De=="/"&&!He)return;De=="["?He=!0:He&&De=="]"&&(He=!1)}re=!re&&De=="\\"}}var j,q;function N(H,re,De){return j=H,q=De,re}function G(H,re){var De=H.next();if(De=='"'||De=="'")return re.tokenize=se(De),re.tokenize(H,re);if(De=="."&&H.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return N("number","number");if(De=="."&&H.match(".."))return N("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(De))return N(De);if(De=="="&&H.eat(">"))return N("=>","operator");if(De=="0"&&H.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return N("number","number");if(/\d/.test(De))return H.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),N("number","number");if(De=="/")return H.eat("*")?(re.tokenize=ue,ue(H,re)):H.eat("/")?(H.skipToEnd(),N("comment","comment")):yi(H,re,1)?(S(H),H.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),N("regexp","string-2")):(H.eat("="),N("operator","operator",H.current()));if(De=="`")return re.tokenize=Y,Y(H,re);if(De=="#"&&H.peek()=="!")return H.skipToEnd(),N("meta","meta");if(De=="#"&&H.eatWhile(v))return N("variable","property");if(De=="<"&&H.match("!--")||De=="-"&&H.match("->")&&!/\S/.test(H.string.slice(0,H.start)))return H.skipToEnd(),N("comment","comment");if(b.test(De))return(De!=">"||!re.lexical||re.lexical.type!=">")&&(H.eat("=")?(De=="!"||De=="=")&&H.eat("="):/[<>*+\-|&?]/.test(De)&&(H.eat(De),De==">"&&H.eat(De))),De=="?"&&H.eat(".")?N("."):N("operator","operator",H.current());if(v.test(De)){H.eatWhile(v);var He=H.current();if(re.lastType!="."){if(_.propertyIsEnumerable(He)){var Ge=_[He];return N(Ge.type,Ge.style,He)}if(He=="async"&&H.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return N("async","keyword",He)}return N("variable","variable",He)}}function se(H){return function(re,De){var He=!1,Ge;if(c&&re.peek()=="@"&&re.match(C))return De.tokenize=G,N("jsonld-keyword","meta");for(;(Ge=re.next())!=null&&!(Ge==H&&!He);)He=!He&&Ge=="\\";return He||(De.tokenize=G),N("string","string")}}function ue(H,re){for(var De=!1,He;He=H.next();){if(He=="/"&&De){re.tokenize=G;break}De=He=="*"}return N("comment","comment")}function Y(H,re){for(var De=!1,He;(He=H.next())!=null;){if(!De&&(He=="`"||He=="$"&&H.eat("{"))){re.tokenize=G;break}De=!De&&He=="\\"}return N("quasi","string-2",H.current())}var L="([{}])";function k(H,re){re.fatArrowAt&&(re.fatArrowAt=null);var De=H.string.indexOf("=>",H.start);if(!(De<0)){if(g){var He=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(H.string.slice(H.start,De));He&&(De=He.index)}for(var Ge=0,Gt=!1,tn=De-1;tn>=0;--tn){var Sn=H.string.charAt(tn),An=L.indexOf(Sn);if(An>=0&&An<3){if(!Ge){++tn;break}if(--Ge==0){Sn=="("&&(Gt=!0);break}}else if(An>=3&&An<6)++Ge;else if(v.test(Sn))Gt=!0;else if(/["'\/`]/.test(Sn))for(;;--tn){if(tn==0)return;var ys=H.string.charAt(tn-1);if(ys==Sn&&H.string.charAt(tn-2)!="\\"){tn--;break}}else if(Gt&&!Ge){++tn;break}}Gt&&!Ge&&(re.fatArrowAt=tn)}}var $={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function I(H,re,De,He,Ge,Gt){this.indented=H,this.column=re,this.type=De,this.prev=Ge,this.info=Gt,He!=null&&(this.align=He)}function T(H,re){if(!f)return!1;for(var De=H.localVars;De;De=De.next)if(De.name==re)return!0;for(var He=H.context;He;He=He.prev)for(var De=He.vars;De;De=De.next)if(De.name==re)return!0}function O(H,re,De,He,Ge){var Gt=H.cc;for(Z.state=H,Z.stream=Ge,Z.marked=null,Z.cc=Gt,Z.style=re,H.lexical.hasOwnProperty("align")||(H.lexical.align=!0);;){var tn=Gt.length?Gt.pop():u?ut:Qe;if(tn(De,He)){for(;Gt.length&&Gt[Gt.length-1].lex;)Gt.pop()();return Z.marked?Z.marked:De=="variable"&&T(H,He)?"variable-2":re}}}var Z={state:null,column:null,marked:null,cc:null};function ce(){for(var H=arguments.length-1;H>=0;H--)Z.cc.push(arguments[H])}function V(){return ce.apply(null,arguments),!0}function xe(H,re){for(var De=re;De;De=De.next)if(De.name==H)return!0;return!1}function Ee(H){var re=Z.state;if(Z.marked="def",!!f){if(re.context){if(re.lexical.info=="var"&&re.context&&re.context.block){var De=ze(H,re.context);if(De!=null){re.context=De;return}}else if(!xe(H,re.localVars)){re.localVars=new Pt(H,re.localVars);return}}o.globalVars&&!xe(H,re.globalVars)&&(re.globalVars=new Pt(H,re.globalVars))}}function ze(H,re){if(re)if(re.block){var De=ze(H,re.prev);return De?De==re.prev?re:new ft(De,re.vars,!0):null}else return xe(H,re.vars)?re:new ft(re.prev,new Pt(H,re.vars),!1);else return null}function pt(H){return H=="public"||H=="private"||H=="protected"||H=="abstract"||H=="readonly"}function ft(H,re,De){this.prev=H,this.vars=re,this.block=De}function Pt(H,re){this.name=H,this.next=re}var be=new Pt("this",new Pt("arguments",null));function Te(){Z.state.context=new ft(Z.state.context,Z.state.localVars,!1),Z.state.localVars=be}function $e(){Z.state.context=new ft(Z.state.context,Z.state.localVars,!0),Z.state.localVars=null}function de(){Z.state.localVars=Z.state.context.vars,Z.state.context=Z.state.context.prev}de.lex=!0;function Ae(H,re){var De=function(){var He=Z.state,Ge=He.indented;if(He.lexical.type=="stat")Ge=He.lexical.indented;else for(var Gt=He.lexical;Gt&&Gt.type==")"&&Gt.align;Gt=Gt.prev)Ge=Gt.indented;He.lexical=new I(Ge,Z.stream.column(),H,null,He.lexical,re)};return De.lex=!0,De}function Re(){var H=Z.state;H.lexical.prev&&(H.lexical.type==")"&&(H.indented=H.lexical.indented),H.lexical=H.lexical.prev)}Re.lex=!0;function Je(H){function re(De){return De==H?V():H==";"||De=="}"||De==")"||De=="]"?ce():V(re)}return re}function Qe(H,re){return H=="var"?V(Ae("vardef",re),xt,Je(";"),Re):H=="keyword a"?V(Ae("form"),It,Qe,Re):H=="keyword b"?V(Ae("form"),Qe,Re):H=="keyword d"?Z.stream.match(/^\s*$/,!1)?V():V(Ae("stat"),xn,Je(";"),Re):H=="debugger"?V(Je(";")):H=="{"?V(Ae("}"),$e,ye,Re,de):H==";"?V():H=="if"?(Z.state.lexical.info=="else"&&Z.state.cc[Z.state.cc.length-1]==Re&&Z.state.cc.pop()(),V(Ae("form"),It,Qe,Re,Cr)):H=="function"?V(Wn):H=="for"?V(Ae("form"),$e,$n,Qe,de,Re):H=="class"||g&&re=="interface"?(Z.marked="keyword",V(Ae("form",H=="class"?H:re),Dt,Re)):H=="variable"?g&&re=="declare"?(Z.marked="keyword",V(Qe)):g&&(re=="module"||re=="enum"||re=="type")&&Z.stream.match(/^\s*\w/,!1)?(Z.marked="keyword",re=="enum"?V(Dr):re=="type"?V(Ci,Je("operator"),Tt,Je(";")):V(Ae("form"),Ht,Je("{"),Ae("}"),ye,Re,Re)):g&&re=="namespace"?(Z.marked="keyword",V(Ae("form"),ut,Qe,Re)):g&&re=="abstract"?(Z.marked="keyword",V(Qe)):V(Ae("stat"),yt):H=="switch"?V(Ae("form"),It,Je("{"),Ae("}","switch"),$e,ye,Re,Re,de):H=="case"?V(ut,Je(":")):H=="default"?V(Je(":")):H=="catch"?V(Ae("form"),Te,qe,Qe,Re,de):H=="export"?V(Ae("stat"),gn,Re):H=="import"?V(Ae("stat"),pr,Re):H=="async"?V(Qe):re=="@"?V(ut,Qe):ce(Ae("stat"),ut,Je(";"),Re)}function qe(H){if(H=="(")return V(cn,Je(")"))}function ut(H,re){return Ln(H,re,!1)}function Xt(H,re){return Ln(H,re,!0)}function It(H){return H!="("?ce():V(Ae(")"),xn,Je(")"),Re)}function Ln(H,re,De){if(Z.state.fatArrowAt==Z.stream.start){var He=De?Se:he;if(H=="(")return V(Te,Ae(")"),U(cn,")"),Re,Je("=>"),He,de);if(H=="variable")return ce(Te,Ht,Je("=>"),He,de)}var Ge=De?R:Lt;return $.hasOwnProperty(H)?V(Ge):H=="function"?V(Wn,Ge):H=="class"||g&&re=="interface"?(Z.marked="keyword",V(Ae("form"),Pr,Re)):H=="keyword c"||H=="async"?V(De?Xt:ut):H=="("?V(Ae(")"),xn,Je(")"),Re,Ge):H=="operator"||H=="spread"?V(De?Xt:ut):H=="["?V(Ae("]"),si,Re,Ge):H=="{"?Ne(Ct,"}",null,Ge):H=="quasi"?ce(K,Ge):H=="new"?V(X(De)):V()}function xn(H){return H.match(/[;\}\)\],]/)?ce():ce(ut)}function Lt(H,re){return H==","?V(xn):R(H,re,!1)}function R(H,re,De){var He=De==!1?Lt:R,Ge=De==!1?ut:Xt;if(H=="=>")return V(Te,De?Se:he,de);if(H=="operator")return/\+\+|--/.test(re)||g&&re=="!"?V(He):g&&re=="<"&&Z.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?V(Ae(">"),U(Tt,">"),Re,He):re=="?"?V(ut,Je(":"),Ge):V(Ge);if(H=="quasi")return ce(K,He);if(H!=";"){if(H=="(")return Ne(Xt,")","call",He);if(H==".")return V(St,He);if(H=="[")return V(Ae("]"),xn,Je("]"),Re,He);if(g&&re=="as")return Z.marked="keyword",V(Tt,He);if(H=="regexp")return Z.state.lastType=Z.marked="operator",Z.stream.backUp(Z.stream.pos-Z.stream.start-1),V(Ge)}}function K(H,re){return H!="quasi"?ce():re.slice(re.length-2)!="${"?V(K):V(xn,ee)}function ee(H){if(H=="}")return Z.marked="string-2",Z.state.tokenize=Y,V(K)}function he(H){return k(Z.stream,Z.state),ce(H=="{"?Qe:ut)}function Se(H){return k(Z.stream,Z.state),ce(H=="{"?Qe:Xt)}function X(H){return function(re){return re=="."?V(H?fe:ve):re=="variable"&&g?V(ge,H?R:Lt):ce(H?Xt:ut)}}function ve(H,re){if(re=="target")return Z.marked="keyword",V(Lt)}function fe(H,re){if(re=="target")return Z.marked="keyword",V(R)}function yt(H){return H==":"?V(Re,Qe):ce(Lt,Je(";"),Re)}function St(H){if(H=="variable")return Z.marked="property",V()}function Ct(H,re){if(H=="async")return Z.marked="property",V(Ct);if(H=="variable"||Z.style=="keyword"){if(Z.marked="property",re=="get"||re=="set")return V(Q);var De;return g&&Z.state.fatArrowAt==Z.stream.start&&(De=Z.stream.match(/^\s*:\s*/,!1))&&(Z.state.fatArrowAt=Z.stream.pos+De[0].length),V(le)}else{if(H=="number"||H=="string")return Z.marked=c?"property":Z.style+" property",V(le);if(H=="jsonld-keyword")return V(le);if(g&&pt(re))return Z.marked="keyword",V(Ct);if(H=="[")return V(ut,Ue,Je("]"),le);if(H=="spread")return V(Xt,le);if(re=="*")return Z.marked="keyword",V(Ct);if(H==":")return ce(le)}}function Q(H){return H!="variable"?ce(le):(Z.marked="property",V(Wn))}function le(H){if(H==":")return V(Xt);if(H=="(")return ce(Wn)}function U(H,re,De){function He(Ge,Gt){if(De?De.indexOf(Ge)>-1:Ge==","){var tn=Z.state.lexical;return tn.info=="call"&&(tn.pos=(tn.pos||0)+1),V(function(Sn,An){return Sn==re||An==re?ce():ce(H)},He)}return Ge==re||Gt==re?V():De&&De.indexOf(";")>-1?ce(H):V(Je(re))}return function(Ge,Gt){return Ge==re||Gt==re?V():ce(H,He)}}function Ne(H,re,De){for(var He=3;He<arguments.length;He++)Z.cc.push(arguments[He]);return V(Ae(re,De),U(H,re),Re)}function ye(H){return H=="}"?V():ce(Qe,ye)}function Ue(H,re){if(g){if(H==":")return V(Tt);if(re=="?")return V(Ue)}}function lt(H,re){if(g&&(H==":"||re=="in"))return V(Tt)}function at(H){if(g&&H==":")return Z.stream.match(/^\s*\w+\s+is\b/,!1)?V(ut,tt,Tt):V(Tt)}function tt(H,re){if(re=="is")return Z.marked="keyword",V()}function Tt(H,re){if(re=="keyof"||re=="typeof"||re=="infer"||re=="readonly")return Z.marked="keyword",V(re=="typeof"?Xt:Tt);if(H=="variable"||re=="void")return Z.marked="type",V(oe);if(re=="|"||re=="&")return V(Tt);if(H=="string"||H=="number"||H=="atom")return V(oe);if(H=="[")return V(Ae("]"),U(Tt,"]",","),Re,oe);if(H=="{")return V(Ae("}"),en,Re,oe);if(H=="(")return V(U(W,")"),qt,oe);if(H=="<")return V(U(Tt,">"),Tt);if(H=="quasi")return ce(Rn,oe)}function qt(H){if(H=="=>")return V(Tt)}function en(H){return H.match(/[\}\)\]]/)?V():H==","||H==";"?V(en):ce(Jt,en)}function Jt(H,re){if(H=="variable"||Z.style=="keyword")return Z.marked="property",V(Jt);if(re=="?"||H=="number"||H=="string")return V(Jt);if(H==":")return V(Tt);if(H=="[")return V(Je("variable"),lt,Je("]"),Jt);if(H=="(")return ce(Vn,Jt);if(!H.match(/[;\}\)\],]/))return V()}function Rn(H,re){return H!="quasi"?ce():re.slice(re.length-2)!="${"?V(Rn):V(Tt,ar)}function ar(H){if(H=="}")return Z.marked="string-2",Z.state.tokenize=Y,V(Rn)}function W(H,re){return H=="variable"&&Z.stream.match(/^\s*[?:]/,!1)||re=="?"?V(W):H==":"?V(Tt):H=="spread"?V(W):ce(Tt)}function oe(H,re){if(re=="<")return V(Ae(">"),U(Tt,">"),Re,oe);if(re=="|"||H=="."||re=="&")return V(Tt);if(H=="[")return V(Tt,Je("]"),oe);if(re=="extends"||re=="implements")return Z.marked="keyword",V(Tt);if(re=="?")return V(Tt,Je(":"),Tt)}function ge(H,re){if(re=="<")return V(Ae(">"),U(Tt,">"),Re,oe)}function je(){return ce(Tt,nt)}function nt(H,re){if(re=="=")return V(Tt)}function xt(H,re){return re=="enum"?(Z.marked="keyword",V(Dr)):ce(Ht,Ue,In,zr)}function Ht(H,re){if(g&&pt(re))return Z.marked="keyword",V(Ht);if(H=="variable")return Ee(re),V();if(H=="spread")return V(Ht);if(H=="[")return Ne(Pn,"]");if(H=="{")return Ne(fn,"}")}function fn(H,re){return H=="variable"&&!Z.stream.match(/^\s*:/,!1)?(Ee(re),V(In)):(H=="variable"&&(Z.marked="property"),H=="spread"?V(Ht):H=="}"?ce():H=="["?V(ut,Je("]"),Je(":"),fn):V(Je(":"),Ht,In))}function Pn(){return ce(Ht,In)}function In(H,re){if(re=="=")return V(Xt)}function zr(H){if(H==",")return V(xt)}function Cr(H,re){if(H=="keyword b"&&re=="else")return V(Ae("form","else"),Qe,Re)}function $n(H,re){if(re=="await")return V($n);if(H=="(")return V(Ae(")"),$r,Re)}function $r(H){return H=="var"?V(xt,Nn):H=="variable"?V(Nn):ce(Nn)}function Nn(H,re){return H==")"?V():H==";"?V(Nn):re=="in"||re=="of"?(Z.marked="keyword",V(ut,Nn)):ce(ut,Nn)}function Wn(H,re){if(re=="*")return Z.marked="keyword",V(Wn);if(H=="variable")return Ee(re),V(Wn);if(H=="(")return V(Te,Ae(")"),U(cn,")"),Re,at,Qe,de);if(g&&re=="<")return V(Ae(">"),U(je,">"),Re,Wn)}function Vn(H,re){if(re=="*")return Z.marked="keyword",V(Vn);if(H=="variable")return Ee(re),V(Vn);if(H=="(")return V(Te,Ae(")"),U(cn,")"),Re,at,de);if(g&&re=="<")return V(Ae(">"),U(je,">"),Re,Vn)}function Ci(H,re){if(H=="keyword"||H=="variable")return Z.marked="type",V(Ci);if(re=="<")return V(Ae(">"),U(je,">"),Re)}function cn(H,re){return re=="@"&&V(ut,cn),H=="spread"?V(cn):g&&pt(re)?(Z.marked="keyword",V(cn)):g&&H=="this"?V(Ue,In):ce(Ht,Ue,In)}function Pr(H,re){return H=="variable"?Dt(H,re):Ir(H,re)}function Dt(H,re){if(H=="variable")return Ee(re),V(Ir)}function Ir(H,re){if(re=="<")return V(Ae(">"),U(je,">"),Re,Ir);if(re=="extends"||re=="implements"||g&&H==",")return re=="implements"&&(Z.marked="keyword"),V(g?Tt:ut,Ir);if(H=="{")return V(Ae("}"),Xn,Re)}function Xn(H,re){if(H=="async"||H=="variable"&&(re=="static"||re=="get"||re=="set"||g&&pt(re))&&Z.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Z.marked="keyword",V(Xn);if(H=="variable"||Z.style=="keyword")return Z.marked="property",V(Wr,Xn);if(H=="number"||H=="string")return V(Wr,Xn);if(H=="[")return V(ut,Ue,Je("]"),Wr,Xn);if(re=="*")return Z.marked="keyword",V(Xn);if(g&&H=="(")return ce(Vn,Xn);if(H==";"||H==",")return V(Xn);if(H=="}")return V();if(re=="@")return V(ut,Xn)}function Wr(H,re){if(re=="!"||re=="?")return V(Wr);if(H==":")return V(Tt,In);if(re=="=")return V(Xt);var De=Z.state.lexical.prev,He=De&&De.info=="interface";return ce(He?Vn:Wn)}function gn(H,re){return re=="*"?(Z.marked="keyword",V(En,Je(";"))):re=="default"?(Z.marked="keyword",V(ut,Je(";"))):H=="{"?V(U(ht,"}"),En,Je(";")):ce(Qe)}function ht(H,re){if(re=="as")return Z.marked="keyword",V(Je("variable"));if(H=="variable")return ce(Xt,ht)}function pr(H){return H=="string"?V():H=="("?ce(ut):H=="."?ce(Lt):ce(oi,Qn,En)}function oi(H,re){return H=="{"?Ne(oi,"}"):(H=="variable"&&Ee(re),re=="*"&&(Z.marked="keyword"),V(zt))}function Qn(H){if(H==",")return V(oi,Qn)}function zt(H,re){if(re=="as")return Z.marked="keyword",V(oi)}function En(H,re){if(re=="from")return Z.marked="keyword",V(ut)}function si(H){return H=="]"?V():ce(U(Xt,"]"))}function Dr(){return ce(Ae("form"),Ht,Je("{"),Ae("}"),U(Be,"}"),Re,Re)}function Be(){return ce(Ht,In)}function Nt(H,re){return H.lastType=="operator"||H.lastType==","||b.test(re.charAt(0))||/[,.]/.test(re.charAt(0))}function yi(H,re,De){return re.tokenize==G&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(re.lastType)||re.lastType=="quasi"&&/\{\s*$/.test(H.string.slice(0,H.pos-(De||0)))}return{startState:function(H){var re={tokenize:G,lastType:"sof",cc:[],lexical:new I((H||0)-s,0,"block",!1),localVars:o.localVars,context:o.localVars&&new ft(null,null,!1),indented:H||0};return o.globalVars&&typeof o.globalVars=="object"&&(re.globalVars=o.globalVars),re},token:function(H,re){if(H.sol()&&(re.lexical.hasOwnProperty("align")||(re.lexical.align=!1),re.indented=H.indentation(),k(H,re)),re.tokenize!=ue&&H.eatSpace())return null;var De=re.tokenize(H,re);return j=="comment"?De:(re.lastType=j=="operator"&&(q=="++"||q=="--")?"incdec":j,O(re,De,j,q,H))},indent:function(H,re){if(H.tokenize==ue||H.tokenize==Y)return n.Pass;if(H.tokenize!=G)return 0;var De=re&&re.charAt(0),He=H.lexical,Ge;if(!/^\s*else\b/.test(re))for(var Gt=H.cc.length-1;Gt>=0;--Gt){var tn=H.cc[Gt];if(tn==Re)He=He.prev;else if(tn!=Cr&&tn!=de)break}for(;(He.type=="stat"||He.type=="form")&&(De=="}"||(Ge=H.cc[H.cc.length-1])&&(Ge==Lt||Ge==R)&&!/^[,\.=+\-*:?[\(]/.test(re));)He=He.prev;a&&He.type==")"&&He.prev.type=="stat"&&(He=He.prev);var Sn=He.type,An=De==Sn;return Sn=="vardef"?He.indented+(H.lastType=="operator"||H.lastType==","?He.info.length+1:0):Sn=="form"&&De=="{"?He.indented:Sn=="form"?He.indented+s:Sn=="stat"?He.indented+(Nt(H,re)?a||s:0):He.info=="switch"&&!An&&o.doubleIndentSwitch!=!1?He.indented+(/^(?:case|default)\b/.test(re)?s:2*s):He.align?He.column+(An?0:1):He.indented+(An?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:c,jsonMode:u,expressionAllowed:yi,skipExpression:function(H){O(H,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},576:(r,t,e)=>{(function(n){n(e(237))})(function(n){"use strict";var i={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},o={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};n.defineMode("xml",function(s,a){var c=s.indentUnit,u={},f=a.htmlMode?i:o;for(var g in f)u[g]=f[g];for(var g in a)u[g]=a[g];var v,_;function b(V,xe){function Ee(ft){return xe.tokenize=ft,ft(V,xe)}var ze=V.next();if(ze=="<")return V.eat("!")?V.eat("[")?V.match("CDATA[")?Ee(j("atom","]]>")):null:V.match("--")?Ee(j("comment","-->")):V.match("DOCTYPE",!0,!0)?(V.eatWhile(/[\w\._\-]/),Ee(q(1))):null:V.eat("?")?(V.eatWhile(/[\w\._\-]/),xe.tokenize=j("meta","?>"),"meta"):(v=V.eat("/")?"closeTag":"openTag",xe.tokenize=C,"tag bracket");if(ze=="&"){var pt;return V.eat("#")?V.eat("x")?pt=V.eatWhile(/[a-fA-F\d]/)&&V.eat(";"):pt=V.eatWhile(/[\d]/)&&V.eat(";"):pt=V.eatWhile(/[\w\.\-:]/)&&V.eat(";"),pt?"atom":"error"}else return V.eatWhile(/[^&<]/),null}b.isInText=!0;function C(V,xe){var Ee=V.next();if(Ee==">"||Ee=="/"&&V.eat(">"))return xe.tokenize=b,v=Ee==">"?"endTag":"selfcloseTag","tag bracket";if(Ee=="=")return v="equals",null;if(Ee=="<"){xe.tokenize=b,xe.state=Y,xe.tagName=xe.tagStart=null;var ze=xe.tokenize(V,xe);return ze?ze+" tag error":"tag error"}else return/[\'\"]/.test(Ee)?(xe.tokenize=S(Ee),xe.stringStartCol=V.column(),xe.tokenize(V,xe)):(V.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function S(V){var xe=function(Ee,ze){for(;!Ee.eol();)if(Ee.next()==V){ze.tokenize=C;break}return"string"};return xe.isInAttribute=!0,xe}function j(V,xe){return function(Ee,ze){for(;!Ee.eol();){if(Ee.match(xe)){ze.tokenize=b;break}Ee.next()}return V}}function q(V){return function(xe,Ee){for(var ze;(ze=xe.next())!=null;){if(ze=="<")return Ee.tokenize=q(V+1),Ee.tokenize(xe,Ee);if(ze==">")if(V==1){Ee.tokenize=b;break}else return Ee.tokenize=q(V-1),Ee.tokenize(xe,Ee)}return"meta"}}function N(V){return V&&V.toLowerCase()}function G(V,xe,Ee){this.prev=V.context,this.tagName=xe||"",this.indent=V.indented,this.startOfLine=Ee,(u.doNotIndent.hasOwnProperty(xe)||V.context&&V.context.noIndent)&&(this.noIndent=!0)}function se(V){V.context&&(V.context=V.context.prev)}function ue(V,xe){for(var Ee;;){if(!V.context||(Ee=V.context.tagName,!u.contextGrabbers.hasOwnProperty(N(Ee))||!u.contextGrabbers[N(Ee)].hasOwnProperty(N(xe))))return;se(V)}}function Y(V,xe,Ee){return V=="openTag"?(Ee.tagStart=xe.column(),L):V=="closeTag"?k:Y}function L(V,xe,Ee){return V=="word"?(Ee.tagName=xe.current(),_="tag",T):u.allowMissingTagName&&V=="endTag"?(_="tag bracket",T(V,xe,Ee)):(_="error",L)}function k(V,xe,Ee){if(V=="word"){var ze=xe.current();return Ee.context&&Ee.context.tagName!=ze&&u.implicitlyClosed.hasOwnProperty(N(Ee.context.tagName))&&se(Ee),Ee.context&&Ee.context.tagName==ze||u.matchClosing===!1?(_="tag",$):(_="tag error",I)}else return u.allowMissingTagName&&V=="endTag"?(_="tag bracket",$(V,xe,Ee)):(_="error",I)}function $(V,xe,Ee){return V!="endTag"?(_="error",$):(se(Ee),Y)}function I(V,xe,Ee){return _="error",$(V,xe,Ee)}function T(V,xe,Ee){if(V=="word")return _="attribute",O;if(V=="endTag"||V=="selfcloseTag"){var ze=Ee.tagName,pt=Ee.tagStart;return Ee.tagName=Ee.tagStart=null,V=="selfcloseTag"||u.autoSelfClosers.hasOwnProperty(N(ze))?ue(Ee,ze):(ue(Ee,ze),Ee.context=new G(Ee,ze,pt==Ee.indented)),Y}return _="error",T}function O(V,xe,Ee){return V=="equals"?Z:(u.allowMissing||(_="error"),T(V,xe,Ee))}function Z(V,xe,Ee){return V=="string"?ce:V=="word"&&u.allowUnquoted?(_="string",T):(_="error",T(V,xe,Ee))}function ce(V,xe,Ee){return V=="string"?ce:T(V,xe,Ee)}return{startState:function(V){var xe={tokenize:b,state:Y,indented:V||0,tagName:null,tagStart:null,context:null};return V!=null&&(xe.baseIndent=V),xe},token:function(V,xe){if(!xe.tagName&&V.sol()&&(xe.indented=V.indentation()),V.eatSpace())return null;v=null;var Ee=xe.tokenize(V,xe);return(Ee||v)&&Ee!="comment"&&(_=null,xe.state=xe.state(v||Ee,V,xe),_&&(Ee=_=="error"?Ee+" error":_)),Ee},indent:function(V,xe,Ee){var ze=V.context;if(V.tokenize.isInAttribute)return V.tagStart==V.indented?V.stringStartCol+1:V.indented+c;if(ze&&ze.noIndent)return n.Pass;if(V.tokenize!=C&&V.tokenize!=b)return Ee?Ee.match(/^(\s*)/)[0].length:0;if(V.tagName)return u.multilineTagIndentPastTag!==!1?V.tagStart+V.tagName.length+2:V.tagStart+c*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(xe))return 0;var pt=xe&&/^<(\/)?([\w_:\.-]*)/.exec(xe);if(pt&&pt[1])for(;ze;)if(ze.tagName==pt[2]){ze=ze.prev;break}else if(u.implicitlyClosed.hasOwnProperty(N(ze.tagName)))ze=ze.prev;else break;else if(pt)for(;ze;){var ft=u.contextGrabbers[N(ze.tagName)];if(ft&&ft.hasOwnProperty(N(pt[2])))ze=ze.prev;else break}for(;ze&&ze.prev&&!ze.startOfLine;)ze=ze.prev;return ze?ze.indent+c:V.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(V){V.state==Z&&(V.state=T)},xmlCurrentTag:function(V){return V.tagName?{name:V.tagName,close:V.type=="closeTag"}:null},xmlCurrentContext:function(V){for(var xe=[],Ee=V.context;Ee;Ee=Ee.prev)xe.push(Ee.tagName);return xe.reverse()}}}),n.defineMIME("text/xml","xml"),n.defineMIME("application/xml","xml"),n.mimeModes.hasOwnProperty("text/html")||n.defineMIME("text/html",{name:"xml",htmlMode:!0})})},578:(r,t,e)=>{e.d(t,{A:()=>s});var n=e(268),i=function(){var a=function(c,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(f[v]=g[v])},a(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),o=function(a){i(c,a);function c(u,f,g){var v=a.call(this,f,g)||this;return v._module=u,v}return Object.defineProperty(c.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),c}(n.Kx);let s=o},683:(r,t,e)=>{e.d(t,{A:()=>a,F:()=>o});var n=e(578),i=function(){var c=function(u,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(g[_]=v[_])},c(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(u,f);function g(){this.constructor=u}u.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),o=function(c){return c.Select="select",c.Hover="hover",c.Spacing="spacing",c.Target="target",c.Resize="resize",c}(o||{}),s=function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(u.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"component",{get:function(){var f,g=this.get("component");return g||((f=this.get("componentView"))===null||f===void 0?void 0:f.model)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"componentView",{get:function(){var f,g=this.get("componentView");return g||((f=this.get("component"))===null||f===void 0?void 0:f.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"el",{get:function(){var f;return(f=this.componentView)===null||f===void 0?void 0:f.el},enumerable:!1,configurable:!0}),u.prototype.getBoxRect=function(f){var g=this,v=g.el,_=g.em,b=_.Canvas.getCanvasView(),C=this.get("boxRect");return C||(v&&b?b.getElBoxRect(v,f):{x:0,y:0,width:0,height:0})},u.prototype.getStyle=function(f){f===void 0&&(f={});var g=f.boxRect||this.getBoxRect(f),v=g.width,_=g.height,b=g.x,C=g.y;return{width:"".concat(v,"px"),height:"".concat(_,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(b,"px ").concat(C,"px")}},u.prototype.isType=function(f){return this.type===f},u}(n.A);let a=s},242:(r,t,e)=>{e.d(t,{A:()=>i});var n=function(o){return o.run="command:run",o._run="run",o.runCommand="command:run:",o._runCommand="run:",o.runBeforeCommand="command:run:before:",o.abort="command:abort:",o._abort="abort:",o.stop="command:stop",o._stop="stop",o.stopCommand="command:stop:",o._stopCommand="stop:",o.stopBeforeCommand="command:stop:before:",o}(n||{});let i=n},404:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i){i.Components.clear(),i.Css.clear()}}},228:(r,t,e)=>{e.r(t),e.d(t,{default:()=>s});var n=e(523),i=e(14),o=e(926);let s={run:function(a){(0,n.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=a,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(a){this.toggleMove(),this.disableDragger()},onKeyUp:function(a){(0,o.Ch)(a)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(a){this.toggleDragger(1,a)},disableDragger:function(a){this.toggleDragger(0,a)},toggleDragger:function(a,c){var u=this,f=u.canvasModel,g=u.em,v=this.dragger,_=a?"add":"remove";this.getCanvas().classList[_]("".concat(this.ppfx,"is__grabbing")),v||(v=new i.A({getPosition:function(){return{x:f.get("x"),y:f.get("y")}},setPosition:function(b){var C=b.x,S=b.y;f.set({x:C,y:S})},onStart:function(b,C){g.trigger("canvas:move:start",C)},onDrag:function(b,C){g.trigger("canvas:move",C)},onEnd:function(b,C){g.trigger("canvas:move:end",C)}}),this.dragger=v),a?v.start(c):v.stop()},toggleMove:function(a){var c=this.ppfx,u=a?"add":"remove",f=a?"on":"off",g={on:o.on,off:o.AU},v=this.getCanvas(),_=["".concat(c,"is__grab")];!a&&_.push("".concat(c,"is__grabbing")),_.forEach(function(b){return v.classList[u](b)}),g[f](document,"keyup",this.onKeyUp),g[f](v,"mousedown",this.enableDragger),g[f](document,"mouseup",this.disableDragger)}}},570:(r,t,e)=>{e.r(t),e.d(t,{default:()=>c,defineCommand:()=>s});var n=e(268),i=e(242),o=function(){var u=function(f,g){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(v[b]=_[b])},u(f,g)};return function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");u(f,g);function v(){this.constructor=f}f.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}}();function s(u){return u}var a=function(u){o(f,u);function f(g){var v=u.call(this,0)||this;v.config=g||{},v.em=v.config.em||{};var _=v.config.stylePrefix;return v.pfx=_,v.ppfx=v.config.pStylePrefix,v.hoverClass="".concat(_,"hover"),v.badgeClass="".concat(_,"badge"),v.plhClass="".concat(_,"placeholder"),v.freezClass="".concat(v.ppfx,"freezed"),v.canvas=v.em.Canvas,v.init(v.config),v}return f.prototype.onFrameScroll=function(g){},f.prototype.getCanvas=function(){return this.canvas.getElement()},f.prototype.getCanvasBody=function(){return this.canvas.getBody()},f.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},f.prototype.offset=function(g){var v=g.getBoundingClientRect();return{top:v.top+g.ownerDocument.body.scrollTop,left:v.left+g.ownerDocument.body.scrollLeft}},f.prototype.init=function(g){},f.prototype.callRun=function(g,v){v===void 0&&(v={});var _=this.id;if(g.trigger("".concat(i.A.runBeforeCommand).concat(_),{options:v}),g.trigger("".concat(i.A._runCommand).concat(_,":before"),v),v.abort){g.trigger("".concat(i.A.abort).concat(_),{options:v}),g.trigger("".concat(i.A._abort).concat(_),v);return}var b=v.sender||g,C=this.run(g,b,v),S={id:_,result:C,options:v};return g.trigger("".concat(i.A.runCommand).concat(_),S),g.trigger(i.A.run,S),g.trigger("".concat(i.A._runCommand).concat(_),C,v),g.trigger(i.A._run,_,C,v),C},f.prototype.callStop=function(g,v){v===void 0&&(v={});var _=this.id,b=v.sender||g;g.trigger("".concat(i.A.stopBeforeCommand).concat(_),{options:v}),g.trigger("".concat(i.A._stopCommand).concat(_,":before"),v);var C=this.stop(g,b,v),S={id:_,result:C,options:v};return g.trigger("".concat(i.A.stopCommand).concat(_),S),g.trigger(i.A.stop,S),g.trigger("".concat(i.A._stopCommand).concat(_),C,v),g.trigger(i.A._stop,_,C,v),C},f.prototype.stopCommand=function(g){this.em.Commands.stop(this.id,g)},f.prototype.run=function(g,v,_){},f.prototype.stop=function(g,v,_){},f}(n.Kx);let c=a},377:(r,t,e)=>{e.r(t),e.d(t,{default:()=>s});var n=e(523),i=function(a,c,u){if(u||arguments.length===2)for(var f=0,g=c.length,v;f<g;f++)(v||!(f in c))&&(v||(v=Array.prototype.slice.call(c,0,f)),v[f]=c[f]);return a.concat(v||Array.prototype.slice.call(c))},o={run:function(a,c,u){var f=this;u===void 0&&(u={});var g=[],v=u.component||a.getSelectedAll();return v=(0,n.isArray)(v)?i([],v,!0):[v],v.filter(Boolean).forEach(function(_){var b,C;if(!_.get("removable"))return f.em.logWarning("The element is not removable",{component:_});g.push(_);var S=((C=(b=_.delegate)===null||b===void 0?void 0:b.remove)===null||C===void 0?void 0:C.call(b,_))||_;S.remove()}),a.selectRemove(g),g}};let s=o},728:(r,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e(523),i=e(14),o=function(){return o=Object.assign||function(c){for(var u,f=1,g=arguments.length;f<g;f++){u=arguments[f];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(c[v]=u[v])}return c},o.apply(this,arguments)},s="dmode";let a={run:function(c,u,f){var g=this;f===void 0&&(f={}),(0,n.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var v=f.target,_=f.event,b=f.mode,C=f.dragger,S=C===void 0?{}:C,j=v.getEl(),q=o({doc:j.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return g.guidesStatic},guidesTarget:function(){return g.guidesTarget}},S);this.setupGuides(),this.opts=f,this.editor=c,this.em=c.getModel(),this.target=v,this.isTran=b=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var N=this.dragger;return N?N.setOptions(q):(N=new i.A(q),this.dragger=N),_&&N.start(_),this.toggleDrag(1),this.em.trigger("".concat(s,":start"),this.getEventOpts()),N},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(c){var u=c.guide;u&&u.parentNode.removeChild(u)}),this.guides=[]},getGuidesContainer:function(){var c=this,u=this.guidesEl;if(!u){var f=this,g=f.editor,v=f.em,_=f.opts,b=g.getConfig().stylePrefix,C=document.createElement("div"),S=document.createElement("div"),j='<div class="'.concat(b,"guide-info__line ").concat(b,`danger-bg">
        <div class="`).concat(b,"guide-info__content ").concat(b,`danger-color"></div>
      </div>`);u=document.createElement("div"),u.className="".concat(b,"guides"),C.className="".concat(b,"guide-info ").concat(b,"guide-info__x"),S.className="".concat(b,"guide-info ").concat(b,"guide-info__y"),C.innerHTML=j,S.innerHTML=j,u.appendChild(C),u.appendChild(S),g.Canvas.getGlobalToolsEl().appendChild(u),this.guidesEl=u,this.elGuideInfoX=C,this.elGuideInfoY=S,this.elGuideInfoContentX=C.querySelector(".".concat(b,"guide-info__content")),this.elGuideInfoContentY=S.querySelector(".".concat(b,"guide-info__content")),v.on("canvas:update frame:scroll",(0,n.debounce)(function(){var q;c.updateGuides(),_.debug&&((q=c.guides)===null||q===void 0||q.forEach(function(N){return c.renderGuide(N)}))},200))}return u},getGuidesStatic:function(){var c=this,u=[],f=this.target.getEl(),g=f.parentNode,v=g===void 0?{}:g;return(0,n.each)(v.children,function(_){return u=u.concat(f!==_?c.getElementGuides(_):[])}),u.concat(this.getElementGuides(v))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(c){var u=this,f,g;(c||this.guides).forEach(function(v){var _=v.origin,b=f===_?g:u.getElementPos(_);f=_,g=b,(0,n.each)(u.getGuidePosUpdate(v,b),function(C,S){return v[S]=C}),v.originRect=b})},getGuidePosUpdate:function(c,u){var f={},g=u.top,v=u.height,_=u.left,b=u.width;switch(c.type){case"t":f.y=g;break;case"b":f.y=g+v;break;case"l":f.x=_;break;case"r":f.x=_+b;break;case"x":f.x=_+b/2;break;case"y":f.y=g+v/2;break}return f},renderGuide:function(c){c===void 0&&(c={});var u=c.guide||document.createElement("div"),f="px",g=c.active?2:1,v=u.children[0];return u.style="position: absolute; background-color: ".concat(c.active?"green":"red",";"),u.children.length||(v=document.createElement("div"),v.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",u.appendChild(v)),c.y?(u.style.width="100%",u.style.height="".concat(g).concat(f),u.style.top="".concat(c.y).concat(f),u.style.left=0):(u.style.width="".concat(g).concat(f),u.style.height="100%",u.style.left="".concat(c.x).concat(f),u.style.top="0".concat(f)),!c.guide&&this.guidesContainer.appendChild(u),u},getElementPos:function(c){return this.editor.Canvas.getElementPos(c,{noScroll:1})},getElementGuides:function(c){var u=this,f=this.opts,g=this.getElementPos(c),v=g.top,_=g.height,b=g.left,C=g.width,S=[{type:"t",y:v},{type:"b",y:v+_},{type:"l",x:b},{type:"r",x:b+C},{type:"x",x:b+C/2},{type:"y",y:v+_/2}].map(function(j){return o(o({},j),{origin:c,originRect:g,guide:f.debug&&u.renderGuide(j)})});return S.forEach(function(j){var q;return(q=u.guides)===null||q===void 0?void 0:q.push(j)}),S},getTranslate:function(c,u){u===void 0&&(u="x");var f=0;return(c||"").split(" ").forEach(function(g){var v=g.trim(),_="translate".concat(u.toUpperCase(),"(");v.indexOf(_)===0&&(f=parseFloat(v.replace(_,"")))}),f},setTranslate:function(c,u,f){var g="translate".concat(u.toUpperCase(),"("),v="".concat(g).concat(f,")"),_=(c||"").split(" ").map(function(b){var C=b.trim();return C.indexOf(g)===0&&(b=v),b}).join(" ");return _.indexOf(g)<0&&(_+=" ".concat(v)),_},getPosition:function(){var c=this,u=c.target,f=c.isTran,g=u.getStyle(),v=g.left,_=g.top,b=g.transform,C=0,S=0;return f?(C=this.getTranslate(b),S=this.getTranslate(b,"y")):(C=parseFloat(v||0),S=parseFloat(_||0)),{x:C,y:S}},setPosition:function(c){var u=c.x,f=c.y,g=c.end,v=c.position,_=c.width,b=c.height,C=this,S=C.target,j=C.isTran,q=C.em,N="px",G=!g,se="".concat(parseInt(u,10)).concat(N),ue="".concat(parseInt(f,10)).concat(N),Y={};if(j){var L=S.getStyle().transform||"";L=this.setTranslate(L,"x",se),L=this.setTranslate(L,"y",ue),Y={transform:L,__p:G},S.addStyle(Y,{avoidStore:!g})}else{var k={position:v,width:_,height:b},$={left:se,top:ue,__p:G};(0,n.keys)(k).forEach(function(I){var T=k[I];T&&($[I]=T)}),Y=$,S.addStyle(Y,{avoidStore:!g})}q?.Styles.__emitCmpStyleUpdate(Y,{components:q.getSelected()})},_getDragData:function(){var c=this.target;return{target:c,parent:c.parent(),index:c.index()}},onStart:function(c){var u=this,f=u.target,g=u.editor,v=u.isTran,_=u.opts,b=_.center,C=_.onStart,S=g.Canvas,j=f.getStyle(),q="absolute",N=[q,"relative"];if(C&&C(this._getDragData()),!v&&j.position!==q){var G=S.offset(f.getEl()),se=G.left,ue=G.top,Y=G.width,L=G.height,k=f.parent(),$=void 0;do{var I=k.getStyle();$=N.indexOf(I.position)>=0?k:null,k=k.parent()}while(k&&!$);if(b){var T=S.getMouseRelativeCanvas(c),O=T.x,Z=T.y;se=O,ue=Z}else if($){var ce=S.offset($.getEl());se=se-ce.left,ue=ue-ce.top}this.setPosition({x:se,y:ue,width:"".concat(Y,"px"),height:"".concat(L,"px"),position:q})}},onDrag:function(){for(var c=this,u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var g=this,v=g.guidesTarget,_=g.opts,b=_.onDrag;this.updateGuides(v),_.debug&&v.forEach(function(C){return c.renderGuide(C)}),_.guidesInfo&&this.renderGuideInfo(v.filter(function(C){return C.active})),b&&b(this._getDragData())},onEnd:function(c,u,f){f===void 0&&(f={});var g=this,v=g.editor,_=g.opts,b=g.id,C=_.onEnd;C&&C(c,f,o(o({event:c},f),this._getDragData())),v.stopCommand(b),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var c=this;["X","Y"].forEach(function(u){var f=c["elGuideInfo".concat(u)];f&&(f.style.display="none")})},renderGuideInfo:function(c){var u=this;c===void 0&&(c=[]);var f=this.guidesStatic;this.hideGuidesInfo(),c.forEach(function(g){var v=g.origin,_=g.x,b=u.getElementPos(v),C=(0,n.isUndefined)(_)?"y":"x",S=C==="y",j=b[S?"left":"top"],q=b.rect[S?"left":"top"],N=S?j+b.width:j+b.height,G=S?q+b.rect.width:q+b.rect.height,se=u["elGuideInfo".concat(C.toUpperCase())],ue=u["elGuideInfoContent".concat(C.toUpperCase())],Y=se.style,L=f?.filter(function($e){return $e.type===g.type}).map(function($e){var de=$e.originRect,Ae=de.left,Re=de.width,Je=de.top,Qe=de.height,qe=S?Ae:Je,ut=S?Ae+Re:Je+Qe;return{gap:ut<j?j-ut:qe-N,guide:$e}}).filter(function($e){return $e.gap>0}).sort(function($e,de){return $e.gap-de.gap}).map(function($e){return $e.guide})[0];if(L){var k=L.originRect,$=k.left,I=k.width,T=k.top,O=k.height,Z=k.rect,ce=S?$<b.left:T<b.top,V=S?$:T,xe=S?Z.left:Z.top,Ee=S?$+I:T+O,ze=S?Z.left+Z.width:Z.top+Z.height,pt=S?g.y:g.x,ft=ce?Ee:N,Pt="".concat(pt,"px"),be=ce?j-Ee:V-N,Te=ce?q-ze:xe-G;Y.display="",Y[S?"top":"left"]=Pt,Y[S?"left":"top"]="".concat(ft,"px"),Y[S?"width":"height"]="".concat(be,"px"),ue.innerHTML="".concat(Math.round(Te),"px"),u.em.trigger("".concat(s,":active"),o(o({},u.getEventOpts()),{guide:g,guidesStatic:f,matched:L,posFirst:pt,posSecond:ft,size:be,sizeRaw:Te,elGuideInfo:se,elGuideInfoCnt:ue}))}})},toggleDrag:function(c){var u=this,f=u.ppfx,g=u.editor,v=c?"add":"remove",_=["".concat(f,"is__grabbing")],b=g.Canvas,C=b.getBody();_.forEach(function(S){return C.classList[v](S)}),b[c?"startAutoscroll":"stopAutoscroll"]()}}},462:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i){if(i.Canvas.hasFocus()){var o=[];i.getSelectedAll().forEach(function(s){var a=s.components(),c=a&&a.filter(function(u){return u.get("selectable")})[0];c&&o.push(c)}),o.length&&i.select(o)}}}},658:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i,o,s){if(s===void 0&&(s={}),!(!i.Canvas.hasFocus()&&!s.force)){var a=[];i.getSelectedAll().forEach(function(c){for(var u=c.parent();u&&!u.get("selectable");)u=u.parent();u&&a.push(u)}),a.length&&i.select(a)}}}},619:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i){if(i.Canvas.hasFocus()){var o=[];i.getSelectedAll().forEach(function(s){var a=s.parent();if(a){var c=a.components().length,u=0,f=0,g;do u++,f=s.index()+u,g=f<=c?a.getChildAt(f):null;while(g&&!g.get("selectable"));o.push(g||s)}}),o.length&&i.select(o)}}}},935:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i){if(i.Canvas.hasFocus()){var o=[];i.getSelectedAll().forEach(function(s){var a=s.parent();if(a){var c=0,u=0,f;do c++,u=s.index()-c,f=u>=0?a.getChildAt(u):null;while(f&&!f.get("selectable"));o.push(f||s)}}),o.length&&i.select(o)}}}},536:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(523);let i={run:function(o,s,a){a===void 0&&(a={});var c=a.target,u=[];if(!c.get("styles"))return u;var f=c.get("type"),g=o.Pages.getAllWrappers(),v=(0,n.flatten)(g.map(function(b){return b.findType(f)})).length;if(!v){var _=o.CssComposer.getAll();u=_.filter(function(b){return b.get("group")==="cmp:".concat(f)}),_.remove(u)}return u}}},957:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=function(o,s,a){if(a||arguments.length===2)for(var c=0,u=s.length,f;c<u;c++)(f||!(c in s))&&(f||(f=Array.prototype.slice.call(s,0,c)),f[c]=s[c]);return o.concat(f||Array.prototype.slice.call(s))};let i={run:function(o){var s=o.getModel(),a=n([],o.getSelectedAll(),!0).map(function(c){var u,f;return((f=(u=c.delegate)===null||u===void 0?void 0:u.copy)===null||f===void 0?void 0:f.call(u,c))||c}).filter(Boolean);a.length&&s.set("clipboard",a)}}},413:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(926);let i={run:function(o,s,a){var c=this;a===void 0&&(a={}),s&&s.set&&s.set("active",0);var u=o.getConfig(),f=o.Modal,g=u.stylePrefix;if(this.cm=o.CodeManager||null,!this.editors){var v=this.buildEditor("htmlmixed","hopscotch","HTML"),_=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=v.model,this.cssEditor=_.model;var b=(0,n.a_)("div",{class:"".concat(g,"export-dl")});b.appendChild(v.el),b.appendChild(_.el),this.editors=b}f.open({title:u.textViewCode,content:this.editors}).getModel().once("change:open",function(){return o.stopCommand("".concat(c.id))}),this.htmlEditor.setContent(o.getHtml(a.optsHtml)),this.cssEditor.setContent(o.getCss(a.optsCss))},stop:function(o){var s=o.Modal;s&&s.close()},buildEditor:function(o,s,a){var c=this.em.CodeManager,u=c.createViewer({label:a,codeName:o,theme:s}),f=new c.EditorView({model:u,config:c.getConfig()}).render().el;return{model:u,el:f}}}},516:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(523);let i={isEnabled:function(){var o=document;return!!(o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement)},enable:function(o){var s="";return o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?(s="webkit",o.webkitRequestFullscreen()):o.mozRequestFullScreen?(s="moz",o.mozRequestFullScreen()):o.msRequestFullscreen&&o.msRequestFullscreen(),s},disable:function(){var o=document;this.isEnabled()&&(o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen?o.webkitExitFullscreen():o.mozCancelFullScreen?o.mozCancelFullScreen():o.msExitFullscreen&&o.msExitFullscreen())},fsChanged:function(o){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(o||"","fullscreenchange"),this.fsChanged))},run:function(o,s,a){a===void 0&&(a={}),this.sender=s;var c=a.target,u=(0,n.isElement)(c)?c:document.querySelector(c),f=this.enable(u||o.getContainer());this.fsChanged=this.fsChanged.bind(this,f),document.addEventListener(f+"fullscreenchange",this.fsChanged)},stop:function(o,s){s&&s.set&&s.set("active",!1),this.disable()}}},13:(r,t,e)=>{e.r(t),e.d(t,{default:()=>c});var n=e(523),i=e(694),o=e(926),s=e(194),a=e(582);let c=(0,n.extend)({},a.default,s.default,{init:function(u){s.default.init.apply(this,arguments),(0,n.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=u,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];s.default.enable.apply(this,u),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","move"),g.on("mousedown",this.initSorter),g.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(u){var f=(0,i.default)(u.target).data("model"),g=f.get("draggable");g&&(this.cacheEl=null,this.startSelectPosition(u.target,this.frameEl.contentDocument),this.sorter.draggable=g,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,o.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(u){var f=u.get("draggable");if(f){this.cacheEl=null;var g=u.view.el;this.startSelectPosition(g,this.frameEl.contentDocument),this.sorter.draggable=f,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(u){this.cacheEl=null;var f=u[u.length-1],g=this.em.getCurrentFrame(),v=f.getEl(g?.model),_=v.ownerDocument;this.startSelectPosition(v,_,{onStart:this.onStart}),this.sorter.draggable=f.get("draggable"),this.sorter.toMove=u,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,o.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,o.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(u,f){},rollback:function(u,f){var g=u.which||u.keyCode;(g==27||f)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,i.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,i.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];s.default.stop.apply(this,u),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var g=this.$wrapper;g.css("cursor","").unbind().removeClass(this.noSelClass)}})},204:(r,t,e)=>{e.r(t),e.d(t,{default:()=>o});var n=e(523),i=e(926);let o={open:function(s){var a=this,c=this,u=c.editor,f=c.title,g=c.config,v=c.am,_=g.custom;if((0,n.isFunction)(_.open))return _.open(v.__customData());var b=u.Modal;b.open({title:f,content:s}).onceClose(function(){return u.stopCommand(a.id)})},close:function(){var s=this.config.custom;if((0,n.isFunction)(s.close))return s.close(this.am.__customData());var a=this.editor.Modal;a&&a.close()},run:function(s,a,c){c===void 0&&(c={});var u=s.AssetManager,f=u.getConfig(),g=c.types,v=g===void 0?[]:g,_=c.accept,b=c.select;if(this.title=c.modalTitle||s.t("assetManager.modalTitle")||"",this.editor=s,this.config=f,this.am=u,u.setTarget(c.target),u.onClick(c.onClick),u.onDblClick(c.onDblClick),u.onSelect(c.onSelect),u.__behaviour({select:b,types:v,options:c}),f.custom)this.rendered=this.rendered||(0,i.a_)("div"),this.rendered.className="".concat(f.stylePrefix,"custom-wrp"),u.__behaviour({container:this.rendered}),u.__trgCustom();else{if(!this.rendered||v){var C=u.getAll().filter(function(j){return j});v&&v.length&&(C=C.filter(function(j){return v.indexOf(j.get("type"))!==-1})),u.render(C),this.rendered=u.getContainer()}if(_){var S=this.rendered.querySelector("input#".concat(f.stylePrefix,"uploadFile"));S&&S.setAttribute("accept",_)}}return this.open(this.rendered),this},stop:function(s){this.editor=s,this.close(this.rendered)}}},195:(r,t,e)=>{e.r(t),e.d(t,{default:()=>o});var n=e(523),i=e(926);let o={open:function(){var s=this,a=s.container,c=s.editor,u=s.bm,f=s.config,g=f.custom,v=f.appendTo;if((0,n.isFunction)(g.open))return g.open(u.__customData());if(this.firstRender&&!v){var _="views-container",b=c.Panels,C=b.getPanel(_)||b.addPanel({id:_});C.set("appendContent",a).trigger("change:appendContent"),g||a.appendChild(u.render())}a&&(a.style.display="block")},close:function(){var s=this,a=s.container,c=s.config,u=c.custom;if((0,n.isFunction)(u.close))return u.close(this.bm.__customData());a&&(a.style.display="none")},run:function(s){var a=s.Blocks;this.config=a.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,i.a_)("div"),this.editor=s,this.bm=a;var c=this.container;a.__behaviour({container:c}),this.config.custom&&a.__trgCustom(),this.open()},stop:function(){this.close()}}},671:(r,t,e)=>{e.r(t),e.d(t,{default:()=>n});let n={run:function(i){var o=i.LayerManager,s=i.Panels,a=o.getConfig();if(!a.appendTo){if(!this.layers){var c="views-container",u=document.createElement("div"),f=s.getPanel(c)||s.addPanel({id:c});a.custom?o.__trgCustom({container:u}):u.appendChild(o.render()),f.set("appendContent",u).trigger("change:appendContent"),this.layers=u}this.layers.style.display="block"}},stop:function(){var i=this.layers;i&&(i.style.display="none")}}},49:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(694);let i={run:function(o,s){if(this.sender=s,!this.$cnt){var a=o.getConfig(),c=o.Panels,u=o.DeviceManager,f=o.SelectorManager,g=o.StyleManager,v="change:appendContent",_=(0,n.default)("<div></div>"),b=(0,n.default)("<div></div>"),C=(0,n.default)("<div></div>"),S=(0,n.default)("<div></div>");if(this.$cnt=_,this.$cntInner=b,b.append(C),b.append(S),_.append(b),u&&a.showDevices){var j=c.addPanel({id:"devices-c"}),q=u.render();j.set("appendContent",q).trigger(v)}var N=f.getConfig();N.custom?f.__trgCustom({container:C.get(0)}):N.appendTo||C.append(f.render([])),this.sm=g;var G=g.getConfig(),se=G.stylePrefix;this.$header=(0,n.default)('<div class="'.concat(se,'header">').concat(o.t("styleManager.empty"),"</div>")),_.append(this.$header),G.custom?g.__trgCustom({container:S.get(0)}):G.appendTo||S.append(g.render());var ue="views-container",Y=c.getPanel(ue)||c.addPanel({id:ue});Y.set("appendContent",_).trigger(v);var L=o.getModel();this.listenTo(L,g.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var o=this,s=o.sender,a=o.sm,c=o.$cntInner,u=o.$header;s&&s.get&&!s.get("active")||!a||(a.getSelected()?(c?.show(),u?.hide()):(c?.hide(),u?.show()))},stop:function(){var o,s;(o=this.$cntInner)===null||o===void 0||o.hide(),(s=this.$header)===null||s===void 0||s.hide()}}},590:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(694);let i={run:function(o,s){this.sender=s;var a=o.getModel(),c=o.Config,u=c.stylePrefix,f=o.TraitManager,g=f.getConfig(),v;if(!g.appendTo){if(!this.$cn){this.$cn=(0,n.default)("<div></div>"),this.$cn2=(0,n.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,n.default)("<div>").append('<div class="'.concat(g.stylePrefix,'header">').concat(a.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),g.custom?f.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(u,'traits-label">').concat(a.t("traitManager.label"),"</div>")),this.$cn2.append(f.render()));var _=o.Panels;_.getPanel("views-container")?v=_.getPanel("views-container"):v=_.addPanel({id:"views-container"}),v?.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=o.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var o=this.sender;o&&o.get&&!o.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},483:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(523);let i={run:function(s,a,c){c===void 0&&(c={});var u=s.getModel(),f=u.get("clipboard"),g=s.getSelected();f?.length&&g&&(s.getSelectedAll().forEach(function(v){var _,b,C,S=((b=(_=v.delegate)===null||_===void 0?void 0:_.copy)===null||b===void 0?void 0:b.call(_,v))||v,j=S.collection,q;if(j){var N=S.index()+1,G={at:N,action:c.action||"paste-component"};(0,n.contains)(f,S)&&S.get("copyable")?q=j.add(S.clone(),G):q=o(s,f,S.parent(),G)}else{var se=(C=u.Pages.getSelected())===null||C===void 0?void 0:C.getMainComponent(),G={at:se?.components().length||0,action:c.action||"paste-component"};q=o(s,f,se,G)}q=(0,n.isArray)(q)?q:[q],q.forEach(function(ue){return s.trigger("component:paste",ue)})}),g.emitUpdate())}};function o(s,a,c,u){var f=a.filter(function(v){return v.get("copyable")}),g=f.filter(function(v){return s.Components.canMove(c,v).result});return c.components().add(g.map(function(v){return v.clone()}),u)}},857:(r,t,e)=>{e.r(t),e.d(t,{default:()=>s});var n=e(523),i=function(a,c,u){if(u||arguments.length===2)for(var f=0,g=c.length,v;f<g;f++)(v||!(f in c))&&(v||(v=Array.prototype.slice.call(c,0,f)),v[f]=c[f]);return a.concat(v||Array.prototype.slice.call(c))},o="core:component-outline";let s={getPanels:function(a){return this.panels||(this.panels=a.Panels.getPanels()),this.panels},preventDrag:function(a){a.abort=1},tglEffects:function(a){var c=this.em,u=a?"on":"off";if(c){var f=c.Canvas,g=f.getBody(),v=f.getToolbarEl();v&&(v.style.display=a?"none":"");var _=g.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,n.each)(_,function(b){return b.style.pointerEvents=a?"all":""}),c[u]("run:tlb-move:before",this.preventDrag)}},run:function(a,c){var u=this;this.sender=c,this.selected=i([],a.getSelectedAll(),!0),a.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=a.Commands.isActive(o)),this.shouldRunSwVisibility&&a.stopCommand(o),a.getModel().stopDefault();var f=this.getPanels(a),g=a.Canvas.getElement(),v=a.getEl(),_=a.Config.stylePrefix;if(!this.helper){var b=document.createElement("span");b.className="".concat(_,"off-prv fa fa-eye-slash"),v.appendChild(b),b.onclick=function(){return u.stopCommand()},this.helper=b}this.helper.style.display="inline-block",f.forEach(function(S){return S.set("visible",!1)});var C=g.style;C.width="100%",C.height="100%",C.top="0",C.left="0",C.padding="0",C.margin="0",a.refresh(),this.tglEffects(1)},stop:function(a){var c=this,u=c.sender,f=u===void 0?{}:u,g=c.selected;f.set&&f.set("active",0);var v=this.getPanels(a);this.shouldRunSwVisibility&&(a.runCommand(o),this.shouldRunSwVisibility=!1),a.getModel().runDefault(),v.forEach(function(b){return b.set("visible",!0)});var _=a.Canvas.getElement();_.setAttribute("style",""),g&&a.select(g),delete this.selected,this.helper&&(this.helper.style.display="none"),a.refresh(),this.tglEffects()}}},869:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=function(){return n=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])}return o},n.apply(this,arguments)};let i={run:function(o,s,a){var c=a||{},u=o.Canvas,f=u.getCanvasView(),g=n({appendTo:u.getResizerEl(),prefix:o.getConfig().stylePrefix,posFetcher:f.getElementPos.bind(f),mousePosFetcher:u.getMouseRelativePos.bind(u)},c.options||{}),v=this.canvasResizer;return(!v||c.forceNew)&&(this.canvasResizer=new o.Utils.Resizer(g),v=this.canvasResizer),v.setOptions(g,!0),v.blur(),v.focus(c.el),v},stop:function(){var o;(o=this.canvasResizer)===null||o===void 0||o.blur()}}},194:(r,t,e)=>{e.r(t),e.d(t,{default:()=>$});var n=e(523),i=e(268),o=function(){var I=function(T,O){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ce){Z.__proto__=ce}||function(Z,ce){for(var V in ce)Object.prototype.hasOwnProperty.call(ce,V)&&(Z[V]=ce[V])},I(T,O)};return function(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");I(T,O);function Z(){this.constructor=T}T.prototype=O===null?Object.create(O):(Z.prototype=O.prototype,new Z)}}(),s=function(I){o(T,I);function T(){return I!==null&&I.apply(this,arguments)||this}return T.prototype.defaults=function(){return{command:"",attributes:{}}},T}(i.Kx);let a=s;var c=function(){var I=function(T,O){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ce){Z.__proto__=ce}||function(Z,ce){for(var V in ce)Object.prototype.hasOwnProperty.call(ce,V)&&(Z[V]=ce[V])},I(T,O)};return function(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");I(T,O);function Z(){this.constructor=T}T.prototype=O===null?Object.create(O):(Z.prototype=O.prototype,new Z)}}(),u=function(I){c(T,I);function T(){return I!==null&&I.apply(this,arguments)||this}return T}(i.pM);let f=u;u.prototype.model=a;var g=e(754),v=function(){var I=function(T,O){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ce){Z.__proto__=ce}||function(Z,ce){for(var V in ce)Object.prototype.hasOwnProperty.call(ce,V)&&(Z[V]=ce[V])},I(T,O)};return function(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");I(T,O);function Z(){this.constructor=T}T.prototype=O===null?Object.create(O):(Z.prototype=O.prototype,new Z)}}(),_=function(){return _=Object.assign||function(I){for(var T,O=1,Z=arguments.length;O<Z;O++){T=arguments[O];for(var ce in T)Object.prototype.hasOwnProperty.call(T,ce)&&(I[ce]=T[ce])}return I},_.apply(this,arguments)},b=function(I){v(T,I);function T(O){var Z=I.call(this,O)||this;return Z.em=O.config.em,Z}return T.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},T.prototype.attributes=function(){return this.model.get("attributes")},T.prototype.handleClick=function(O){O.preventDefault(),O.stopPropagation();var Z=this.em,ce=Z.Canvas.getFrameEl().getBoundingClientRect(),V=ce.left,xe=ce.top,Ee=_(_({},O),{clientX:O.clientX-V,clientY:O.clientY-xe});Z.trigger("toolbar:run:before",{event:Ee}),this.execCommand(Ee)},T.prototype.execCommand=function(O){var Z=this,ce=Z.em,V=Z.model,xe={event:O},Ee=V.get("command"),ze=ce.Editor;(0,n.isFunction)(Ee)&&Ee(ze,null,xe),(0,n.isString)(Ee)&&ze.runCommand(Ee,xe)},T.prototype.render=function(){var O=this,Z=O.em,ce=O.$el,V=O.model,xe=V.get("id"),Ee=V.get("label"),ze=Z.getConfig().stylePrefix;return ce.addClass("".concat(ze,"toolbar-item")),xe&&ce.addClass("".concat(ze,"toolbar-item__").concat(xe)),Ee&&ce.append(Ee),this},T}(i.Ss);let C=b;var S=function(){var I=function(T,O){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ce){Z.__proto__=ce}||function(Z,ce){for(var V in ce)Object.prototype.hasOwnProperty.call(ce,V)&&(Z[V]=ce[V])},I(T,O)};return function(T,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");I(T,O);function Z(){this.constructor=T}T.prototype=O===null?Object.create(O):(Z.prototype=O.prototype,new Z)}}(),j=function(I){S(T,I);function T(O){var Z=I.call(this,O)||this,ce=O.em;return Z.em=ce,Z.config={em:ce},Z.listenTo(Z.collection,"reset",Z.render),Z}return T.prototype.onRender=function(){var O=this.em.config.stylePrefix;this.el.className="".concat(O,"toolbar-items")},T}(g.A);let q=j;j.prototype.itemView=C;var N=e(926),G=e(342),se=e(683),ue=e(249),Y=function(){return Y=Object.assign||function(I){for(var T,O=1,Z=arguments.length;O<Z;O++){T=arguments[O];for(var ce in T)Object.prototype.hasOwnProperty.call(T,ce)&&(I[ce]=T[ce])}return I},Y.apply(this,arguments)},L=function(I,T){var O={};for(var Z in I)Object.prototype.hasOwnProperty.call(I,Z)&&T.indexOf(Z)<0&&(O[Z]=I[Z]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Z=Object.getOwnPropertySymbols(I);ce<Z.length;ce++)T.indexOf(Z[ce])<0&&Object.prototype.propertyIsEnumerable.call(I,Z[ce])&&(O[Z[ce]]=I[Z[ce]]);return O},k;let $={activeResizer:!1,init:function(){this.onSelect=(0,n.debounce)(this.onSelect,0),(0,n.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),k=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(I){var T=this,O=this.em,Z=O.getConfig().listenToEl,ce=O.getContainer().parentNode,V=I?"on":"off",xe={on:N.on,off:N.AU},Ee=ue.I.update;!Z.length&&ce&&Z.push(ce);var ze=function(pt,ft){xe[V](ft,"mouseover",T.onHover),xe[V](ft,"mouseleave",T.onOut),xe[V](ft,"click",T.onClick),xe[V](pt,"scroll",T.onFrameScroll,!0),xe[V](pt,"resize",T.onFrameResize)};xe[V](window,"resize",this.onFrameUpdated),xe[V](Z,"scroll",this.onContainerChange),O[V]("component:toggled ".concat(Ee," undo redo"),this.onSelect,this),O[V]("change:componentHovered",this.onHovered,this),O[V]("component:resize styleable:change component:input",this.updateGlobalPos,this),O[V]("".concat(Ee,":toolbar"),this._upToolbar,this),O[V]("frame:updated",this.onFrameUpdated,this),O[V]("canvas:updateTools",this.onFrameUpdated,this),O[V](O.Canvas.events.refresh,this.updateAttached,this),O.Canvas.getFrames().forEach(function(pt){var ft=pt.view,Pt=ft?.getWindow();Pt&&ze(Pt,ft?.getBody())})},onHover:function(I){I.stopPropagation();var T=this.em,O=I.target,Z=(0,G.getComponentView)(O),ce=Z?.frameView,V=Z?.model;if(!V)for(var xe=O.parentNode;!V&&xe&&!(0,N.ZQ)(xe);)V=(0,G.getComponentModel)(xe),xe=xe.parentNode;this.currentDoc=O.ownerDocument,T.setHovered(V,{useValid:!0}),ce&&T.setCurrentFrame(ce)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(I,T){var O=this,Z,ce={};T?(Z=T.views)===null||Z===void 0||Z.forEach(function(V){var xe=V.el,Ee=O.getElementPos(xe);ce={el:xe,pos:Ee,component:T,view:(0,G.getViewEl)(xe)},xe.ownerDocument===O.currentDoc&&(O.elHovered=ce),O.updateToolsLocal(ce)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(V){var xe=V.view,Ee=xe&&xe.getToolsEl();Ee&&O.toggleToolsEl(0,0,{el:Ee})}))},onSelect:function(){var I=this.em,T=I.getSelected(),O=I.getCurrentFrame(),Z=T&&T.getView(O?.model),ce=Z&&Z.el,V={};if(ce&&(0,N.zN)(ce)){var xe=this.getElementPos(ce);V={el:ce,pos:xe,component:T,view:(0,G.getViewEl)(ce)}}this.elSelected=V,this.updateToolsGlobal(),this.updateLocalPos(V),this.initResize(T)},updateGlobalPos:function(){var I=this.getElSelected();I.el&&(I.pos=this.getElementPos(I.el),this.updateToolsGlobal())},updateLocalPos:function(I){var T=this.getElHovered();T.el&&(T.pos=this.getElementPos(T.el),this.updateToolsLocal(I))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(I,T,O){O===void 0&&(O={});var Z=O.el||this.canvas.getToolsEl(T);return Z&&(Z.style.display=I?"":"none"),Z||{}},showElementOffset:function(I,T,O){O===void 0&&(O={}),k&&this.editor.runCommand("show-offset",{el:I,elPos:T,view:O.view,force:1,top:0,left:0})},hideElementOffset:function(I){this.editor.stopCommand("show-offset",{view:I})},showFixedElementOffset:function(I,T){this.editor.runCommand("show-offset",{el:I,elPos:T,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(I){this.canvas.getHighlighter(I).style.opacity=0},onClick:function(I){I.stopPropagation(),I.preventDefault();var T=this.em;if(T.get("_cmpDrag"))return T.set("_cmpDrag");var O=I.target,Z=(0,G.getComponentModel)(O);if(!Z)for(var ce=O.parentNode;!Z&&ce&&!(0,N.ZQ)(ce);)Z=(0,G.getComponentModel)(ce),ce=ce.parentNode;if(Z){if(T.isEditing()&&(!Z.get("textable")&&Z.isChildOf("text")||T.getEditing()!==Z))return;this.select(Z,I)}},select:function(I,T){T===void 0&&(T={}),I&&(this.editor.select(I,{event:T,useValid:!0}),this.initResize(I))},updateBadge:function(I,T,O){O===void 0&&(O={});var Z=this.canvas,ce=(0,G.getComponentModel)(I),V=this.getBadge(O),xe=V.style;if(!ce||!ce.get("badgable")){xe.display="none";return}if(!O.posOnly){var Ee=this.canvas.getConfig(),ze=ce.getIcon(),pt=Ee.pStylePrefix||"",ft="".concat(pt,"badge"),Pt=Ee.customBadgeLabel,be="".concat(ze?'<div class="'.concat(ft,'__icon">').concat(ze,"</div>"):"",`
        <div class="`).concat(ft,'__name">').concat(ce.getName(),"</div>");V.innerHTML=Pt?Pt(ce):be}var Te="px";xe.display="block";var $e=Z.getTargetToElementFixed(I,V,{pos:T}),de=$e.top,Ae=O.leftOff<0?-O.leftOff:0;xe.top=de+Te,xe.left=Ae+Te},showHighlighter:function(I){this.canvas.getHighlighter(I).style.opacity=""},initResize:function(I){var T=this,O=T.em,Z=T.canvas,ce=O.Editor,V=!(0,n.isElement)(I)&&(0,N.GW)(I)?I:O.getSelected(),xe=V?.get("resizable"),Ee=se.F.Resize,ze=Z.hasCustomSpot(Ee);if(Z.removeSpots({type:Ee}),V&&xe){Z.addSpot({type:Ee,component:V});var pt=(0,n.isElement)(I)?I:V.getEl(),ft=(0,G.isObject)(xe)?xe:{},Pt=ft.onStart,be=Pt===void 0?function(){}:Pt,Te=ft.onMove,$e=Te===void 0?function(){}:Te,de=ft.onEnd,Ae=de===void 0?function(){}:de,Re=ft.updateTarget,Je=Re===void 0?function(){}:Re,Qe=L(ft,["onStart","onMove","onEnd","updateTarget"]);if(ze||!pt||this.activeResizer)return;var qe,ut=O.config,Xt=ut.stylePrefix||"",It="".concat(Xt,"resizing"),Ln=this,xn={component:V,el:pt},Lt=function(K,ee,he){var Se=he.docs;Se&&Se.forEach(function(X){var ve=X.body,fe=ve.className||"";ve.className=(K=="add"?"".concat(fe," ").concat(It):fe.replace(It,"")).trim()})},R=Y({onStart:function(K,ee){be(K,ee);var he=ee.el,Se=ee.config,X=ee.resizer,ve=Se.keyHeight,fe=Se.keyWidth,yt=Se.currentUnit,St=Se.keepAutoHeight,Ct=Se.keepAutoWidth;Lt("add",K,ee),qe=O.Styles.getModelToStyle(V),Z.toggleFramesEvents(!1);var Q=getComputedStyle(he),le=qe.getStyle(),U=le[fe];Se.autoWidth=Ct&&U==="auto",isNaN(parseFloat(U))&&(U=Q[fe]);var Ne=le[ve];Se.autoHeight=St&&Ne==="auto",isNaN(parseFloat(Ne))&&(Ne=Q[ve]),X.startDim.w=parseFloat(U),X.startDim.h=parseFloat(Ne),k=!1,yt&&(Se.unitHeight=(0,G.getUnitFromValue)(Ne),Se.unitWidth=(0,G.getUnitFromValue)(U)),Ln.activeResizer=!0,ce.trigger("component:resize",Y(Y({},xn),{type:"start"}))},onMove:function(K){$e(K),ce.trigger("component:resize",Y(Y({},xn),{type:"move"}))},onEnd:function(K,ee){Ae(K,ee),Lt("remove",K,ee),ce.trigger("component:resize",Y(Y({},xn),{type:"end"})),Z.toggleFramesEvents(!0),k=!0,Ln.activeResizer=!1},updateTarget:function(K,ee,he){if(Je(K,ee,he),!!qe){var Se=he.store,X=he.selectedHandler,ve=he.config,fe=ve.keyHeight,yt=ve.keyWidth,St=ve.autoHeight,Ct=ve.autoWidth,Q=ve.unitWidth,le=ve.unitHeight,U=["tc","bc"].indexOf(X)>=0,Ne=["cl","cr"].indexOf(X)>=0,ye={};if(!U){var Ue=Z.getBody().offsetWidth,lt=ee.w<Ue?ee.w:Ue;ye[yt]=Ct?"auto":"".concat(lt).concat(Q)}Ne||(ye[fe]=St?"auto":"".concat(ee.h).concat(le)),O.getDragMode(V)&&(ye.top="".concat(ee.t).concat(le),ye.left="".concat(ee.l).concat(Q));var at=Y(Y({},ye),{__p:!Se});qe.addStyle(at,{avoidStore:!Se}),O.Styles.__emitCmpStyleUpdate(at,{components:O.getSelected()})}}},Qe);this.resizer=ce.runCommand("resize",{el:pt,options:R,force:1})}else{if(ze)return;ce.stopCommand("resize"),this.resizer=null}},updateToolbar:function(I){var T=this.canvas,O=this.config.em,Z=I===O?O.getSelected():I,ce=T.getToolbarEl(),V=ce.style,xe=Z.get("toolbar"),Ee=O.config.showToolbar,ze=!T.hasCustomSpot(se.F.Select);if(Z&&Ee&&xe&&xe.length&&ze){if(V.display="",!this.toolbar){ce.innerHTML="",this.toolbar=new f(xe);var pt=new q({collection:this.toolbar,em:O});ce.appendChild(pt.render().el)}this.toolbar.reset(xe),V.top="-100px",V.left="0"}else V.display="none"},updateToolbarPos:function(I){var T="px",O=this.canvas.getToolbarEl().style;O.top="".concat(I.top).concat(T),O.left="".concat(I.left).concat(T),O.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(I){return I===void 0&&(I={}),this.canvas.getBadgeEl(I.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(I){return I&&I.get("status")==="selected"},updateToolsLocal:function(I){var T=this.em.getConfig(),O=I||this.getElHovered(),Z=O.el,ce=O.pos,V=O.view,xe=O.component;if(!Z){this.lastHovered=0;return}var Ee=xe.get("hoverable"),ze=this.lastHovered!==Z,pt=ze?{}:{posOnly:1},ft=this.canvas.hasCustomSpot(se.F.Hover);ze&&Ee&&(this.lastHovered=Z,ft?this.hideHighlighter(V):this.showHighlighter(V),this.showElementOffset(Z,ce,{view:V})),this.isCompSelected(xe)&&(this.hideHighlighter(V),!T.showOffsetsSelected&&this.hideElementOffset(V));var Pt="px",be=this.toggleToolsEl(1,V),Te=be.style,$e=this.canvas.canvasRectOffset(Z,ce),de=$e.top,Ae=$e.left;!ft&&this.updateBadge(Z,ce,Y(Y({},pt),{view:V,topOff:de,leftOff:Ae})),Te.top=de+Pt,Te.left=Ae+Pt,Te.width=ce.width+Pt,Te.height=ce.height+Pt,this._trgToolUp("local",{component:xe,el:be,top:de,left:Ae,width:ce.width,height:ce.height})},_upToolbar:(0,n.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(I,T){T===void 0&&(T={}),this.em.trigger("canvas:tools:update",Y({type:I},T))},updateToolsGlobal:function(I){I===void 0&&(I={});var T=this.getElSelected(),O=T.el,Z=T.pos,ce=T.component;if(!O){this.toggleToolsEl(),this.lastSelected=0;return}var V=this.canvas,xe=this.lastSelected!==O;(xe||I.force)&&(this.lastSelected=O,this.updateToolbar(ce));var Ee="px",ze=this.toggleToolsEl(1),pt=ze.style,ft=V.getTargetToElementFixed(O,V.getToolbarEl(),{pos:Z}),Pt=ft.canvasOffsetTop,be=ft.canvasOffsetLeft;pt.top=Pt+Ee,pt.left=be+Ee,pt.width=Z.width+Ee,pt.height=Z.height+Ee,this.updateToolbarPos({top:ft.top,left:ft.left}),this._trgToolUp("global",{component:ce,el:ze,top:Pt,left:be,width:Z.width,height:Z.height})},updateAttached:(0,n.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,n.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(I){return this.canvas.getCanvasView().getElementPos(I,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(I){I&&I.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(I){(0,G.hasWin)()&&(this.editor=I&&I.get("Editor"),this.enable())},stop:function(I,T,O){if(O===void 0&&(O={}),!!(0,G.hasWin)()){var Z=this,ce=Z.em,V=Z.editor;this.onHovered(),this.stopSelectComponent(),!O.preserveSelected&&ce.setSelected(),this.toggleToolsEl(),V&&V.stopCommand("resize")}}}},582:(r,t,e)=>{e.r(t),e.d(t,{default:()=>i});var n=e(694);let i={startSelectPosition:function(o,s,a){var c=this;a===void 0&&(a={}),this.isPointed=!1;var u=this.em.Utils,f=o.ownerDocument.body;u&&!this.sorter&&(this.sorter=new u.Sorter({container:f,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:s,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return c.em.getZoomDecimal()}})),a.onStart&&(this.sorter.onStart=a.onStart),o&&this.sorter.startSort(o,{container:f})},getOffsetDim:function(){var o=this.offset(this.canvas.getFrameEl()),s=this.offset(this.canvas.getElement()),a=o.top-s.top,c=o.left-s.left;return{top:a,left:c}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,n.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,n.default)(this.cDim[this.posIndex][5]).parent():(0,n.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(o,s,a){var c=o||0,u=s||"before",f=a.length,g=f!==0&&u=="after"&&c==f;return f!==0&&(!g&&!a[c][4]||a[c-1]&&!a[c-1][4]||g&&!a[c-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},131:(r,t,e)=>{e.r(t),e.d(t,{default:()=>a});var n=e(523),i=e(683),o=e(694),s=function(){return s=Object.assign||function(c){for(var u,f=1,g=arguments.length;f<g;f++){u=arguments[f];for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&(c[v]=u[v])}return c},s.apply(this,arguments)};let a={getOffsetMethod:function(c){var u=c||"";return"get"+u+"OffsetViewerEl"},run:function(c,u,f){var g=this.canvas,v=f||{},_=v.state||"",b=c.getConfig(),C=this.em.getZoomDecimal(),S=v.el;if(!b.showOffsets||!(S instanceof HTMLElement)||!b.showOffsetsSelected&&_=="Fixed"){c.stopCommand("".concat(this.id),f);return}if(!g.hasCustomSpot(i.F.Spacing)){var j=s({},v.elPos||g.getElementPos(S));(0,n.isUndefined)(v.top)||(j.top=v.top),(0,n.isUndefined)(v.left)||(j.left=v.left);var q=window.getComputedStyle(S),N=this.ppfx,G=_+"State",se=this.getOffsetMethod(_),ue=g[se](f.view);ue.style.opacity="";var Y=this["marginT"+_],L=this["marginB"+_],k=this["marginL"+_],$=this["marginR"+_],I=this["padT"+_],T=this["padB"+_],O=this["padL"+_],Z=this["padR"+_];if(ue.childNodes.length&&(this[G]="1",Y=ue.querySelector("[data-offset-m-t]"),L=ue.querySelector("[data-offset-m-b]"),k=ue.querySelector("[data-offset-m-l]"),$=ue.querySelector("[data-offset-m-r]"),I=ue.querySelector("[data-offset-p-t]"),T=ue.querySelector("[data-offset-p-b]"),O=ue.querySelector("[data-offset-p-l]"),Z=ue.querySelector("[data-offset-p-r]")),!this[G]){var ce=_.toLowerCase(),V=ce+"margin-v",xe=ce+"padding-v",Ee=(0,o.default)('<div class="'.concat(N,'marginName">')).get(0),ze=(0,o.default)('<div class="'.concat(N,'paddingName">')).get(0),pt=N+V+"-el",ft=N+xe+"-el",Pt="".concat(pt," ").concat(N+V),be="".concat(ft," ").concat(N+xe);Y=(0,o.default)('<div class="'.concat(Pt,'-top"></div>')).get(0),L=(0,o.default)('<div class="'.concat(Pt,'-bottom"></div>')).get(0),k=(0,o.default)('<div class="'.concat(Pt,'-left"></div>')).get(0),$=(0,o.default)('<div class="'.concat(Pt,'-right"></div>')).get(0),I=(0,o.default)('<div class="'.concat(be,'-top"></div>')).get(0),T=(0,o.default)('<div class="'.concat(be,'-bottom"></div>')).get(0),O=(0,o.default)('<div class="'.concat(be,'-left"></div>')).get(0),Z=(0,o.default)('<div class="'.concat(be,'-right"></div>')).get(0),this["marginT"+_]=Y,this["marginB"+_]=L,this["marginL"+_]=k,this["marginR"+_]=$,this["padT"+_]=I,this["padB"+_]=T,this["padL"+_]=O,this["padR"+_]=Z,Ee.appendChild(Y),Ee.appendChild(L),Ee.appendChild(k),Ee.appendChild($),ze.appendChild(I),ze.appendChild(T),ze.appendChild(O),ze.appendChild(Z),ue.appendChild(Ee),ue.appendChild(ze),this[G]="1"}var Te="px",$e=parseFloat(q.marginLeft.replace(Te,""))*C,de=parseFloat(q.marginRight.replace(Te,""))*C,Ae=parseFloat(q.marginTop.replace(Te,""))*C,Re=parseFloat(q.marginBottom.replace(Te,""))*C,Je=Y.style,Qe=L.style,qe=k.style,ut=$.style,Xt=I.style,It=T.style,Ln=O.style,xn=Z.style,Lt=parseFloat(j.left),R=parseFloat(q.width)*C+Te;Je.height=Ae+Te,Je.width=R,Je.top=j.top-Ae+Te,Je.left=Lt+Te,Qe.height=Re+Te,Qe.width=R,Qe.top=j.top+j.height+Te,Qe.left=Lt+Te;var K=j.height+Ae+Re+Te,ee=j.top-Ae+Te;qe.height=K,qe.width=$e+Te,qe.top=ee,qe.left=Lt-$e+Te,ut.height=K,ut.width=de+Te,ut.top=ee,ut.left=Lt+j.width+Te;var he=parseFloat(q.paddingTop)*C;Xt.height=he+Te;var Se=parseFloat(q.paddingBottom)*C;It.height=Se+Te;var X=j.height-Se-he+Te,ve=j.top+he+Te;Ln.height=X,Ln.width=parseFloat(q.paddingLeft)*C+Te,Ln.top=ve;var fe=parseFloat(q.paddingRight)*C;xn.height=X,xn.width=fe+Te,xn.top=ve}},stop:function(c,u,f){f===void 0&&(f={});var g=f||{},v=g.state||"",_=this.getOffsetMethod(v),b=f.view,C=this.canvas,S=C[_](b);S.style.opacity=0}}},229:(r,t,e)=>{e.r(t),e.d(t,{default:()=>o});var n=e(523),i=e(342);let o={init:function(){(0,n.bindAll)(this,"_onFramesChange")},run:function(s){this.toggleVis(s,!0)},stop:function(s){this.toggleVis(s,!1)},toggleVis:function(s,a){if(a===void 0&&(a=!0),!s.Commands.isActive("preview")){var c=s.Canvas,u=a?"on":"off",f=c.getModel();f[u]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),a)}},handleFrames:function(s,a){var c=this;s.forEach(function(u){var f;!((f=u.view)===null||f===void 0)&&f.loaded&&c._upFrame(u,a),u.__ol||(u.on("loaded",function(){return c._upFrame(u)}),u.__ol=!0)})},_onFramesChange:function(s,a){this.handleFrames(a)},_upFrame:function(s,a){var c,u=this,f=u.ppfx,g=u.em,v=u.id,_=(0,i.isDef)(a)?a:g.Commands.isActive(v),b=_?"add":"remove",C="".concat(f,"dashed");(c=s.view)===null||c===void 0||c.getBody().classList[b](C)}}},268:(r,t,e)=>{e.d(t,{Kx:()=>a,Ss:()=>u,lK:()=>g,pM:()=>c,x2:()=>f});var n=e(391),i=e.n(n),o=function(){var _=function(b,C){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,j){S.__proto__=j}||function(S,j){for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(S[q]=j[q])},_(b,C)};return function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");_(b,C);function S(){this.constructor=b}b.prototype=C===null?Object.create(C):(S.prototype=C.prototype,new S)}}(),s=function(){return s=Object.assign||function(_){for(var b,C=1,S=arguments.length;C<S;C++){b=arguments[C];for(var j in b)Object.prototype.hasOwnProperty.call(b,j)&&(_[j]=b[j])}return _},s.apply(this,arguments)},a=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(i().Model),c=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(i().Collection),u=function(_){o(b,_);function b(){return _!==null&&_.apply(this,arguments)||this}return b}(i().View),f=function(_){return _.Screen="screen",_.World="world",_}(f||{}),g={x:0,y:0},v=s(s({},g),{width:0,height:0})},249:(r,t,e)=>{e.d(t,{I:()=>i,t:()=>n});var n=function(o){return o.remove="component:remove",o.add="component:add",o.move="component:move",o}(n||{}),i=function(o){return o.add="component:add",o.remove="component:remove",o.removeBefore="component:remove:before",o.create="component:create",o.update="component:update",o.updateInside="component:update-inside",o.symbolMainAdd="symbol:main:add",o.symbolMainUpdate="symbol:main:update",o.symbolMainUpdateDeep="symbol:main:update-deep",o.symbolMainRemove="symbol:main:remove",o.symbolMain="symbol:main",o.symbolInstanceAdd="symbol:instance:add",o.symbolInstanceRemove="symbol:instance:remove",o.symbolInstance="symbol:instance",o.symbol="symbol",o}(i||{})},754:(r,t,e)=>{e.d(t,{A:()=>a});var n=e(523),i=e(268),o=function(){var c=function(u,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(g[_]=v[_])},c(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(u,f);function g(){this.constructor=u}u.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),s=function(c){o(u,c);function u(f,g,v){f===void 0&&(f={}),v===void 0&&(v=!1);var _=c.call(this,f)||this;return _.itemsView="",_.itemType="type",_.reuseView=!1,_.config=g||f.config||{},v&&_.listenTo(_.collection,"add",_.addTo),_.items=[],_}return u.prototype.addTo=function(f){this.add(f)},u.prototype.itemViewNotFound=function(f){var g=this,v=g.config,_=g.ns,b=v.em,C="".concat(_?"[".concat(_,"]: "):"","'").concat(f,"' type not found");b&&b.logWarning(C)},u.prototype.add=function(f,g){var v=this,_=v.config,b=v.reuseView,C=v.items,S=this.itemsView||{},j=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],q=g||null,N=this.itemView,G=f.get(this.itemType),se;S[G]?N=S[G]:G&&!S[G]&&!(0,n.includes)(j,G)&&this.itemViewNotFound(G),f.view&&b?se=f.view:se=new N({model:f,config:_},_),C&&C.push(se);var ue=se.render().el;q?q.appendChild(ue):this.$el.append(ue)},u.prototype.render=function(){var f=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(g){this.add(g,f)},this),this.$el.append(f),this.onRender(),this},u.prototype.onRender=function(){},u.prototype.onRemoveBefore=function(f,g){},u.prototype.onRemove=function(f,g){},u.prototype.remove=function(f){f===void 0&&(f={});var g=this.items;return this.onRemoveBefore(g,f),this.clearItems(),c.prototype.remove.call(this),this.onRemove(g,f),this},u.prototype.clearItems=function(){var f=this.items||[]},u}(i.Ss);let a=s;s.prototype.itemView=""},14:(r,t,e)=>{e.d(t,{A:()=>u});var n=e(523),i=e(926),o=function(){return o=Object.assign||function(f){for(var g,v=1,_=arguments.length;v<_;v++){g=arguments[v];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(f[b]=g[b])}return f},o.apply(this,arguments)},s=function(){return{x:0,y:0}},a=["x","y"],c=function(){function f(g){return g===void 0&&(g={}),this.opts={snapOffset:5,scale:1},(0,n.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(g),this.delta=s(),this.lastScroll=s(),this.lastScrollDiff=s(),this.startPointer=s(),this.startPosition=s(),this.globScrollDiff=s(),this.currentPointer=s(),this.position=s(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return f.prototype.setOptions=function(g){g===void 0&&(g={}),this.opts=o(o({},this.opts),g)},f.prototype.toggleDrag=function(g){var v=this.getDocumentEl(),_=this.getContainerEl(),b=this.getWindowEl(),C=g?"on":"off",S={on:i.on,off:i.AU};S[C](_,"mousemove dragover",this.drag),S[C](v,"mouseup dragend touchend",this.stop),S[C](v,"keydown",this.keyHandle),S[C](b,"scroll",this.handleScroll)},f.prototype.handleScroll=function(){var g=this,v=g.lastScroll,_=g.delta,b=this.getScrollInfo(),C={x:b.x-v.x,y:b.y-v.y};this.move(_.x+C.x,_.y+C.y),this.lastScrollDiff=C},f.prototype.start=function(g){var v=this.opts,_=v.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(g),this.guidesStatic=(0,n.result)(v,"guidesStatic")||[],this.guidesTarget=(0,n.result)(v,"guidesTarget")||[],(0,n.isFunction)(_)&&_(g,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=s(),this.globScrollDiff=s(),this.drag(g)},f.prototype.drag=function(g){var v=this,_=this,b=_.opts,C=_.lastScrollDiff,S=_.globScrollDiff,j=b.onDrag,q=this.startPointer,N=this.getPointerPos(g),G={x:S.x+C.x,y:S.y+C.y};this.globScrollDiff=G;var se={x:N.x-q.x+G.x,y:N.y-q.y+G.y};this.lastScrollDiff=s();var ue=this.lockedAxis;g.shiftKey?ue=!ue&&this.detectAxisLock(se.x,se.y):ue=null,ue==="x"?se.x=q.x:ue==="y"&&(se.y=q.y);var Y=function(O){a.forEach(function(Z){return O[Z]=O[Z]*(0,n.result)(b,"scale")}),v.delta=O,v.move(O.x,O.y),(0,n.isFunction)(j)&&j(g,v)},L=o({},se);if(this.currentPointer=N,this.lockedAxis=ue,this.lastScroll=this.getScrollInfo(),Y(se),this.guidesTarget.length){var k=this.snapGuides(L),$=k.newDelta,I=k.trgX,T=k.trgY;(I||T)&&Y($)}g.which===0&&this.stop(g)},f.prototype.snapGuides=function(g){var v=this,_=g,b=this,C=b.trgX,S=b.trgY;return this.guidesTarget.forEach(function(j){j.x&&v.trgX||j.y&&v.trgY||(j.active=!1,v.guidesStatic.forEach(function(q){if(!(j.y&&q.x||j.x&&q.y)){var N=j.y&&q.y,G=N?"y":"x",se=j[G],ue=q[G],Y=g[G],L=N?S:C;if(v.isPointIn(se,ue)&&(0,n.isUndefined)(L)){var k=Y-(se-ue);v.setGuideLock(j,k)}}}))}),C=this.trgX,S=this.trgY,a.forEach(function(j){var q=j.toUpperCase(),N=v["trg".concat(q)];N&&!v.isPointIn(g[j],N.lock)&&(v.setGuideLock(N,null),N=null),N&&!(0,n.isUndefined)(N.lock)&&(_[j]=N.lock)}),{newDelta:_,trgX:this.trgX,trgY:this.trgY}},f.prototype.isPointIn=function(g,v,_){var b=_===void 0?{}:_,C=b.offset,S=C||this.opts.snapOffset||0;return g>=v&&g<=v+S||g<=v&&g>=v-S},f.prototype.setGuideLock=function(g,v){var _=(0,n.isUndefined)(g.x)?"Y":"X",b="trg".concat(_);return v!==null?(g.active=!0,g.lock=v,this[b]=g):(delete g.active,delete g.lock,delete this[b]),g},f.prototype.stop=function(g,v){v===void 0&&(v={});var _=this.delta,b=!!v.cancel,C=b?0:_.x,S=b?0:_.y;this.toggleDrag(),this.lockedAxis=null,this.move(C,S,!0);var j=this.opts.onEnd;(0,n.isFunction)(j)&&j(g,this,{cancelled:b})},f.prototype.keyHandle=function(g){(0,i.v$)(g)&&this.stop(g,{cancel:!0})},f.prototype.move=function(g,v,_){var b=this,C=b.el,S=b.opts,j=this.startPosition;if(j){var q=S.setPosition,N=j.x+g,G=j.y+v;this.position={x:N,y:G,end:_},(0,n.isFunction)(q)&&q(this.position),C&&(C.style.left="".concat(N,"px"),C.style.top="".concat(G,"px"))}},f.prototype.getContainerEl=function(){var g=this.opts.container;return g?[g]:this.getDocumentEl()},f.prototype.getWindowEl=function(){var g=this.getContainerEl();return g.map(function(v){var _=v.ownerDocument||v;return _.defaultView||_.parentWindow})},f.prototype.getDocumentEl=function(g){var v=this.opts.doc;if(g=g||this.el,!this.docs.length){var _=[document];g&&_.push(g.ownerDocument),v&&_.push(v),this.docs=_}return this.docs},f.prototype.getPointerPos=function(g){var v=this.opts.getPointerPosition,_=(0,i.G2)(g);return v?v(g):{x:_.clientX,y:_.clientY}},f.prototype.getStartPosition=function(){var g=this,v=g.el,_=g.opts,b=_.getPosition,C=s();return(0,n.isFunction)(b)?C=b():v&&(C={x:parseFloat(v.style.left),y:parseFloat(v.style.top)}),C},f.prototype.getScrollInfo=function(){var g=this.opts.doc,v=g&&g.body;return{y:v?v.scrollTop:0,x:v?v.scrollLeft:0}},f.prototype.detectAxisLock=function(g,v){var _=g,b=v,C=Math.abs(_),S=Math.abs(b);if(b>=C||b<=-C)return"x";if(_>S||_<-S)return"y"},f}();let u=c},694:(r,t,e)=>{e.r(t),e.d(t,{default:()=>ar});var n=typeof document<"u"?document:null,i=typeof window<"u"?window:null,o=Array.prototype,s=o.filter,a=o.indexOf,c=o.map,u=o.push,f=o.reverse,g=o.slice,v=o.splice,_=/^#[\w-]*$/,b=/^\.[\w-]*$/,C=/<.+>/,S=/^\w+$/;function j(W,oe){return oe===void 0&&(oe=n),b.test(W)?oe.getElementsByClassName(W.slice(1)):S.test(W)?oe.getElementsByTagName(W):oe.querySelectorAll(W)}function q(W,oe){if(oe===void 0&&(oe=n),!!W){if(W.__cash)return W;var ge=W;if(O(W)){if(oe.__cash&&(oe=oe[0]),ge=_.test(W)?oe.getElementById(W.slice(1)):C.test(W)?qt(W):j(W,oe),!ge)return}else if(T(W))return this.ready(W);(ge.nodeType||ge===i)&&(ge=[ge]),this.length=ge.length;for(var je=0,nt=this.length;je<nt;je++)this[je]=ge[je]}}function N(W,oe){return new q(W,oe)}var G=N.fn=N.prototype=q.prototype={constructor:N,__cash:!0,length:0,splice:v};G.get=function(W){return W===void 0?g.call(this):this[W<0?W+this.length:W]},G.eq=function(W){return N(this.get(W))},G.first=function(){return this.eq(0)},G.last=function(){return this.eq(-1)},G.map=function(W){return N(c.call(this,function(oe,ge){return W.call(oe,ge,oe)}))},G.slice=function(){return N(g.apply(this,arguments))};var se=/(?:^\w|[A-Z]|\b\w)/g,ue=/[\s-_]+/g;function Y(W){return W.replace(se,function(oe,ge){return oe[ge?"toUpperCase":"toLowerCase"]()}).replace(ue,"")}N.camelCase=Y;function L(W,oe){for(var ge=0,je=W.length;ge<je&&oe.call(W[ge],W[ge],ge,W)!==!1;ge++);}N.each=L,G.each=function(W){return L(this,function(oe,ge){return W.call(oe,ge,oe)}),this},G.removeProp=function(W){return this.each(function(oe,ge){delete ge[W]})};function k(W){W===void 0&&(W=this);for(var oe=arguments,ge=oe.length,je=ge<2?0:1;je<ge;je++)for(var nt in oe[je])W[nt]=oe[je][nt];return W}N.extend=G.extend=k;var $=1;N.guid=$;function I(W,oe){var ge=W&&(W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.msMatchesSelector||W.oMatchesSelector);return!!ge&&ge.call(W,oe)}N.matches=I;function T(W){return typeof W=="function"}N.isFunction=T;function O(W){return typeof W=="string"}N.isString=O;function Z(W){return!isNaN(parseFloat(W))&&isFinite(W)}N.isNumeric=Z;var ce=Array.isArray;N.isArray=ce,G.prop=function(W,oe){if(W){if(O(W))return arguments.length<2?this[0]&&this[0][W]:this.each(function(je,nt){nt[W]=oe});for(var ge in W)this.prop(ge,W[ge]);return this}};function V(W){return O(W)?function(oe,ge){return I(ge,W)}:W.__cash?function(oe,ge){return W.is(ge)}:function(oe,ge,je){return ge===je}}G.filter=function(W){if(!W)return N();var oe=T(W)?W:V(W);return N(s.call(this,function(ge,je){return oe.call(ge,je,ge,W)}))};var xe=/\S+/g;function Ee(W){return O(W)?W.match(xe)||[]:[]}G.hasClass=function(W){var oe=Ee(W),ge=!1;return oe.length&&this.each(function(je,nt){return ge=nt.classList.contains(oe[0]),!ge}),ge},G.removeAttr=function(W){var oe=Ee(W);return oe.length?this.each(function(ge,je){L(oe,function(nt){je.removeAttribute(nt)})}):this},G.attr=function(W,oe){if(W){if(O(W)){if(arguments.length<2){if(!this[0])return;var ge=this[0].getAttribute(W);return ge===null?void 0:ge}return oe===null?this.removeAttr(W):this.each(function(nt,xt){xt.setAttribute(W,oe)})}for(var je in W)this.attr(je,W[je]);return this}},G.toggleClass=function(W,oe){var ge=Ee(W),je=oe!==void 0;return ge.length?this.each(function(nt,xt){L(ge,function(Ht){je?oe?xt.classList.add(Ht):xt.classList.remove(Ht):xt.classList.toggle(Ht)})}):this},G.addClass=function(W){return this.toggleClass(W,!0)},G.removeClass=function(W){return arguments.length?this.toggleClass(W,!1):this.attr("class","")};function ze(W){return W.filter(function(oe,ge,je){return je.indexOf(oe)===ge})}N.unique=ze,G.add=function(W,oe){return N(ze(this.get().concat(N(W,oe).get())))};function pt(W,oe,ge){if(W.nodeType===1){var je=i.getComputedStyle(W,null);return oe?ge?je.getPropertyValue(oe):je[oe]:je}}function ft(W,oe){return parseInt(pt(W,oe),10)||0}var Pt=/^--/;function be(W){return Pt.test(W)}var Te={},$e=n&&n.createElement("div"),de=$e?$e.style:{},Ae=["webkit","moz","ms","o"];function Re(W,oe){if(oe===void 0&&(oe=be(W)),oe)return W;if(!Te[W]){var ge=Y(W),je=""+ge.charAt(0).toUpperCase()+ge.slice(1),nt=(ge+" "+Ae.join(je+" ")+je).split(" ");L(nt,function(xt){if(xt in de)return Te[W]=xt,!1})}return Te[W]}N.prefixedProp=Re;var Je={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Qe(W,oe,ge){return ge===void 0&&(ge=be(W)),!ge&&!Je[W]&&Z(oe)?oe+"px":oe}G.css=function(W,oe){if(O(W)){var ge=be(W);return W=Re(W,ge),arguments.length<2?this[0]&&pt(this[0],W,ge):W?(oe=Qe(W,oe,ge),this.each(function(nt,xt){xt.nodeType===1&&(ge?xt.style.setProperty(W,oe):xt.style[W]=oe)})):this}for(var je in W)this.css(je,W[je]);return this};var qe="__cashData",ut=/^data-(.*)/;N.hasData=function(W){return qe in W};function Xt(W){return W[qe]=W[qe]||{}}function It(W,oe){var ge=Xt(W);if(oe){if(!(oe in ge)){var je=W.dataset?W.dataset[oe]||W.dataset[Y(oe)]:N(W).attr("data-"+oe);if(je!==void 0){try{je=JSON.parse(je)}catch{}ge[oe]=je}}return ge[oe]}return ge}function Ln(W,oe){oe===void 0?delete W[qe]:delete Xt(W)[oe]}function xn(W,oe,ge){Xt(W)[oe]=ge}G.data=function(W,oe){var ge=this;if(!W)return this[0]?(L(this[0].attributes,function(nt){var xt=nt.name.match(ut);xt&&ge.data(xt[1])}),It(this[0])):void 0;if(O(W))return oe===void 0?this[0]&&It(this[0],W):this.each(function(nt,xt){return xn(xt,W,oe)});for(var je in W)this.data(je,W[je]);return this},G.removeData=function(W){return this.each(function(oe,ge){return Ln(ge,W)})};function Lt(W,oe){return ft(W,"border"+(oe?"Left":"Top")+"Width")+ft(W,"padding"+(oe?"Left":"Top"))+ft(W,"padding"+(oe?"Right":"Bottom"))+ft(W,"border"+(oe?"Right":"Bottom")+"Width")}L(["Width","Height"],function(W){G["inner"+W]=function(){if(this[0])return this[0]===i?i["inner"+W]:this[0]["client"+W]}}),L(["width","height"],function(W,oe){G[W]=function(ge){return this[0]?arguments.length?(ge=parseInt(ge,10),this.each(function(je,nt){if(nt.nodeType===1){var xt=pt(nt,"boxSizing");nt.style[W]=Qe(W,ge+(xt==="border-box"?Lt(nt,!oe):0))}})):this[0]===i?this[0][Y("outer-"+W)]:this[0].getBoundingClientRect()[W]-Lt(this[0],!oe):ge===void 0?void 0:this}}),L(["Width","Height"],function(W,oe){G["outer"+W]=function(ge){if(this[0])return this[0]===i?i["outer"+W]:this[0]["offset"+W]+(ge?ft(this[0],"margin"+(oe?"Top":"Left"))+ft(this[0],"margin"+(oe?"Bottom":"Right")):0)}});function R(W,oe){for(var ge=0,je=oe.length;ge<je;ge++)if(W.indexOf(oe[ge])<0)return!1;return!0}function K(W,oe,ge){L(W[ge],function(je){var nt=je[0],xt=je[1];oe.removeEventListener(ge,xt)}),delete W[ge]}var ee="__cashEvents",he=".";function Se(W){return W[ee]=W[ee]||{}}function X(W,oe,ge,je){je.guid=je.guid||$++;var nt=Se(W);nt[oe]=nt[oe]||[],nt[oe].push([ge,je]),W.addEventListener(oe,je)}function ve(W){var oe=W.split(he);return[oe[0],oe.slice(1).sort()]}function fe(W,oe,ge,je){var nt=Se(W);if(oe){var xt=nt[oe];if(!xt)return;je&&(je.guid=je.guid||$++),nt[oe]=xt.filter(function(Ht){var fn=Ht[0],Pn=Ht[1];if(je&&Pn.guid!==je.guid||!R(fn,ge))return!0;W.removeEventListener(oe,Pn)})}else if(!ge||!ge.length)for(oe in nt)K(nt,W,oe);else for(oe in nt)fe(W,oe,ge,je)}G.off=function(W,oe){var ge=this;return W===void 0?this.each(function(je,nt){return fe(nt)}):L(Ee(W),function(je){var nt=ve(je),xt=nt[0],Ht=nt[1];ge.each(function(fn,Pn){return fe(Pn,xt,Ht,oe)})}),this},G.on=function(W,oe,ge,je){var nt=this;if(!O(W)){for(var xt in W)this.on(xt,oe,W[xt]);return this}return T(oe)&&(ge=oe,oe=!1),L(Ee(W),function(Ht){var fn=ve(Ht),Pn=fn[0],In=fn[1];nt.each(function(zr,Cr){var $n=function $r(Nn){if(!(Nn.namespace&&!R(In,Nn.namespace.split(he)))){var Wn=Cr;if(oe){for(var Vn=Nn.target;!I(Vn,oe);)if(Vn===Cr||(Vn=Vn.parentNode,!Vn))return;Wn=Vn}Nn.namespace=Nn.namespace||"";var Ci=ge.call(Wn,Nn,Nn.data);je&&fe(Cr,Pn,In,$r),Ci===!1&&(Nn.preventDefault(),Nn.stopPropagation())}};$n.guid=ge.guid=ge.guid||$++,X(Cr,Pn,In,$n)})}),this},G.one=function(W,oe,ge){return this.on(W,oe,ge,!0)},G.ready=function(W){var oe=function(){return W(N)};return n.readyState!=="loading"?setTimeout(oe):n.addEventListener("DOMContentLoaded",oe),this},G.trigger=function(W,oe){var ge=W;if(O(W)){var je=ve(W),nt=je[0],xt=je[1];ge=n.createEvent("HTMLEvents"),ge.initEvent(nt,!0,!0),ge.namespace=xt.join(he)}return ge.data=oe,this.each(function(Ht,fn){fn.dispatchEvent(ge)})};function yt(W){var oe=[];return L(W.options,function(ge){ge.selected&&!ge.disabled&&!ge.parentNode.disabled&&oe.push(ge.value)}),oe}function St(W){return W.selectedIndex<0?null:W.options[W.selectedIndex].value}var Ct=/select-one/i,Q=/select-multiple/i;function le(W){var oe=W.type;return Ct.test(oe)?St(W):Q.test(oe)?yt(W):W.value}var U=/%20/g;function Ne(W,oe){return"&"+encodeURIComponent(W)+"="+encodeURIComponent(oe).replace(U,"+")}var ye=/file|reset|submit|button|image/i,Ue=/radio|checkbox/i;G.serialize=function(){var W="";return this.each(function(oe,ge){L(ge.elements||[ge],function(je){if(!(je.disabled||!je.name||je.tagName==="FIELDSET")&&!ye.test(je.type)&&!(Ue.test(je.type)&&!je.checked)){var nt=le(je);if(nt!==void 0){var xt=ce(nt)?nt:[nt];L(xt,function(Ht){W+=Ne(je.name,Ht)})}}})}),W.substr(1)},G.val=function(W){return W===void 0?this[0]&&le(this[0]):this.each(function(oe,ge){var je=Q.test(ge.type),nt=W===null?je?[]:"":W;je&&ce(nt)?L(ge.options,function(xt){xt.selected=nt.indexOf(xt.value)>=0}):ge.value=nt})},G.clone=function(){return this.map(function(W,oe){return oe.cloneNode(!0)})},G.detach=function(){return this.each(function(W,oe){oe.parentNode&&oe.parentNode.removeChild(oe)})};var lt=/^\s*<(\w+)[^>]*>/,at=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,tt;function Tt(){if(!tt){var W=n.createElement("table"),oe=n.createElement("tr");tt={"*":n.createElement("div"),tr:n.createElement("tbody"),td:oe,th:oe,thead:W,tbody:W,tfoot:W}}}function qt(W){if(Tt(),!O(W))return[];if(at.test(W))return[n.createElement(RegExp.$1)];var oe=lt.test(W)&&RegExp.$1,ge=tt[oe]||tt["*"];return ge.innerHTML=W,N(ge.childNodes).detach().get()}N.parseHTML=qt,G.empty=function(){var W=this[0];if(W)for(;W.firstChild;)W.removeChild(W.firstChild);return this};function en(W,oe,ge){ge?W.insertBefore(oe,W.childNodes[0]):W.appendChild(oe)}function Jt(W,oe,ge){if(oe!==void 0){var je=O(oe);!je&&oe.length?L(oe,function(nt){return Jt(W,nt,ge)}):L(W,je?function(nt){nt.insertAdjacentHTML(ge?"afterbegin":"beforeend",oe)}:function(nt,xt){return en(nt,xt?oe.cloneNode(!0):oe,ge)})}}G.append=function(){var W=this;return L(arguments,function(oe){Jt(W,oe)}),this},G.appendTo=function(W){return Jt(N(W),this),this},G.html=function(W){if(W===void 0)return this[0]&&this[0].innerHTML;var oe=W.nodeType?W[0].outerHTML:W;return this.each(function(ge,je){je.innerHTML=oe})},G.insertAfter=function(W){var oe=this;return N(W).each(function(ge,je){var nt=je.parentNode;oe.each(function(xt,Ht){nt.insertBefore(ge?Ht.cloneNode(!0):Ht,je.nextSibling)})}),this},G.after=function(){var W=this;return L(f.apply(arguments),function(oe){f.apply(N(oe).slice()).insertAfter(W)}),this},G.insertBefore=function(W){var oe=this;return N(W).each(function(ge,je){var nt=je.parentNode;oe.each(function(xt,Ht){nt.insertBefore(ge?Ht.cloneNode(!0):Ht,je)})}),this},G.before=function(){var W=this;return L(arguments,function(oe){N(oe).insertBefore(W)}),this},G.prepend=function(){var W=this;return L(arguments,function(oe){Jt(W,oe,!0)}),this},G.prependTo=function(W){return Jt(N(W),f.apply(this.slice()),!0),this},G.remove=function(){return this.detach().off()},G.replaceWith=function(W){var oe=this;return this.each(function(ge,je){var nt=je.parentNode;if(nt){var xt=ge?N(W).clone():N(W);if(!xt[0])return oe.remove(),!1;nt.replaceChild(xt[0],je),N(xt[0]).after(xt.slice(1))}})},G.replaceAll=function(W){return N(W).replaceWith(this),this},G.text=function(W){return W===void 0?this[0]?this[0].textContent:"":this.each(function(oe,ge){ge.textContent=W})};var Rn=n&&n.documentElement;G.offset=function(){var W=this[0];if(W){var oe=W.getBoundingClientRect();return{top:oe.top+i.pageYOffset-Rn.clientTop,left:oe.left+i.pageXOffset-Rn.clientLeft}}},G.offsetParent=function(){return N(this[0]&&this[0].offsetParent)},G.position=function(){var W=this[0];if(W)return{left:W.offsetLeft,top:W.offsetTop}},G.children=function(W){var oe=[];return this.each(function(ge,je){u.apply(oe,je.children)}),oe=N(ze(oe)),W?oe.filter(function(ge,je){return I(je,W)}):oe},G.contents=function(){var W=[];return this.each(function(oe,ge){u.apply(W,ge.tagName==="IFRAME"?[ge.contentDocument]:ge.childNodes)}),N(W.length&&ze(W))},G.find=function(W){for(var oe=[],ge=0,je=this.length;ge<je;ge++){var nt=j(W,this[ge]);nt.length&&u.apply(oe,nt)}return N(oe.length&&ze(oe))},G.has=function(W){var oe=O(W)?function(ge,je){return!!j(W,je).length}:function(ge,je){return je.contains(W)};return this.filter(oe)},G.is=function(W){if(!W||!this[0])return!1;var oe=V(W),ge=!1;return this.each(function(je,nt){return ge=oe(je,nt,W),!ge}),ge},G.next=function(){return N(this[0]&&this[0].nextElementSibling)},G.not=function(W){if(!W||!this[0])return this;var oe=V(W);return this.filter(function(ge,je){return!oe(ge,je,W)})},G.parent=function(){var W=[];return this.each(function(oe,ge){ge&&ge.parentNode&&W.push(ge.parentNode)}),N(ze(W))},G.index=function(W){var oe=W?N(W)[0]:this[0],ge=W?this:N(oe).parent().children();return a.call(ge,oe)},G.closest=function(W){return!W||!this[0]?N():this.is(W)?this.filter(W):this.parent().closest(W)},G.parents=function(W){var oe=[],ge;return this.each(function(je,nt){for(ge=nt;ge&&ge.parentNode&&ge!==n.body.parentNode;)ge=ge.parentNode,(!W||W&&I(ge,W))&&oe.push(ge)}),N(ze(oe))},G.prev=function(){return N(this[0]&&this[0].previousElementSibling)},G.siblings=function(){var W=this[0];return this.parent().children().filter(function(oe,ge){return ge!==W})};let ar=N},926:(r,t,e)=>{e.d(t,{AU:()=>Pt,BC:()=>q,C8:()=>$,Ch:()=>O,Ci:()=>V,D8:()=>c,G2:()=>Z,GW:()=>k,GZ:()=>G,I6:()=>v,LJ:()=>ze,Sc:()=>j,X6:()=>_,Xy:()=>I,YZ:()=>f,ZQ:()=>u,a_:()=>N,af:()=>ue,bG:()=>S,cx:()=>g,ir:()=>Y,kk:()=>pt,on:()=>ft,rp:()=>Ee,v$:()=>ce,yL:()=>se,zN:()=>b});var n=e(523),i=function(be,Te,$e){if($e||arguments.length===2)for(var de=0,Ae=Te.length,Re;de<Ae;de++)(Re||!(de in Te))&&(Re||(Re=Array.prototype.slice.call(Te,0,de)),Re[de]=Te[de]);return be.concat(Re||Array.prototype.slice.call(Te))},o="tag",s="attributes",a="children",c="transitionend oTransitionEnd transitionend webkitTransitionEnd",u=function(be){return be?.nodeType===Node.DOCUMENT_NODE},f=function(be){var Te=be&&be.parentNode;Te&&Te.removeChild(be)};function g(){for(var be=[],Te=0;Te<arguments.length;Te++)be[Te]=arguments[Te];var $e=Array.isArray(be[0])?be[0]:i([],be,!0);return $e.filter(Boolean).join(" ")}var v=function(be,Te){return be.querySelectorAll(Te)},_=function(be,Te){return Te===void 0&&(Te={}),be&&be.setAttribute&&(0,n.each)(Te,function($e,de){return be.setAttribute(de,$e)})},b=function(be){var Te;return be&&!!(be.offsetWidth||be.offsetHeight||!((Te=be.getClientRects)===null||Te===void 0)&&Te.call(be).length)},C=function(be){for(;be.firstChild;)be.removeChild(be.firstChild)},S=function(be,Te){var $e;($e=be.parentNode)===null||$e===void 0||$e.replaceChild(Te,be)},j=function(be,Te,$e){var de=be.childNodes,Ae=de.length,Re=(0,n.isUndefined)($e)?Ae:$e;(0,n.isString)(Te)&&(be.insertAdjacentHTML("beforeEnd",Te),Te=be.lastChild,be.removeChild(Te)),Re>=Ae?be.appendChild(Te):be.insertBefore(Te,de[Re])},q=function(be,Te){return j(be,Te)},N=function(be,Te,$e){Te===void 0&&(Te={});var de=document.createElement(be);return Te&&(0,n.each)(Te,function(Ae,Re){return de.setAttribute(Re,Ae)}),$e&&((0,n.isString)($e)?de.innerHTML=$e:de.appendChild($e)),de},G=function(be){return document.createTextNode(be)},se=function(be,Te){var $e,de=be.type;try{$e=new window[Te](de,be)}catch{$e=document.createEvent(Te),$e.initEvent(de,!0,!0)}return $e._parentEvent=be,de.indexOf("key")===0&&($e.keyCodeVal=be.keyCode,["keyCode","which"].forEach(function(Ae){Object.defineProperty($e,Ae,{get:function(){return this.keyCodeVal}})})),$e},ue=function(be,Te){Te===void 0&&(Te=[]);var $e=Array.isArray(Te)?Te:[Te];$e.forEach(function(de){var Ae=de[o]||"div",Re=de[s]||{},Je=document.createElement(Ae);(0,n.each)(Re,function(Qe,qe){Je.setAttribute(qe,Qe)}),be.appendChild(Je)})},Y=function(be){return be?.nodeType===Node.TEXT_NODE},L=function(be){return be?.nodeType===Node.COMMENT_NODE},k=function(be){return be&&!Y(be)&&!L(be)},$=function(be){var Te={top:0,left:0,width:0,height:0};if(!be)return Te;var $e;if(Y(be)){var de=document.createRange();de.selectNode(be),$e=de.getBoundingClientRect(),de.detach()}return $e||(be.getBoundingClientRect?be.getBoundingClientRect():Te)},I=function(be){var Te=be?.ownerDocument||document,$e=Te.documentElement,de=Te.defaultView||window;return{x:(de.pageXOffset||$e.scrollLeft||0)-($e.clientLeft||0),y:(de.pageYOffset||$e.scrollTop||0)-($e.clientTop||0)}},T=function(be){return be.which||be.keyCode},O=function(be){return String.fromCharCode(T(be))},Z=function(be){return be.touches&&be.touches[0]?be.touches[0]:be},ce=function(be){return T(be)===27},V=function(be){return T(be)===13},xe=function(be){return be.ctrlKey},Ee=function(be){return xe(be)||be.metaKey},ze=function(be){if(!be)return"";var Te=be.name,$e=be.publicId,de=be.systemId,Ae=$e?' PUBLIC "'.concat($e,'"'):"",Re=!$e&&de?' SYSTEM "'.concat(de,'"'):"";return"<!DOCTYPE ".concat(Te).concat(Ae).concat(Re,">")},pt=function(be){be===void 0&&(be={});var Te=[];return(0,n.each)(be,function($e,de){return Te.push("".concat(de,'="').concat($e,'"'))}),Te.join(" ")},ft=function(be,Te,$e,de){var Ae=Te.split(/\s+/),Re=(0,n.isArray)(be)?be:[be];Ae.forEach(function(Je){Re.forEach(function(Qe){return Qe?.addEventListener(Je,$e,de)})})},Pt=function(be,Te,$e,de){var Ae=Te.split(/\s+/),Re=(0,n.isArray)(be)?be:[be];Ae.forEach(function(Je){Re.forEach(function(Qe){return Qe?.removeEventListener(Je,$e,de)})})}},342:(r,t,e)=>{e.r(t),e.d(t,{appendStyles:()=>q,buildBase64UrlFromSvg:()=>$e,camelCase:()=>ue,capitalize:()=>xe,createId:()=>Te,deepMerge:()=>O,escape:()=>I,escapeNodeContent:()=>T,find:()=>$,getComponentModel:()=>Pt,getComponentView:()=>ft,getElement:()=>k,getGlobal:()=>_,getModel:()=>Z,getUiClass:()=>j,getUnitFromValue:()=>G,getViewEl:()=>ze,hasDnd:()=>L,hasWin:()=>v,isBultInMethod:()=>c,isComponent:()=>pt,isDef:()=>g,isEmptyObj:()=>V,isObject:()=>ce,isRule:()=>Ee,matches:()=>S,normalizeFloat:()=>Y,normalizeKey:()=>u,setViewEl:()=>be,shallowDiff:()=>N,toLowerCase:()=>b,upFirst:()=>se,wait:()=>f});var n=e(523),i=e(926),o=function(){return o=Object.assign||function(de){for(var Ae,Re=1,Je=arguments.length;Re<Je;Re++){Ae=arguments[Re];for(var Qe in Ae)Object.prototype.hasOwnProperty.call(Ae,Qe)&&(de[Qe]=Ae[Qe])}return de},o.apply(this,arguments)},s=function(de,Ae,Re){if(Re||arguments.length===2)for(var Je=0,Qe=Ae.length,qe;Je<Qe;Je++)(qe||!(Je in Ae))&&(qe||(qe=Array.prototype.slice.call(Ae,0,Je)),qe[Je]=Ae[Je]);return de.concat(qe||Array.prototype.slice.call(Ae))},a={},c=function(de){return(0,n.isFunction)(a[de])},u=function(de){return c(de)?"_".concat(de):de},f=function(de){return de===void 0&&(de=0),new Promise(function(Ae){return setTimeout(Ae,de)})},g=function(de){return typeof de<"u"},v=function(){return typeof window<"u"},_=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:e.g},b=function(de){return(de||"").toLowerCase()},C=v()?window.Element.prototype:{},S=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.msMatchesSelector,j=function(de,Ae){var Re=de.getConfig(),Je=Re.stylePrefix,Qe=Re.customUI;return[Qe&&"".concat(Je,"cui"),Ae].filter(function(qe){return qe}).join(" ")},q=function(de,Ae){Ae===void 0&&(Ae={});var Re=(0,n.isArray)(de)?s([],de,!0):[de];if(Re.length){var Je=Re.shift();if(Je&&(!Ae.unique||!document.querySelector('link[href="'.concat(Je,'"]')))){var Qe=document.head,qe=document.createElement("link");qe.href=Je,qe.rel="stylesheet",Ae.prepand?Qe.insertBefore(qe,Qe.firstChild):Qe.appendChild(qe)}q(Re)}},N=function(de,Ae){var Re={},Je=(0,n.keys)(Ae);for(var Qe in de)if(de.hasOwnProperty(Qe)){var qe=de[Qe],ut=Ae[Qe];Je.indexOf(Qe)>=0?qe!==ut&&(Re[Qe]=ut):Re[Qe]=null}for(var Qe in Ae)Ae.hasOwnProperty(Qe)&&(0,n.isUndefined)(de[Qe])&&(Re[Qe]=Ae[Qe]);return Re},G=function(de){return de.replace(parseFloat(de),"")},se=function(de){return de[0].toUpperCase()+de.toLowerCase().slice(1)},ue=function(de){return de.replace(/-./g,function(Ae){return Ae[1].toUpperCase()})},Y=function(de,Ae,Re){Ae===void 0&&(Ae=1),Re===void 0&&(Re=0);var Je=0;if(isNaN(de))return Re;if(de=parseFloat(de),Math.floor(de)!==de){var Qe=Ae.toString().split(".")[1];Je=Qe?Qe.length:0}return Je?parseFloat(de.toFixed(Je)):de},L=function(de){return"draggable"in document.createElement("i")&&(de?de.config.nativeDnD:!0)},k=function(de){if((0,n.isElement)(de)||(0,i.ir)(de))return de;if(de&&de.getEl)return de.getEl()},$=function(de,Ae){var Re=null;return de.some(function(Je,Qe){return Ae(Je,Qe,de)?(Re=Je,1):0}),Re},I=function(de){return de===void 0&&(de=""),"".concat(de).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},T=function(de){return de===void 0&&(de=""),"".concat(de).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},O=function(){for(var de=[],Ae=0;Ae<arguments.length;Ae++)de[Ae]=arguments[Ae];for(var Re=o({},de[0]),Je=1;Je<de.length;Je++){var Qe=o({},de[Je]);for(var qe in Qe){var ut=Re[qe],Xt=Qe[qe];ce(ut)&&ce(Xt)?Re[qe]=O(ut,Xt):Re[qe]=Xt}}return Re},Z=function(de,Ae){var Re;return!Ae&&de&&de.__cashData?Re=de.__cashData.model:Ae&&(0,n.isElement)(de)&&(Re=Ae(de).data("model")),Re},ce=function(de){return de&&!Array.isArray(de)&&typeof de=="object"},V=function(de){return Object.keys(de).length<=0},xe=function(de){return de===void 0&&(de=""),de&&de.charAt(0).toUpperCase()+de.substring(1)},Ee=function(de){return de&&de.toCSS},ze=function(de){return de?.__gjsv},pt=function(de){return!!de?.toHTML},ft=function(de){return ze(de)},Pt=function(de){var Ae;return(Ae=ft(de))===null||Ae===void 0?void 0:Ae.model},be=function(de,Ae){de.__gjsv=Ae},Te=function(de){de===void 0&&(de=16);for(var Ae="",Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Je=Re.length,Qe=0;Qe<de;Qe++)Ae+=Re.charAt(Math.floor(Math.random()*Je));return Ae},$e=function(de){if(de&&de.substr(0,4)==="<svg"){var Ae="";return v()?Ae=window.btoa(de):typeof Buffer<"u"&&(Ae=Buffer.from(de,"utf8").toString("base64")),Ae?"data:image/svg+xml;base64,".concat(Ae):de}return de}},585:(r,t,e)=>{var n={"./CanvasClear":404,"./CanvasClear.ts":404,"./CanvasMove":228,"./CanvasMove.ts":228,"./CommandAbstract":570,"./CommandAbstract.ts":570,"./ComponentDelete":377,"./ComponentDelete.ts":377,"./ComponentDrag":728,"./ComponentDrag.ts":728,"./ComponentEnter":462,"./ComponentEnter.ts":462,"./ComponentExit":658,"./ComponentExit.ts":658,"./ComponentNext":619,"./ComponentNext.ts":619,"./ComponentPrev":935,"./ComponentPrev.ts":935,"./ComponentStyleClear":536,"./ComponentStyleClear.ts":536,"./CopyComponent":957,"./CopyComponent.ts":957,"./ExportTemplate":413,"./ExportTemplate.ts":413,"./Fullscreen":516,"./Fullscreen.ts":516,"./MoveComponent":13,"./MoveComponent.ts":13,"./OpenAssets":204,"./OpenAssets.ts":204,"./OpenBlocks":195,"./OpenBlocks.ts":195,"./OpenLayers":671,"./OpenLayers.ts":671,"./OpenStyleManager":49,"./OpenStyleManager.ts":49,"./OpenTraitManager":590,"./OpenTraitManager.ts":590,"./PasteComponent":483,"./PasteComponent.ts":483,"./Preview":857,"./Preview.ts":857,"./Resize":869,"./Resize.ts":869,"./SelectComponent":194,"./SelectComponent.ts":194,"./SelectPosition":582,"./SelectPosition.ts":582,"./ShowOffset":131,"./ShowOffset.ts":131,"./SwitchVisibility":229,"./SwitchVisibility.ts":229};function i(s){var a=o(s);return e(a)}function o(s){if(!e.o(n,s)){var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}return n[s]}i.keys=function(){return Object.keys(n)},i.resolve=o,r.exports=i,i.id=585},523:(r,t,e)=>{e.r(t),e.d(t,{VERSION:()=>i,after:()=>bo,all:()=>xo,allKeys:()=>tt,any:()=>_i,assign:()=>$n,before:()=>Ws,bind:()=>_s,bindAll:()=>$s,chain:()=>Tn,chunk:()=>Ze,clone:()=>Ci,collect:()=>er,compact:()=>Ia,compose:()=>Gr,constant:()=>Lt,contains:()=>Sr,countBy:()=>fc,create:()=>Vn,debounce:()=>Ji,default:()=>Jn,defaults:()=>$r,defer:()=>mr,delay:()=>Lo,detect:()=>Ot,difference:()=>dl,drop:()=>Bo,each:()=>dt,escape:()=>He,every:()=>xo,extend:()=>Cr,extendOwn:()=>$n,filter:()=>kr,find:()=>Ot,findIndex:()=>Vo,findKey:()=>yr,findLastIndex:()=>Xi,findWhere:()=>$t,first:()=>Cs,flatten:()=>ci,foldl:()=>Ei,foldr:()=>Er,forEach:()=>dt,functions:()=>In,get:()=>Xn,groupBy:()=>Ks,has:()=>Wr,head:()=>Cs,identity:()=>gn,include:()=>Sr,includes:()=>Sr,indexBy:()=>cl,indexOf:()=>ai,initial:()=>Yn,inject:()=>Ei,intersection:()=>E,invert:()=>Pn,invoke:()=>Ru,isArguments:()=>It,isArray:()=>qe,isArrayBuffer:()=>ft,isBoolean:()=>T,isDataView:()=>Qe,isDate:()=>xe,isElement:()=>O,isEmpty:()=>Q,isEqual:()=>at,isError:()=>ze,isFinite:()=>Ln,isFunction:()=>Te,isMap:()=>ge,isMatch:()=>le,isNaN:()=>xn,isNull:()=>$,isNumber:()=>V,isObject:()=>k,isRegExp:()=>Ee,isSet:()=>nt,isString:()=>ce,isSymbol:()=>pt,isTypedArray:()=>ve,isUndefined:()=>I,isWeakMap:()=>je,isWeakSet:()=>xt,iteratee:()=>zt,keys:()=>Ct,last:()=>xs,lastIndexOf:()=>At,map:()=>er,mapObject:()=>si,matcher:()=>ht,matches:()=>ht,max:()=>Sa,memoize:()=>Ea,methods:()=>In,min:()=>Gs,mixin:()=>tr,negate:()=>ws,noop:()=>Dr,now:()=>H,object:()=>Ce,omit:()=>Ri,once:()=>Zi,pairs:()=>fn,partial:()=>xi,partition:()=>Ma,pick:()=>ul,pluck:()=>ns,property:()=>pr,propertyOf:()=>Be,random:()=>yi,range:()=>Oe,reduce:()=>Ei,reduceRight:()=>Er,reject:()=>li,rest:()=>Bo,restArguments:()=>L,result:()=>es,sample:()=>Aa,select:()=>kr,shuffle:()=>Ta,size:()=>Pa,some:()=>_i,sortBy:()=>Nu,sortedIndex:()=>Co,tail:()=>Bo,take:()=>Cs,tap:()=>cn,template:()=>qr,templateSettings:()=>tn,throttle:()=>Di,times:()=>Nt,toArray:()=>rs,toPath:()=>Pr,transpose:()=>D,unescape:()=>Gt,union:()=>y,uniq:()=>eo,unique:()=>eo,uniqueId:()=>ts,unzip:()=>D,values:()=>Ht,where:()=>dc,without:()=>Da,wrap:()=>vr,zip:()=>J});var n={};e.r(n),e.d(n,{VERSION:()=>i,after:()=>bo,all:()=>xo,allKeys:()=>tt,any:()=>_i,assign:()=>$n,before:()=>Ws,bind:()=>_s,bindAll:()=>$s,chain:()=>Tn,chunk:()=>Ze,clone:()=>Ci,collect:()=>er,compact:()=>Ia,compose:()=>Gr,constant:()=>Lt,contains:()=>Sr,countBy:()=>fc,create:()=>Vn,debounce:()=>Ji,default:()=>hn,defaults:()=>$r,defer:()=>mr,delay:()=>Lo,detect:()=>Ot,difference:()=>dl,drop:()=>Bo,each:()=>dt,escape:()=>He,every:()=>xo,extend:()=>Cr,extendOwn:()=>$n,filter:()=>kr,find:()=>Ot,findIndex:()=>Vo,findKey:()=>yr,findLastIndex:()=>Xi,findWhere:()=>$t,first:()=>Cs,flatten:()=>ci,foldl:()=>Ei,foldr:()=>Er,forEach:()=>dt,functions:()=>In,get:()=>Xn,groupBy:()=>Ks,has:()=>Wr,head:()=>Cs,identity:()=>gn,include:()=>Sr,includes:()=>Sr,indexBy:()=>cl,indexOf:()=>ai,initial:()=>Yn,inject:()=>Ei,intersection:()=>E,invert:()=>Pn,invoke:()=>Ru,isArguments:()=>It,isArray:()=>qe,isArrayBuffer:()=>ft,isBoolean:()=>T,isDataView:()=>Qe,isDate:()=>xe,isElement:()=>O,isEmpty:()=>Q,isEqual:()=>at,isError:()=>ze,isFinite:()=>Ln,isFunction:()=>Te,isMap:()=>ge,isMatch:()=>le,isNaN:()=>xn,isNull:()=>$,isNumber:()=>V,isObject:()=>k,isRegExp:()=>Ee,isSet:()=>nt,isString:()=>ce,isSymbol:()=>pt,isTypedArray:()=>ve,isUndefined:()=>I,isWeakMap:()=>je,isWeakSet:()=>xt,iteratee:()=>zt,keys:()=>Ct,last:()=>xs,lastIndexOf:()=>At,map:()=>er,mapObject:()=>si,matcher:()=>ht,matches:()=>ht,max:()=>Sa,memoize:()=>Ea,methods:()=>In,min:()=>Gs,mixin:()=>tr,negate:()=>ws,noop:()=>Dr,now:()=>H,object:()=>Ce,omit:()=>Ri,once:()=>Zi,pairs:()=>fn,partial:()=>xi,partition:()=>Ma,pick:()=>ul,pluck:()=>ns,property:()=>pr,propertyOf:()=>Be,random:()=>yi,range:()=>Oe,reduce:()=>Ei,reduceRight:()=>Er,reject:()=>li,rest:()=>Bo,restArguments:()=>L,result:()=>es,sample:()=>Aa,select:()=>kr,shuffle:()=>Ta,size:()=>Pa,some:()=>_i,sortBy:()=>Nu,sortedIndex:()=>Co,tail:()=>Bo,take:()=>Cs,tap:()=>cn,template:()=>qr,templateSettings:()=>tn,throttle:()=>Di,times:()=>Nt,toArray:()=>rs,toPath:()=>Pr,transpose:()=>D,unescape:()=>Gt,union:()=>y,uniq:()=>eo,unique:()=>eo,uniqueId:()=>ts,unzip:()=>D,values:()=>Ht,where:()=>dc,without:()=>Da,wrap:()=>vr,zip:()=>J});var i="1.13.1",o=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},s=Array.prototype,a=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,u=s.push,f=s.slice,g=a.toString,v=a.hasOwnProperty,_=typeof ArrayBuffer<"u",b=typeof DataView<"u",C=Array.isArray,S=Object.keys,j=Object.create,q=_&&ArrayBuffer.isView,N=isNaN,G=isFinite,se=!{toString:null}.propertyIsEnumerable("toString"),ue=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Y=Math.pow(2,53)-1;function L(P,z){return z=z==null?P.length-1:+z,function(){for(var ne=Math.max(arguments.length-z,0),ae=Array(ne),we=0;we<ne;we++)ae[we]=arguments[we+z];switch(z){case 0:return P.call(this,ae);case 1:return P.call(this,arguments[0],ae);case 2:return P.call(this,arguments[0],arguments[1],ae)}var me=Array(z+1);for(we=0;we<z;we++)me[we]=arguments[we];return me[z]=ae,P.apply(this,me)}}function k(P){var z=typeof P;return z==="function"||z==="object"&&!!P}function $(P){return P===null}function I(P){return P===void 0}function T(P){return P===!0||P===!1||g.call(P)==="[object Boolean]"}function O(P){return!!(P&&P.nodeType===1)}function Z(P){var z="[object "+P+"]";return function(ne){return g.call(ne)===z}}let ce=Z("String"),V=Z("Number"),xe=Z("Date"),Ee=Z("RegExp"),ze=Z("Error"),pt=Z("Symbol"),ft=Z("ArrayBuffer");var Pt=Z("Function"),be=o.document&&o.document.childNodes;typeof Int8Array!="object"&&typeof be!="function"&&(Pt=function(P){return typeof P=="function"||!1});let Te=Pt,$e=Z("Object");var de=b&&$e(new DataView(new ArrayBuffer(8))),Ae=typeof Map<"u"&&$e(new Map),Re=Z("DataView");function Je(P){return P!=null&&Te(P.getInt8)&&ft(P.buffer)}let Qe=de?Je:Re,qe=C||Z("Array");function ut(P,z){return P!=null&&v.call(P,z)}var Xt=Z("Arguments");(function(){Xt(arguments)||(Xt=function(P){return ut(P,"callee")})})();let It=Xt;function Ln(P){return!pt(P)&&G(P)&&!isNaN(parseFloat(P))}function xn(P){return V(P)&&N(P)}function Lt(P){return function(){return P}}function R(P){return function(z){var ne=P(z);return typeof ne=="number"&&ne>=0&&ne<=Y}}function K(P){return function(z){return z?.[P]}}let ee=K("byteLength"),he=R(ee);var Se=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function X(P){return q?q(P)&&!Qe(P):he(P)&&Se.test(g.call(P))}let ve=_?X:Lt(!1),fe=K("length");function yt(P){for(var z={},ne=P.length,ae=0;ae<ne;++ae)z[P[ae]]=!0;return{contains:function(we){return z[we]},push:function(we){return z[we]=!0,P.push(we)}}}function St(P,z){z=yt(z);var ne=ue.length,ae=P.constructor,we=Te(ae)&&ae.prototype||a,me="constructor";for(ut(P,me)&&!z.contains(me)&&z.push(me);ne--;)me=ue[ne],me in P&&P[me]!==we[me]&&!z.contains(me)&&z.push(me)}function Ct(P){if(!k(P))return[];if(S)return S(P);var z=[];for(var ne in P)ut(P,ne)&&z.push(ne);return se&&St(P,z),z}function Q(P){if(P==null)return!0;var z=fe(P);return typeof z=="number"&&(qe(P)||ce(P)||It(P))?z===0:fe(Ct(P))===0}function le(P,z){var ne=Ct(z),ae=ne.length;if(P==null)return!ae;for(var we=Object(P),me=0;me<ae;me++){var Fe=ne[me];if(z[Fe]!==we[Fe]||!(Fe in we))return!1}return!0}function U(P){if(P instanceof U)return P;if(!(this instanceof U))return new U(P);this._wrapped=P}U.VERSION=i,U.prototype.value=function(){return this._wrapped},U.prototype.valueOf=U.prototype.toJSON=U.prototype.value,U.prototype.toString=function(){return String(this._wrapped)};function Ne(P){return new Uint8Array(P.buffer||P,P.byteOffset||0,ee(P))}var ye="[object DataView]";function Ue(P,z,ne,ae){if(P===z)return P!==0||1/P===1/z;if(P==null||z==null)return!1;if(P!==P)return z!==z;var we=typeof P;return we!=="function"&&we!=="object"&&typeof z!="object"?!1:lt(P,z,ne,ae)}function lt(P,z,ne,ae){P instanceof U&&(P=P._wrapped),z instanceof U&&(z=z._wrapped);var we=g.call(P);if(we!==g.call(z))return!1;if(de&&we=="[object Object]"&&Qe(P)){if(!Qe(z))return!1;we=ye}switch(we){case"[object RegExp]":case"[object String]":return""+P==""+z;case"[object Number]":return+P!=+P?+z!=+z:+P==0?1/+P===1/z:+P==+z;case"[object Date]":case"[object Boolean]":return+P==+z;case"[object Symbol]":return c.valueOf.call(P)===c.valueOf.call(z);case"[object ArrayBuffer]":case ye:return lt(Ne(P),Ne(z),ne,ae)}var me=we==="[object Array]";if(!me&&ve(P)){var Fe=ee(P);if(Fe!==ee(z))return!1;if(P.buffer===z.buffer&&P.byteOffset===z.byteOffset)return!0;me=!0}if(!me){if(typeof P!="object"||typeof z!="object")return!1;var et=P.constructor,Qt=z.constructor;if(et!==Qt&&!(Te(et)&&et instanceof et&&Te(Qt)&&Qt instanceof Qt)&&"constructor"in P&&"constructor"in z)return!1}ne=ne||[],ae=ae||[];for(var Wt=ne.length;Wt--;)if(ne[Wt]===P)return ae[Wt]===z;if(ne.push(P),ae.push(z),me){if(Wt=P.length,Wt!==z.length)return!1;for(;Wt--;)if(!Ue(P[Wt],z[Wt],ne,ae))return!1}else{var Kr=Ct(P),Si;if(Wt=Kr.length,Ct(z).length!==Wt)return!1;for(;Wt--;)if(Si=Kr[Wt],!(ut(z,Si)&&Ue(P[Si],z[Si],ne,ae)))return!1}return ne.pop(),ae.pop(),!0}function at(P,z){return Ue(P,z)}function tt(P){if(!k(P))return[];var z=[];for(var ne in P)z.push(ne);return se&&St(P,z),z}function Tt(P){var z=fe(P);return function(ne){if(ne==null)return!1;var ae=tt(ne);if(fe(ae))return!1;for(var we=0;we<z;we++)if(!Te(ne[P[we]]))return!1;return P!==W||!Te(ne[qt])}}var qt="forEach",en="has",Jt=["clear","delete"],Rn=["get",en,"set"],ar=Jt.concat(qt,Rn),W=Jt.concat(Rn),oe=["add"].concat(Jt,qt,en);let ge=Ae?Tt(ar):Z("Map"),je=Ae?Tt(W):Z("WeakMap"),nt=Ae?Tt(oe):Z("Set"),xt=Z("WeakSet");function Ht(P){for(var z=Ct(P),ne=z.length,ae=Array(ne),we=0;we<ne;we++)ae[we]=P[z[we]];return ae}function fn(P){for(var z=Ct(P),ne=z.length,ae=Array(ne),we=0;we<ne;we++)ae[we]=[z[we],P[z[we]]];return ae}function Pn(P){for(var z={},ne=Ct(P),ae=0,we=ne.length;ae<we;ae++)z[P[ne[ae]]]=ne[ae];return z}function In(P){var z=[];for(var ne in P)Te(P[ne])&&z.push(ne);return z.sort()}function zr(P,z){return function(ne){var ae=arguments.length;if(z&&(ne=Object(ne)),ae<2||ne==null)return ne;for(var we=1;we<ae;we++)for(var me=arguments[we],Fe=P(me),et=Fe.length,Qt=0;Qt<et;Qt++){var Wt=Fe[Qt];(!z||ne[Wt]===void 0)&&(ne[Wt]=me[Wt])}return ne}}let Cr=zr(tt),$n=zr(Ct),$r=zr(tt,!0);function Nn(){return function(){}}function Wn(P){if(!k(P))return{};if(j)return j(P);var z=Nn();z.prototype=P;var ne=new z;return z.prototype=null,ne}function Vn(P,z){var ne=Wn(P);return z&&$n(ne,z),ne}function Ci(P){return k(P)?qe(P)?P.slice():Cr({},P):P}function cn(P,z){return z(P),P}function Pr(P){return qe(P)?P:[P]}U.toPath=Pr;function Dt(P){return U.toPath(P)}function Ir(P,z){for(var ne=z.length,ae=0;ae<ne;ae++){if(P==null)return;P=P[z[ae]]}return ne?P:void 0}function Xn(P,z,ne){var ae=Ir(P,Dt(z));return I(ae)?ne:ae}function Wr(P,z){z=Dt(z);for(var ne=z.length,ae=0;ae<ne;ae++){var we=z[ae];if(!ut(P,we))return!1;P=P[we]}return!!ne}function gn(P){return P}function ht(P){return P=$n({},P),function(z){return le(z,P)}}function pr(P){return P=Dt(P),function(z){return Ir(z,P)}}function oi(P,z,ne){if(z===void 0)return P;switch(ne??3){case 1:return function(ae){return P.call(z,ae)};case 3:return function(ae,we,me){return P.call(z,ae,we,me)};case 4:return function(ae,we,me,Fe){return P.call(z,ae,we,me,Fe)}}return function(){return P.apply(z,arguments)}}function Qn(P,z,ne){return P==null?gn:Te(P)?oi(P,z,ne):k(P)&&!qe(P)?ht(P):pr(P)}function zt(P,z){return Qn(P,z,1/0)}U.iteratee=zt;function En(P,z,ne){return U.iteratee!==zt?U.iteratee(P,z):Qn(P,z,ne)}function si(P,z,ne){z=En(z,ne);for(var ae=Ct(P),we=ae.length,me={},Fe=0;Fe<we;Fe++){var et=ae[Fe];me[et]=z(P[et],et,P)}return me}function Dr(){}function Be(P){return P==null?Dr:function(z){return Xn(P,z)}}function Nt(P,z,ne){var ae=Array(Math.max(0,P));z=oi(z,ne,1);for(var we=0;we<P;we++)ae[we]=z(we);return ae}function yi(P,z){return z==null&&(z=P,P=0),P+Math.floor(Math.random()*(z-P+1))}let H=Date.now||function(){return new Date().getTime()};function re(P){var z=function(me){return P[me]},ne="(?:"+Ct(P).join("|")+")",ae=RegExp(ne),we=RegExp(ne,"g");return function(me){return me=me==null?"":""+me,ae.test(me)?me.replace(we,z):me}}let De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},He=re(De),Ge=Pn(De),Gt=re(Ge),tn=U.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Sn=/(.)^/,An={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ys=/\\|'|\r|\n|\u2028|\u2029/g;function Qi(P){return"\\"+An[P]}var gr=/^\s*(\w|\$)+\s*$/;function qr(P,z,ne){!z&&ne&&(z=ne),z=$r({},z,U.templateSettings);var ae=RegExp([(z.escape||Sn).source,(z.interpolate||Sn).source,(z.evaluate||Sn).source].join("|")+"|$","g"),we=0,me="__p+='";P.replace(ae,function(Wt,Kr,Si,Qg,Xf){return me+=P.slice(we,Xf).replace(ys,Qi),we=Xf+Wt.length,Kr?me+=`'+
((__t=(`+Kr+`))==null?'':_.escape(__t))+
'`:Si?me+=`'+
((__t=(`+Si+`))==null?'':__t)+
'`:Qg&&(me+=`';
`+Qg+`
__p+='`),Wt}),me+=`';
`;var Fe=z.variable;if(Fe){if(!gr.test(Fe))throw new Error("variable is not a bare identifier: "+Fe)}else me=`with(obj||{}){
`+me+`}
`,Fe="obj";me=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+me+`return __p;
`;var et;try{et=new Function(Fe,"_",me)}catch(Wt){throw Wt.source=me,Wt}var Qt=function(Wt){return et.call(this,Wt,U)};return Qt.source="function("+Fe+`){
`+me+"}",Qt}function es(P,z,ne){z=Dt(z);var ae=z.length;if(!ae)return Te(ne)?ne.call(P):ne;for(var we=0;we<ae;we++){var me=P?.[z[we]];me===void 0&&(me=ne,we=ae),P=Te(me)?me.call(P):me}return P}var jo=0;function ts(P){var z=++jo+"";return P?P+z:z}function Tn(P){var z=U(P);return z._chain=!0,z}function Fo(P,z,ne,ae,we){if(!(ae instanceof z))return P.apply(ne,we);var me=Wn(P.prototype),Fe=P.apply(me,we);return k(Fe)?Fe:me}var Yi=L(function(P,z){var ne=Yi.placeholder,ae=function(){for(var we=0,me=z.length,Fe=Array(me),et=0;et<me;et++)Fe[et]=z[et]===ne?arguments[we++]:z[et];for(;we<arguments.length;)Fe.push(arguments[we++]);return Fo(P,ae,this,this,Fe)};return ae});Yi.placeholder=U;let xi=Yi,_s=L(function(P,z,ne){if(!Te(P))throw new TypeError("Bind must be called on a function");var ae=L(function(we){return Fo(P,ae,z,this,ne.concat(we))});return ae}),lr=R(fe);function xr(P,z,ne,ae){if(ae=ae||[],!z&&z!==0)z=1/0;else if(z<=0)return ae.concat(P);for(var we=ae.length,me=0,Fe=fe(P);me<Fe;me++){var et=P[me];if(lr(et)&&(qe(et)||It(et)))if(z>1)xr(et,z-1,ne,ae),we=ae.length;else for(var Qt=0,Wt=et.length;Qt<Wt;)ae[we++]=et[Qt++];else ne||(ae[we++]=et)}return ae}let $s=L(function(P,z){z=xr(z,!1,!1);var ne=z.length;if(ne<1)throw new Error("bindAll must be passed function names");for(;ne--;){var ae=z[ne];P[ae]=_s(P[ae],P)}return P});function Ea(P,z){var ne=function(ae){var we=ne.cache,me=""+(z?z.apply(this,arguments):ae);return ut(we,me)||(we[me]=P.apply(this,arguments)),we[me]};return ne.cache={},ne}let Lo=L(function(P,z,ne){return setTimeout(function(){return P.apply(null,ne)},z)}),mr=xi(Lo,U,1);function Di(P,z,ne){var ae,we,me,Fe,et=0;ne||(ne={});var Qt=function(){et=ne.leading===!1?0:H(),ae=null,Fe=P.apply(we,me),ae||(we=me=null)},Wt=function(){var Kr=H();!et&&ne.leading===!1&&(et=Kr);var Si=z-(Kr-et);return we=this,me=arguments,Si<=0||Si>z?(ae&&(clearTimeout(ae),ae=null),et=Kr,Fe=P.apply(we,me),ae||(we=me=null)):!ae&&ne.trailing!==!1&&(ae=setTimeout(Qt,Si)),Fe};return Wt.cancel=function(){clearTimeout(ae),et=0,ae=we=me=null},Wt}function Ji(P,z,ne){var ae,we,me,Fe,et,Qt=function(){var Kr=H()-we;z>Kr?ae=setTimeout(Qt,z-Kr):(ae=null,ne||(Fe=P.apply(et,me)),ae||(me=et=null))},Wt=L(function(Kr){return et=this,me=Kr,we=H(),ae||(ae=setTimeout(Qt,z),ne&&(Fe=P.apply(et,me))),Fe});return Wt.cancel=function(){clearTimeout(ae),ae=me=et=null},Wt}function vr(P,z){return xi(z,P)}function ws(P){return function(){return!P.apply(this,arguments)}}function Gr(){var P=arguments,z=P.length-1;return function(){for(var ne=z,ae=P[z].apply(this,arguments);ne--;)ae=P[ne].call(this,ae);return ae}}function bo(P,z){return function(){if(--P<1)return z.apply(this,arguments)}}function Ws(P,z){var ne;return function(){return--P>0&&(ne=z.apply(this,arguments)),P<=1&&(z=null),ne}}let Zi=xi(Ws,2);function yr(P,z,ne){z=En(z,ne);for(var ae=Ct(P),we,me=0,Fe=ae.length;me<Fe;me++)if(we=ae[me],z(P[we],we,P))return we}function bs(P){return function(z,ne,ae){ne=En(ne,ae);for(var we=fe(z),me=P>0?0:we-1;me>=0&&me<we;me+=P)if(ne(z[me],me,z))return me;return-1}}let Vo=bs(1),Xi=bs(-1);function Co(P,z,ne,ae){ne=En(ne,ae,1);for(var we=ne(z),me=0,Fe=fe(P);me<Fe;){var et=Math.floor((me+Fe)/2);ne(P[et])<we?me=et+1:Fe=et}return me}function qs(P,z,ne){return function(ae,we,me){var Fe=0,et=fe(ae);if(typeof me=="number")P>0?Fe=me>=0?me:Math.max(me+et,Fe):et=me>=0?Math.min(me+1,et):me+et+1;else if(ne&&me&&et)return me=ne(ae,we),ae[me]===we?me:-1;if(we!==we)return me=z(f.call(ae,Fe,et),xn),me>=0?me+Fe:-1;for(me=P>0?Fe:et-1;me>=0&&me<et;me+=P)if(ae[me]===we)return me;return-1}}let ai=qs(1,Vo,Co),At=qs(-1,Xi);function Ot(P,z,ne){var ae=lr(P)?Vo:yr,we=ae(P,z,ne);if(we!==void 0&&we!==-1)return P[we]}function $t(P,z){return Ot(P,ht(z))}function dt(P,z,ne){z=oi(z,ne);var ae,we;if(lr(P))for(ae=0,we=P.length;ae<we;ae++)z(P[ae],ae,P);else{var me=Ct(P);for(ae=0,we=me.length;ae<we;ae++)z(P[me[ae]],me[ae],P)}return P}function er(P,z,ne){z=En(z,ne);for(var ae=!lr(P)&&Ct(P),we=(ae||P).length,me=Array(we),Fe=0;Fe<we;Fe++){var et=ae?ae[Fe]:Fe;me[Fe]=z(P[et],et,P)}return me}function ki(P){var z=function(ne,ae,we,me){var Fe=!lr(ne)&&Ct(ne),et=(Fe||ne).length,Qt=P>0?0:et-1;for(me||(we=ne[Fe?Fe[Qt]:Qt],Qt+=P);Qt>=0&&Qt<et;Qt+=P){var Wt=Fe?Fe[Qt]:Qt;we=ae(we,ne[Wt],Wt,ne)}return we};return function(ne,ae,we,me){var Fe=arguments.length>=3;return z(ne,oi(ae,me,4),we,Fe)}}let Ei=ki(1),Er=ki(-1);function kr(P,z,ne){var ae=[];return z=En(z,ne),dt(P,function(we,me,Fe){z(we,me,Fe)&&ae.push(we)}),ae}function li(P,z,ne){return kr(P,ws(En(z)),ne)}function xo(P,z,ne){z=En(z,ne);for(var ae=!lr(P)&&Ct(P),we=(ae||P).length,me=0;me<we;me++){var Fe=ae?ae[me]:me;if(!z(P[Fe],Fe,P))return!1}return!0}function _i(P,z,ne){z=En(z,ne);for(var ae=!lr(P)&&Ct(P),we=(ae||P).length,me=0;me<we;me++){var Fe=ae?ae[me]:me;if(z(P[Fe],Fe,P))return!0}return!1}function Sr(P,z,ne,ae){return lr(P)||(P=Ht(P)),(typeof ne!="number"||ae)&&(ne=0),ai(P,z,ne)>=0}let Ru=L(function(P,z,ne){var ae,we;return Te(z)?we=z:(z=Dt(z),ae=z.slice(0,-1),z=z[z.length-1]),er(P,function(me){var Fe=we;if(!Fe){if(ae&&ae.length&&(me=Ir(me,ae)),me==null)return;Fe=me[z]}return Fe==null?Fe:Fe.apply(me,ne)})});function ns(P,z){return er(P,pr(z))}function dc(P,z){return kr(P,ht(z))}function Sa(P,z,ne){var ae=-1/0,we=-1/0,me,Fe;if(z==null||typeof z=="number"&&typeof P[0]!="object"&&P!=null){P=lr(P)?P:Ht(P);for(var et=0,Qt=P.length;et<Qt;et++)me=P[et],me!=null&&me>ae&&(ae=me)}else z=En(z,ne),dt(P,function(Wt,Kr,Si){Fe=z(Wt,Kr,Si),(Fe>we||Fe===-1/0&&ae===-1/0)&&(ae=Wt,we=Fe)});return ae}function Gs(P,z,ne){var ae=1/0,we=1/0,me,Fe;if(z==null||typeof z=="number"&&typeof P[0]!="object"&&P!=null){P=lr(P)?P:Ht(P);for(var et=0,Qt=P.length;et<Qt;et++)me=P[et],me!=null&&me<ae&&(ae=me)}else z=En(z,ne),dt(P,function(Wt,Kr,Si){Fe=z(Wt,Kr,Si),(Fe<we||Fe===1/0&&ae===1/0)&&(ae=Wt,we=Fe)});return ae}function Aa(P,z,ne){if(z==null||ne)return lr(P)||(P=Ht(P)),P[yi(P.length-1)];var ae=lr(P)?Ci(P):Ht(P),we=fe(ae);z=Math.max(Math.min(z,we),0);for(var me=we-1,Fe=0;Fe<z;Fe++){var et=yi(Fe,me),Qt=ae[Fe];ae[Fe]=ae[et],ae[et]=Qt}return ae.slice(0,z)}function Ta(P){return Aa(P,1/0)}function Nu(P,z,ne){var ae=0;return z=En(z,ne),ns(er(P,function(we,me,Fe){return{value:we,index:ae++,criteria:z(we,me,Fe)}}).sort(function(we,me){var Fe=we.criteria,et=me.criteria;if(Fe!==et){if(Fe>et||Fe===void 0)return 1;if(Fe<et||et===void 0)return-1}return we.index-me.index}),"value")}function Oa(P,z){return function(ne,ae,we){var me=z?[[],[]]:{};return ae=En(ae,we),dt(ne,function(Fe,et){var Qt=ae(Fe,et,ne);P(me,Fe,Qt)}),me}}let Ks=Oa(function(P,z,ne){ut(P,ne)?P[ne].push(z):P[ne]=[z]}),cl=Oa(function(P,z,ne){P[ne]=z}),fc=Oa(function(P,z,ne){ut(P,ne)?P[ne]++:P[ne]=1}),Ma=Oa(function(P,z,ne){P[ne?0:1].push(z)},!0);var Qs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function rs(P){return P?qe(P)?f.call(P):ce(P)?P.match(Qs):lr(P)?er(P,gn):Ht(P):[]}function Pa(P){return P==null?0:lr(P)?P.length:Ct(P).length}function ju(P,z,ne){return z in ne}let ul=L(function(P,z){var ne={},ae=z[0];if(P==null)return ne;Te(ae)?(z.length>1&&(ae=oi(ae,z[1])),z=tt(P)):(ae=ju,z=xr(z,!1,!1),P=Object(P));for(var we=0,me=z.length;we<me;we++){var Fe=z[we],et=P[Fe];ae(et,Fe,P)&&(ne[Fe]=et)}return ne}),Ri=L(function(P,z){var ne=z[0],ae;return Te(ne)?(ne=ws(ne),z.length>1&&(ae=z[1])):(z=er(xr(z,!1,!1),String),ne=function(we,me){return!Sr(z,me)}),ul(P,ne,ae)});function Yn(P,z,ne){return f.call(P,0,Math.max(0,P.length-(z==null||ne?1:z)))}function Cs(P,z,ne){return P==null||P.length<1?z==null||ne?void 0:[]:z==null||ne?P[0]:Yn(P,P.length-z)}function Bo(P,z,ne){return f.call(P,z==null||ne?1:z)}function xs(P,z,ne){return P==null||P.length<1?z==null||ne?void 0:[]:z==null||ne?P[P.length-1]:Bo(P,Math.max(0,P.length-z))}function Ia(P){return kr(P,Boolean)}function ci(P,z){return xr(P,z,!1)}let dl=L(function(P,z){return z=xr(z,!0,!0),kr(P,function(ne){return!Sr(z,ne)})}),Da=L(function(P,z){return dl(P,z)});function eo(P,z,ne,ae){T(z)||(ae=ne,ne=z,z=!1),ne!=null&&(ne=En(ne,ae));for(var we=[],me=[],Fe=0,et=fe(P);Fe<et;Fe++){var Qt=P[Fe],Wt=ne?ne(Qt,Fe,P):Qt;z&&!ne?((!Fe||me!==Wt)&&we.push(Qt),me=Wt):ne?Sr(me,Wt)||(me.push(Wt),we.push(Qt)):Sr(we,Qt)||we.push(Qt)}return we}let y=L(function(P){return eo(xr(P,!0,!0))});function E(P){for(var z=[],ne=arguments.length,ae=0,we=fe(P);ae<we;ae++){var me=P[ae];if(!Sr(z,me)){var Fe;for(Fe=1;Fe<ne&&Sr(arguments[Fe],me);Fe++);Fe===ne&&z.push(me)}}return z}function D(P){for(var z=P&&Sa(P,fe).length||0,ne=Array(z),ae=0;ae<z;ae++)ne[ae]=ns(P,ae);return ne}let J=L(D);function Ce(P,z){for(var ne={},ae=0,we=fe(P);ae<we;ae++)z?ne[P[ae]]=z[ae]:ne[P[ae][0]]=P[ae][1];return ne}function Oe(P,z,ne){z==null&&(z=P||0,P=0),ne||(ne=z<P?-1:1);for(var ae=Math.max(Math.ceil((z-P)/ne),0),we=Array(ae),me=0;me<ae;me++,P+=ne)we[me]=P;return we}function Ze(P,z){if(z==null||z<1)return[];for(var ne=[],ae=0,we=P.length;ae<we;)ne.push(f.call(P,ae,ae+=z));return ne}function mn(P,z){return P._chain?U(z).chain():z}function tr(P){return dt(In(P),function(z){var ne=U[z]=P[z];U.prototype[z]=function(){var ae=[this._wrapped];return u.apply(ae,arguments),mn(this,ne.apply(U,ae))}}),U}dt(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var z=s[P];U.prototype[P]=function(){var ne=this._wrapped;return ne!=null&&(z.apply(ne,arguments),(P==="shift"||P==="splice")&&ne.length===0&&delete ne[0]),mn(this,ne)}}),dt(["concat","join","slice"],function(P){var z=s[P];U.prototype[P]=function(){var ne=this._wrapped;return ne!=null&&(ne=z.apply(ne,arguments)),mn(this,ne)}});let hn=U;var Dn=tr(n);Dn._=Dn;let Jn=Dn}},fN={};function kn(r){var t=fN[r];if(t!==void 0)return t.exports;var e=fN[r]={exports:{}};return X8[r].call(e.exports,e,e.exports,kn),e.exports}kn.n=r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return kn.d(t,{a:t}),t};kn.d=(r,t)=>{for(var e in t)kn.o(t,e)&&!kn.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};kn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();kn.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);kn.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var e0={};kn.d(e0,{Ay:()=>Gte,I0:()=>pL,nu:()=>hL});var B=kn(523),Le=kn(342);function Io(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=r.raw;return n.reduce(function(i,o,s){var a=t[s-1],c=n[s-1];return Array.isArray(a)?a=a.join(""):c&&c.slice(-1)==="$"?i=i.slice(0,-1):a=(0,Le.escape)(a),i+a+o})}var eq={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1},hN=eq,PS=kn(391),tq=kn.n(PS),dr=kn(694),nq=function(r){var t=r.$;if(t&&t.prototype&&t.prototype.constructor.name!=="jQuery"){var e=t.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var o=this.get(0);return o&&o.focus(),this},e.bind=function(o,s){return this.on(o,s)},e.unbind=function(o,s){if((0,B.isObject)(o)){for(var a in o)o.hasOwnProperty(a)&&this.off(a,o[a]);return this}else return this.off(o,s)},e.click=function(o){return o?this.on("click",o):this.trigger("click")},e.change=function(o){return o?this.on("change",o):this.trigger("change")},e.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},e.delegate=function(o,s,a,c){return c||(c=a),this.on(s,o,function(u){u.data=a,c(u)})},e.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageXOffset:o.scrollLeft||0},e.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var s=o instanceof Window?o:null;return s?s.pageYOffset:o.scrollTop||0};var n=t.prototype.offset;e.offset=function(o){var s,a;return o&&(s=o.top,a=o.left),typeof s<"u"&&this.css("top","".concat(s,"px")),typeof a<"u"&&this.css("left","".concat(a,"px")),n.call(this)},t.map=function(o,s){for(var a=[],c=0;c<o.length;c++)a.push(s(o[c],c));return a};var i=Array.prototype.indexOf;t.inArray=function(o,s,a){return s==null?-1:i.call(s,o,a)},t.Event=function(o,s){if(!(this instanceof t.Event))return new t.Event(o,s);this.type=o,this.isDefaultPrevented=function(){return!1}}}},rt=kn(268),Dj=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rq=function(r){Dj(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(rt.Kx),iq=function(r){Dj(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getByComponent=function(e){var n=this;return this.filter(function(i){return n.getComponent(i)===e})[0]},t.prototype.addComponent=function(e,n){var i=this,o=((0,B.isArray)(e)?e:[e]).filter(function(s){return!i.hasComponent(s)}).map(function(s){return new rq({component:s})})[0];return this.push(o,n)},t.prototype.getComponent=function(e){return e.get("component")},t.prototype.hasComponent=function(e){var n=this.getByComponent(e);return n&&this.contains(n)},t.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},t.prototype.allComponents=function(){var e=this;return this.map(function(n){return e.getComponent(n)}).filter(function(n){return n})},t.prototype.removeComponent=function(e,n){var i=this,o=((0,B.isArray)(e)?e:[e]).map(function(s){return i.getByComponent(s)});return this.remove(o,n)},t}(rt.pM),oq=iq,sq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IS=function(){return IS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},IS.apply(this,arguments)},aq=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},kj=function(){function r(t,e,n){this.debounced=[],this.collections=[],this.cls=[],this._em=t,this._name=e;var i=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,B.isUndefined)(t.config[i])?t.config[this.name]:t.config[i],s=o===!0?{}:o||{};s.pStylePrefix=t.config.pStylePrefix||"",!(0,B.isUndefined)(o)&&!o&&(s._disable=1),s.em=t,this._config=(0,Le.deepMerge)(n||{},s)}return Object.defineProperty(r.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),r.prototype.render=function(t){},r.prototype.postLoad=function(t){},Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){return t?this.config[t]:this.config},r.prototype.__logWarn=function(t,e){e===void 0&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(t),e)},r.prototype.destroy=function(){this.__destroy()},r.prototype.__destroy=function(){var t,e,n;(t=this.view)===null||t===void 0||t.remove(),(e=this.state)===null||e===void 0||e.stopListening(),(n=this.state)===null||n===void 0||n.clear(),this.debounced.forEach(function(i){return i.cancel()}),this.collections.forEach(function(i){i.stopListening(),i.reset()})},r.prototype.__appendTo=function(){var t=this.getConfig().appendTo;if(t){var e=(0,B.isElement)(t)?t:document.querySelector(t);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},r}(),ko=kj,zl=function(r){sq(t,r);function t(e,n,i,o,s,a){a===void 0&&(a={});var c=r.call(this,e,n,s)||this;return c.cls=[],c.private=!1,c.all=i,c.events=o,!a.skipListen&&c.__initListen(),c}return t.prototype.postLoad=function(e){},t.prototype.render=function(e){},t.prototype.getProjectData=function(e){var n={},i=this.storageKey;return i&&(n[i]=e||this.getAll()),n},t.prototype.loadProjectData=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.all,o=n.onResult,s=n.reset,a=this.storageKey,c={action:"load"},u=i||this.all,f=e[a];if(typeof f=="string")try{f=JSON.parse(f)}catch{this.__logWarn("Data parsing failed",{input:f})}return s&&f&&u.reset(void 0,c),o?f&&o(f,c):f&&(0,Le.isDef)(f.length)&&u.reset(f,c),f},t.prototype.clear=function(e){e===void 0&&(e={});var n=this.all;return n&&n.reset(void 0,e),this},t.prototype.getAll=function(){return aq([],this.all.models,!0)},t.prototype.getAllMap=function(){return this.getAll().reduce(function(e,n){return e[n.get(n.idAttribute)]=n,e},{})},t.prototype.__initListen=function(e){e===void 0&&(e={});var n=this,i=n.all,o=n.em,s=n.events;i&&o&&i.on("add",function(a,c,u){return o.trigger(s.add,a,u)}).on("remove",function(a,c,u){return o.trigger(s.remove,a,u)}).on("change",function(a,c){return o.trigger(s.update,a,a.changedAttributes(),c)}).on("all",this.__catchAllEvent,this),this.cls=[i].concat(e.collections||[]),(e.propagate||[]).forEach(function(a){var c=a.entity,u=a.event;c.on("all",function(f,g,v,_){var b=_||v,C=IS({event:f},b);[o,i].map(function(S){return S.trigger(u,g,C)})})})},t.prototype.__remove=function(e,n){var i=this;n===void 0&&(n={});var o=this.em,s=(0,B.isString)(e)?this.get(e):e,a=function(){return s&&i.all.remove(s,n),s};return!n.silent&&o?.trigger(this.events.removeBefore,s,a,n),!n.abort&&a()},t.prototype.__catchAllEvent=function(e,n,i,o){var s=this,a=s.em,c=s.events,u=o||i;a&&c.all&&a.trigger(c.all,{event:e,model:n,options:u}),this.__onAllEvent()},t.prototype.__appendTo=function(e){var n=this.config.appendTo;if(n){var i=(0,B.isElement)(n)?n:document.querySelector(n);if(!i)return this.__logWarn('"appendTo" element not found');i.appendChild(this.render(e))}},t.prototype.__onAllEvent=function(){},t.prototype._createId=function(e){e===void 0&&(e=16);var n=this.getAll(),i=n.length+e,o=this.getAllMap(),s;do s=(0,Le.createId)(i);while(o[s]);return s},t.prototype.__listenAdd=function(e,n){var i=this;e.on("add",function(o,s,a){return i.em.trigger(n,o,a)})},t.prototype.__listenRemove=function(e,n){var i=this;e.on("remove",function(o,s,a){return i.em.trigger(n,o,a)})},t.prototype.__listenUpdate=function(e,n){var i=this;e.on("change",function(o,s){return i.em.trigger(n,o,o.changedAttributes(),s)})},t.prototype.__destroy=function(){var e;this.cls.forEach(function(n){n.stopListening(),n.reset()}),(e=this.view)===null||e===void 0||e.remove(),this.view=void 0},t}(kj),lq={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0},cq=lq,Hl=kn(578),uq={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]},dq=uq,fq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hq=function(r){fq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},t.prototype.initialize=function(){var e=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var n=["width","height","widthMedia"];n.forEach(function(i){return e.checkUnit(i)})},t.prototype.checkUnit=function(e){var n=this.get(e)||"",i=(parseFloat(n)||0).toString()===n.toString();i&&this.set(e,"".concat(n,"px"))},t.prototype.getName=function(){return this.get("name")||this.get("id")},t.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},t}(rt.Kx),Rj=hq,pq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nj=function(r){pq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(rt.pM),pN=Nj;Nj.prototype.model=Rj;var gq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mq=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},vq=function(r){gq(t,r);function t(e){var n=r.call(this,e)||this;return n.config=e.config||{},n.em=n.config.em,n.ppfx=n.config.pStylePrefix||"",n.listenTo(n.em,"change:device",n.updateSelect),n}return t.prototype.template=function(e){var n=e.ppfx,i=e.label;return Io(gN||(gN=mq([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),n,i,n,n,n,n,n,n,n)},t.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},t.prototype.startAdd=function(){},t.prototype.updateDevice=function(){var e=this.em;if(e){var n=this.devicesEl;e.set("device",n?n.val():"")}},t.prototype.updateSelect=function(){var e=this,n=e.em,i=e.devicesEl;if(n&&n.getDeviceModel&&i){var o=n.getDeviceModel();i.val(o?o.get("id"):"")}},t.prototype.getOptions=function(){var e=this,n=e.collection,i=e.em,o="";return n.forEach(function(s){var a=s.attributes,c=a.name,u=a.id,f=i&&i.t&&i.t("deviceManager.devices.".concat(u))||c;o+='<option value="'.concat(u||c,'">').concat(f,"</option>")}),o},t.prototype.render=function(){var e=this,n=e.em,i=e.ppfx,o=e.$el,s=e.el,a=n&&n.t&&n.t("deviceManager.device");return o.html(this.template({ppfx:i,label:a})),this.devicesEl=o.find(".".concat(i,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(n.get("device")),s.className="".concat(i,"devices-c"),this},t}(rt.Ss),yq=vq,gN,_q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fp=function(){return Fp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Fp.apply(this,arguments)},jj="device",t0="".concat(jj,":"),Fj="".concat(t0,"select"),Rpe="".concat(Fj,":before"),Lj="".concat(t0,"update"),Vj="".concat(t0,"add"),Npe="".concat(Vj,":before"),Bj="".concat(t0,"remove"),wq="".concat(Bj,":before"),bq="change:device",Cq={all:jj,select:Fj,update:Lj,add:Vj,remove:Bj,removeBefore:wq},xq=function(r){_q(t,r);function t(e){var n,i=r.call(this,e,"DeviceManager",new pN,Cq,dq)||this;return i.Device=Rj,i.Devices=pN,i.storageKey="",i.devices=i.all,(n=i.config.devices)===null||n===void 0||n.forEach(function(o){return i.add(o,{silent:!0})}),i.select(i.config.default||i.devices.at(0)),e.on(bq,i._onSelect,i),i}return t.prototype._onSelect=function(e,n,i){var o=this,s=o.em,a=o.events,c=e.previous("device"),u=this.get(n),f=a.select;s.trigger(f,u,this.get(c)),this.__catchAllEvent(f,u,i)},t.prototype.add=function(e,n){n===void 0&&(n={});var i,o=n;if((0,B.isString)(e)){var s=n;o=arguments[2]||{},i=Fp(Fp({},o),{id:e,name:o.name||e,width:s})}else i=e;return i.id||(i.id=i.name||this._createId()),this.devices.add(i,o)},t.prototype.get=function(e){var n=this.getAll().filter(function(i){return i.get("name")===e})[0];return n||this.devices.get(e)||null},t.prototype.remove=function(e,n){return n===void 0&&(n={}),this.__remove(e,n)},t.prototype.getDevices=function(){return this.devices.models},t.prototype.select=function(e,n){n===void 0&&(n={});var i=(0,B.isString)(e)?this.get(e):e;return i&&this.em.set("device",i.get("id"),n),this},t.prototype.getSelected=function(){return this.get(this.em.get("device"))},t.prototype.getAll=function(){return this.devices},t.prototype.render=function(){var e,n=this.em;return(e=this.view)===null||e===void 0||e.remove(),this.view=new yq({collection:this.devices,config:Fp({em:n},this.config)}),this.view.render().el},t.prototype.destroy=function(){this.__destroy()},t}(zl),Eq=xq,Uj=function(r){return r.add="page:add",r.addBefore="page:add:before",r.remove="page:remove",r.removeBefore="page:remove:before",r.select="page:select",r.selectBefore="page:select:before",r.update="page:update",r.all="page",r}(Uj||{}),DS=Uj,Sq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Aq=function(r){Sq(t,r);function t(e,n,i){return r.call(this,n,{module:e,modelConstructor:i})||this}return t.prototype.add=function(e,n){var i=this,o,s=(0,B.isArray)(e)?e:(0,B.isUndefined)(e)?void 0:[e];return s=(o=s?.map(function(a){return a instanceof i.newModel?a:new i.newModel(i.module,a)}))!==null&&o!==void 0?o:[void 0],r.prototype.add.call(this,(0,B.isArray)(e)?s:s[0],n)},t.prototype.preinitialize=function(e,n){this.newModel=n.modelConstructor,this.module=n.module},t}(rt.pM),n0=Aq,Tq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kS=function(){return kS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},kS.apply(this,arguments)},mN=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},vN="__aw",yN="__ah",_N=function(r,t){var e,n=r.get(t),i=(e=r.view)===null||e===void 0?void 0:e.el[t==="width"?"offsetWidth":"offsetHeight"];return(0,B.isNumber)(n)?n:(0,B.isString)(n)&&n.endsWith("px")?parseFloat(n):i||0},Oq=function(r){Tq(t,r);function t(e,n){var i=r.call(this,e,n)||this,o=i.em,s=i.attributes,a=s.styles,c=s.component,u=o.Components,f=u.getConfig(),g=o.Css.getAll(),v={},_={em:o,config:f,frame:i,idMap:v};if(!(0,Le.isComponent)(c)){var b=(0,Le.isObject)(c)?c:{components:c};!b.type&&(b.type="wrapper");var C=u.getType("wrapper").model;i.set("component",new C(b,_))}if(!a)i.set("styles",g);else if(!(0,Le.isObject)(a)){var S=a;(0,B.keys)(v).length&&(S=(0,B.isString)(S)?o.Parser.parseCss(S):S,o.Css.checkId(S,{idMap:v})),g.add(S),i.set("styles",g)}return!n.width&&i.set(vN,1),!n.height&&i.set(yN,1),!i.id&&i.set("id",(0,Le.createId)()),i}return t.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(t.prototype,"width",{get:function(){return _N(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return _N(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=this.refFrame;return e?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),t.prototype.initRefs=function(){var e=this.refFrame;if((0,B.isString)(e)){var n=this.module.framesById[e];n&&this.set({refFrame:n},{silent:!0})}},t.prototype.getBoxRect=function(){var e=this.attributes,n=e.x,i=e.y,o=this,s=o.width,a=o.height;return{x:n,y:i,width:s,height:a}},t.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},t.prototype.changesUp=function(e){e===void 0&&(e={}),!(e.temporary||e.noCount||e.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},t.prototype.getComponent=function(){return this.get("component")},t.prototype.getStyles=function(){return this.get("styles")},t.prototype.disable=function(){this.trigger("disable")},t.prototype.remove=function(){var e;(e=this.view)===null||e===void 0||e.remove(),this.view=void 0;var n=this.collection;return n&&n.remove(this)},t.prototype.getHead=function(){return mN([],this.head,!0)},t.prototype.setHead=function(e){return this.set("head",mN([],e,!0))},t.prototype.addHeadItem=function(e){this.head.push(e)},t.prototype.getHeadByAttr=function(e,n,i){return this.head.filter(function(o){return o.attributes&&o.attributes[e]==n&&(!i||i===o.tag)})[0]},t.prototype.removeHeadByAttr=function(e,n,i){var o=this.getHeadByAttr(e,n,i),s=this.head.indexOf(o);s>=0&&this.head.splice(s,1)},t.prototype.addLink=function(e){var n="link";!this.getHeadByAttr("href",e,n)&&this.addHeadItem({tag:n,attributes:{href:e,rel:"stylesheet"}})},t.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},t.prototype.addScript=function(e){var n="script";!this.getHeadByAttr("src",e,n)&&this.addHeadItem({tag:n,attributes:{src:e}})},t.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},t.prototype.getPage=function(){var e;return(e=this.collection)===null||e===void 0?void 0:e.page},t.prototype._emitUpdated=function(e){e===void 0&&(e={}),this.em.trigger("frame:updated",kS({frame:this},e))},t.prototype.hasAutoHeight=function(){var e=this.attributes.height;return!!(e==="auto"||this.config.infiniteCanvas)},t.prototype.toJSON=function(e){e===void 0&&(e={});var n=Hl.A.prototype.toJSON.call(this,e),i=(0,B.result)(this,"defaults");return e.fromUndo&&delete n.component,delete n.styles,delete n.changesCount,n[vN]&&delete n.width,n[yN]&&delete n.height,n.refFrame&&(n.refFrame=n.refFrame.id,delete n.component),(0,B.forEach)(n,function(o,s){s.indexOf("_")===0&&delete n[s]}),(0,B.forEach)(i,function(o,s){n[s]===o&&delete n[s]}),(0,B.forEach)(["attributes","head"],function(o){(0,B.isEmpty)(n[o])&&delete n[o]}),n},t}(Hl.A),Hj=Oq,Mq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pq=function(r){Mq(t,r);function t(e,n){n===void 0&&(n=[]);var i=r.call(this,e,n,Hj)||this;return i.loadedItems=0,i.itemsToLoad=0,(0,B.bindAll)(i,"itemLoaded"),i.on("add",i.onAdd),i.on("reset",i.onReset),i.on("remove",i.onRemove),i.forEach(function(o){return i.onAdd(o)}),i}return t.prototype.onAdd=function(e){this.module.framesById[e.id]=e},t.prototype.onReset=function(e,n){var i=this,o=n?.previousModels||[];o.map(function(s){return i.onRemove(s)})},t.prototype.onRemove=function(e){e.onRemove(),delete this.module.framesById[e.id]},t.prototype.initRefs=function(){this.forEach(function(e){return e.initRefs()})},t.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},t.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},t.prototype.listenToLoadItems=function(e){var n=this;this.forEach(function(i){return i[e?"on":"off"]("loaded",n.itemLoaded)})},t}(n0),zj=Pq,Iq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Dq=function(r){Iq(t,r);function t(e){var n=this,i=e.em,o=e.config,s=o.scripts,a=o.styles;return n=r.call(this,e,{scripts:s,styles:a})||this,n.set("frames",new zj(e)),n.on("change:zoom",n.onZoomChange),n.on("change:x change:y",n.onCoordsChange),n.on("change:pointer change:pointerScreen",n.onPointerChange),n.listenTo(i,"change:device ".concat(Lj),n.updateDevice),n.listenTo(i,DS.select,n._pageUpdated),n}return t.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:rt.lK,pointerScreen:rt.lK}},Object.defineProperty(t.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this.em,n=e.Pages._initPage();this.set("frames",n.getFrames()),this.updateDevice({frame:n.getMainFrame()})},t.prototype._pageUpdated=function(e,n){var i=this.em;i.setSelected(),i.get("readyCanvas")&&i.stopDefault(),n?.getFrames().map(function(o){return o.disable()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},t.prototype.updateDevice=function(e){e===void 0&&(e={});var n=this.em,i=n.getDeviceModel(),o=e.frame||n.getCurrentFrameModel();if(o&&i){var s=i.attributes,a=s.width,c=s.height;o.set({width:a,height:c},{noUndo:1})}},t.prototype.onZoomChange=function(){var e=this,n=e.em,i=e.module,o=this.get("zoom");o<1&&this.set("zoom",1),n.trigger(i.events.zoom)},t.prototype.onCoordsChange=function(){var e=this,n=e.em,i=e.module;n.trigger(i.events.coords)},t.prototype.onPointerChange=function(){var e=this,n=e.em,i=e.module;n.trigger(i.events.pointer)},t.prototype.getPointerCoords=function(e){e===void 0&&(e=rt.x2.World);var n=this.attributes,i=n.pointer,o=n.pointerScreen;return e===rt.x2.World?i:o},t}(Hl.A),kq=Dq,fs=kn(683),Wi=kn(249),Rq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nq=function(r){Rq(t,r);function t(e,n){n===void 0&&(n=[]);var i=r.call(this,e,n,fs.A)||this;i.on("add",i.onAdd),i.on("change",i.onChange),i.on("remove",i.onRemove);var o=i.em;i.refreshDbn=(0,B.debounce)(function(){return i.refresh()},0);var s="component:resize styleable:change component:input ".concat(Wi.I.update," frame:updated undo redo");return i.listenTo(o,s,function(){return i.refreshDbn()}),i}return Object.defineProperty(t.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var e=this,n=e.em,i=e.events;n.trigger(i.spot)},t.prototype.onAdd=function(e){this.__trgEvent(this.events.spotAdd,{spot:e})},t.prototype.onChange=function(e){this.__trgEvent(this.events.spotUpdate,{spot:e})},t.prototype.onRemove=function(e){this.__trgEvent(this.events.spotRemove,{spot:e})},t.prototype.__trgEvent=function(e,n){var i=this.module,o=i.em;o.trigger(e,n),this.refreshDbn()},t}(n0),jq=Nq,XS=function(r){return r.dragEnter="canvas:dragenter",r.dragOver="canvas:dragover",r.dragEnd="canvas:dragend",r.dragData="canvas:dragdata",r.drop="canvas:drop",r.spot="canvas:spot",r.spotAdd="canvas:spot:add",r.spotUpdate="canvas:spot:update",r.spotRemove="canvas:spot:remove",r.coords="canvas:coords",r.zoom="canvas:zoom",r.pointer="canvas:pointer",r.refresh="canvas:refresh",r.frameLoad="canvas:frame:load",r.frameLoadHead="canvas:frame:load:head",r.frameLoadBody="canvas:frame:load:body",r}(XS||{}),e_=XS,Fq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lq=function(r){Fq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"module",{get:function(){var e,n;return(n=(e=this.model)===null||e===void 0?void 0:e.module)!==null&&n!==void 0?n:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),t.prototype.preinitialize=function(e){this.className=""},t}(rt.Ss),hs=Lq,st=kn(926),Vq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bq=function(r){Vq(t,r);function t(e,n){e===void 0&&(e={}),n===void 0&&(n=!1);var i=r.call(this,e)||this;return i.itemsView="",i.itemType="type",i.reuseView=!1,i.viewCollection=[],n&&i.listenTo(i.collection,"add",i.addTo),i}return t.prototype.addTo=function(e){this.add(e)},t.prototype.itemViewNotFound=function(e){},t.prototype.add=function(e,n){var i=this,o=i.reuseView,s=i.viewCollection,a=n||null,c=e.get(this.itemType),u;e.view&&o?u=e.view:u=this.renderView(e,c),s.push(u);var f=u.render().el;a?a.appendChild(f):this.$el.append(f)},t.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(i){return e.add(i,n)}),this.$el.append(n),this.onRender(),this},t.prototype.onRender=function(){},t.prototype.onRemoveBefore=function(e,n){},t.prototype.onRemove=function(e,n){},t.prototype.remove=function(e){e===void 0&&(e={});var n=this.viewCollection;return this.onRemoveBefore(n,e),this.clearItems(),rt.Ss.prototype.remove.apply(this,e),this.onRemove(n,e),this},t.prototype.clearItems=function(){var e=this.viewCollection||[]},t}(hs),Uq=Bq,Hq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zq=function(r){Hq(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.config=e.config||{};var i=n.model;return n.listenTo(i,"change",n.render),n.listenTo(i,"destroy remove",n.remove),n.listenTo(i.get("selectors"),"change",n.render),n}return t.prototype.tagName=function(){return"style"},t.prototype.render=function(){var e=this,n=e.model,i=e.el,o=n.get("important");return i.innerHTML=n.toCSS({important:o}),this},t}(rt.Ss),$j=zq,$q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wq=function(r){$q(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._createElement=function(){return document.createTextNode("")},t.prototype.render=function(){var e=this.model,n=e.get("important");return this.el.textContent=e.getDeclaration({important:n}),this},t}($j),qq=Wq,Gq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eS=function(r,t){return"".concat(r).concat(t?"-".concat(parseFloat(t)):"")},Kq=function(r){Gq(t,r);function t(e){var n=r.call(this,e)||this;(0,B.bindAll)(n,"sortRules");var i=e.config||{};n.atRules={},n.config=i,n.em=i.em,n.pfx=i.stylePrefix||"",n.className=n.pfx+"rules";var o=n.collection;return n.listenTo(o,"add",n.addTo),n.listenTo(o,"reset",n.render),n}return t.prototype.addTo=function(e){this.addToCollection(e)},t.prototype.addToCollection=function(e,n){if(this.renderStarted){var i=n||null,o=this.config,s={model:e,config:o},a,c;if(e.get("atRuleType")==="keyframes"){var u=e.getAtRule(),f=this.atRules[u];if(!f){var g=document.createElement("style");f=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(u,"{"))),g.appendChild(f),g.appendChild(document.createTextNode("}")),this.atRules[u]=f,a=g}c=new qq(s),f.appendData(c.render().el.textContent)}else c=new $j(s),a=c.render().el;var v=this.className,_=e.get("mediaText"),b=eS(v),C=b;if(_&&(C=eS(v,this.getMediaWidth(_))),a){var S=i||this.el,j=void 0;try{j=S.querySelector("#".concat(C))}catch{}j||(j=S.querySelector("#".concat(b))),j?.appendChild(a)}return a}},t.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},t.prototype.sortRules=function(e,n){var i=this.em,o=(i.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var s=o?e:n,a=o?n:e;return s-a},t.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var n=this,i=n.em,o=n.$el,s=n.collection,a=this.className,c=document.createDocumentFragment();o.empty();var u=i.Devices.getAll().pluck("priority").sort(this.sortRules);return u.every(function(f){return f})&&u.unshift(0),u.forEach(function(f){return c.appendChild((0,st.a_)("div",{id:eS(a,f)}))}),s.each(function(f){return e.addToCollection(f,c)}),o.append(c),o.attr("class",a),this},t}(rt.Ss),Wj=Kq,qj="text/html",Qq=qj,Yq=function(r,t){t===void 0&&(t={});var e=new DOMParser,n=t.htmlType||Qq,i=n===qj,o=i?r:"<div>".concat(r,"</div>"),s=e.parseFromString(o,n),a;if(i){if(t.asDocument)return s;var c=s.head,u=s.body,f=c.querySelectorAll("script");(0,B.each)(f,function(v){return u.appendChild(v)});var g=[];(0,B.each)(c.children,function(v){return g.push(v)}),(0,B.each)(g,function(v,_){return u.insertBefore(v,u.children[_])}),a=u}else a=s.firstChild;return a},Ka=function(){return Ka=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ka.apply(this,arguments)},Jq="data-gjs-",wN="parse:html",Zq=function(r,t){return t===void 0&&(t={}),{compTypes:[],modelAttrStart:Jq,getPropAttribute:function(e,n){var i=e.replace(this.modelAttrStart,""),o=n?.length||0,s=n?.substring(0,1),a=n?.substring(o-1),c=n==="true"?!0:n==="false"?!1:n;try{c=s=="{"&&a=="}"||s=="["&&a=="]"?JSON.parse(c):c}catch{}return{name:i,value:c}},splitPropsFromAttr:function(e){var n=this;e===void 0&&(e={});var i={},o={};return(0,B.each)(e,function(s,a){if(a.indexOf(n.modelAttrStart)===0){var c=n.getPropAttribute(a,s);i[c.name]=c.value}else o[a]=s}),{props:i,attrs:o}},parseStyle:function(e){for(var n={};e.indexOf("/*")>=0;){var i=e.indexOf("/*"),o=e.indexOf("*/")+2;e=e.replace(e.slice(i,o),"")}for(var s=e.split(";"),a=0,c=s.length;a<c;a++){var u=s[a].trim();if(u){var f=u.split(":"),g=f[0].trim(),v=f.slice(1).join(":").trim();n[g]?((0,B.isArray)(n[g])||(n[g]=[n[g]]),n[g].push(v)):n[g]=v}}return n},parseClass:function(e){for(var n=[],i=e.split(" "),o=0,s=i.length;o<s;o++){var a=i[o].trim();a&&n.push(a)}return n},parseNodeAttr:function(e,n){for(var i=n||{},o=e.attributes||[],s=o.length,a=0;a<s;a++){var c=o[a].nodeName,u=o[a].nodeValue;if(c=="style")i.style=this.parseStyle(u);else if(c=="class")i.classes=this.parseClass(u);else{if(c=="contenteditable")continue;if(c.indexOf(this.modelAttrStart)===0){var f=this.getPropAttribute(c,u);i[f.name]=f.value}else u===""&&e[c]===!0&&(u=!0),i.attributes||(i.attributes={}),i.attributes[c]=u}}return i},detectNode:function(e,n){var i;n===void 0&&(n={});var o=this.compTypes,s={};if(o){var a=(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"".concat(this.modelAttrStart,"type"));if(a)s={type:a};else for(var c=0;c<o.length;c++){var u=o[c],f=u.model.isComponent(e,n);if(f){typeof f!="object"&&(f={type:u.id}),s=f;break}}}return s},parseNode:function(e,n){var i;n===void 0&&(n={});var o=((i=e.content)===null||i===void 0?void 0:i.childNodes)||e.childNodes,s=o.length,a=this.detectNode(e,n);if(!a.tagName){var c=e.tagName||"",u=e.namespaceURI||"";a.tagName=c&&u==="http://www.w3.org/1999/xhtml"?c.toLowerCase():c}if(a=this.parseNodeAttr(e,a),!s&&"".concat(e.outerHTML).slice(-2)==="/>"&&(a.void=!0),s&&!a.components&&!n.skipChildren){var f=o[0];s===1&&f.nodeType===3?(!a.type&&(a.type="text"),a.components={type:"textnode",content:f.nodeValue}):a.components=this.parseNodes(e,Ka(Ka({},n),{inSvg:n.inSvg||a.type==="svg"}))}var g=a.components;if(!a.type&&g?.length){for(var v=t.textTypes,_=v===void 0?[]:v,b=t.textTags,C=b===void 0?[]:b,S=!0,j=!1,q=0;q<g.length;q++){var N=g[q],G=N.type;if(!_.includes(G)&&!C.includes(N.tagName)){S=!1;break}G==="textnode"&&(j=!0)}S&&j&&(a.type="text")}return a},parseNodes:function(e,n){var i;n===void 0&&(n={});for(var o=[],s=((i=e.content)===null||i===void 0?void 0:i.childNodes)||e.childNodes,a=s.length,c=0;c<a;c++){var u=s[c],f=o[o.length-1],g=this.parseNode(u,n);if(g.type==="textnode"){if(f?.type==="textnode"){f.content+=g.content;continue}if(!n.keepEmptyTextNodes){var v=u.nodeValue||"",_=c===0||c===a-1,b=v.includes(`
`);if(v!=" "&&!v.trim()&&(_||b))continue}}!g.tagName&&(0,B.isUndefined)(g.content)||o.push(g)}return o},parse:function(e,n,i){var o,s,a;i===void 0&&(i={});var c=r?.get("Config")||{},u={html:[]},f=Ka(Ka({},t),i),g=Ka(Ka(Ka({},t.optionsHtml),{htmlType:((o=t.optionsHtml)===null||o===void 0?void 0:o.htmlType)||t.htmlType}),i),v=g.preParser,_=g.asDocument,b=(0,B.isFunction)(v)?v(e,{editor:r?.getEditor()}):e,C=(0,B.isFunction)(f.parserHtml)?f.parserHtml(b,g):Yq(b,g),S=C,j=C;_&&(S=j.documentElement,u.doctype=(0,st.LJ)(j.doctype));var q=S.querySelectorAll("script"),N=q.length,G=(0,B.isUndefined)(c.allowScripts)?g.allowScripts:c.allowScripts;if(!G)for(;N--;)(s=q[N].parentNode)===null||s===void 0||s.removeChild(q[N]);if((!g.allowUnsafeAttr||!g.allowUnsafeAttrValue)&&this.__sanitizeNode(S,g),n){for(var se=S.querySelectorAll("style"),ue=se.length,Y="";ue--;)Y=se[ue].innerHTML+Y,(a=se[ue].parentNode)===null||a===void 0||a.removeChild(se[ue]);Y&&(u.css=n.parse(Y))}r?.trigger("".concat(wN,":root"),{input:b,root:S});var L=[];if(_)u.head=this.parseNode(j.head,f),u.root=this.parseNodeAttr(S),L=this.parseNode(j.body,f);else{var k=this.parseNodes(S,f);L=k.length===1&&!f.returnArray?k[0]:k}return u.html=L,r?.trigger(wN,{input:b,output:u}),u},__sanitizeNode:function(e,n){var i=this,o=e.attributes||[],s=e.childNodes||[],a=[];(0,B.each)(o,function(c){var u=c.nodeName||"",f=c.nodeValue||"";!n.allowUnsafeAttr&&u.startsWith("on")&&a.push(u),!n.allowUnsafeAttrValue&&f.startsWith("javascript:")&&a.push(u)}),a.map(function(c){return e.removeAttribute(c)}),(0,B.each)(s,function(c){return i.__sanitizeNode(c,n)})}}},Gj=Zq,Xq=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yc=function(){return Yc=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yc.apply(this,arguments)},eG=Gj(),RS=function(r){return(0,B.isArray)(r)?r[r.length-1]:r},tG=function(r){Xq(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.parseStyle=function(e){return eG.parseStyle(e)},t.prototype.extendStyle=function(e){return Yc(Yc({},this.getStyle()),e)},t.prototype.getStyle=function(e){var n=this.get("style")||{},i=Yc({},n);return e&&(0,B.isString)(e)?i[e]:i},t.prototype.setStyle=function(e,n){var i=this;e===void 0&&(e={}),n===void 0&&(n={}),(0,B.isString)(e)&&(e=this.parseStyle(e));var o=this.getStyle(n);n.partial||n.avoidStore?(n.avoidStore=!0,e.__p=!0):delete e.__p;var s=Yc({},e),a=Yc({},s);(0,B.keys)(a).forEach(function(u){a[u]===""&&delete a[u]}),this.set("style",a,n);var c=(0,Le.shallowDiff)(o,s);return delete c.__p,(0,B.keys)(c).forEach(function(u){var f=i.em;n.noEvent||(i.trigger("change:style:".concat(u)),f&&(f.trigger("styleable:change",i,u,n),f.trigger("styleable:change:".concat(u),i,u,n)))}),s},t.prototype.addStyle=function(e,n,i){var o;n===void 0&&(n=""),i===void 0&&(i={}),typeof e=="string"?e=(o={},o[e]=n,o):i=n||{},i.addStyle=e,e=this.extendStyle(e),this.setStyle(e,i)},t.prototype.removeStyle=function(e){var n=this.getStyle();delete n[e],this.setStyle(n)},t.prototype.styleToString=function(e){e===void 0&&(e={});var n=[],i=this.getStyle(e),o=e.important,s=function(c){var u=(0,B.isArray)(o)?o.indexOf(c)>=0:o,f=c.substring(0,2),g=f==="__";if(g)return"continue";var v=i[c],_=(0,B.isArray)(v)?v:[v];_.forEach(function(b){var C="".concat(b).concat(u?" !important":"");C&&n.push("".concat(c,":").concat(C,";"))})};for(var a in i)s(a);return n.join("")},t.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},t.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},t}(rt.Kx),Kj=tG,Mo=function(){return Mo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Mo.apply(this,arguments)},Qj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},o_=function(r){return(0,B.isArray)(r.get(Po))},s_=function(r){return!!r.get(ds)},of=function(r){return!!(o_(r)||s_(r))},ru=function(r){var t=r.parent();return of(r)&&(!t||!of(t))};var Pp=function(r){r.__symbReady||(r.on("change",r.__upSymbProps),r.__symbReady=!0)},iu=function(r){var t=r.get(ds);if(t&&(0,B.isString)(t)){var e=r.__getAllById()[t];e?(t=e,r.set(ds,e)):t=0}return t||void 0},Yo=function(r){var t=r?.get(Po);return t&&(0,B.isArray)(t)&&(t.forEach(function(e,n){e&&(0,B.isString)(e)&&(t[n]=r.__getAllById()[e])}),t=t.filter(function(e){return e&&!(0,B.isString)(e)})),t||void 0},sf=function(r,t){t===void 0&&(t="");var e=r?.get(Vp),n=t.split(":")[0],i=t!==n?[t,n]:[t];return e===!0||(0,B.isArray)(e)&&i.some(function(o){return e.indexOf(o)>=0})},tu=function(r,t){t===void 0&&(t={});var e=[],n=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||n&&sf(r,n))return e;var i=Yo(r)||[],o=iu(r),s=o?Qj([o],Yo(o)||[],!0):i;return e=s.filter(function(a){return a!==r}).filter(function(a){return!(n&&sf(a,n))}),e},bN=function(r,t){for(var e=r,n=r.parent(t);n&&of(n);)e=n,n=n.parent(t);return e},eA=function(r,t){t===void 0&&(t={});var e=iu(r),n=e&&Yo(e);!t.skipRefs&&n&&e.set(Po,n.filter(function(i){return i!==r})),r.set(ds,0),r.components().forEach(function(i){return eA(i,t)})},Lp=function(r,t,e,n){n===void 0&&(n={});var i=iu(r),o=Yo(r);!i&&!o||r.em.log(t,{model:r,toUp:e,context:"symbols",opts:n})},nG=function(r,t){t===void 0&&(t={});var e=r.changedAttributes()||{},n=e.attributes||{};if(delete e.status,delete e.open,delete e[Po],delete e[ds],delete e[Vp],delete e.attributes,delete n.id,(0,Le.isEmptyObj)(n)||(e.attributes=n),!(0,Le.isEmptyObj)(e)){var i=tu(r,t);(0,B.keys)(e).map(function(o){sf(r,o)&&delete e[o]}),Lp(r,"props",i,{opts:t,changed:e}),i.forEach(function(o){var s=Mo({},e);(0,B.keys)(s).map(function(a){sf(o,a)&&delete s[a]}),o.set(s,Mo({fromInstance:r},t))})}},rG=function(r,t){t===void 0&&(t={});var e=tu(r,t);Lp(r,"classes",e,{opts:t}),e.forEach(function(n){n.set("classes",r.get("classes"),{fromInstance:r})}),r.__changesUp(t)},Yj=function(r,t,e,n){var i=n||e||{},o=i.fromInstance,s=i.fromUndo,a={fromInstance:o,fromUndo:s},c=t.opt.temporary;if(n)if(n.add){var _=[],b=!!Yo(r),f=tu(r,Mo(Mo({},a),{changed:"components:add"}));if(f.length){var C=iu(t);_=Yo(C||t)||[],_=Qj([],_,!0),_.push(C||t)}!c&&Lp(r,"add",f,{opts:n,addedInstances:_.map(function(L){return L.cid}),added:t.cid}),f.forEach(function(L){var k=bN(L),$=_.filter(function(T){var O=bN(T,{prev:1});return k&&O&&O===k})[0],I=$||t.clone({symbol:!0,symbolInv:b});L.append(I,Mo({fromInstance:r},n))})}else{var S=iu(t);if(S&&!n.temporary&&S.set(Po,Yo(S).filter(function(Y){return Y!==t})),!ru(t)&&!n.skipRefsUp){var j="components:remove",q=n.index,N=t.parent(),G=Mo({fromInstance:t},n),se=ru(t),ue=function(L){var k=L.parent();k&&!sf(k,j)&&L.remove(G)},f=sf(N,j)?[]:tu(t,a);se&&(f=N&&tu(N,Mo(Mo({},a),{changed:j})),ue=function(L){var k=L.components().at(q);k&&k.remove(Mo({fromInstance:N},G))}),!c&&Lp(r,"remove",f,{opts:n,removed:t.cid,isSymbNested:se}),f.forEach(ue)}}else{var u=t,f=tu(r,Mo(Mo({},a),{changed:"components:reset"})),g=u.models,v=new Set;Lp(r,"reset",f,{components:g}),f.forEach(function(Y){var L=Y.components(),k=g.map(function($,I){return!of($)||v.has($)?(v.add($),$.clone({symbol:!0})):L.at(I)});L.reset(k,Mo({fromInstance:r},e))})}r.__changesUp(i)},iG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qo=function(){return Qo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Qo.apply(this,arguments)},t_=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},CN=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},Kd=function(r,t){if(t===void 0&&(t=[]),!r)return[];var e=(0,B.isArray)(r)||(0,B.isFunction)(r.map)?r:[r];return e.map(function(n){t.push(n.getId()),Kd(n.components().models,t)}),t},Jj=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={}),e.visitedCmps=e.visitedCmps||{};var n=e.visitedCmps,i=(0,B.isArray)(r)?r:[r];return i.map(function(o){var s=o.attributes,a=s===void 0?{}:s,c=o.components,u=o.tagName,f=o.style,g=a.id,v=a.draggable,_=t_(a,["id","draggable"]),b=o;if(g){if(n[g])n[g].push(b),g=qi.getNewId(t),b.attributes.id=g;else if(n[g]=[],t[g]){b=t[g];var C=b;u&&C.set({tagName:u},Qo(Qo({},e),{silent:!0})),(0,B.keys)(_).length&&C.addAttributes(_,Qo({},e)),(0,B.keys)(f).length&&C.addStyle(f,e)}}if(c){var S=Jj(c,t);if((0,B.isFunction)(b.components)){var j=b.components();j.length>0&&j.reset(S,e)}else b.components=S}return b})},oG=function(r){iG(t,r);function t(e,n){var i=r.call(this,e,n)||this;i.opt=n,i.listenTo(i,"add",i.onAdd),i.listenTo(i,"remove",i.removeChildren),i.listenTo(i,"reset",i.resetChildren);var o=n.em,s=n.config;return i.config=s,i.em=o,i.domc=n.domc||o?.Components,i}return Object.defineProperty(t.prototype,"events",{get:function(){var e;return(e=this.domc)===null||e===void 0?void 0:e.events},enumerable:!1,configurable:!0}),t.prototype.resetChildren=function(e,n){var i=this;n===void 0&&(n={});var o=this,s=n.previousModels||[],a=s.filter(function(f){return!e.get(f.cid)}),c=Kd(e),u=Kd(s).filter(function(f){return c.indexOf(f)>=0});n.keepIds=(n.keepIds||[]).concat(u),a.forEach(function(f){return i.removeChildren(f,o,n)}),e.each(function(f){return i.onAdd(f)})},t.prototype.resetFromString=function(e,n){var i,o;e===void 0&&(e=""),n===void 0&&(n={}),n.keepIds=Kd(this);var s=this,a=s.domc,c=s.em,u=s.parent,f=c?.Css,g=a?.allById()||{},v=this.parseString(e,n),_=Jj(v,g,n),b=n.visitedCmps,C=b===void 0?{}:b;Object.keys(C).forEach(function(S){var j=C[S];if(j.length){var q=f?.getRules("#".concat(S))||[];q.length&&j.forEach(function(N){q.forEach(function(G){var se=G.clone();se.set("selectors",["#".concat(N.attributes.id)]),f.getAll().add(se)})})}}),this.reset(_,n),c?.trigger("component:content",u,n,e),(o=(i=u).__checkInnerChilds)===null||o===void 0||o.call(i)},t.prototype.removeChildren=function(e,n,i){var o=this;if(i===void 0&&(i={}),!!e){var s=this,a=s.domc,c=s.em,u=i.temporary||i.fromUndo;if(e.prevColl=this,!u){var f=e.getId(),g=c.Selectors.getAll(),v=c.Css.getAll(),_=(i.keepIds||[]).indexOf(f)<0,b=a?a.allById():{};delete b[f];var C=_?v.remove(v.filter(function(q){return q.getSelectors().getFullString()==="#".concat(f)}),i):[];g.remove(C.map(function(q){return q.getSelectors().at(0)})),e.opt.temporary||(c.Commands.run("core:component-style-clear",{target:e}),e.removed(),e.trigger("removed"),c.trigger(Wi.I.remove,e),a&&s_(e)&&ru(e)&&a.symbols.__trgEvent(a.events.symbolInstanceRemove,{component:e},!0));var S=e.components();S.forEach(function(q){Yj(q,q,S,Qo(Qo({},i),{skipRefsUp:!0})),o.removeChildren(q,n,i)})}var j=e.components();c.stopListening(j),c.stopListening(e),c.stopListening(e.get("classes")),e.__postRemove()}},t.prototype.model=function(e,n){var i=n.collection.opt,o=i.em,s,a=o.Components.componentTypes;n.em=o,n.config=i.config,n.componentTypes=a,n.domc=i.domc;for(var c=0;c<a.length;c++){var u=a[c].id;if(u==e.type){s=a[c].model;break}}return s||(s=a[a.length-1].model,o&&e.type&&o.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:n})),new s(e,n)},t.prototype.parseString=function(e,n){n===void 0&&(n={});var i=this,o=i.em,s=i.domc,a=i.parent,c=n.asDocument&&a?.is("wrapper"),u=o.Css,f=o.Parser.parseHtml(e,Qo({asDocument:c},n.parserOptions)),g=f.html;if(c){var v=a,_=f.html||{},b=_.components,C=t_(_,["components"]),S=f.head||{},j=S.components,q=t_(S,["components"]);g=b,v.set(C,n),v.head.set(q,n),v.head.components(j,n),v.docEl.set(f.root,n),v.set({doctype:f.doctype})}if(qi.checkId(g,f.css,s.componentsById,n),f.css&&u&&!n.temporary){var N=n.at,G=t_(n,["at"]);u.addCollection(f.css,Qo(Qo({},G),{extend:1}))}return g},t.prototype.add=function(e,n){var i=this;if(n===void 0&&(n={}),e!=null){n.keepIds=CN(CN([],n.keepIds||[],!0),Kd(n.previousModels),!0),(0,B.isString)(e)?e=this.parseString(e,n):(0,B.isArray)(e)&&e.forEach(function(s,a){if((0,B.isString)(s)){var c=i.parseString(s,n);e[a]=(0,B.isArray)(c)&&!c.length?null:c}});var o=((0,B.isArray)(e)?e:[e]).filter(Boolean).map(function(s){return i.processDef(s)});return e=(0,B.isArray)(e)?(0,B.flatten)(o,1):o[0],r.prototype.add.call(this,e,n)}},t.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var n=this,i=n.em,o=n.config,s=o===void 0?{}:o,a=s.processor,c=e;if(a){c=Qo({},c);var u=a(c);u&&((0,B.each)(c,function(S,j){return delete c[j]}),(0,B.extend)(c,u))}if(c.$$typeof&&typeof c.props=="object"){c=Qo({},c),c.props=Qo({},c.props);var f=i.Components,g=i.Parser,v=g.parserHtml;(0,B.each)(c,function(S,j){(0,B.includes)(["props","type"],j)||delete c[j]});var _=c.props,b=_.children;delete _.children,delete c.props;var C=v.splitPropsFromAttr(_);c.attributes=C.attrs,b&&(c.components=b),c.type?f.getType(c.type)||(c.tagName=c.type,delete c.type):c.type="textnode",(0,B.extend)(c,C.props)}return c},t.prototype.onAdd=function(e,n,i){i===void 0&&(i={});var o=this,s=o.domc,a=o.em,c=e.getStyle(),u=a&&a.getConfig().avoidInlineStyle;if(s&&s.Component.ensureInList(e),!(0,B.isEmpty)(c)&&!u&&a&&a.getConfig().forceClass&&!i.temporary){var f=e.cid;a.Css.setClassRule(f,c),e.setStyle({}),e.addClass(f)}if(e.__postAdd({recursive:!0}),a&&!i.temporary){var g=function(v){a.trigger(Wi.I.add,v,i),v.components().forEach(function(_){return g(_)})};g(e),s&&s_(e)&&ru(e)&&s.symbols.__trgEvent(s.events.symbolInstanceAdd,{component:e},!0)}},t}(rt.pM),Kp=oG,sG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wy=1,tS=2,Zj=function(r){sG(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e,n)||this,o=n.config,s=o===void 0?{}:o,a=i.get("name"),c=i.get("label");a?c||i.set("label",a):i.set("name",c);var u=i.get("name"),f=s.escapeName,g=f?f(u):t.escapeName(u);return i.set("name",g),i.em=n.em,i}return t.prototype.defaults=function(){return{name:"",label:"",type:Wy,active:!0,private:!1,protected:!1,_undo:!0}},t.prototype.isId=function(){return this.get("type")===tS},t.prototype.isClass=function(){return this.get("type")===Wy},t.prototype.getFullName=function(e){e===void 0&&(e={});var n=e.escape,i=this.get("name"),o="";switch(this.get("type")){case Wy:o=".";break;case tS:o="#";break}return o+(n?n(i):i)},t.prototype.toString=function(){return this.getFullName()},t.prototype.getName=function(){return this.get("name")||""},t.prototype.getLabel=function(){return this.get("label")||""},t.prototype.setLabel=function(e){return this.set("label",e)},t.prototype.getActive=function(){return!!this.get("active")},t.prototype.setActive=function(e){return this.set("active",e)},t.prototype.toJSON=function(e){e===void 0&&(e={});var n=this.em,i=rt.Kx.prototype.toJSON.call(this,[e]),o=(0,B.result)(this,"defaults");if(n?.getConfig().avoidDefaults){(0,B.forEach)(o,function(a,c){i[c]===a&&delete i[c]}),i.label===i.name&&delete i.label;var s=(0,B.keys)(i).length;s===1&&i.name&&(i=i.name),s===2&&i.name&&i.type&&(i=this.getFullName())}return i},t.escapeName=function(e){return"".concat(e).trim().replace(/\s+/g,"-")},t.TYPE_CLASS=Wy,t.TYPE_ID=tS,t}(rt.Kx),mo=Zj;Zj.prototype.idAttribute="name";var aG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xj=function(r,t){return r.reduce(function(e,n,i){return e.concat(Xj(r.slice(i+1),"".concat(t).concat(n)))},[t])},eF=function(r){aG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||mo.TYPE_CLASS)},t.prototype.getStyleable=function(){return(0,B.filter)(this.models,function(e){return e.getActive()&&!e.get("private")})},t.prototype.getValid=function(e){var n=e===void 0?{}:e,i=n.noDisabled;return(0,B.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return i?o.get("active"):1})},t.prototype.getFullString=function(e,n){n===void 0&&(n={});var i=[],o=e||this;return o.forEach(function(s){return i.push(s.getFullName(n))}),n.sort&&i.sort(),i.join("").trim()},t.prototype.getFullName=function(e){e===void 0&&(e={});var n=e.combination,i=e.array,o=[],s=this.map(function(a){return a.getFullName(e)}).sort();return n?s.forEach(function(a,c){o=o.concat(Xj(s.slice(c+1),a))}):o=s,i?o:n?o.join(","):o.join("")},t}(rt.pM),Ul=eF;eF.prototype.model=mo;var lG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xN=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},cG=function(r){lG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},t.prototype.getId=function(){return this.get("id")},t.prototype.getLabel=function(){return this.get("label")},t}(rt.Kx),Jp=cG;function tF(r){var t=new Set,e=new Map,n={items:[]};r.forEach(function(o){var s=o.category;if(s){t.add(s);var a=e.get(s);a?a.push(o):e.set(s,[o])}else n.items.push(o)});var i=Array.from(t).map(function(o){return{category:o,items:e.get(o)||[]}});return xN(xN([],i,!0),[n],!1)}var uG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EN="category",nF=function(r){uG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initCategory=function(e){var n=e.get(EN),i=n instanceof Jp;if(n&&!i){(0,B.isString)(n)?n={id:n,label:n}:(0,Le.isObject)(n)&&!n.id&&(n.id=n.label);var o=this.getCategories().add(n);return e.set(EN,o,{silent:!0}),o}else if(i){var o=n;return this.getCategories().add(o),o}},t}(rt.pM),dG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rF=function(r){dG(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e,n)||this,o=n.events,s=n.em,a=o?.update;return s&&a&&i.on("change",function(c,u){return s.trigger(a,{category:c,changes:c.changedAttributes(),options:u})}),i}return t.prototype.add=function(e,n){var i=(0,B.isArray)(e)?e:[e];return i.forEach(function(o){return o&&(o.id=(0,Le.normalizeKey)("".concat(o.id)))}),r.prototype.add.call(this,e,n)},t.prototype.get=function(e){return r.prototype.get.call(this,(0,B.isString)(e)?(0,Le.normalizeKey)(e):e)},t}(rt.pM),a_=rF;rF.prototype.model=Jp;var tA=function(r){return r.select="trait:select",r.value="trait:value",r.categoryUpdate="trait:category:update",r.custom="trait:custom",r.all="trait",r}(tA||{}),NS=tA,fG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),l_=function(){return l_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},l_.apply(this,arguments)},hG=function(r){fG(t,r);function t(e,n){var i=r.call(this,e)||this,o=i.attributes,s=o.target,a=o.name;return!i.get("id")&&i.set("id",a),s&&i.setTarget(s),i.em=n,i}return t.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(t.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Jp?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),t.prototype.setTarget=function(e){if(e){var n=this.attributes,i=n.name,o=n.changeProp,s=n.value,a=n.getValue;this.target=e,this.unset("target");var c=o?"change:".concat(i):"change:attributes:".concat(i);this.listenTo(e,c,this.targetUpdated);var u=s||(a?void 0:this.getValue());!(0,B.isUndefined)(u)&&this.set({value:u},{silent:!0})}},t.prototype.getId=function(){return this.get("id")},t.prototype.getType=function(){return this.get("type")},t.prototype.getName=function(){return this.get("name")},t.prototype.getLabel=function(e){var n;e===void 0&&(e={});var i=e.locale,o=i===void 0?!0:i,s=this.getId(),a=this.get("label")||this.getName();return o&&((n=this.em)===null||n===void 0?void 0:n.t("traitManager.traits.labels.".concat(s)))||a},t.prototype.getValue=function(e){return this.getTargetValue(e)},t.prototype.setValue=function(e,n){var i=this;n===void 0&&(n={});var o=this,s=o.component,a=o.em,c=n.partial,u={},f=this.attributes.setValue;if(f){f({value:e,component:s,editor:a?.getEditor(),trait:this,partial:!!c,options:n,emitUpdate:function(){return i.targetUpdated()}});return}c&&(u.avoidStore=!0),this.setTargetValue(e,u)},t.prototype.getDefault=function(){return this.get("default")},t.prototype.getOptions=function(){return this.get("options")||[]},t.prototype.getOption=function(e){var n=this,i=(0,Le.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return n.getOptionId(o)===i})[0]},t.prototype.getOptionId=function(e){return e.id||e.value},t.prototype.getOptionLabel=function(e,n){var i;n===void 0&&(n={});var o=n.locale,s=o===void 0?!0:o,a=(0,B.isString)(e)?this.getOption(e):e,c=this.getOptionId(a),u=a.label||a.name||c,f=this.getName();return s&&((i=this.em)===null||i===void 0?void 0:i.t("traitManager.traits.options.".concat(f,".").concat(c)))||u},t.prototype.getCategoryLabel=function(e){e===void 0&&(e={});var n=this,i=n.em,o=n.category,s=e.locale,a=s===void 0?!0:s,c=o?.getId(),u=o?.getLabel();return a&&i?.t("traitManager.categories.".concat(c))||u||""},t.prototype.runCommand=function(){var e=this.em,n=this.attributes.command;if(n&&e)return(0,B.isString)(n)?e.Commands.run(n):n(e.Editor,this)},t.prototype.props=function(){return this.attributes},t.prototype.targetUpdated=function(){var e=this,n=e.component,i=e.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var s={trait:this,component:n,value:o};n.trigger(NS.value,s),i?.trigger(NS.value,s),i?.trigger("trait:update",s)},t.prototype.getTargetValue=function(e){e===void 0&&(e={});var n=this,i=n.component,o=n.em,s=this.getName(),a=this.get("getValue"),c;if(a?c=a({editor:o?.getEditor(),trait:this,component:i}):this.changeProp?c=i.get(s):c=i.getAttributes()[s],e.useType){var u=this.getType();if(u==="checkbox"){var f=this.attributes,g=f.valueTrue,v=f.valueFalse;!(0,B.isUndefined)(g)&&g===c?c=!0:!(0,B.isUndefined)(v)&&v===c&&(c=!1)}}return(0,B.isUndefined)(c)?"":c},t.prototype.setTargetValue=function(e,n){var i;n===void 0&&(n={});var o=this,s=o.component,a=o.attributes,c=this.getName();if(!(0,B.isUndefined)(e)){var u=e;if(e==="false"?u=!1:e==="true"&&(u=!0),this.getType()==="checkbox"){var f=a.valueTrue,g=a.valueFalse;u&&!(0,B.isUndefined)(f)&&(u=f),!u&&!(0,B.isUndefined)(g)&&(u=g)}var v=(i={},i[c]=u,i);v.__p=n.avoidStore?null:void 0,this.changeProp?s.set(v,n):s.addAttributes(v,n)}},t.prototype.setValueFromInput=function(e,n,i){n===void 0&&(n=!0),i===void 0&&(i={});var o={value:e};this.set(o,l_(l_({},i),{avoidStore:1})),n&&(this.set("value","",i),this.set(o,i))},t.prototype.getInitValue=function(){var e=this.component,n=this.getName(),i;if(e){var o=e.get("attributes");i=this.changeProp?e.get(n):o[n]}return i||this.get("value")||this.get("default")},t}(rt.Kx),c_=hG,pG=function(){function r(t){t===void 0&&(t={}),this.config=t}return r.prototype.build=function(t,e){return(0,B.isString)(t)?this.buildFromString(t,e):new c_(t,e)},r.prototype.buildFromString=function(t,e){var n={name:t,type:"text"};switch(t){case"target":n.type="select",n.default=!1,n.options=this.config.optionsTarget;break}return new c_(n,e)},r}(),gG=pG,mG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vG=function(r){mG(t,r);function t(e,n){var i=r.call(this,e)||this;i.categories=new a_;var o=n.em;i.em=o,i.categories=new a_([],{em:o,events:{update:NS.categoryUpdate}}),i.on("add",i.handleAdd),i.on("reset",i.handleReset);var s=i.module,a=s?.getConfig();return i.tf=new gG(a),i}return Object.defineProperty(t.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),t.prototype.getCategories=function(){return this.categories},t.prototype.handleReset=function(e,n){var i=n===void 0?{}:n,o=i.previousModels,s=o===void 0?[]:o;s.forEach(function(a){return a.trigger("remove")})},t.prototype.handleAdd=function(e){e.em=this.em;var n=this.target;n&&(e.target=n),this.initCategory(e)},t.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(n){return n.setTarget(e)})},t.prototype.add=function(e,n){if(e!=null){var i=this,o=i.target,s=i.em;if((0,B.isArray)(e)){for(var a=[],c=0,u=e.length;c<u;c++){var f=e[c];a[c]=f instanceof c_?f:this.tf.build(f,s),a[c].setTarget(o)}return r.prototype.add.call(this,a,n)}var g=e instanceof c_?e:this.tf.build(e,s);return g.setTarget(o),r.prototype.add.call(this,g,n)}},t}(nF),u_=vG,yG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zn=function(){return zn=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zn.apply(this,arguments)},_G=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},Fs=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},SN=function(r){return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Rp=function(r){return!!r?.getConfig().avoidInlineStyle},nA="component:drag",Po="__symbols",ds="__symbol",Vp="__symbol_ovrd",n_=Wi.I.update,jS=Wi.I.updateInside,wG=function(r){yG(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this;(0,B.bindAll)(i,"__upSymbProps","__upSymbCls","__upSymbComps");var o=n.em,s=i.parent(),a=s?.attributes,c=i.get("propagate");if(c&&i.set("propagate",(0,B.isArray)(c)?c:[c]),a&&a.propagate&&!c){var u={},f=a.propagate;f.forEach(function(C){return u[C]=s.get(C)}),u.propagate=f,i.set(zn(zn({},u),e))}if(n&&n.config&&n.config.voidElements.indexOf(i.get("tagName"))>=0&&i.set("void",!0),n.em=o,i.opt=n,i.em=o,i.frame=n.frame,i.config=n.config||{},i.set("attributes",zn(zn({},(0,B.result)(i,"defaults").attributes||{}),i.get("attributes")||{})),i.ccid=t.createId(i,n),i.initClasses(),i.initComponents(),i.initTraits(),i.initToolbar(),i.initScriptProps(),i.listenTo(i,"change:script",i.scriptUpdated),i.listenTo(i,"change:tagName",i.tagUpdated),i.listenTo(i,"change:attributes",i.attrUpdated),i.listenTo(i,"change:attributes:id",i._idUpdated),i.on("change:toolbar",i.__emitUpdateTlb),i.on("change",i.__onChange),i.on(jS,i.__propToParent),i.set("status",""),i.views=[],["classes","traits","components"].forEach(function(C){var S="add remove ".concat(C!=="components"?"change":"");i.listenTo(i.get(C),S.trim(),function(){for(var j=[],q=0;q<arguments.length;q++)j[q]=arguments[q];return i.emitUpdate.apply(i,Fs([C],j,!1))})}),!n.temporary){var g=o&&o.Css,v=i.attributes,_=v.styles,b=v.type;_&&g&&g.addCollection(_,{avoidUpdateStyle:!0},{group:"cmp:".concat(b)}),i.__postAdd(),i.init(),of(i)&&Pp(i),o?.trigger(Wi.I.create,i,n)}return i}return Object.defineProperty(t.prototype,"defaults",{get:function(){var e;return e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},e[ds]=0,e[Po]=0,e[Vp]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){var e;return(e=this.get("content"))!==null&&e!==void 0?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.updated=function(e,n,i){},t.prototype.removed=function(){},t.prototype.__postAdd=function(e){e===void 0&&(e={});var n=this.em,i=n?.UndoManager,o=this.components();i&&!this.__hasUm&&(i.add(o),i.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&o.map(function(s){return s.__postAdd(e)})},t.prototype.__postRemove=function(){var e=this.em,n=e?.UndoManager;n&&(n.remove(this.components()),n.remove(this.getSelectors()),delete this.__hasUm)},t.prototype.__onChange=function(e,n){var i=this,o=this.changedAttributes()||{};(0,B.keys)(o).forEach(function(s){return i.emitUpdate(s)}),["status","open","toolbar","traits"].forEach(function(s){return delete o[s]}),(0,Le.isEmptyObj)(o)||(this.__changesUp(n),this.__propSelfToParent({component:this,changed:o,options:n}))},t.prototype.__onStyleChange=function(e){var n=this,i=this.em;if(i){var o="component:styleUpdate",s=(0,B.keys)(e),a={style:e};i.trigger(o,this,a),s.forEach(function(c){return i.trigger("".concat(o,":").concat(c),n,a)})}},t.prototype.__changesUp=function(e){var n=this,i=n.em,o=n.frame;[o,i].forEach(function(s){return s&&s.changesUp(e)})},t.prototype.__propSelfToParent=function(e){this.trigger(n_,e),this.__propToParent(e)},t.prototype.__propToParent=function(e){var n=this.parent();n&&n.trigger(jS,e)},t.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},t.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},t.prototype.__upSymbProps=function(e,n){n===void 0&&(n={}),nG(this,n)},t.prototype.__upSymbCls=function(e,n,i){i===void 0&&(i={}),rG(this,i)},t.prototype.__upSymbComps=function(e,n,i){Yj(this,e,n,i)},t.prototype.is=function(e){return this.get("type")==e},t.prototype.props=function(){return this.attributes},t.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},t.prototype.setDragMode=function(e){return this.set("dmode",e)},t.prototype.getDragMode=function(){return this.get("dmode")||""},t.prototype.setSymbolOverride=function(e){var n;this.set(Vp,(n=(0,B.isString)(e)?[e]:e)!==null&&n!==void 0?n:0)},t.prototype.getSymbolOverride=function(){return this.get(Vp)},t.prototype.find=function(e){var n,i=[],o=(n=this.view)===null||n===void 0?void 0:n.$el.find(e);return o?.each(function(s){var a=o.eq(s),c=a.data("model");c&&i.push(c)}),i},t.prototype.findType=function(e){var n=[],i=function(o){return o.forEach(function(s){s.is(e)&&n.push(s),i(s.components())})};return i(this.components()),n},t.prototype.findFirstType=function(e){return this.findType(e).at(0)},t.prototype.closest=function(e){var n,i=(n=this.view)===null||n===void 0?void 0:n.$el.closest(e);return i?.length?i.data("model"):void 0},t.prototype.closestType=function(e){for(var n=this.parent();n&&!n.is(e);)n=n.parent();return n},t.prototype.contains=function(e){var n=!1;if(!e)return n;var i=function(o){!n&&o.forEach(function(s){s===e&&(n=!0),!n&&i(s.components())})};return i(this.components()),n},t.prototype.tagUpdated=function(){this.trigger("rerender")},t.prototype.replaceWith=function(e,n){n===void 0&&(n={});var i=this.collection,o=i.indexOf(this);i.remove(this);var s=i.add(e,zn(zn({},n),{at:o}));return(0,B.isArray)(s)?s:[s]},t.prototype.attrUpdated=function(e,n,i){var o=this;i===void 0&&(i={});var s=this.get("attributes"),a=s.class;a&&this.setClass(a),delete s.class;var c=s.style;c&&this.setStyle(c,i),delete s.style;var u=zn({},this.previous("attributes")),f=(0,Le.shallowDiff)(u,this.get("attributes"));(0,B.keys)(f).forEach(function(g){var v,_="attributes:".concat(g);o.trigger("change:".concat(_),o,f[g],i),(v=o.em)===null||v===void 0||v.trigger("".concat(n_,":").concat(_),o,f[g],i)})},t.prototype.setAttributes=function(e,n){return n===void 0&&(n={}),this.set("attributes",zn({},e),n),this},t.prototype.addAttributes=function(e,n){return n===void 0&&(n={}),this.setAttributes(zn(zn({},this.getAttributes({noClass:!0})),e),n)},t.prototype.removeAttributes=function(e,n){e===void 0&&(e=[]),n===void 0&&(n={});var i=Array.isArray(e)?e:[e],o=this.getAttributes();return i.map(function(s){return delete o[s]}),this.setAttributes(o,n)},t.prototype.getStyle=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=this.em,o=(0,B.isString)(e)?e:"",s=o?n:e;if(Rp(i)&&!s.inline){var a=i.get("state"),c=i.Css,u=c.getIdRule(this.getId(),zn({state:a},s));return this.rule=u,u?u.getStyle(o):{}}return r.prototype.getStyle.call(this,o)},t.prototype.setStyle=function(e,n){var i=this;e===void 0&&(e={}),n===void 0&&(n={});var o=this,s=o.opt,a=o.em;if(Rp(a)&&!s.temporary&&!n.inline){var c=this.get("style")||{};e=(0,B.isString)(e)?this.parseStyle(e):e,e=zn(zn({},e),c);var u=a.get("state"),f=a.Css,g=this.getStyle(n);this.rule=f.setIdRule(this.getId(),e,zn({state:u},n));var v=(0,Le.shallowDiff)(g,e);this.set("style","",{silent:!0}),(0,B.keys)(v).forEach(function(_){return i.trigger("change:style:".concat(_))})}else e=r.prototype.setStyle.apply(this,arguments);return s.temporary||this.__onStyleChange(n.addStyle||e),e},t.prototype.getAttributes=function(e){e===void 0&&(e={});var n=this.em,i=[],o=zn({},this.get("attributes")),s=n?.Selectors,a=this.getId();if(e.noClass?delete o.class:(this.classes.forEach(function(f){return i.push((0,B.isString)(f)?f:f.getName())}),i.length&&(o.class=i.join(" "))),!e.noStyle){var c=this.getStyle({inline:!0});(0,Le.isObject)(c)&&!(0,Le.isEmptyObj)(c)&&(o.style=this.styleToString({inline:!0}))}if(!(0,B.has)(o,"id")){var u=!1;(Rp(n)||!(0,B.isEmpty)(this.getStyle()))&&(u=!!s?.get(a,s.Selector.TYPE_ID)),(of(this)||this.get("script-export")||this.get("script"))&&(u=!0),u&&(o.id=a)}return o},t.prototype.addClass=function(e){var n=this.em.Selectors.addClass(e);return this.classes.add(n)},t.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},t.prototype.removeClass=function(e){var n=[];e=(0,B.isArray)(e)?e:[e];var i=this.classes,o=mo.TYPE_CLASS;return e.forEach(function(s){var a=s.split(" ");a.forEach(function(c){var u=i.where({name:c,type:o})[0];u&&n.push(i.remove(u))})}),n},t.prototype.getClasses=function(){var e=this.getAttributes(),n=e.class;return n?n.split(" "):[]},t.prototype.initClasses=function(e,n,i){i===void 0&&(i={});var o="change:classes",s=this.get("attributes")||{},a=s.class,c=_G(s,["class"]),u=[this,o,this.initClasses],f=this.get("classes")||a||[],g=(0,B.isString)(f)?f.split(" "):f;this.stopListening.apply(this,u);var v=this.normalizeClasses(g),_=new Ul([]);return this.set("classes",_,i),_.add(v),_.on("add remove reset",this.__upSymbCls),a&&v.length&&this.set("attributes",c),this.listenTo.apply(this,u),this},t.prototype.initComponents=function(){var e="change:components",n=[this,e,this.initComponents];this.stopListening.apply(this,n);var i=new Kp([],this.opt);i.parent=this;var o=this.get("components"),s=!this.opt.avoidChildren;return this.set("components",i),s&&o&&i.add((0,B.isFunction)(o)?o(this):o,this.opt),i.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,n),this},t.prototype.initTraits=function(e){var n=this.em,i="change:traits";this.off(i,this.initTraits),this.__loadTraits();var o=zn({},this.get("attributes")),s=this.traits;return s.each(function(a){if(!a.changeProp){var c=a.getName(),u=a.getInitValue();c&&u&&(o[c]=u)}}),s.length&&this.set("attributes",o),this.on(i,this.initTraits),e&&n&&n.trigger("component:toggled"),this},t.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",n=["change:".concat(e),this.initScriptProps];this.off.apply(this,n);var i=this.previous(e)||[],o=this.get(e)||[],s=i.map(function(c){return"change:".concat(c)}).join(" "),a=o.map(function(c){return"change:".concat(c)}).join(" ");s&&this.off(s,this.__scriptPropsChange),a&&this.on(a,this.__scriptPropsChange),this.on.apply(this,n)}},t.prototype.__scriptPropsChange=function(e,n,i){i===void 0&&(i={}),!i.avoidStore&&this.trigger("rerender")},t.prototype.append=function(e,n){n===void 0&&(n={});var i=(0,B.isArray)(e)?Fs([],e,!0):[e],o=i.map(function(a){return(0,B.isString)(a)||a.collection&&a.collection.remove(a,{temporary:!0}),a}),s=this.components().add(o,zn({action:Wi.t.add},n));return(0,B.isArray)(s)?s:[s]},t.prototype.components=function(e,n){n===void 0&&(n={});var i=this.get("components");return(0,B.isUndefined)(e)?i:(i.reset(void 0,n),e?this.append(e,n):[])},t.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},t.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},t.prototype.empty=function(e){return e===void 0&&(e={}),this.components().reset(void 0,e),this},t.prototype.parent=function(e){e===void 0&&(e={});var n=this.collection||e.prev&&this.prevColl;return n?n.parent:void 0},t.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},t.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},t.prototype.initToolbar=function(){var e=this.em,n=this,i=e&&e.getConfig().stylePrefix||"";if(!n.get("toolbar")&&e){var o=[];n.collection&&o.push({label:e.getIcon("arrowUp"),command:function(s){return s.runCommand("core:component-exit",{force:1})}}),n.get("draggable")&&o.push({attributes:{class:"".concat(i,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),n.get("copyable")&&o.push({label:e.getIcon("copy"),command:"tlb-clone"}),n.get("removable")&&o.push({label:e.getIcon("delete"),command:"tlb-delete"}),n.set("toolbar",o)}},t.prototype.__loadTraits=function(e,n){n===void 0&&(n={});var i=e||this.traits;if(!(i instanceof u_)){i=(0,B.isFunction)(i)?i(this):i;var o=new u_([],this.opt);o.setTarget(this),i.length&&(i.forEach(function(s){return s.attributes&&delete s.attributes.value}),o.add(i)),this.set({traits:o},n)}return this},t.prototype.getTraits=function(){return this.__loadTraits(),Fs([],this.traits.models,!0)},t.prototype.setTraits=function(e){var n=(0,B.isArray)(e)?e:[e];return this.set({traits:n}),this.getTraits()},t.prototype.getTrait=function(e){return this.getTraits().filter(function(n){return n.get("id")===e||n.get("name")===e})[0]||null},t.prototype.updateTrait=function(e,n){var i,o=this.getTrait(e);return o&&o.set(n),(i=this.em)===null||i===void 0||i.trigger("component:toggled"),this},t.prototype.getTraitIndex=function(e){var n=this.getTrait(e);return n?this.traits.indexOf(n):-1},t.prototype.removeTrait=function(e){var n=this,i,o=(0,B.isArray)(e)?e:[e],s=o.map(function(u){return n.getTrait(u)}),a=this.traits,c=s.length?a.remove(s):[];return(i=this.em)===null||i===void 0||i.trigger("component:toggled"),(0,B.isArray)(c)?c:[c]},t.prototype.addTrait=function(e,n){var i;n===void 0&&(n={}),this.__loadTraits();var o=this.traits.add(e,n);return(i=this.em)===null||i===void 0||i.trigger("component:toggled"),(0,B.isArray)(o)?o:[o]},t.prototype.normalizeClasses=function(e){var n=[],i=this.em,o=i?.Selectors;return o?e.models?Fs([],e.models,!0):(e.forEach(function(s){return n.push(o.add(s))}),n):[]},t.prototype.clone=function(e){e===void 0&&(e={});var n=this.em,i=zn({},this.attributes),o=zn({},this.opt),s=this.getId(),a=n?.Css;i.attributes=zn({},i.attributes),delete i.attributes.id,i.components=[],i.classes=[],i.traits=[],ru(this)&&(e.symbol=!0),this.get("components").each(function(b,C){i.components[C]=b.clone(zn(zn({},e),{_inner:1}))}),this.get("traits").each(function(b,C){i.traits[C]=b.clone()}),this.get("classes").each(function(b,C){i.classes[C]=b.get("name")}),i.status="",o.collection=null;var c=new this.constructor(i,o),u="#".concat(c.getId()),f=a?a.getRules("#".concat(s)):[];f.forEach(function(b){var C=b.clone();C.set("selectors",[u]),a.getAll().add(C)}),c.set(Po,0);var g=iu(this),v=Yo(this);!e.symbol&&(g||v)?(c.set(ds,0),c.set(Po,0)):g?(g.set(Po,Fs(Fs([],Yo(g),!0),[c],!1)),Pp(c)):e.symbol&&(o_(this)?(this.set(Po,Fs(Fs([],v,!0),[c],!1)),c.set(ds,this),Pp(c)):e.symbolInv?(this.set(Po,[c]),c.set(ds,this),[this,c].map(function(b){return Pp(b)})):(c.set(Po,[this]),[this,c].map(function(b){return Pp(b)}),this.set(ds,c)));var _="component:clone";return n&&n.trigger(_,c),this.trigger(_,c),c},t.prototype.getName=function(e){e===void 0&&(e={});var n=this.em,i=this.attributes,o=i.type,s=i.tagName,a=i.name,c=o||s,u=o?"":s,f="domComponents.names.",g=a&&n?.t("".concat(f).concat(a)),v=u&&n?.t("".concat(f).concat(u)),_=n&&(n.t("".concat(f).concat(o))||n.t("".concat(f).concat(s))),b=this.get("custom-name");return(e.noCustom?"":b)||g||a||v||(0,Le.capitalize)(u)||_||(0,Le.capitalize)(c)},t.prototype.setName=function(e,n){n===void 0&&(n={}),this.set("custom-name",e,n)},t.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},t.prototype.toHTML=function(e){e===void 0&&(e={});var n=this,i=[],o=e.tag,s=o||n.get("tagName"),a=n.get("void"),c=e.attributes,u=this.getAttrToHTML(e);if(delete e.tag,c&&((0,B.isFunction)(c)?u=c(n,u)||{}:(0,Le.isObject)(c)&&(u=c)),e.withProps){var f=this.toJSON();(0,B.forEach)(f,function(q,N){var G=["classes","attributes","components"];N[0]!=="_"&&G.indexOf(N)<0&&(u["data-gjs-".concat(N)]=(0,B.isArray)(q)||(0,Le.isObject)(q)?JSON.stringify(q):(0,B.isBoolean)(q)?"".concat(q):q)})}for(var g in u){var v=u[g];if(!(0,B.isUndefined)(v)&&v!==null)if((0,B.isBoolean)(v))v&&i.push(g);else{var _="";if(e.altQuoteAttr&&(0,B.isString)(v)&&v.indexOf('"')>=0)_="'".concat(v.replace(/'/g,"&apos;"),"'");else{var b=(0,B.isString)(v)?v.replace(/"/g,"&quot;"):v;_='"'.concat(b,'"')}i.push("".concat(g,"=").concat(_))}}var C=i.length?" ".concat(i.join(" ")):"",S=n.getInnerHTML(e),j="<".concat(s).concat(C).concat(a?"/":"",">").concat(S);return!a&&(j+="</".concat(s,">")),j},t.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},t.prototype.__innerHTML=function(e){e===void 0&&(e={});var n=this.components();return n.length?n.map(function(i){return i.toHTML(e)}).join(""):this.content},t.prototype.getAttrToHTML=function(e){var n=this.getAttributes();return Rp(this.em)&&e?.keepInlineStyle!==!0&&delete n.style,n},t.prototype.toJSON=function(e){e===void 0&&(e={});var n=PS.Model.prototype.toJSON.call(this,e);if(n.attributes=this.getAttributes(),delete n.attributes.class,delete n.toolbar,delete n.traits,delete n.status,delete n.open,delete n._undoexc,delete n.delegate,!e.fromUndo){var i=n[ds],o=n[Po];o&&(0,B.isArray)(o)&&(n[Po]=o.filter(function(s){return s}).map(function(s){return s.getId?s.getId():s})),i&&!(0,B.isString)(i)&&(n[ds]=i.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(n),n},t.prototype.getChangedProps=function(e){var n=e||PS.Model.prototype.toJSON.apply(this),i=(0,B.result)(this,"defaults");return(0,B.forEach)(i,function(o,s){["type"].indexOf(s)===-1&&n[s]===o&&delete n[s]}),(0,B.isEmpty)(n.type)&&delete n.type,(0,B.forEach)(["attributes","style"],function(o){(0,B.isEmpty)(i[o])&&(0,B.isEmpty)(n[o])&&delete n[o]}),(0,B.forEach)(["classes","components"],function(o){(!n[o]||(0,B.isEmpty)(i[o])&&!n[o].length)&&delete n[o]}),n},t.prototype.getId=function(){var e=this.get("attributes")||{};return e.id||this.ccid||this.cid},t.prototype.setId=function(e,n){var i=zn({},this.get("attributes"));return i.id=e,this.set("attributes",i,n),this},t.prototype.getEl=function(e){var n=this.getView(e);return n&&n.el},t.prototype.getView=function(e){var n=this,i=n.view,o=n.views,s=n.em,a=e||s?.getCurrentFrameModel();return a&&(i=o.filter(function(c){return c.frameView===a.view})[0]),i},t.prototype.getCurrentView=function(){var e=this.em.getCurrentFrame(),n=e?.model;return this.getView(n)},t.prototype.__getScriptProps=function(){var e=this.props(),n=this.get("script-props")||[];return n.reduce(function(i,o){return i[o]=e[o],i},{})},t.prototype.getScriptString=function(e){var n=this,i=e||this.get("script")||"";if(!i)return i;if(this.get("script-props"))i=i.toString().trim();else{if((0,B.isFunction)(i)){var o=i.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),i=o.trim()}var s=this.em.getConfig(),a=SN(s.tagVarStart||"{[ "),c=SN(s.tagVarEnd||" ]}"),u=new RegExp("".concat(a,"([\\w\\d-]*)").concat(c),"g");i=i.replace(u,function(f,g){n.scriptUpdated();var v=n.attributes[g]||"";return(0,B.isArray)(v)||typeof v=="object"?JSON.stringify(v):v})}return i},t.prototype.emitUpdate=function(e){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=this.em,a=n_+(e?":".concat(e):""),c=e&&this.get(e);e&&this.updated.apply(this,Fs([e,c,e&&this.previous(e)],i,!1)),this.trigger.apply(this,Fs([a],i,!1)),s&&s.trigger.apply(s,Fs([a,this],i,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(n={},n[e]=c,n),options:i[2]||i[1]||{}})},t.prototype.onAll=function(e){return(0,B.isFunction)(e)&&(e(this),this.components().forEach(function(n){return n.onAll(e)})),this},t.prototype.forEachChild=function(e){(0,B.isFunction)(e)&&this.components().forEach(function(n){e(n),n.forEachChild(e)})},t.prototype.remove=function(e){var n=this;e===void 0&&(e={});var i=this.em,o=this.collection,s=function(){o&&o.remove(n,zn({action:Wi.t.remove},e)),o||(n.components("",e),n.components().removeChildren(n,void 0,e))},a=zn({},e);return[this,i].map(function(c){return c.trigger(Wi.I.removeBefore,n,s,a)}),!a.abort&&s(),this},t.prototype.move=function(e,n){if(n===void 0&&(n={}),e){var i=n.at,o=this.index(),s=e===this.parent(),a=o===i||o===i-1;if(!s||!a){s&&i&&i>o&&(n.at=i-1);var c=Wi.t.move;this.remove({action:c,temporary:1}),e.append(this,zn({action:c},n)),this.emitUpdate()}}return this},t.prototype.isInstanceOf=function(e){var n,i,o=(i=(n=this.em)===null||n===void 0?void 0:n.Components.getType(e))===null||i===void 0?void 0:i.model;if(!o)return!1;var s=this.constructor.typeExtends;return this instanceof o||s.has(e)},t.prototype.isChildOf=function(e){for(var n=(0,B.isString)(e),i=this.parent();i;){if(n){if(i.isInstanceOf(e))return!0}else if(i===e)return!0;i=i.parent()}return!1},t.prototype.resetId=function(e){e===void 0&&(e={});var n=this.em,i=this.getId();if(!i)return this;var o=t.createId(this);this.setId(o);var s=n?.Css.getIdRule(i),a=s?.get("selectors").at(0);return a?.set("name",o),this},t.prototype._getStyleRule=function(e){var n=e===void 0?{}:e,i=n.id,o=this.em,s=i||this.getId();return o?.Css.getIdRule(s)},t.prototype._getStyleSelector=function(e){var n=this._getStyleRule(e);return n?.get("selectors").at(0)},t.prototype._idUpdated=function(e,n,i){if(i===void 0&&(i={}),!i.idUpdate){var o=this.ccid,s=(this.get("attributes")||{}).id,a=(this.previous("attributes")||{}).id||o,c=t.getList(this);if(c[s]||!s&&a)return this.setId(a,{idUpdate:!0});delete c[a],c[s]=this,this.ccid=s;var u=this._getStyleSelector({id:a});u&&u.set({name:s,label:s})}},t.getDefaults=function(){return(0,B.result)(this.prototype,"defaults")},t.isComponent=function(e,n){return{tagName:(0,Le.toLowerCase)(e.tagName)}},t.ensureInList=function(e){var n=t.getList(e),i=e.getId(),o=n[i];if(!o)n[i]=e;else if(o!==e){var s=t.getIncrementId(i,n);e.setId(s),n[s]=e}e.components().forEach(function(a){return t.ensureInList(a)})},t.createId=function(e,n){n===void 0&&(n={});var i=t.getList(e),o=n.idMap,s=o===void 0?{}:o,a=e.get("attributes").id,c;return a?(c=t.getIncrementId(a,i,n),e.setId(c),a!==c&&(s[a]=c)):c=t.getNewId(i),i[c]=e,c},t.getNewId=function(e){for(var n=Object.keys(e).length,i=n.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-i),s="i".concat(o);e[s];)s=t.getNewId(e);return s},t.getIncrementId=function(e,n,i){i===void 0&&(i={});var o=i.keepIds,s=o===void 0?[]:o,a=1,c=e;if(s.indexOf(e)<0)for(;n[c];)a++,c="".concat(e,"-").concat(a);return c},t.getList=function(e){var n,i=e.em,o=i?.Components;return(n=o?.componentsById)!==null&&n!==void 0?n:{}},t.checkId=function(e,n,i,o){n===void 0&&(n=[]),i===void 0&&(i={}),o===void 0&&(o={});var s=(0,B.isArray)(e)?e:[e],a=o.keepIds,c=a===void 0?[]:a,u=o.idMap,f=u===void 0?{}:u;s.forEach(function(g){g.attributes;var v=g.attributes,_=v===void 0?{}:v,b=g.components,C=_.id;if(C&&i[C]&&c.indexOf(C)<0){var S=t.getIncrementId(C,i);f[C]=S,_.id=S,(0,B.isArray)(n)&&n.forEach(function(j){var q=j.selectors;q.forEach(function(N,G){N==="#".concat(C)&&(q[G]="#".concat(S))})})}b&&t.checkId(b,n,i,o)})},t.typeExtends=new Set,t}(Kj),qi=wG,bG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),d_=function(){return d_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},d_.apply(this,arguments)},nf="head",CG=["title","style","base","link","meta","script","noscript"],xG=function(r){bG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return d_(d_({},r.prototype.defaults),{type:nf,tagName:nf,draggable:!1,highlightable:!1,droppable:function(e){var n=e.tagName;return!n||CG.includes((0,Le.toLowerCase)(n))}})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===nf},t}(qi),EG=xG,FS=function(){return FS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},FS.apply(this,arguments)},SG=function(){function r(t,e){var n=this;this.em=t,this.canvas=t.Canvas;var i=e||this.canvas.getFrames().map(function(s){return s.getComponent().getEl()}),o=Array.isArray(i)?i:[i];this.el=o[0],this.counter=0,(0,B.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),o.forEach(function(s){return n.toggleEffects(s,!0)})}return r.prototype.toggleEffects=function(t,e){var n={on:st.on,off:st.AU},i=e?"on":"off";n[i](t,"dragenter",this.handleDragEnter),n[i](t,"dragover",this.handleDragOver),n[i](t,"drop",this.handleDrop),n[i](t,"dragleave",this.handleDragLeave)},r.prototype.__customTglEff=function(t){var e,n=t?st.on:st.AU,i=this.el.ownerDocument,o=(e=i.defaultView)===null||e===void 0?void 0:e.frameElement;this.sortOpts=t?{onStart:function(s){var a=s.sorter;(0,st.on)(o,"pointermove",a.onMove)},onEnd:function(s){var a=s.sorter;(0,st.AU)(o,"pointermove",a.onMove)},customTarget:function(s){var a=s.event;return i.elementFromPoint(a.clientX,a.clientY)}}:null,n(o,"pointerenter",this.handleDragEnter),n(o,"pointermove",this.handleDragOver),n(document,"pointerup",this.handleDrop),n(o,"pointerout",this.handleDragLeave)},r.prototype.startCustom=function(){this.__customTglEff(!0)},r.prototype.endCustom=function(t){this.over?this.endDrop(t):this.__customTglEff(!1)},r.prototype.endDrop=function(t,e){var n=this,i=n.em,o=n.dragStop;this.counter=0,o&&o(t||!this.over),this.__customTglEff(!1),i.trigger("canvas:dragend",e)},r.prototype.handleDragLeave=function(t){this.updateCounter(-1,t)},r.prototype.updateCounter=function(t,e){this.counter+=t,this.counter===0&&this.endDrop(!0,e)},r.prototype.handleDragEnter=function(t){var e=this,n=this,i=n.em,o=n.canvas,s=t.dataTransfer,a=i.get("dragContent");if(!(!a&&!o.getConfig().allowExternalDrop)&&(this.updateCounter(1,t),!this.over)){this.over=!0;var c=i.Utils,u=a||"<br>",f,g;if(i.stopDefault(),i.inAbsoluteMode()){var v=i.Components.getWrapper(),_=v.append({})[0],b=i.Commands.run("core:component-drag",{event:t,guidesInfo:1,center:1,target:_,onEnd:function(S,j,q){var N=q.cancelled,G;if(!N){G=v.append(u)[0];var se=o.getOffset(),ue=_.getStyle(),Y=ue.top,L=ue.left,k=ue.position,$=(0,st.Xy)(S.target),I=parseInt("".concat(parseFloat(L)+$.x-se.left),10),T=parseInt("".concat(parseFloat(Y)+$.y-se.top),10);G.addStyle({left:I+"px",top:T+"px",position:k})}e.handleDragEnd(G,s),_.remove()}});f=function(S){return b.stop(t,{cancel:S})},g=function(S){return u=S}}else{var C=new c.Sorter(FS({em:i,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:o.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(S){return e.handleDragEnd(S,s)},document:this.el.ownerDocument},this.sortOpts||{}));C.setDropContent(u),C.startSort(),this.sorter=C,f=function(S){S&&(C.moved=!1),C.endMove()},g=function(S){return C.setDropContent(S)}}this.dragStop=f,this.dragContent=g,i.trigger("canvas:dragenter",s,u)}},r.prototype.handleDragEnd=function(t,e){var n=this.em;this.over=!1,t&&(n.set("dragResult",t),n.trigger("canvas:drop",e,t)),n.runDefault({preserveSelected:1})},r.prototype.handleDragOver=function(t){t.preventDefault(),this.em.trigger("canvas:dragover",t)},r.prototype.handleDrop=function(t){t.preventDefault();var e=this.dragContent,n=t.dataTransfer,i=this.getContentByData(n).content;i&&e&&e(i),this.endDrop(!i,t)},r.prototype.getContentByData=function(t){var e=this.em,n=t&&t.types,i=t&&t.files||[],o=e.get("dragContent"),s=t&&t.getData("text");if(i.length){s=[];for(var a=0;a<i.length;a++){var c=i[a],u=c.type.split("/")[0];u=="image"&&s.push({type:u,file:c,attributes:{alt:c.name}})}}else if(o)s=o;else if((0,B.indexOf)(n,"text/html")>=0)s=t&&t.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,B.indexOf)(n,"text/uri-list")>=0)s={type:"link",attributes:{href:s},content:s};else if((0,B.indexOf)(n,"text/json")>=0){var f=t&&t.getData("text/json");f&&(s=JSON.parse(f))}else n.length===1&&n[0]==="text/plain"&&(s="<div>".concat(s,"</div>"));var g={content:s};return e.trigger("canvas:dragdata",t,g),g},r}(),AG=SG,TG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),us=function(){return us=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},us.apply(this,arguments)},OG=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},MG=function(r){TG(t,r);function t(e,n){var i=r.call(this,{model:e})||this;i.dragging=!1,i.loaded=!1,i.lastMaxHeight=0,i.tools={},(0,B.bindAll)(i,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var o=i.el;i.module._config=us(us({},i.config||{}),{frameView:i}),i.frameWrapView=n,i.showGlobalTools=(0,B.debounce)(i.showGlobalTools.bind(i),50);var s=i.getCanvasModel();return i.listenTo(e,"change:head",i.updateHead),i.listenTo(s,"change:styles",i.renderStyles),e.view=i,(0,Le.setViewEl)(o,i),i}return Object.defineProperty(t.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),t.prototype.getBoxRect=function(){var e=this,n=e.el,i=e.module,o=i.getCanvasView(),s=i.getCoords(),a=n.getBoundingClientRect(),c=o.getCanvasOffset(),u=o.getViewportDelta(),f=i.getZoomMultiplier(),g=(a.x-c.left-u.x-s.x)*f,v=(a.y-c.top-u.y-s.y)*f,_=a.width*f,b=a.height*f;return{x:g,y:v,width:_,height:b}},t.prototype.updateHead=function(){var e=this.model,n=this.getHead(),i=[],o=[],s=e.head,a=e.previous("head"),c=function(f){return f===void 0&&(f={}),Object.keys(f).sort().map(function(g){return"[".concat(g,'="').concat(f[g],'"]')}).join("")},u=function(f,g,v){f.forEach(function(_){var b=_.tag,C=_.attributes,S=g.some(function(j){return j.tag===b&&c(j.attributes)===c(C)});!S&&v.push(_)})};u(s,a,o),u(a,s,i),i.forEach(function(f){var g,v=n.querySelector("".concat(f.tag).concat(c(f.attributes)));(g=v?.parentNode)===null||g===void 0||g.removeChild(v)}),(0,st.af)(n,o)},t.prototype.getEl=function(){return this.el},t.prototype.getCanvasModel=function(){var e;return(e=this===null||this===void 0?void 0:this.em.Canvas)===null||e===void 0?void 0:e.getModel()},t.prototype.getWindow=function(){return this.getEl().contentWindow},t.prototype.getDoc=function(){return this.getEl().contentDocument},t.prototype.getHead=function(){return this.getDoc().querySelector("head")},t.prototype.getBody=function(){return this.getDoc().querySelector("body")},t.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},t.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,st.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},t.prototype.getToolsEl=function(){var e;return(e=this.frameWrapView)===null||e===void 0?void 0:e.elTools},t.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},t.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},t.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},t.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},t.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},t.prototype.getOffsetRect=function(){var e=this.el,n=this.getBody(),i=n.scrollTop,o=n.scrollLeft,s=e.offsetHeight,a=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:s,width:a,scrollTop:i,scrollLeft:o,scrollBottom:i+s,scrollRight:o+a}},t.prototype._getTool=function(e){var n=this.tools,i=this.getToolsEl();return n[e]||(n[e]=i.querySelector(e)),n[e]},t.prototype.remove=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this._toggleEffects(!1),this.tools={},(e=this.wrapper)===null||e===void 0||e.remove(),hs.prototype.remove.apply(this,n),this},t.prototype.startAutoscroll=function(){var e=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){e._toggleAutoscrollFx(!0),requestAnimationFrame(e.autoscroll)},0)},t.prototype.autoscroll=function(){if(this.dragging){var e=this.lastClientY,n=this.em.Canvas,i=this.getWindow(),o=i.pageYOffset,s=e||0,a=n.getConfig().autoscrollLimit,c=this.getRect().height-a,u=o;if(s<a&&(u-=a-s),s>c&&(u+=s-c),!(0,B.isUndefined)(e)&&u!==o&&u>0&&u<this.lastMaxHeight){var f=this.getGlobalToolsEl();f.style.opacity="0",this.showGlobalTools(),i.scrollTo(0,u),n.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},t.prototype.updateClientY=function(e){e.preventDefault(),this.lastClientY=(0,st.G2)(e).clientY*this.em.getZoomDecimal()},t.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},t.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},t.prototype._toggleAutoscrollFx=function(e){this.dragging=e;var n=this.getWindow(),i=e?"on":"off",o={on:st.on,off:st.AU};o[i](n,"mousemove dragover",this.updateClientY),o[i](n,"mouseup",this.stopAutoscroll)},t.prototype.render=function(){var e=this,n=e.$el,i=e.ppfx,o=e.em;return n.attr({class:"".concat(i,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},t.prototype.renderScripts=function(){var e=this,n=this,i=n.el,o=n.model,s=n.em,a="frame:load",c={el:i,model:o,view:this},u=this.getCanvasModel(),f=function(g){var v;if(g.length>0){var _=g.shift(),b=(0,st.a_)("script",us({type:"text/javascript"},(0,B.isString)(_)?{src:_}:_));(v=i.contentDocument)===null||v===void 0||v.head.appendChild(b),b.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?f(g):b.onerror=b.onload=f.bind(null,g)}else s?.trigger(e_.frameLoadHead,c),e.renderBody(),s?.trigger(e_.frameLoadBody,c),s?.trigger(a,c)};i.onload=function(){var g=e.config.frameContent;if(g){var v=e.getDoc();v.open(),v.write(g),v.close()}c.window=e.getWindow(),s?.trigger("".concat(a,":before"),c),s?.trigger(e_.frameLoad,c),e.renderHead(),f(OG([],u.get("scripts"),!0))}},t.prototype.renderStyles=function(e){e===void 0&&(e={});var n=this.getHead(),i=this.getCanvasModel(),o=function(g){return g===void 0&&(g=[]),g.map(function(v){return{tag:"link",attributes:us({rel:"stylesheet"},(0,B.isString)(v)?{href:v}:v)}})},s=o(e.prev||i.previous("styles")),a=o(i?.get("styles")),c=[],u=[],f=function(g,v,_){g.forEach(function(b){var C=b.attributes.href,S=v.some(function(j){return j.attributes.href===C});!S&&_.push(b)})};f(a,s,u),f(s,a,c),c.forEach(function(g){var v,_=n.querySelector('link[href="'.concat(g.attributes.href,'"]'));(v=_?.parentNode)===null||v===void 0||v.removeChild(_)}),(0,st.af)(n,u)},t.prototype.renderHead=function(){var e,n=this,i=n.model,o=n.em,s=i.root,a=(e=o?.Components)===null||e===void 0?void 0:e.getType(nf).view;a&&(this.headView=new a({el:this.getHead(),model:s.head,config:us(us({},s.config),{frameView:this})}).render())},t.prototype.renderBody=function(){var e=this,n,i,o,s=this,a=s.config,c=s.em,u=s.model,f=s.ppfx,g=this.getDoc(),v=this.getBody(),_=this.getWindow(),b=u.hasAutoHeight(),C=c.config;_._isEditor=!0,this.renderStyles({prev:[]});var S="#ffca6f";(0,st.BC)(v,`<style>
      `.concat(C.baseCss||a.frameStyle||"",`

      `).concat(b?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(b?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(f,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(f,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(f,`selected-parent {
        outline: 2px solid `).concat(S,` !important
      }

      .`).concat(f,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(f,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(f,`no-pointer {
        pointer-events: none;
      }

      .`).concat(f,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(f,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(f,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(f,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(f,`is__grabbing,
      .`).concat(f,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(C.canvasCss||"",`
      `).concat(C.protectedCss||"",`
    </style>`));var j=u.root,q=(((n=c?.Components)===null||n===void 0?void 0:n.getType("wrapper"))||{}).view;q&&(this.wrapper=new q({model:j,config:us(us({},j.config),{em:c,frameView:this})}).render(),(0,st.BC)(v,(i=this.wrapper)===null||i===void 0?void 0:i.el),(0,st.BC)(v,new Wj({collection:u.getStyles(),config:us(us({},c.Css.getConfig()),{frameView:this})}).render().el),(0,st.BC)(v,this.getJsContainer()),(0,st.on)(v,"click",function(N){var G;return N&&((G=N.target)===null||G===void 0?void 0:G.tagName)=="A"&&N.preventDefault()}),(0,st.on)(v,"submit",function(N){return N&&N.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!a.infiniteCanvas}}].forEach(function(N){return N.event.split(" ").forEach(function(G){g.addEventListener(G,function(se){return e.el.dispatchEvent((0,st.yL)(se,N.class))},N.opts)})}),this._toggleEffects(!0),(0,Le.hasDnd)(c)&&(this.droppable=new AG(c,(o=this.wrapper)===null||o===void 0?void 0:o.el)),this.loaded=!0,u.trigger("loaded"))},t.prototype._toggleEffects=function(e){var n=e?st.on:st.AU,i=this.getWindow();i&&n(i,"".concat(st.D8," resize"),this._emitUpdate)},t.prototype._emitUpdate=function(){this.model._emitUpdated()},t}(hs),PG=MG,iF=kn(14),IG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qd=function(){return Qd=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Qd.apply(this,arguments)},DG=function(r){IG(t,r);function t(e,n){var i=r.call(this,{model:e})||this;(0,B.bindAll)(i,"onScroll","frameLoaded","updateOffset","remove","startDrag");var o=Qd(Qd({},e.config),{frameWrapView:i});return i.cv=n,i.frame=new PG(e,i),i.classAnim="".concat(i.ppfx,"frame-wrapper--anim"),i.updateOffset=(0,B.debounce)(i.updateOffset.bind(i),0),i.updateSize=(0,B.debounce)(i.updateSize.bind(i),0),i.listenTo(e,"loaded",i.frameLoaded),i.listenTo(e,"change:x change:y",i.updatePos),i.listenTo(e,"change:width change:height",i.updateSize),i.listenTo(e,"destroy remove",i.remove),i.updatePos(),i.setupDragger(),i}return t.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},t.prototype.setupDragger=function(){var e=this,n=this,i=n.module,o=n.model,s,a,c,u=function(f){i.toggleFramesEvents(f)};this.dragger=new iF.A({onStart:function(){var f=o.attributes,g=f.x,v=f.y;c=e.em.getZoomMultiplier(),s=g,a=v,u(!1)},onEnd:function(){return u(!0)},setPosition:function(f){o.set({x:s+f.x*c,y:a+f.y*c})}})},t.prototype.startDrag=function(e){var n;e&&((n=this.dragger)===null||n===void 0||n.start(e))},t.prototype.__clear=function(e){var n=this.frame;n&&n.remove(e),(0,st.YZ)(this.elTools)},t.prototype.remove=function(e){var n=this;return this.__clear(e),hs.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(i){return n[i]=0}),this},t.prototype.updateOffset=function(){var e,n=this,i=n.em,o=n.$el,s=n.frame;!i||i.destroyed||(i.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(e=s?.model)===null||e===void 0||e._emitUpdated())},t.prototype.updatePos=function(e){var n=this,i=n.model,o=n.el,s=i.attributes,a=s.x,c=s.y,u=o.style;this.frame.rect=void 0,u.left=isNaN(a)?a:"".concat(a,"px"),u.top=isNaN(c)?c:"".concat(c,"px"),e&&this.updateOffset()},t.prototype.updateSize=function(){this.updateDim()},t.prototype.updateDim=function(){var e=this,n=e.em,i=e.el,o=e.$el,s=e.model,a=e.classAnim,c=e.frame;if(c){c.rect=void 0,o.addClass(a);var u=this.__handleSize(),f=u.noChanges,g=u.width,v=u.height;((0,B.isNull)(g)||(0,B.isNull)(v))&&s.set(Qd(Qd({},g?{}:{width:i.offsetWidth}),v?{}:{height:i.offsetHeight}),{silent:1}),n.stopDefault({preserveSelected:1}),f?this.updateOffset():setTimeout(this.updateOffset,350)}},t.prototype.onScroll=function(){var e=this,n=e.frame,i=e.em;i.trigger("frame:scroll",{frame:n,body:n.getBody(),target:n.getWindow()})},t.prototype.frameLoaded=function(){var e=this,n=e.frame,i=e.config;n.getWindow().onscroll=this.onScroll,this.updateDim()},t.prototype.__handleSize=function(){var e,n,i="px",o=this,s=o.model,a=o.el,c=a.style,u=s.attributes,f=u.width,g=u.height,v=c.width||"",_=c.height||"",b=f||"",C=g||"",S=v==b&&_==C,j=(0,B.isNumber)(b)?"".concat(b).concat(i):b,q=(0,B.isNumber)(C)?"".concat(C).concat(i):C;if(c.width=j,s.hasAutoHeight()){var N=this.frame.el;if(N.contentDocument){var G=N.contentDocument,se=new ResizeObserver(function(){c.height="".concat(G.body.scrollHeight,"px")});se.observe(G.body),(e=this.sizeObserver)===null||e===void 0||e.disconnect(),this.sizeObserver=se}}else c.height=q,(n=this.sizeObserver)===null||n===void 0||n.disconnect(),delete this.sizeObserver;return{noChanges:S,width:f,height:g,newW:b,newH:C}},t.prototype.render=function(){var e=this,n=e.frame,i=e.$el,o=e.ppfx,s=e.cv,a=e.model,c=e.el,u=a.attributes.onRender;this.__clear(),this.__handleSize(),n.render(),i.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(a.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(n.el);var f=(0,st.a_)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=f;var g=s?.toolsWrapper;return g&&g.appendChild(f),u&&u({el:c,elTop:c.querySelector("[data-frame-top]"),elRight:c.querySelector("[data-frame-right]"),elBottom:c.querySelector("[data-frame-bottom]"),elLeft:c.querySelector("[data-frame-left]"),frame:a,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},t}(hs),kG=DG,RG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),NG=function(r){RG(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,!0)||this;return i.listenTo(i.collection,"reset",i.render),i.canvasView=n.canvasView,i._module=n.module,i}return t.prototype.onRemoveBefore=function(e,n){n===void 0&&(n={}),e.forEach(function(i){return i.remove(n)})},t.prototype.onRender=function(){var e=this,n=e.$el,i=e.ppfx;n.attr({class:"".concat(i,"frames")})},t.prototype.clearItems=function(){var e=this.viewCollection||[];e.forEach(function(n){return n.remove()}),this.viewCollection=[]},t.prototype.renderView=function(e,n){return new kG(e,this.canvasView)},t}(Uq),jG=NG,FG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),f_=function(){return f_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},f_.apply(this,arguments)},LG=function(r){FG(t,r);function t(e){var n=r.call(this,{model:e})||this;n.ready=!1,(0,B.bindAll)(n,"clearOff","onKeyPress","onWheel","onPointer");var i=n,o=i.em,s=i.pfx,a=i.ppfx,c=n.module.events;return n.className="".concat(s,"canvas ").concat(a,"no-touch-actions").concat(o.config.customUI?"":" ".concat(s,"canvas-bg")),n.clsUnscale="".concat(s,"unscale"),n._initFrames(),n.listenTo(o,c.refresh,n.clearOff),n.listenTo(o,"component:selected",n.checkSelected),n.listenTo(o,"".concat(c.coords," ").concat(c.zoom),n.updateFrames),n.listenTo(e,"change:frames",n._onFramesUpdate),n.toggleListeners(!0),n}return t.prototype.template=function(){var e=this.pfx;return`
      <div class="`.concat(e,`canvas__frames" data-frames>
        <div class="`).concat(e,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(e,'tools" class="').concat(e,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},t.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},t.prototype._initFrames=function(){var e=this,n=e.frames,i=e.model,o=e.config,s=e.em,a=i.frames;s.set("readyCanvas",0),a.once("loaded:all",function(){return s.set("readyCanvas",1)}),n?.remove(),this.frames=new jG({collection:a},f_(f_({},o),{canvasView:this}))},t.prototype.checkSelected=function(e,n){var i;n===void 0&&(n={});var o=n.scroll,s=this.em.getCurrentFrame();o&&((i=e.views)===null||i===void 0||i.forEach(function(a){a.frameView===s&&a.scrollIntoView(o)}))},t.prototype.remove=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(e=this.frames)===null||e===void 0||e.remove(),this.frames=void 0,hs.prototype.remove.apply(this,n),this.toggleListeners(!1),this},t.prototype.preventDefault=function(e){var n;e&&(e.preventDefault(),(n=e._parentEvent)===null||n===void 0||n.preventDefault())},t.prototype.toggleListeners=function(e){var n=this,i=n.el,o=n.config,s=e?st.on:st.AU;s(document,"keypress",this.onKeyPress),s(window,"scroll resize",this.clearOff),s(i,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),s(i,"pointermove",this.onPointer)},t.prototype.screenToWorld=function(e,n){var i=this.module,o=i.getCoords(),s=i.getZoomMultiplier(),a=this.getViewportDelta();return{x:(e-o.x-a.x)*s,y:(n-o.y-a.y)*s}},t.prototype.onPointer=function(e){if(this.config.infiniteCanvas){var n=this.getCanvasOffset(),i=(0,st.Xy)(),o={x:e.clientX-n.left+i.x,y:e.clientY-n.top+i.y};if(e._parentEvent){var s=e.target.getBoundingClientRect(),a=this.module.getZoomDecimal();o.x=s.left-n.left+i.x+e.clientX*a,o.y=s.top-n.top+i.y+e.clientY*a}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},t.prototype.onKeyPress=function(e){var n=this.em,i=(0,st.Ch)(e);i===" "&&n.getZoomDecimal()!==1&&!n.Canvas.isInputFocused()&&(this.preventDefault(e),n.Editor.runCommand("core:canvas-move"))},t.prototype.onWheel=function(e){var n=this,i=n.module,o=n.config;if(o.infiniteCanvas){this.preventDefault(e);var s=e.deltaX,a=e.deltaY,c=i.getZoomDecimal(),u=(0,st.rp)(e),f=i.getCoords();if(u){var g=c-a*c*.01;i.setZoom(g*100);var v=this.model.getPointerCoords(rt.x2.Screen),_=this.getCanvasOffset(),b=v.x-_.width/2,C=v.y-_.height/2,S=g/c,j=b-(b-f.x)*S,q=C-(C-f.y)*S;i.setCoords(j,q)}else this.onPointer(e),i.setCoords(f.x-s,f.y-a)}},t.prototype.updateFrames=function(e){var n=this.em,i=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),i.style.display="none",n.trigger("canvas:update",e),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){n.stopDefault(o),n.runDefault(o),i.style.display=""},300)},t.prototype.updateFramesArea=function(){var e=this,n=e.framesArea,i=e.model,o=e.module,s=e.cvStyle,a=e.clsUnscale,c=o.getZoomMultiplier();if(n){var u=i.attributes,f=u.x,g=u.y,v=o.getZoomDecimal();n.style.transform="scale(".concat(v,") translate(").concat(f*c,"px, ").concat(g*c,"px)")}s&&(s.innerHTML=`
        .`.concat(a," { scale: ").concat(c,` }
      `))},t.prototype.fitViewport=function(e){var n,i;e===void 0&&(e={});var o=this,s=o.em,a=o.module,c=o.model,u=this.getCanvasOffset(),f=e.el,g=f&&((n=(0,Le.getComponentView)(f))===null||n===void 0?void 0:n.frameView),v=g?g.model:e.frame||s.getCurrentFrameModel()||c.frames.at(0),_=v.attributes,b=_.x,C=_.y,S={x:b??0,y:C??0,width:v.width,height:v.height};if(f){var j=this.getElBoxRect(f);S.x=S.x+j.x,S.y=S.y+j.y,S.width=j.width,S.height=j.height}var q=e.ignoreHeight,N=(i=e.gap)!==null&&i!==void 0?i:0,G=(0,B.isNumber)(N),se=G?N:N.x,ue=G?N:N.y,Y=S.width+se*2,L=S.height+ue*2,k=u.width,$=u.height,I=k/Y,T=$/L,O=q?I:Math.min(I,T),Z=O*100;a.setZoom(Z);var ce=-S.x+(v.width>=k?k/2-Y/2:-se),V=-S.y+$/2-L/2,xe={x:(ce+se)*O,y:(V+ue)*O};if(q){var Ee=a.getZoomMultiplier(),ze=$*Ee,pt=ze-$,ft=pt/2;xe.y=(-S.y+ue)*O-ft/Ee}a.setCoords(xe.x,xe.y)},t.prototype.isElInViewport=function(e){var n=(0,Le.getElement)(e),i=(0,st.C8)(n),o=this.getFrameOffset(n),s=i.top,a=i.left;return s>=0&&a>=0&&s<=o.height&&a<=o.width},t.prototype.offset=function(e,n){n===void 0&&(n={});var i=n.noScroll,o=(0,st.C8)(e),s=i?{x:0,y:0}:(0,st.Xy)(e);return{top:o.top+s.y,left:o.left+s.x,width:o.width,height:o.height}},t.prototype.getRectToScreen=function(e){var n,i,o,s,a=this.module.getZoomDecimal(),c=this.module.getCoords(),u=this.getViewportDelta(),f=((n=e.x)!==null&&n!==void 0?n:0)*a+c.x+u.x||0,g=((i=e.y)!==null&&i!==void 0?i:0)*a+c.y+u.y||0;return{x:f,y:g,width:((o=e.width)!==null&&o!==void 0?o:0)*a,height:((s=e.height)!==null&&s!==void 0?s:0)*a}},t.prototype.getElBoxRect=function(e,n){var i,o,s;n===void 0&&(n={});var a=this.module,c=(0,st.C8)(e),u=c.width,f=c.height,g=c.left,v=c.top,_=(i=(0,Le.getComponentView)(e))===null||i===void 0?void 0:i.frameView,b=_?.getBoxRect(),C=a.getZoomMultiplier(),S=(o=b?.x)!==null&&o!==void 0?o:0,j=(s=b?.y)!==null&&s!==void 0?s:0,q=this.el,N=(0,st.Xy)(),G=g+S+(q.scrollLeft+N.x)*C,se=v+j+(q.scrollTop+N.y)*C,ue={x:G,y:se,width:u,height:f};return n.local&&(ue.x=g,ue.y=v),n.toScreen?this.getRectToScreen(ue):ue},t.prototype.getViewportRect=function(e){e===void 0&&(e={});var n=this.getCanvasOffset(),i=n.top,o=n.left,s=n.width,a=n.height,c=this.module;if(e.toWorld){var u=c.getZoomMultiplier(),f=c.getCoords(),g=this.getViewportDelta(),v=-f.x-g.x||0,_=-f.y-g.y||0;return{x:v*u,y:_*u,width:s*u,height:a*u}}else return{x:o,y:i,width:s,height:a}},t.prototype.getViewportDelta=function(e){e===void 0&&(e={});var n=this.module.getZoomMultiplier(),i=this.getCanvasOffset(),o=i.width,s=i.height,a=o*n,c=s*n,u=a-o,f=c-s;return{x:u/2/n,y:f/2/n}},t.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},t.prototype.getFrameOffset=function(e){var n;if(!this.frmOff||e){var i=(n=this.frame)===null||n===void 0?void 0:n.el,o=e?.ownerDocument.defaultView,s=o?o.frameElement:i;this.frmOff=this.offset(s||i)}return this.frmOff},t.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},t.prototype.getElementPos=function(e,n){n===void 0&&(n={});var i=this.module.getZoomDecimal(),o=this.getFrameOffset(e),s=this.el,a=this.getCanvasOffset(),c=this.offset(e,n),u=n.avoidFrameOffset?0:o.top,f=n.avoidFrameOffset?0:o.left,g=n.avoidFrameZoom?c.top:c.top*i,v=n.avoidFrameZoom?c.left:c.left*i,_=n.avoidFrameOffset?g:g+u-a.top+s.scrollTop,b=n.avoidFrameOffset?v:v+f-a.left+s.scrollLeft,C=n.avoidFrameZoom?c.height:c.height*i,S=n.avoidFrameZoom?c.width:c.width*i;return{top:_,left:b,height:C,width:S,zoom:i,rect:c}},t.prototype.getElementOffsets=function(e){if(!e||(0,st.ir)(e))return{};var n={},i=window.getComputedStyle(e),o=this.module.getZoomDecimal(),s=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return s.forEach(function(a){n[a]=parseFloat(i[a])*o}),n},t.prototype.getPosition=function(e){var n;e===void 0&&(e={});var i=(n=this.frame)===null||n===void 0?void 0:n.el.contentDocument;if(!i)return{top:0,left:0,width:0,height:0};var o=i.body,s=this.module.getZoomDecimal(),a=this.getFrameOffset(),c=this.getCanvasOffset(),u=e.noScroll;return{top:a.top+(u?0:o.scrollTop)*s-c.top,left:a.left+(u?0:o.scrollLeft)*s-c.left,width:c.width,height:c.height}},t.prototype.updateScript=function(e){var n=e.model,i=n.getId();if(!e.scriptContainer){e.scriptContainer=(0,st.a_)("div",{"data-id":i});var o=this.getJsContainer();o?.appendChild(e.scriptContainer)}e.el.id=i,e.scriptContainer.innerHTML="";var s=document.createElement("script"),a=n.getScriptString(),c=n.get("script-props")?a:`function(){
`.concat(a,`
;}`),u=JSON.stringify(n.__getScriptProps());s.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(i,`');
        if (!item) return;
        (`).concat(c,".bind(item))(").concat(u,`)
      }, 1);`),setTimeout(function(){var f=e.scriptContainer;f?.appendChild(s)},0)},t.prototype.getJsContainer=function(e){var n=this.getFrameView(e);return n?.getJsContainer()},t.prototype.getFrameView=function(e){return e?.frameView||this.em.getCurrentFrame()},t.prototype._renderFrames=function(){if(this.ready){var e=this,n=e.model,i=e.frames,o=e.em,s=e.framesArea,a=n.frames;a.listenToLoad(),i.render();var c=a.at(0),u=c?.view;o.setCurrentFrame(u),s?.appendChild(i.el),this.frame=u,this.updateFramesArea()}},t.prototype.renderFrames=function(){this._renderFrames()},t.prototype.render=function(){var e=this,n=e.el,i=e.$el,o=e.ppfx,s=e.config,a=e.em;i.html(this.template());var c=i.find("[data-frames]");this.framesArea=c.get(0);var u=i.find("[data-tools]");return this.toolsWrapper=u.get(0),u.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(s.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=n.querySelector("#".concat(o,"tools")),this.hlEl=n.querySelector(".".concat(o,"highlighter")),this.badgeEl=n.querySelector(".".concat(o,"badge")),this.placerEl=n.querySelector(".".concat(o,"placeholder")),this.ghostEl=n.querySelector(".".concat(o,"ghost")),this.toolbarEl=n.querySelector(".".concat(o,"toolbar")),this.resizerEl=n.querySelector(".".concat(o,"resizer")),this.offsetEl=n.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=n.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=n.querySelector(".".concat(o,"tools-gl")),this.spotsEl=n.querySelector("[data-spots]"),this.cvStyle=n.querySelector("[data-canvas-style]"),this.el.className=(0,Le.getUiClass)(a,this.className),this.ready=!0,this._renderFrames(),this},t}(hs),VG=LG,BG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jc=function(){return Jc=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Jc.apply(this,arguments)},UG=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},HG=function(r){BG(t,r);function t(e){var n=r.call(this,e,"Canvas",cq)||this;return n.events=XS,n.framesById={},n.canvas=new kq(n),n.spots=new jq(n),n.model=n.canvas,n.startAutoscroll=n.startAutoscroll.bind(n),n.stopAutoscroll=n.stopAutoscroll.bind(n),n}return t.prototype.getCanvasView=function(){return this.canvasView},t.prototype.postLoad=function(){this.model.init()},t.prototype.getModel=function(){return this.canvas},t.prototype.getElement=function(){return this.getCanvasView().el},t.prototype.getFrame=function(e){return this.getFrames()[e||0]},t.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e?.el},t.prototype.getFramesEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.framesArea},t.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e?.getWindow()},t.prototype.getDocument=function(){var e=this.getFrameEl();return e?.contentDocument},t.prototype.getBody=function(){var e=this.getDocument();return e?.body},t.prototype._getLocalEl=function(e,n,i){var o=e,s=n?.frameView;return o=s?s[i]():o,o},t.prototype.getGlobalToolsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.toolsGlobEl},t.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},t.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},t.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},t.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},t.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},t.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},t.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},t.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},t.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},t.prototype.getSpotsEl=function(){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.spotsEl},t.prototype.render=function(){var e;return(e=this.canvasView)===null||e===void 0||e.remove(),this.canvasView=new VG(this.canvas),this.canvasView.render().el},t.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),n=this.offset(this.getElement());return{top:e.top-n.top,left:e.left-n.left}},t.prototype.offset=function(e){return this.getCanvasView().offset(e)},t.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},t.prototype.getElementPos=function(e,n){return this.getCanvasView().getElementPos(e,n)},t.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},t.prototype.getRect=function(){var e,n=(e=this.getCanvasView().getPosition())!==null&&e!==void 0?e:{},i=n.top,o=i===void 0?0:i,s=n.left,a=s===void 0?0:s;return Jc(Jc({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:a})},t.prototype.getTargetToElementDim=function(e,n,i){i===void 0&&(i={});var o=i||{},s=this.getCanvasView().getPosition();if(s){var a=o.elPos||this.getCanvasView().getElementPos(n),c=i.toRight||0,u=o.targetHeight||e.offsetHeight,f=o.targetWidth||e.offsetWidth,g=o.event||null,v=a.top-u,_=a.left;_+=c?a.width:0,_=c?_-f:_;var b=_<s.left?s.left:_,C=v<s.top?s.top:v;C=C>a.top+a.height?a.top+a.height:C;var S={top:C,left:b,elementTop:a.top,elementLeft:a.left,elementWidth:a.width,elementHeight:a.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:s.top,canvasLeft:s.left,canvasWidth:s.width,canvasHeight:s.height};return g&&this.em&&this.em.trigger(g,S),S}},t.prototype.canvasRectOffset=function(e,n,i){var o=this;i===void 0&&(i={});var s=function(c){var u=c.defaultView;return u?.frameElement},a=function(c,u,f){u===void 0&&(u=1);var g=o.em.getZoomDecimal(),v=u?"top":"left",_=c.ownerDocument,b=i.offset?s(_):{},C=b.offsetTop,S=C===void 0?0:C,j=b.offsetLeft,q=j===void 0?0:j,N=_.body||{},G=N.scrollTop,se=G===void 0?0:G,ue=N.scrollLeft,Y=ue===void 0?0:ue,L=u?se:Y,k=u?S:q;return f[v]-(L-k)*g};return{top:a(e,1,n),left:a(e,0,n)}},t.prototype.getTargetToElementFixed=function(e,n,i){i===void 0&&(i={});var o=i.pos||this.getElementPos(e,{noScroll:!0}),s=i.canvasOff||this.canvasRectOffset(e,o),a=n.offsetHeight||0,c=n.offsetWidth||0,u=o.left+o.width,f=this.getCanvasView(),g=f.getPosition(),v=f.getFrameOffset(e),_=i.event,b=-a,C=(0,B.isUndefined)(i.left)?o.width-c:i.left;if(C=o.left<-C?-o.left:C,C=u>g.width?C-(u-g.width):C,s.top<a){var S=o.height+a,j=S<v.height;j?b=b+S:b=-s.top<o.height?-s.top:o.height}var q={top:b,left:C,canvasOffsetTop:s.top,canvasOffsetLeft:s.left,elRect:o,canvasOffset:s,canvasRect:g,targetWidth:c,targetHeight:a};return _&&this.em.trigger(_,q),q},t.prototype.getMouseRelativePos=function(e,n){n===void 0&&(n={});var i=n.subWinOffset,o=e.target.ownerDocument,s=o.defaultView||o.parentWindow,a=s.frameElement,c=i?s.pageYOffset:0,u=i?s.pageXOffset:0,f=this.getZoomMultiplier(),g=0,v=0;if(a){var _=a.getBoundingClientRect();g=_.top||0,v=_.left||0}return{y:(e.clientY+g-c)*f,x:(e.clientX+v-u)*f}},t.prototype.getMouseRelativeCanvas=function(e,n){var i,o=this.getZoomDecimal(),s=(i=this.getCanvasView().getPosition(n))!==null&&i!==void 0?i:{},a=s.top,c=a===void 0?0:a,u=s.left,f=u===void 0?0:u;return{y:e.clientY*o+c,x:e.clientX*o+f}},t.prototype.hasFocus=function(){return this.getDocument().hasFocus()},t.prototype.isInputFocused=function(){var e=this.getDocument(),n=this.getFrameEl(),i=UG(["body"],this.config.notTextable,!0),o=n&&document.activeElement===n,s=o?e&&e.activeElement:document.activeElement;return s&&!i.some(function(a){return s.matches(a)})},t.prototype.scrollTo=function(e,n){n===void 0&&(n={});var i=(0,Le.getElement)(e),o=i&&(0,Le.getViewEl)(i);o&&o.scrollIntoView(n)},t.prototype.startAutoscroll=function(e){var n=e&&e.view||this.em.getCurrentFrame();n&&n.startAutoscroll()},t.prototype.stopAutoscroll=function(e){var n=e&&e.view||this.em.getCurrentFrame();n&&n.stopAutoscroll()},t.prototype.setZoom=function(e){return this.canvas.set("zoom",typeof e=="string"?parseFloat(e):e),this},t.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},t.prototype.setCoords=function(e,n,i){var o;i===void 0&&(i={});var s=e||e===0,a=n||n===0,c={x:this.canvas.get("x"),y:this.canvas.get("y")};if(s&&(c.x=parseFloat("".concat(e))),a&&(c.y=parseFloat("".concat(n))),i.toWorld){var u=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();u&&(s&&(c.x=c.x-u.x),a&&(c.y=c.y-u.y))}return this.canvas.set(c),this},t.prototype.getCoords=function(){var e=this.canvas.attributes,n=e.x,i=e.y;return{x:n,y:i}},t.prototype.getPointer=function(e){var n=this.canvas.attributes,i=n.pointer,o=n.pointerScreen;return e?o:i},t.prototype.getZoomDecimal=function(){return this.getZoom()/100},t.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},t.prototype.fitViewport=function(e){var n;(n=this.canvasView)===null||n===void 0||n.fitViewport(e)},t.prototype.toggleFramesEvents=function(e){var n=this.getFramesEl().style;n.pointerEvents=e?"":"none"},t.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},t.prototype.addFrame=function(e,n){return e===void 0&&(e={}),n===void 0&&(n={}),this.canvas.frames.add(new Hj(this,Jc({},e)),n)},t.prototype.getLastDragResult=function(){return this.em.get("dragResult")},t.prototype.addSpot=function(e,n){var i;n===void 0&&(n={});var o=e,s=this.getSpots(o);if(s.length){var a=s[0];return a.set(o),a}var c=o.componentView||((i=o.component)===null||i===void 0?void 0:i.view),u=new fs.A(this,Jc(Jc({},o),{id:o.id||"cs_".concat(o.type,"_").concat(c?.cid),type:o.type||""}));return this.spots.add(u,n),u},t.prototype.getSpots=function(e){return e===void 0&&(e={}),this.spots.where(e.id?{id:e.id}:e)},t.prototype.removeSpots=function(e){e===void 0&&(e={});var n=(0,B.isArray)(e)?e:this.getSpots(e),i=this.spots.remove(n);return i},t.prototype.hasCustomSpot=function(e){var n=this.config.customSpots;return!!(n===!0||n&&e&&n[e])},t.prototype.getWorldRectToScreen=function(e){var n;return(n=this.canvasView)===null||n===void 0?void 0:n.getRectToScreen(e)},t.prototype.refresh=function(e){e===void 0&&(e={});var n=this,i=n.em,o=n.events,s=n.canvasView;s?.clearOff(),(e.spots||e.all)&&(this.refreshSpots(),i.trigger("canvas:updateTools")),i.set("canvasOffset",this.getOffset()),i.trigger(o.refresh,e)},t.prototype.refreshSpots=function(){this.spots.refresh()},t.prototype.destroy=function(){var e=this,n;this.canvas.stopListening(),(n=this.canvasView)===null||n===void 0||n.remove(),["model","droppable"].forEach(function(i){return e[i]={}})},t}(ko),zG=HG,AN={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]},$G=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),h_=function(){return h_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},h_.apply(this,arguments)},WG=function(r){$G(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return h_(h_({},r.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),t.prototype.toHTML=function(){var e=this.content,n=this.parent();return n?.is("script")?e:this.__escapeContent(e)},t.prototype.__escapeContent=function(e){return(0,Le.escapeNodeContent)(e)},t.isComponent=function(e){var n;if(e.nodeType===3)return{type:"textnode",content:(n=e.textContent)!==null&&n!==void 0?n:""}},t}(qi),oF=WG,qG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),LS=function(){return LS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},LS.apply(this,arguments)},GG=function(r){qG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return LS({},r.prototype.defaults)},enumerable:!1,configurable:!0}),t.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},t.isComponent=function(e){var n;if(e.nodeType==8)return{type:"comment",content:(n=e.textContent)!==null&&n!==void 0?n:""}},t}(oF),KG=GG,QG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),p_=function(){return p_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},p_.apply(this,arguments)},nS="iframe",YG=function(r){QG(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return p_(p_({},r.prototype.defaults),{type:nS,tagName:nS,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===nS},t}(qi),JG=YG,ZG=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),g_=function(){return g_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},g_.apply(this,arguments)},TN='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',XG=function(r){ZG(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this,o=i.get("attributes").src;return o&&(0,Le.buildBase64UrlFromSvg)((0,B.result)(i,"defaults").src)!==o&&i.set("src",o,{silent:!0}),i}return Object.defineProperty(t.prototype,"defaults",{get:function(){return g_(g_({},r.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(TN,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(TN,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),t.prototype.initToolbar=function(){r.prototype.initToolbar.call(this);var e=this.em;if(e){var n=e.Commands,i="image-editor";if(n.has(i)){for(var o=!1,s=this.get("toolbar"),a=0;a<s.length;a++)if(s[a].command==="image-editor"){o=!0;break}o||(s.push({attributes:{class:"fa fa-pencil"},command:i}),this.set("toolbar",s))}}},t.prototype.getAttrToHTML=function(){var e=r.prototype.getAttrToHTML.call(this),n=this.getSrcResult();return n&&(e.src=n),e},t.prototype.getSrcResult=function(e){e===void 0&&(e={});var n=this.get(e.fallback?"fallback":"src")||"",i=n;return n&&n.substr(0,4)==="<svg"&&(i=(0,Le.buildBase64UrlFromSvg)(n)),i},t.prototype.isDefaultSrc=function(){var e=this.get("src"),n=(0,B.result)(this,"defaults").src;return e===n||e===(0,Le.buildBase64UrlFromSvg)(n)},t.prototype.toJSON=function(e){var n=r.prototype.toJSON.call(this,e),i=n.attributes;return i&&n.src===i.src&&delete n.src,n},t.prototype.parseUri=function(e){var n={},i=function(o){o===void 0&&(o="");for(var s={},a=o.substring(1).split("&"),c=0;c<a.length;c++){var u=a[c].split("="),f=decodeURIComponent(u[0]);f&&(s[f]=decodeURIComponent(u[1]||""))}return s};if((0,Le.hasWin)())n=document.createElement("a"),n.href=e;else if(typeof URL<"u")try{n=new URL(e)}catch{}return{hostname:n.hostname||"",pathname:n.pathname||"",protocol:n.protocol||"",search:n.search||"",hash:n.hash||"",port:n.port||"",query:i(n.search)}},t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)==="img"},t}(qi),rA=XG,e7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),m_=function(){return m_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},m_.apply(this,arguments)},t7=function(r){e7(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this;return i.__checkInnerChilds(),i}return Object.defineProperty(t.prototype,"defaults",{get:function(){return m_(m_({},r.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),t.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var n=function(i){i.isInstanceOf("textnode")||i.set({locked:!0,layerable:!1})};(0,B.isFunction)(e)?this.forEachChild(function(i){e(i)&&n(i)}):this.forEachChild(n)}},t}(qi),iA=t7,n7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),v_=function(){return v_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},v_.apply(this,arguments)},rS="label",r7=function(r){n7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return v_(v_({},r.prototype.defaults),{type:rS,tagName:rS,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===rS},t}(iA),i7=r7,o7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),y_=function(){return y_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},y_.apply(this,arguments)},ON="link",s7=function(r){o7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return y_(y_({},r.prototype.defaults),{type:ON,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),t.isComponent=function(e,n){n===void 0&&(n={});var i;if((0,Le.toLowerCase)(e.tagName)==="a"){var o=n.textTags||[];i={type:ON,editable:!1};var s=e.childNodes,a=s.length;a||delete i.editable,(0,B.forEach)(s,function(c){var u=c.tagName;(c.nodeType==3&&c.textContent.trim()!==""||u&&o.indexOf((0,Le.toLowerCase)(u))>=0)&&delete i.editable})}return i},t}(iA),a7=s7,l7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__=function(){return __=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},__.apply(this,arguments)},c7=function(r){l7(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this;return i.get("src")?i.parseFromSrc():i.updateSrc(),i.listenTo(i,"change:address change:zoom change:mapType",i.updateSrc),i}return Object.defineProperty(t.prototype,"defaults",{get:function(){var e=r.prototype.defaults;return __(__({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),t.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},t.prototype.getMapUrl=function(){var e=this.get("address"),n=this.get("zoom"),i=this.get("mapType");e=e?"&q="+e:"",n=n?"&z="+n:"",i=i?"&t="+i:"";var o=this.get("mapUrl")+"?"+e+n+i;return o+="&output=embed",o},t.prototype.parseFromSrc=function(){var e=this.parseUri(this.get("src")),n=e.query;n.q&&this.set("address",n.q),n.z&&this.set("zoom",n.z),n.t&&this.set("mapType",n.t)},t.isComponent=function(e){if((0,Le.toLowerCase)(e.tagName)=="iframe"&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},t}(rA),u7=c7,d7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),w_=function(){return w_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},w_.apply(this,arguments)},iS="script",f7=function(r){d7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return w_(w_({},r.prototype.defaults),{type:iS,tagName:iS,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===iS},t}(qi),h7=f7,p7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),b_=function(){return b_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},b_.apply(this,arguments)},oS="svg",g7=function(r){p7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return b_(b_({},r.prototype.defaults),{type:oS,tagName:oS,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),t.prototype.getName=function(){var e=this.get("tagName"),n=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),n||e},t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===oS},t}(qi),sF=g7,m7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),C_=function(){return C_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},C_.apply(this,arguments)},v7=function(r){m7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return C_(C_({},r.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),t.isComponent=function(e,n){return n===void 0&&(n={}),!!n.inSvg},t}(sF),y7=v7,_7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),x_=function(){return x_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},x_.apply(this,arguments)},sS="table",w7=function(r){_7(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this,o=i.get("components");return!o.length&&o.add({type:"tbody"}),i}return Object.defineProperty(t.prototype,"defaults",{get:function(){return x_(x_({},r.prototype.defaults),{type:sS,tagName:sS,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===sS},t}(qi),b7=w7,C7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),E_=function(){return E_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},E_.apply(this,arguments)},aS="tbody",x7=function(r){C7(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this,o=i.get("components"),s=i.get("columns"),a=i.get("rows");if(!o.length){for(var c=[];a--;){for(var u=[],f=s;f--;)u.push({type:"cell",classes:["cell"]});c.push({type:"row",classes:["row"],components:u})}o.add(c)}return i}return Object.defineProperty(t.prototype,"defaults",{get:function(){return E_(E_({},r.prototype.defaults),{type:aS,tagName:aS,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===aS},t}(qi),oA=x7,E7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),S_=function(){return S_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},S_.apply(this,arguments)},S7=function(r){E7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return S_(S_({},r.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return["td","th"].indexOf((0,Le.toLowerCase)(e.tagName))>=0},t}(qi),A7=S7,T7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),A_=function(){return A_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},A_.apply(this,arguments)},lS="tfoot",O7=function(r){T7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return A_(A_({},r.prototype.defaults),{type:lS,tagName:lS})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===lS},t}(oA),M7=O7,P7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),T_=function(){return T_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},T_.apply(this,arguments)},cS="thead",I7=function(r){P7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return T_(T_({},r.prototype.defaults),{type:cS,tagName:cS})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===cS},t}(oA),D7=I7,k7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),O_=function(){return O_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},O_.apply(this,arguments)},MN="tr",R7=function(r){k7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"defaults",{get:function(){return O_(O_({},r.prototype.defaults),{tagName:MN,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),t.isComponent=function(e){return(0,Le.toLowerCase)(e.tagName)===MN},t}(qi),N7=R7,j7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M_=function(){return M_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},M_.apply(this,arguments)},uS="video",$d="yt",Wd="vi",qd="ytnc",PN="so",dS=function(r){return r&&r!=="0"},F7=function(r){j7(t,r);function t(e,n){e===void 0&&(e={});var i=r.call(this,e,n)||this;return i.get("src")&&i.parseFromSrc(),i.updatePropsFromAttr(),i.updateTraits(),i.on("change:provider",i.updateTraits),i.on("change:videoId change:provider",i.updateSrc),i}return Object.defineProperty(t.prototype,"defaults",{get:function(){return M_(M_({},r.prototype.defaults),{type:uS,tagName:uS,videoId:"",void:!1,provider:PN,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),t.prototype.updatePropsFromAttr=function(){if(this.get("provider")===PN){var e=this.get("attributes"),n=e.controls,i=e.autoplay,o=e.loop,s={};(0,Le.isDef)(n)&&(s.controls=!!n),(0,Le.isDef)(i)&&(s.autoplay=!!i),(0,Le.isDef)(o)&&(s.loop=!!o),(0,Le.isEmptyObj)(s)||this.set(s)}},t.prototype.updateTraits=function(){var e=this.em,n=this.get("provider"),i="iframe",o;switch(n){case $d:case qd:o=this.getYoutubeTraits();break;case Wd:o=this.getVimeoTraits();break;default:i="video",o=this.getSourceTraits()}this.set({tagName:i},{silent:!0}),this.set({traits:o}),e.get("ready")&&e.trigger("component:toggled")},t.prototype.parseFromSrc=function(){var e=this.get("provider"),n=this.parseUri(this.get("src")),i=n.query;switch(e){case $d:case qd:case Wd:this.set("videoId",n.pathname.split("/").pop()),i.list&&this.set("list",i.list),dS(i.autoplay)&&this.set("autoplay",!0),dS(i.loop)&&this.set("loop",!0),parseInt(i.controls)===0&&this.set("controls",!1),dS(i.color)&&this.set("color",i.color),i.rel==="0"&&this.set("rel",0),i.modestbranding==="1"&&this.set("modestbranding",1);break;default:}},t.prototype.updateSrc=function(){var e=this.get("provider"),n="";switch(e){case $d:n=this.getYoutubeSrc();break;case qd:n=this.getYoutubeNoCookieSrc();break;case Wd:n=this.getVimeoSrc();break}this.set({src:n})},t.prototype.getAttrToHTML=function(){var e=r.prototype.getAttrToHTML.call(this),n=this.get("provider");switch(n){case $d:case qd:case Wd:break;default:e.loop=!!this.get("loop"),e.autoplay=!!this.get("autoplay"),e.controls=!!this.get("controls")}return e},t.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:$d,name:"Youtube"},{value:qd,name:"Youtube (no cookie)"},{value:Wd,name:"Vimeo"}]}},t.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},t.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},t.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},t.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},t.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},t.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},t.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),n=this.get("ytUrl"),i=this.get("list");return n+=e+(e.indexOf("?")<0?"?":""),n+=i?"&list=".concat(i):"",n+=this.get("autoplay")?"&autoplay=1&mute=1":"",n+=this.get("controls")?"":"&controls=0&showinfo=0",n+=this.get("loop")?"&loop=1&playlist=".concat(e):"",n+=this.get("rel")?"":"&rel=0",n+=this.get("modestbranding")?"&modestbranding=1":"",n},t.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e=e.replace(this.get("ytUrl"),this.get("ytncUrl")),e},t.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1&muted=1":"",e+=this.get("loop")?"&loop=1":"",e+=this.get("controls")?"":"&title=0&portrait=0&badge=0",e+=this.get("color")?"&color="+this.get("color"):"",e},t.isComponent=function(e){var n=e.tagName,i=e.src,o=/youtube\.com\/embed/.test(i),s=/youtube-nocookie\.com\/embed/.test(i),a=/player\.vimeo\.com\/video/.test(i),c=o||s||a;if((0,Le.toLowerCase)(n)==uS||(0,Le.toLowerCase)(n)=="iframe"&&c){var u={type:"video"};return i&&(u.src=i),c&&(o?u.provider=$d:s?u.provider=qd:a&&(u.provider=Wd)),u}},t}(rA),L7=F7,V7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),P_=function(){return P_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},P_.apply(this,arguments)},B7=function(r){V7(t,r);function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i,o,s=r.apply(this,e)||this,a=e[1],c=(i=a?.em)===null||i===void 0?void 0:i.Components,u=(o=c?.getType(nf))===null||o===void 0?void 0:o.model,f=c?.getType("default").model;return u&&s.set({head:new u({},a),docEl:new f({tagName:"html"},a)},{silent:!0}),s}return Object.defineProperty(t.prototype,"defaults",{get:function(){return P_(P_({},r.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),t.prototype.toHTML=function(e){e===void 0&&(e={});var n=this.doctype,i=(0,B.isUndefined)(e.asDocument)?!!n:e.asDocument,o=this,s=o.head,a=o.docEl,c=r.prototype.toHTML.call(this,e),u=i&&s?.toHTML(e)||"",f=i&&(0,st.kk)(a?.getAttrToHTML())||"",g=f?" ".concat(f):"";return i?"".concat(n,"<html").concat(g,">").concat(u).concat(c,"</html>"):c},t.prototype.__postAdd=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return!this.__hasUm&&n?.add(this),r.prototype.__postAdd.call(this)},t.prototype.__postRemove=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.UndoManager;return n?.remove(this),r.prototype.__postRemove.call(this)},t.isComponent=function(){return!1},t}(qi),U7=B7,H7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),z7=function(r){H7(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.compView=Xr,e}return t.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.resetChildren),this.listenTo(n,"remove",this.removeChildren)},t.prototype.removeChildren=function(e,n,i){var o=this;i===void 0&&(i={}),e.views.forEach(function(a){if(a){var c=a.childrenView,u=a.scriptContainer;c&&c.stopListening(),(0,st.YZ)(u),a.remove.apply(a)}});var s=e.components();s.forEach(function(a){return o.removeChildren(a,n,i)})},t.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},t.prototype.addToCollection=function(e,n,i){for(var o=this,s=o.config,a=o.opts,c=o.em,u=s.frameView,f=u?.model&&e.getView(u.model),g=a.componentTypes||c?.Components.getTypes(),v=e.get("type")||"default",_=this.compView,b=0;b<g.length;b++)if(g[b].id==v){_=g[b].view;break}var C=f||new _({model:e,config:s,componentTypes:g}),S;try{S=C.render().el}catch(G){S=document.createTextNode(""),c.logError(G)}if(n)n.appendChild(S);else{var j=this.parentEl,q=j.childNodes;if((0,B.isUndefined)(i))j.appendChild(S);else{var N=q.length==i;N&&i--,N||!q.length?j.appendChild(S):j.insertBefore(S,q[i])}}return e.opt.temporary||c?.trigger("component:mount",e),S},t.prototype.resetChildren=function(e,n){var i=this,o=n===void 0?{}:n,s=o.previousModels,a=s===void 0?[]:s;this.parentEl.innerHTML="",a.forEach(function(c){return i.removeChildren(c,i.collection)}),e.each(function(c){return i.addToCollection(c)})},t.prototype.render=function(e){var n=this,i=this.el,o=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(s){return n.addToCollection(s,o)}),i.innerHTML="",i.appendChild(o),this},t}(rt.Ss),aF=z7,$7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fa=function(){return fa=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},fa.apply(this,arguments)},W7=function(r){$7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.className=function(){return this.getClasses()},t.prototype.tagName=function(){return this.model.get("tagName")},t.prototype.preinitialize=function(e){e===void 0&&(e={}),this.opts=e},t.prototype.initialize=function(e){e===void 0&&(e={});var n=this.model,i=e.config||{},o=i.em,s=n.opt||{},a=this,c=a.$el,u=a.el;this.opts=e,this.modelOpt=s,this.config=i,this.em=o,this.pfx=i.stylePrefix||"",this.ppfx=i.pStylePrefix||"",this.attr=n.get("attributes"),this.classe=this.attr.class||[],this.listenTo(n,"change:style",this.updateStyle),this.listenTo(n,"change:attributes",this.renderAttributes),this.listenTo(n,"change:highlightable",this.updateHighlight),this.listenTo(n,"change:status change:locked",this.updateStatus),this.listenTo(n,"change:script rerender",this.reset),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change",this.handleChange),this.listenTo(n,"active",this.onActive),this.listenTo(n,"disable",this.onDisable),c.data("model",n),(0,Le.setViewEl)(u,this),n.view=this,this.frameView&&n.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=fa(fa({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!s.temporary&&this.init(this._clbObj())},Object.defineProperty(t.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createDoc",{get:function(){var e,n,i=((e=this.frameView)===null||e===void 0?void 0:e.getDoc())||document;return!((n=this.opts.config)===null||n===void 0)&&n.useFrameDoc?i:document},enumerable:!1,configurable:!0}),t.prototype.__isDraggable=function(){var e=this,n=e.model,i=e.config,o=n.attributes.draggable;return i.draggableComponents&&o},t.prototype._clbObj=function(){var e=this,n=e.em,i=e.model,o=e.el;return{editor:n?.getEditor(),model:i,el:o}},t.prototype.init=function(e){},t.prototype.removed=function(e){},t.prototype.onRender=function(e){},t.prototype.onActive=function(e){},t.prototype.onDisable=function(e){},t.prototype.remove=function(){var e;r.prototype.remove.call(this);var n=this,i=n.model,o=n.$el,s=i.views,a=this.frameView||{};return i.components().forEach(function(c){var u=c.getView(a.model);u?.remove()}),(e=this.childrenView)===null||e===void 0||e.remove(),s.splice(s.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},t.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:e})},t.prototype.initClasses=function(){var e=this.model,n=e.classes,i="change:classes";n instanceof Ul&&(this.stopListening(e,i,this.initClasses),this.listenTo(e,i,this.initClasses),this.listenTo(n,"add remove change reset",this.updateClasses),n.length&&this.importClasses())},t.prototype.initComponents=function(e){e===void 0&&(e={});var n=this,i=n.model,o=n.$el,s=n.childrenView,a="change:components",c=i.get("components"),u=[i,a,this.initComponents];c instanceof Kp&&(o.data("collection",c),s&&s.remove(),this.stopListening.apply(this,u),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,u))},t.prototype.handleChange=function(){var e=this.model,n=(0,B.keys)(e.changed);if(!(n.length===1&&n[0]==="status")){e.emitUpdate();for(var i in e.changed)e.emitUpdate(i)}},t.prototype.importClasses=function(){var e=this,n=e.em,i=e.model,o=n.Selectors;o&&i.classes.forEach(function(s){return o.add(s.getName())})},t.prototype.updateStatus=function(e){e===void 0&&(e={});var n=this,i=n.em,o=n.el,s=n.ppfx,a=n.model,c=i?.Canvas,u=c?.config.extHl,f=a.get("status"),g="".concat(s,"selected"),v="".concat(g,"-parent"),_="".concat(s,"freezed"),b="".concat(s,"hovered"),C="".concat(s,"no-pointer"),S="".concat(s,"pointer-init"),j=[g,v,_,b,C],q=u&&!e.noExtHl?"":g;this.$el.removeClass(j.join(" "));var N=o.getAttribute("class")||"",G=[N],se=!c?.hasCustomSpot(fs.F.Select),ue=!c?.hasCustomSpot(fs.F.Target);switch(f){case"selected":se&&G.push(q);break;case"selected-parent":ue&&G.push(v);break;case"freezed":G.push(_);break;case"freezed-selected":G.push(_),se&&G.push(q);break;case"hovered":!e.avoidHover&&G.push(b);break}(0,B.isBoolean)(a.locked)&&G.push(a.locked?C:S);var Y=G.filter(Boolean).join(" ");Y&&o.setAttribute("class",Y)},t.prototype.updateHighlight=function(){var e=this.model,n=e.get("textable"),i=e.get("highlightable")&&(n||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",i?!0:"")},t.prototype.updateStyle=function(e,n,i){i===void 0&&(i={});var o=this,s=o.model,a=o.em;if(Rp(a)&&!i.inline){var c=this.__cmpStyleOpts,u=s.getStyle(fa({inline:!0},c));!(0,B.isEmpty)(u)&&s.setStyle(u,c)}else this.setAttribute("style",s.styleToString(i))},t.prototype.updateClasses=function(){var e=this.model.classes.pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus(),this.onAttrUpdate()},t.prototype.setAttribute=function(e,n){var i=this.$el;n?i.attr(e,n):i.removeAttr(e)},t.prototype.getClasses=function(){return this.model.getClasses().join(" ")},t.prototype.updateAttributes=function(){var e=[],n=this,i=n.model,o=n.$el,s=n.el,a=i.attributes,c=a.textable,u=a.type,f=fa(fa({id:i.getId(),"data-gjs-type":u||"default"},this.__isDraggable()&&{draggable:!0}),c&&{contenteditable:"false"});(0,B.each)(s.attributes,function(v){return e.push(v.nodeName)}),e.forEach(function(v){return o.removeAttr(v)}),this.updateStyle(),this.updateHighlight();var g=fa(fa({},f),i.getAttributes());(0,B.keys)(g).forEach(function(v){return g[v]===!1&&delete g[v]}),o.attr(g)},t.prototype.updateContent=function(){var e=this.model.content,n=this.model.components().length;this.getChildrenContainer().innerHTML=n?"":e},t.prototype.prevDef=function(e){e.preventDefault()},t.prototype.updateScript=function(){var e=this,n=e.model,i=e.em;n.get("script")&&i?.Canvas.getCanvasView().updateScript(this)},t.prototype.getChildrenContainer=function(){var e=this.el;return typeof this.getChildrenSelector=="function"?e=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,e},t.prototype.getOffsetRect=function(){var e={top:0,left:0,bottom:0,right:0},n=this.el,i=0,o=0,s=function(a){var c=a.offsetParent;c?(i+=c.offsetTop,o+=c.offsetLeft,s(c)):(e.top=n.offsetTop+i,e.left=n.offsetLeft+o,e.bottom=e.top+n.offsetHeight,e.right=e.left+n.offsetWidth)};return s(n),e},t.prototype.isInViewport=function(){var e=this,n=e.el,i=e.em,o=e.frameView,s=i.Canvas.getCanvasView(),a=s.getElBoxRect(n,{local:!0}),c=o.el,u=c.clientHeight,f=c.clientWidth,g=a.y,v=a.x,_=g+a.height,b=v+a.width,C=g>=0&&g<u,S=_>0&&_<u,j=b>=0&&b<f,q=v>0&&v<=f,N=(C||S)&&(j||q);return N},t.prototype.scrollIntoView=function(e){var n;e===void 0&&(e={});var i=this.isInViewport();if(!i||e.force){var o=this.el;if(e.behavior!=="smooth"){var s=this.getOffsetRect();(n=o.ownerDocument.defaultView)===null||n===void 0||n.scrollTo(0,s.top)}else o.scrollIntoView(fa({behavior:"smooth",block:"nearest"},e))}},t.prototype.reset=function(){var e=this.el;this.el="",this._ensureElement(),this._setData(),(0,st.bG)(e,this.el),this.render()},t.prototype._setData=function(){var e=this.model,n=e.components(),i=this;this.$el.data({model:e,collection:n,view:i})},t.prototype._createElement=function(e){return this.createDoc.createElement(e)},t.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),n=this.childrenView||new aF({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});n.render(e),this.childrenView=n;for(var i=Array.prototype.slice.call(n.el.childNodes),o=0,s=i.length;o<s;o++)e.appendChild(i.shift())},t.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},t.prototype.onAttrUpdate=function(){},t.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Le.setViewEl)(this.el,this),this.postRender(),this)},t.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},t.getEvents=function(){return(0,B.result)(this.prototype,"events")},t}(rt.Ss),Xr=W7,q7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),G7=function(r){q7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._setAttributes=function(){},t.prototype.renderAttributes=function(){},t.prototype.updateStatus=function(){},t.prototype.updateClasses=function(){},t.prototype.setAttribute=function(){},t.prototype.updateAttributes=function(){},t.prototype.initClasses=function(){},t.prototype.initComponents=function(){},t.prototype.delegateEvents=function(){return this},t.prototype._createElement=function(){return document.createTextNode("")},t.prototype.render=function(){var e=this,n=e.model,i=e.el;return n.opt.temporary?this:(i.textContent=n.content,this)},t}(Xr),lF=G7,K7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q7=function(r){K7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._createElement=function(){return document.createComment(this.model.content)},t}(lF),Y7=Q7,J7=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Z7=function(r){J7(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"div"},t.prototype.initialize=function(e){r.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},t.prototype.updateSrc=function(){var e=(0,st.I6)(this.el,"iframe")[0];e&&(0,st.X6)(e,{src:this.__getSrc()})},t.prototype.render=function(){r.prototype.render.call(this);var e=(0,st.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},t.prototype.__getSrc=function(){return this.model.getAttributes().src||""},t}(Xr),X7=Z7,eK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tK=function(r){eK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"img"},t.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},t.prototype.initialize=function(e){r.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},t.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this,n=e.model,i=e.em,o=n.get("file");if(o&&i){var s=i.Assets.FileUploader();s?.uploadFile({dataTransfer:{files:[o]}},function(a){var c=a&&a.data&&a.data[0],u=c&&((0,B.isString)(c)?c:c.src);u&&n.set({src:u})}),n.set("file","")}}},t.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},t.prototype.updateClasses=function(){r.prototype.updateClasses.call(this);var e=this,n=e.el,i=e.classEmpty,o=e.model,s=o.getSrcResult()&&!o.isDefaultSrc(),a=s?"remove":"add";n.classList[a](i)},t.prototype.onActive=function(e){e?.stopPropagation();var n=this,i=n.em,o=n.model,s=i?.Assets;s&&o.get("editable")&&s.open({select:function(a,c){o.set({src:a.getSrc()}),c&&s.close()},target:o,types:["image"],accept:"image/*"})},t.prototype.onError=function(){var e=this.model.getSrcResult({fallback:!0});e&&(this.el.src=e)},t.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},t.prototype.noDrag=function(e){return e.preventDefault(),!1},t.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var e=this,n=e.$el,i=e.model,o=n.attr("class")||"";return!i.get("src")&&n.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},t}(Xr),sA=tK,nK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bp=function(){return Bp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Bp.apply(this,arguments)},qy=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},Gy=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rK=function(r){nK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},t.prototype.initialize=function(e){r.prototype.initialize.call(this,e),(0,B.bindAll)(this,"disableEditing","onDisable");var n=this.model,i=this.em;this.listenTo(n,"focus",this.onActive),this.listenTo(n,"change:content",this.updateContentText),this.listenTo(n,"sync:content",this.syncContent),this.rte=i?.RichTextEditor},t.prototype.updateContentText=function(e,n,i){i===void 0&&(i={}),!i.fromDisable&&this.disableEditing()},t.prototype.canActivate=function(){var e=this,n=e.model,i=e.rteEnabled,o=e.em,s=o?.getEditing(),a=s===n,c=!0,u=!1,f;if((i||!n.get("editable")||a||(u=n.isChildOf("text")))&&(c=!1,u&&!n.get("textable"))){for(var g=n.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?f=g:c=!0}return{result:c,delegate:f}},t.prototype.onActive=function(e){return qy(this,void 0,void 0,function(){var n,i,o,s,a,c,u,f,g,v,_;return Gy(this,function(b){switch(b.label){case 0:return n=this,i=n.rte,o=n.em,s=this.canActivate(),a=s.result,c=s.delegate,a?((_=e?.stopPropagation)===null||_===void 0||_.call(e),u=this,[4,this.getContent()]):(c&&((v=e?.stopPropagation)===null||v===void 0||v.call(e),o.setSelected(c),c.trigger("active",e)),[2]);case 1:if(u.lastContent=b.sent(),!i)return[3,5];b.label=2;case 2:return b.trys.push([2,4,,5]),f=this,[4,i.enable(this,this.activeRte,{event:e})];case 3:return f.activeRte=b.sent(),[3,5];case 4:return g=b.sent(),o.logError(g),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},t.prototype.onDisable=function(e){this.disableEditing(e)},t.prototype.disableEditing=function(){return qy(this,arguments,void 0,function(e){var n,i,o,s,a,c,u,f;return e===void 0&&(e={}),Gy(this,function(g){switch(g.label){case 0:if(n=this,i=n.model,o=n.rte,s=n.activeRte,a=n.em,c=i&&i.get("editable"),!o)return[3,8];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,o.disable(this,s,e)];case 2:return g.sent(),[3,4];case 3:return u=g.sent(),a.logError(u),[3,4];case 4:return f=c,f?[4,this.getContent()]:[3,6];case 5:f=g.sent()!==this.lastContent,g.label=6;case 6:return f?[4,this.syncContent(e)]:[3,8];case 7:g.sent(),this.lastContent="",g.label=8;case 8:return this.toggleEvents(),[2]}})})},t.prototype.getContent=function(){return qy(this,void 0,void 0,function(){var e,n,i,o;return Gy(this,function(s){switch(s.label){case 0:return e=this,n=e.rte,i=e.activeRte,o="",n?[4,n.getContent(this,i)]:[3,2];case 1:o=s.sent(),s.label=2;case 2:return[2,o]}})})},t.prototype.syncContent=function(){return qy(this,arguments,void 0,function(e){var n,i,o,s,a,c,u;return e===void 0&&(e={}),Gy(this,function(f){switch(f.label){case 0:return n=this,i=n.model,o=n.rte,s=n.rteEnabled,!s&&!e.force?[2]:[4,this.getContent()];case 1:return a=f.sent(),c=i.components(),u=Bp({fromDisable:1},e),i.set("content","",u),o?.customRte&&!o.customRte.parseContent?(c.length&&c.reset(void 0,Bp(Bp({},e),{keepIds:Kd(c)})),i.set("content",a,u)):c.resetFromString(a,e),[2]}})})},t.prototype.insertComponent=function(e,n){var i;n===void 0&&(n={});var o=this,s=o.model,a=o.el,c=a.ownerDocument,u=c.getSelection();if(u?.rangeCount){var f=u.getRangeAt(0),g=f.startContainer,v=f.startOffset,_=(0,Le.getComponentModel)(g),b=[];if(_&&(!((i=_.is)===null||i===void 0)&&i.call(_,"textnode"))){var C=_.collection;C.forEach(function(q){if(q===_){var N="textnode",G=n.useDomContent?g.textContent||"":q.content;b.push({type:N,content:G.slice(0,v)}),b.push(e),b.push({type:N,content:G.slice(v)})}else b.push(q)});var S=b.filter(Boolean),j=S.indexOf(e);return C.reset(S,n),C.at(j)}}return s.append(e,n)},t.prototype.onInput=function(){var e=this.em,n="component",i=["".concat(n,":update"),"".concat(n,":input")].join(" ");e&&e.trigger(i,this.model)},t.prototype.disablePropagation=function(e){e.stopPropagation()},t.prototype.toggleEvents=function(e){var n=this,i=n.em,o=n.model,s=n.$el,a={on:st.on,off:st.AU},c=e?"on":"off";i.setEditing(e?this:!1),this.rteEnabled=!!e;var u=[this.el.ownerDocument,document];if(a.off(u,"mousedown",this.onDisable),a[c](u,"mousedown",this.onDisable),i[c]("toolbar:run:before",this.onDisable),o&&(o[c]("removed",this.onDisable),o.trigger("rte:".concat(e?"enable":"disable"))),s?.off("mousedown",this.disablePropagation),s&&s[c]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var f=this.el;f;)f.draggable=!e,f=f.parentNode,f&&f.tagName=="BODY"&&(f=0)},t}(Xr),cF=rK,iK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),oK=function(r){iK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(){return r.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},t}(cF),uF=oK,sK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aK=function(r){sK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(uF),lK=aK,cK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uK=function(r){cK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"div"},t.prototype.events=function(){return{}},t.prototype.initialize=function(e){r.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},t.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},t.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},t.prototype.render=function(){return r.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},t}(sA),dK=uK,fK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hK=function(r){fK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"script"},t.prototype.events=function(){return{}},t}(Xr),pK=hK,gK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mK=function(r){gK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},t}(Xr),IN=mK,vK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yK=function(r){vK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Xr),_K=yK,wK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bK=function(r){wK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Xr),CK=bK,xK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EK=function(r){xK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Xr),SK=EK,AK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),TK=function(r){AK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Xr),OK=TK,MK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PK=function(r){MK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Xr),IK=PK,DK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kK=function(r){DK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return{}},t}(Xr),RK=kK,NK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jK=function(r){NK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"div"},t.prototype.events=function(){return{}},t.prototype.initialize=function(){Xr.prototype.initialize.apply(this,arguments);var e=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"],i=n.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,i,this.updateVideo)},t.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},t.prototype.updateSrc=function(){var e=this,n=e.model,i=e.videoEl;if(i){var o=n.get("provider"),s=n.get("src");switch(o){case"yt":s=n.getYoutubeSrc();break;case"ytnc":s=n.getYoutubeNoCookieSrc();break;case"vi":s=n.getVimeoSrc();break}i.src=s}},t.prototype.updateVideo=function(){var e=this,n=e.model,i=e.videoEl,o=n.get("provider");switch(o){case"yt":case"ytnc":case"vi":n.trigger("change:videoId");break;default:if(i){var s=i;s.loop=n.get("loop"),s.autoplay=n.get("autoplay"),s.controls=n.get("controls"),s.poster=n.get("poster")}}},t.prototype.renderByProvider=function(e){var n;switch(e){case"yt":n=this.renderYoutube();break;case"ytnc":n=this.renderYoutubeNoCookie();break;case"vi":n=this.renderVimeo();break;default:n=this.renderSource()}return this.videoEl=n,n},t.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},t.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},t.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},t.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},t.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},t.prototype.render=function(){Xr.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},t}(sA),FK=jK,LK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VK=function(r){LK(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.tagName=function(){return"div"},t}(Xr),BK=VK,UK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),I_=function(){return I_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},I_.apply(this,arguments)},HK=function(r){UK(t,r);function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=r.apply(this,e)||this;i.refreshDbn=(0,B.debounce)(function(){return i.refresh()},0);var o=i.events;return i.on(o.update,i.onUpdate),i.on(o.updateInside,i.onUpdateDeep),i}return t.prototype.removeChildren=function(e,n,i){var o;i===void 0&&(i={}),r.prototype.removeChildren.call(this,e,n,i),(o=Yo(e))===null||o===void 0||o.forEach(function(s){return eA(s,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:e})},t.prototype.onAdd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.prototype.onAdd.apply(this,e);var i=e[0];this.__trgEvent(this.events.symbolMainAdd,{component:i})},t.prototype.onUpdate=function(e){this.__trgEvent(this.events.symbolMainUpdate,e)},t.prototype.onUpdateDeep=function(e){this.__trgEvent(this.events.symbolMainUpdateDeep,e)},t.prototype.refresh=function(){var e=this,n=e.em,i=e.events;n.trigger(i.symbol)},t.prototype.__trgEvent=function(e,n,i){i===void 0&&(i=!1);var o=this,s=o.em,a=o.events,c=i?a.symbolInstance:a.symbolMain;s.trigger(e,n),s.trigger(c,I_(I_({},n),{event:e})),this.refreshDbn()},t}(Kp),zK=HK,$K=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zi=function(){return zi=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zi.apply(this,arguments)},WK=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},qK=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},r_=function(r){return r[r.InvalidSource=0]="InvalidSource",r[r.SourceReject=1]="SourceReject",r[r.TargetReject=2]="TargetReject",r}(r_||{}),GK=function(r){$K(t,r);function t(e){var n=r.call(this,e,"DomComponents",new Kp(void 0,{em:e}))||this;n.componentTypes=[{id:"cell",model:A7,view:CK},{id:"row",model:N7,view:IK},{id:"table",model:b7,view:RK},{id:"thead",model:D7,view:OK},{id:"tbody",model:oA,view:_K},{id:"tfoot",model:M7,view:SK},{id:"map",model:u7,view:dK},{id:"link",model:a7,view:uF},{id:"label",model:i7,view:lK},{id:"video",model:L7,view:FK},{id:"image",model:rA,view:sA},{id:"script",model:h7,view:pK},{id:"svg-in",model:y7,view:IN},{id:"svg",model:sF,view:IN},{id:"iframe",model:JG,view:X7},{id:"comment",model:KG,view:Y7},{id:"textnode",model:oF,view:lF},{id:nf,model:EG,view:Xr},{id:"wrapper",model:U7,view:BK},{id:"text",model:iA,view:cF},{id:"default",model:qi,view:Xr}],n.componentsById={},n.Component=qi,n.Components=Kp,n.ComponentView=Xr,n.ComponentsView=aF,n.storageKey="components",n.keySymbols="symbols",n.events=Wi.I;var i=n.config;n.symbols=new zK([],{em:e,config:i,domc:n}),e&&(n.config.components=e.config.components||n.config.components);for(var o in AN)o in n.config||(n.config[o]=AN[o]);var s=n.config.pStylePrefix;if(s&&(n.config.stylePrefix=s+n.config.stylePrefix),e){e.get("Parser").compTypes=n.componentTypes,e.on("change:componentHovered",n.componentHovered,n);var a=e.get("selected");e.listenTo(a,"add",function(c,u,f){return n.selectAdd(a.getComponent(c),f)}),e.listenTo(a,"remove",function(c,u,f){return n.selectRemove(a.getComponent(c),f)})}return n}return t.prototype.postLoad=function(){var e=this,n=e.em,i=e.symbols,o=n.UndoManager;o.add(i)},t.prototype.load=function(e){var n=this,i=this.loadProjectData(e,{onResult:function(o){var s=n.getWrapper();if(s||(n.em.Pages.add({},{select:!0}),s=n.getWrapper()),(0,B.isArray)(o))o.length&&s.components(o);else{var a=o.components,c=a===void 0?[]:a,u=WK(o,["components"]);s.set(u),s.components(c)}}});return this.symbols.reset(e[this.keySymbols]||[]),i},t.prototype.store=function(){var e;return e={},e[this.keySymbols]=this.symbols,e},t.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),n=e?.getMainFrame();return n?.getComponent()},t.prototype.getWrapper=function(){return this.getComponent()},t.prototype.getComponents=function(){var e=this.getWrapper();return e?.components()},t.prototype.addComponent=function(e,n){return n===void 0&&(n={}),this.getComponents().add(e,n)},t.prototype.render=function(){var e;return(e=this.componentView)===null||e===void 0?void 0:e.render().el},t.prototype.clear=function(e){e===void 0&&(e={});var n=this.getComponents();return n?.filter(Boolean).forEach(function(i){return i.remove(e)}),this},t.prototype.setComponents=function(e,n){n===void 0&&(n={}),this.clear(n).addComponent(e,n)},t.prototype.addType=function(e,n){var i=this.em,o=n.model,s=o===void 0?{}:o,a=n.view,c=a===void 0?{}:a,u=n.isComponent,f=n.extend,g=n.extendView,v=n.extendFn,_=v===void 0?[]:v,b=n.extendFnView,C=b===void 0?[]:b,S=n.block,j=this.getType(e),q=this.getType(f),N=this.getType(g),G=q||j||this.getType("default"),se=G.model,ue=N?N.view:G.view,Y=function(O,Z,ce){return O.reduce(function(V,xe){var Ee=Z[xe],ze=ce.prototype[xe];return Ee&&ze&&(V[xe]=function(){for(var pt=[],ft=0;ft<arguments.length;ft++)pt[ft]=arguments[ft];ze.bind(this).apply(void 0,pt),Ee.bind(this).apply(void 0,pt)}),V},{})};if(typeof s=="object"){var L={defaults:s.defaults};delete s.defaults;var k=new Set(se.typeExtends);k.add(se.getDefaults().type),n.model=se.extend(zi(zi({},s),Y(_,s,se)),{typeExtends:k,isComponent:j&&!q&&!u?se.isComponent:u||function(){return 0}}),Object.defineProperty(n.model.prototype,"defaults",{get:function(){return zi(zi({},(0,B.result)(se.prototype,"defaults")||{}),(0,B.result)(L,"defaults")||{})}})}if(typeof c=="object"&&(n.view=ue.extend(zi(zi({},c),Y(C,c,ue)))),j?(j.model=n.model,j.view=n.view):(n.id=e,this.componentTypes.unshift(n)),S){var $={id:e,label:e,content:{type:e}},I=S===!0?$:zi(zi({},$),S);i.Blocks.add(I.id||e,I)}var T="component:type:".concat(j?"update":"add");return i?.trigger(T,j||n),this},t.prototype.getType=function(e){for(var n=this.componentTypes,i=0;i<n.length;i++){var o=n[i].id;if(o==e)return n[i]}},t.prototype.removeType=function(e){var n=this.componentTypes,i=this.getType(e);if(i){var o=n.indexOf(i);return n.splice(o,1),i}},t.prototype.getTypes=function(){return this.componentTypes},t.prototype.selectAdd=function(e,n){var i=this;n===void 0&&(n={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return i.em.trigger(o,e,n)}))},t.prototype.selectRemove=function(e,n){var i=this;if(n===void 0&&(n={}),e){var o=this.em;e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(s){return i.em.trigger(s,e,n)})}},t.prototype.componentHovered=function(){var e=this.em,n=e.get("componentHovered"),i=e.previous("componentHovered"),o="hovered";i&&i.get("status")==o&&i.set({status:"",state:""}),n&&(0,B.isEmpty)(n.get("status"))&&n.set("status",o)},t.prototype.getShallowWrapper=function(){var e=this,n=e.shallow,i=e.em;if(!n&&i){var o=i.shallow;if(!o)return;var s=o.Components;if(s.componentTypes=this.componentTypes,n=s.getWrapper(),n){var a=[n_,jS].join(" ");n.on(a,(0,B.debounce)(function(){return n?.components("")},100))}this.shallow=n}return n},t.prototype.isComponent=function(e){return(0,Le.isComponent)(e)},t.prototype.addSymbol=function(e){if(!((0,B.isSymbol)(e)&&!ru(e))){var n=e.clone({symbol:!0});return o_(n)&&this.symbols.add(n),this.em.trigger("component:toggled"),n}},t.prototype.getSymbols=function(){return qK([],this.symbols.models,!0)},t.prototype.detachSymbol=function(e){s_(e)&&eA(e)},t.prototype.getSymbolInfo=function(e,n){n===void 0&&(n={});var i=o_(e),o=iu(e),s=!!o,a=Yo(i?e:o)||[],c=o||(i?e:void 0),u=tu(e,{changed:n.withChanges}),f=i||s,g=f&&ru(e);return{isSymbol:f,isMain:i,isInstance:s,isRoot:g,main:c,instances:a,relatives:u||[]}},t.prototype.canMove=function(e,n,i){var o={result:!1,reason:r_.InvalidSource,target:e,source:null};if(!n||!e)return o;var s=(0,Le.isComponent)(n)?n:null;if(!s){var a=this.getShallowWrapper();s=a?.append(n)[0]||null}if(o.source=s,!s)return o;var c=s.get("draggable");if((0,B.isFunction)(c))c=!!c(s,e,i);else{var u=e.getEl();c=(0,B.isArray)(c)?c.join(","):c,c=(0,B.isString)(c)?u?.matches(c):c}if(!c)return zi(zi({},o),{reason:r_.SourceReject});var f=e.get("droppable");if((0,B.isFunction)(f))f=!!f(s,e,i);else if(f===!1&&e.isInstanceOf("text")&&s.get("textable"))f=!0;else{var u=s.getEl();f=(0,B.isArray)(f)?f.join(","):f,f=(0,B.isString)(f)?u?.matches(f):f}var g=[e].concat(e.parents()).indexOf(s)>-1;return!f||g?zi(zi({},o),{reason:r_.TargetReject}):zi(zi({},o),{result:!0})},t.prototype.allById=function(){return this.componentsById},t.prototype.getById=function(e){return this.componentsById[e]||null},t.prototype.destroy=function(){var e,n=this.allById();Object.keys(n).forEach(function(i){return n[i]&&n[i].remove()}),(e=this.componentView)===null||e===void 0||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(i){return i={}})},t}(zl),KK=GK,QK={stylePrefix:"css-",rules:[]},YK=QK,JK=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZK=Number.MAX_VALUE,XK=function(r){var t=/(-?\d*\.?\d+)\w{0,}/.exec(r);return t?t[0]:""},eQ=function(r){JK(t,r);function t(){var e=r.call(this)||this;return(0,B.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return t.prototype.buildFromModel=function(e,n){var i=this;n===void 0&&(n={});var o="",s=this.em,a=s&&s.getConfig().avoidInlineStyle,c=e.styleToString(),u=e.classes;this.ids.push("#".concat(e.getId())),u.forEach(function(g){return i.compCls.push(g.getFullName())}),!a&&c&&(o="#".concat(e.getId(),"{").concat(c,"}"));var f=e.components();return f.forEach(function(g){return o+=i.buildFromModel(g,n)}),o},t.prototype.build=function(e,n){var i=this;n===void 0&&(n={});var o=n.json,s=n.em,a=n.cssc||s?.Css;this.em=s,this.compCls=[],this.ids=[],this.model=e;var c=[],u=e?this.buildFromModel(e,n):"",f=(0,B.isUndefined)(n.clearStyles)&&s?s.getConfig().clearStyles:n.clearStyles;if(a){var g=n.rules||a.getAll(),v={},_=[];n.onlyMatched&&e&&(0,Le.hasWin)()&&(g=this.matchedRules(e,g)),g.forEach(function(b){var C=b.getAtRule();if(C){var S=v[C];S?S.push(b):v[C]=[b];return}var j=i.buildFromRule(b,_,n);o?c.push(j):u+=j}),this.sortMediaObject(v).forEach(function(b){var C="",S=b.key,j=b.value;j.forEach(function(q){var N=i.buildFromRule(q,_,n);q.get("singleAtRule")?u+="".concat(S,"{").concat(N,"}"):C+=N,o&&c.push(N)}),C&&(u+="".concat(S,"{").concat(C,"}"))}),s&&f&&g.remove&&g.remove(_)}return o?c.filter(function(b){return b}):u},t.prototype.buildFromRule=function(e,n,i){var o=this,s;i===void 0&&(i={});var a="",c=this.model,u=e.selectorsToString({skipAdd:1}),f=e.get("selectorsAdd"),g=e.get("singleAtRule"),v;if((s=e.get("selectors"))===null||s===void 0||s.forEach(function(b){var C=b.getFullName();(o.compCls.indexOf(C)>=0||o.ids.indexOf(C)>=0||i.keepUnusedStyles)&&(v=1)}),u&&v||f||g||!c){var _=e.getDeclaration({body:1});_&&(i.json?a=e:a+=_)}else n.push(e);return a},t.prototype.matchedRules=function(e,n){var i=this,o=e.getEl(),s=[];return n.forEach(function(a){try{a.selectorsToString().split(",").some(function(c){return o?.matches(i.__cleanSelector(c))})&&s.push(a)}catch{}}),e.components().forEach(function(a){s=s.concat(i.matchedRules(a,n))}),s=s.filter(function(a,c){return s.indexOf(a)===c}),s},t.prototype.getQueryLength=function(e){var n=/(-?\d*\.?\d+)\w{0,}/.exec(e);return n?parseFloat(n[1]):ZK},t.prototype.sortMediaObject=function(e){var n=this;e===void 0&&(e={});var i=[];return(0,B.each)(e,function(o,s){return i.push({key:s,value:o})}),i.sort(function(o,s){var a=[o.key,s.key].every(function(f){return f.indexOf("min-width")!==-1}),c=a?o.key:s.key,u=a?s.key:o.key;return n.getQueryLength(c)-n.getQueryLength(u)})},t.prototype.sortRules=function(e,n){var i=function(c){return c.get("mediaText")||""},o=[i(e),i(n)].every(function(c){return c.indexOf("min-width")!==-1}),s=i(o?e:n),a=i(o?n:e);return this.getQueryLength(s)-this.getQueryLength(a)},t.prototype.__cleanSelector=function(e){return e.split(" ").map(function(n){return n.split(":")[0]}).join(" ")},t}(rt.Kx),tQ=eQ,nQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Up=function(){return Up=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Up.apply(this,arguments)},rQ=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},fS=((0,Le.hasWin)()?window:{}).CSS,iQ=function(r){nQ(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e)||this;return i.config=e||{},i.opt=n,i.em=n.em,i.ensureSelectors(null,null,{}),i.on("change",i.__onChange),i}return t.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},t.prototype.__onChange=function(e,n){var i=this.em,o=this.changedAttributes();o&&!(0,Le.isEmptyObj)(o)&&i?.changesUp(n)},t.prototype.clone=function(){var e=Up({},this.opt),n=Up({},this.attributes);return n.selectors=this.get("selectors").map(function(i){return i.clone()}),new this.constructor(n,e)},t.prototype.ensureSelectors=function(e,n,i){var o=this.em,s=o?.Selectors,a=[this,"change:selectors",this.ensureSelectors],c=this.getSelectors();if(this.stopListening.apply(this,a),c.models&&(c=rQ([],c.models,!0)),c=(0,B.isString)(c)?[c]:c,Array.isArray(c)){var u=c.filter(function(f){return f}).map(function(f){return s?s.add(f):f});c=new Ul(u)}this.set("selectors",c,i),this.listenTo.apply(this,a)},t.prototype.getAtRule=function(){var e=this.get("atRuleType"),n=this.get("mediaText"),i=e?"@".concat(e):n?"@media":"";return i+(n&&i?" ".concat(n):"")},t.prototype.selectorsToString=function(e){e===void 0&&(e={});var n=[],i=this.get("state"),o=this.get("selectorsAdd"),s={escape:function(u){return fS&&fS.escape?fS.escape(u):u}},a=this.getSelectors().getFullString(0,s),c=i&&!e.skipState?":".concat(i):"";return a&&n.push("".concat(a).concat(c)),o&&!e.skipAdd&&n.push(o),n.join(", ")},t.prototype.getDeclaration=function(e){e===void 0&&(e={});var n="",i=this.attributes.important,o=this.selectorsToString(e),s=this.styleToString(Up({important:i},e)),a=this.get("singleAtRule");return(o||a)&&(s||e.allowEmpty)&&(n=a?s:"".concat(o,"{").concat(s,"}")),n},t.prototype.getDevice=function(){var e=this.em,n=this.attributes,i=n.atRuleType,o=n.mediaText,s=e?.Devices.getDevices()||[],a=s.filter(function(c){return c.getWidthMedia()===""})[0];return i!=="media"||!o?a||null:s.filter(function(c){return c.getWidthMedia()===XK(o)})[0]||null},t.prototype.getState=function(){var e=this.em,n=this.get("state"),i=e?.Selectors.getStates()||[];return i.filter(function(o){return o.getName()===n})[0]||null},t.prototype.getComponent=function(){var e,n=this.getSelectors(),i=n.length==1&&n.at(0),o=i&&i.isId()&&i.get("name");return o&&((e=this.em)===null||e===void 0?void 0:e.Components.getById(o))||null},t.prototype.toCSS=function(e){e===void 0&&(e={});var n="",i=this.getAtRule(),o=this.getDeclaration(e);return(o||e.allowEmpty)&&(n=o),i&&n&&(n="".concat(i,"{").concat(n,"}")),n},t.prototype.toJSON=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=rt.Kx.prototype.toJSON.apply(this,n);if(!((e=this.em)===null||e===void 0)&&e.getConfig().avoidDefaults){var s=this.defaults();(0,B.forEach)(s,function(a,c){o[c]===a&&delete o[c]}),delete o.style.__p,(0,B.isEmpty)(o.selectors)&&delete o.selectors,(0,B.isEmpty)(o.style)&&delete o.style}return o},t.prototype.compare=function(e,n,i,o){var s;o===void 0&&(o={});var a=n||"",c=i||"",u=o.selectorsAdd||"",f=o.atRuleType||"",g=!(0,B.isArray)(e)&&!e.models?[e]:e.models||e;c&&!f&&(f="media");var v=g.map(function(S){return S.getFullName()}),_=(s=this.get("selectors"))===null||s===void 0?void 0:s.map(function(S){return S.getFullName()}),b=v.slice().sort(),C=_.slice().sort();return!(v.length!==_.length||!b.every(function(S,j){return S===C[j]})||this.get("state")!==a||this.get("mediaText")!==c||this.get("selectorsAdd")!==u||this.get("atRuleType")!==f)},t}(Kj),dF=iQ,oQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fF=function(r){oQ(t,r);function t(e,n){var i=r.call(this,e)||this;return i.editor=n?.em,setTimeout(function(){i.on("remove",i.onRemove),i.on("add",i.onAdd)}),i}return t.prototype.toJSON=function(e){var n=rt.pM.prototype.toJSON.call(this,e);return n.filter(function(i){return i.style&&!i.shallow})},t.prototype.onAdd=function(e,n,i){e.ensureSelectors(e,n,i)},t.prototype.onRemove=function(e){var n=this.editor;n.stopListening(e),n.UndoManager.remove(e)},t.prototype.add=function(e,n){return n===void 0&&(n={}),typeof e=="string"&&(e=this.editor.get("Parser").parseCss(e)),n.em=this.editor,rt.pM.prototype.add.apply(this,[e,n])},t}(rt.pM),sQ=fF;fF.prototype.model=dF;var aQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zc=function(){return Zc=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Zc.apply(this,arguments)},lQ=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},cQ=function(r){aQ(t,r);function t(e){var n=r.call(this,e,"CssComposer",null,{},YK)||this;n.Selectors=Ul,n.storageKey="styles";var i=n.config,o=i.pStylePrefix;return o&&(i.stylePrefix=o+i.stylePrefix),i.rules=n.em.config.style||i.rules||"",n.rules=new sQ([],i),n}return t.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},t.prototype.postLoad=function(){var e,n=(e=this.em)===null||e===void 0?void 0:e.get("UndoManager");n&&n.add(this.getAll())},t.prototype.store=function(){return this.getProjectData()},t.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},t.prototype.add=function(e,n,i,o,s){o===void 0&&(o={}),s===void 0&&(s={});var a=n||"",c=i||"",u=Zc({},o),f=this.get(e,a,c,u);return f&&f.config&&!f.config.singleAtRule||(u.state=a,u.mediaText=c,u.selectors=[],c&&!u.atRuleType&&(u.atRuleType="media"),f=new dF(u,this.config),f.get("selectors").add(e,s),this.rules.add(f,s)),f},t.prototype.get=function(e,n,i,o){var s=e;if((0,B.isString)(e)){var a=this.em.Selectors,c=e.split(",")[0].trim(),u=this.em.Parser.parserCss.checkNode({selectors:c})[0];s=a.get(u.selectors)}return this.rules.find(function(f){return f.compare(s,n,i,o)})||null},t.prototype.getAll=function(){return this.rules},t.prototype.addCollection=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i={});var o=this.em,s=[];(0,B.isString)(e)&&(e=o.Parser.parseCss(e));for(var a=e instanceof Array?e:[e],c=0,u=a.length;c<u;c++){var f=a[c]||{};if(f.selectors){var g=o?.Selectors;g||console.warn("Selector Manager not found");for(var v=f.selectors,_=v instanceof Array?v:[v],b=[],C=0,S=_.length;C<S;C++){var j=g.add(_[C]);b.push(j)}var q=this.get(b,f.state,f.mediaText,f),N=this.add(b,f.state,f.mediaText,f,n),G=!q||!n.avoidUpdateStyle,se=f.style||{};if((0,Le.isObject)(i)&&N.set(i,n),G){var ue=n.extend?Zc(Zc({},N.get("style")),se):se;N.set("style",ue,n)}s.push(N)}}return s},t.prototype.addRules=function(e){return this.addCollection(e)},t.prototype.setRule=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i={});var o=i.atRuleType,s=i.atRuleParams,a=this.em.Parser.parserCss.checkNode({selectors:e,style:n})[0],c=a.state,u=a.selectorsAdd,f=this.em.Selectors,g=f.add(a.selectors),v=this.add(g,c,s,{selectorsAdd:u,atRule:o});return i.addStyles?v.addStyle(n,i):v.setStyle(n,i),v},t.prototype.getRule=function(e,n){n===void 0&&(n={});var i=this.em,o=i.Selectors,s=i.Parser.parserCss.checkNode({selectors:e})[0],a=o.get(s.selectors),c=s.state,u=s.selectorsAdd,f=n.atRuleType,g=n.atRuleParams;return a?this.get(a,c,g,{selectorsAdd:u,atRuleType:f}):void 0},t.prototype.getRules=function(e){var n=this.getAll();if(!e)return lQ([],n.models,!0);var i={sort:!0},o=(0,B.isString)(e)?e.split(",").map(function(a){return a.trim()}):e,s=n.filter(function(a){return o.indexOf(a.getSelectors().getFullString(null,i))>=0});return s},t.prototype.setIdRule=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i={});var o=i.addOpts,s=o===void 0?{}:o,a=i.mediaText,c=i.state||"",u=(0,B.isUndefined)(a)?this.em.getCurrentMedia():a,f=this.em.Selectors,g=f.add({name:e,type:mo.TYPE_ID},s),v=this.add(g,c,u,{},s);return v.setStyle(n,Zc(Zc({},i),s)),v},t.prototype.getIdRule=function(e,n){n===void 0&&(n={});var i=n.mediaText,o=n.state||"",s=(0,B.isUndefined)(i)?this.em.getCurrentMedia():i,a=this.em.Selectors.get(e,mo.TYPE_ID);return a&&this.get(a,o,s)},t.prototype.setClassRule=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i={});var o=i.state||"",s=i.mediaText||this.em.getCurrentMedia(),a=this.em.Selectors,c=a.add({name:e,type:mo.TYPE_CLASS}),u=this.add(c,o,s);return u.setStyle(n,i),u},t.prototype.getClassRule=function(e,n){n===void 0&&(n={});var i=n.state||"",o=n.mediaText||this.em.getCurrentMedia(),s=this.em.Selectors.get(e,mo.TYPE_CLASS);return s&&this.get(s,i,o)},t.prototype.remove=function(e,n){var i=(0,B.isString)(e)?this.getRules(e):e,o=this.getAll().remove(i,n);return(0,B.isArray)(o)?o:[o]},t.prototype.clear=function(e){return e===void 0&&(e={}),this.getAll().reset([],e),this},t.prototype.getComponentRules=function(e,n){n===void 0&&(n={});var i=n.state,o=n.mediaText,s=n.current;s&&(i=this.em.get("state")||"",o=this.em.getCurrentMedia());var a=e.getId(),c=this.getAll().filter(function(u){return!(0,B.isUndefined)(i)&&u.get("state")!==i||!(0,B.isUndefined)(o)&&u.get("mediaText")!==o?!1:u.getSelectorsString()==="#".concat(a)});return c},t.prototype.render=function(){var e;return(e=this.rulesView)===null||e===void 0||e.remove(),this.rulesView=new Wj({collection:this.rules,config:this.config}),this.rulesView.render().el},t.prototype.checkId=function(e,n){n===void 0&&(n={});var i=n.idMap,o=i===void 0?{}:i,s=[];if(!Object.keys(o).length)return s;var a=Array.isArray(e)?e:[e];return a.forEach(function(c){var u=c.selectors;if(u&&u.length==1){var f=u[0];if((0,B.isString)(f)){if(f[0]==="#"){var g=f.substring(1),v=o[g];g&&v&&(u[0]="#".concat(v),s.push(c))}}else if(f.name&&f.type===mo.TYPE_ID){var v=o[f.name];v&&(f.name=v,s.push(c))}}}),s},t.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),(e=this.rulesView)===null||e===void 0||e.remove()},t}(zl),uQ=cQ,dQ={appendTo:"",blocks:[],appendOnClick:!1,custom:!1},fQ=dQ,hQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pQ=function(r){hQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(t.prototype,"category",{get:function(){var e=this.get("category");return e instanceof Jp?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.id},t.prototype.getLabel=function(){return this.get("label")},t.prototype.getMedia=function(){return this.get("media")},t.prototype.getContent=function(){return this.get("content")},t.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,B.isFunction)(e?.get)?e.get("label"):e?.label?e?.label:e},t}(rt.Kx),hF=pQ,gQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pF=function(r){gQ(t,r);function t(e,n){var i=r.call(this,e)||this;return i.em=n.em,i.on("add",i.handleAdd),i}return t.prototype.getCategories=function(){return this.em.Blocks.getCategories()},t.prototype.handleAdd=function(e){this.initCategory(e)},t}(nF),Ky=pF;pF.prototype.model=hF;var i_=function(r){return r.add="block:add",r.remove="block:remove",r.removeBefore="block:remove:before",r.update="block:update",r.dragStart="block:drag:start",r.drag="block:drag",r.dragEnd="block:drag:stop",r.categoryUpdate="block:category:update",r.custom="block:custom",r.all="block",r}(i_||{});var mQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vQ=function(r){mQ(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e)||this,o=i.model;return i.em=n.em,i.config=n,i.endDrag=i.endDrag.bind(i),i.ppfx=n.pStylePrefix||"",i.listenTo(o,"destroy remove",i.remove),i.listenTo(o,"change",i.render),i}return t.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},t.prototype.__getModule=function(){return this.em.Blocks},t.prototype.handleClick=function(e){var n=this,i=n.config,o=n.model,s=n.em,a=o.get("onClick")||i.appendOnClick;if(s.trigger("block:click",o,e),a){if((0,B.isFunction)(a))return a(o,s?.getEditor(),{event:e})}else return;var c=i.getSorter(),u=o.get("content"),f=s.getSelected();c.setDropContent(u);var g,v,_;if(f)if(v=c.validTarget(f.getEl(),u),v.valid)g=f;else{var b=f.parent();b&&(v=c.validTarget(b.getEl(),u),v.valid&&(g=b,_=b.components().indexOf(f)+1))}if(!g){var C=s.getWrapper();v=c.validTarget(C.getEl(),u),v.valid&&(g=C)}var S=g&&g.append(u,{at:_})[0];S&&s.setSelected(S,{scroll:1})},t.prototype.startDrag=function(e){var n=this,i=n.config,o=n.em,s=n.model,a=s.get("disable");if(!(e.button!==0||!i.getSorter||this.el.draggable||a)){o.refreshCanvas();var c=i.getSorter();c.__currentBlock=s,c.setDragHelper(this.el,e),c.setDropContent(this.model.get("content")),c.startSort(this.el),(0,st.on)(document,"mouseup",this.endDrag)}},t.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},t.prototype.handleDrag=function(e){this.__getModule().__drag(e)},t.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},t.prototype.endDrag=function(){(0,st.AU)(document,"mouseup",this.endDrag);var e=this.config.getSorter();e.moved=0,e.endMove()},t.prototype.render=function(){var e,n=this,i=n.em,o=n.el,s=n.$el,a=n.ppfx,c=n.model,u=c.get("disable"),f=c.get("attributes")||{},g=f.class||"",v="".concat(a,"block"),_=i&&i.t("blockManager.labels.".concat(c.id))||c.get("label"),b=c.get("render"),C=c.get("media"),S=u?"".concat(v,"--disable"):"".concat(a,"four-color-h");s.attr(f),o.className="".concat(g," ").concat(v," ").concat(a,"one-bg ").concat(S).trim(),o.innerHTML=`
      `.concat(C?'<div class="'.concat(v,'__media">').concat(C,"</div>"):"",`
      <div class="`).concat(v,'-label">').concat(_,`</div>
    `),o.title=f.title||((e=o.textContent)===null||e===void 0?void 0:e.trim()),o.setAttribute("draggable","".concat(!!((0,Le.hasDnd)(i)&&!u)));var j=b&&b({el:o,model:c,className:v,prefix:a});return j&&(o.innerHTML=j),this},t}(rt.Ss),yQ=vQ,_Q=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wQ=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},bQ=function(r){_Q(t,r);function t(e,n,i){var o=r.call(this,e)||this;o.config=n;var s=n.pStylePrefix||"";return o.em=n.em,o.catName=i,o.pfx=s,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(s,"caret-icon"),o.activeClass="".concat(s,"open"),o.className="".concat(s).concat(i,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return t.prototype.events=function(){return{"click [data-title]":"toggle"}},t.prototype.template=function(e){var n=e.pfx,i=e.label,o=e.catName;return Io(DN||(DN=wQ([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),n,n,i,n,o)},t.prototype.attributes=function(){return this.model.get("attributes")||{}},t.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},t.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},t.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},t.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},t.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},t.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},t.prototype.append=function(e){this.getTypeEl().appendChild(e)},t.prototype.render=function(){var e=this,n=e.em,i=e.el,o=e.$el,s=e.model,a=e.pfx,c=e.catName,u=n.t("".concat(c,"Manager.categories.").concat(s.id))||s.get("label");return i.innerHTML=this.template({pfx:a,label:u,catName:c}),o.addClass(this.className),o.css({order:s.get("order")}),this.updateVisibility(),this},t}(rt.Ss),gF=bQ,DN,CQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),D_=function(){return D_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},D_.apply(this,arguments)},xQ=function(r){CQ(t,r);function t(e,n){var i=r.call(this,e)||this;i.renderedCategories=new Map,(0,B.bindAll)(i,"getSorter","onDrag","onDrop","onMove"),i.config=n||{},i.categories=e.categories||"";var o=i.config.pStylePrefix||"";i.ppfx=o,i.noCatClass="".concat(o,"blocks-no-cat"),i.blockContClass="".concat(o,"blocks-c"),i.catsClass="".concat(o,"block-categories");var s=i.collection;return i.listenTo(s,"add",i.addTo),i.listenTo(s,"reset",i.render),i.em=i.config.em,i.em&&(i.config.getSorter=i.getSorter),i}return t.prototype.__getModule=function(){return this.em.Blocks},t.prototype.updateConfig=function(e){e===void 0&&(e={}),this.config=D_(D_({},this.config),e)},t.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var n=e.Utils,i=e.Canvas;this.sorter=new n.Sorter({container:i.getBody(),placer:i.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:i.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:e,canvasRelative:1})}return this.sorter}},t.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},t.prototype.onMove=function(e){this.__getModule().__drag(e)},t.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},t.prototype.addTo=function(e){this.add(e)},t.prototype.add=function(e,n){var i=this,o=i.config,s=i.renderedCategories,a=e.get("attributes"),c=new yQ({model:e,attributes:a},o),u=c.render().el,f=e.parent.initCategory(e);if(f&&this.categories&&!o.ignoreCategories){var g=f.getId(),v=this.getCategoriesEl(),_=s.get(g);!_&&v&&(_=new gF({model:f},o,"block").render(),s.set(g,_),v.appendChild(_.el)),_?.append(u);return}n?n.appendChild(u):this.append(u)},t.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},t.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},t.prototype.append=function(e){var n=this.getBlocksEl();n&&n.appendChild(e)},t.prototype.render=function(){var e=this,n=this.ppfx,i=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(s){return e.add(s,i)}),this.append(i);var o="".concat(this.blockContClass,"s ").concat(n,"one-bg ").concat(n,"two-color");return this.$el.addClass(o),this.rendered=!0,this},t}(rt.Ss),kN=xQ,EQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ll=function(){return Ll=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ll.apply(this,arguments)},SQ=function(r){EQ(t,r);function t(e){var n,i=r.call(this,e,"BlockManager",new Ky(((n=e.config.blockManager)===null||n===void 0?void 0:n.blocks)||[],{em:e}),i_,fQ)||this;return i.events=i_,i.Block=hF,i.Blocks=Ky,i.Category=Jp,i.Categories=a_,i.storageKey="",i.blocks=i.all,i.blocksVisible=new Ky(i.blocks.models,{em:e}),i.categories=new a_([],{em:e,events:{update:i_.categoryUpdate}}),i.blocks.on("add",function(o){return i.blocksVisible.add(o)}),i.blocks.on("remove",function(o){return i.blocksVisible.remove(o)}),i.blocks.on("reset",function(o){return i.blocksVisible.reset(o.models)}),i.__onAllEvent=(0,B.debounce)(function(){return i.__trgCustom()},0),i}return t.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},t.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:n.container,dragStart:function(i,o){return e.startDrag(i,o)},drag:function(i){return e.__drag(i)},dragStop:function(i){return e.endDrag(i)}}},t.prototype.__startDrag=function(e,n){var i=this,o=i.em,s=i.events,a=i.blocks,c=e.getContent?e.getContent():e;this._dragBlock=e,o.set({dragResult:null,dragContent:c}),[o,a].map(function(u){return u.trigger(s.dragStart,e,n)})},t.prototype.__drag=function(e){var n=this,i=n.em,o=n.events,s=n.blocks,a=this._dragBlock;[i,s].map(function(c){return c.trigger(o.drag,a,e)})},t.prototype.__endDrag=function(e){e===void 0&&(e={});var n=this,i=n.em,o=n.events,s=n.blocks,a=this._dragBlock,c=e.component||i.get("dragResult");if(delete this._dragBlock,c&&a){var u="activeOnRender",f=c.get&&c.get(u),g=a.get("activate")||f,v=a.get("select"),_=(0,B.isArray)(c)?c[0]:c;(v||g&&v!==!1)&&i.setSelected(_),g&&(_.trigger("active"),f&&_.unset(u)),a.get("resetId")&&_.onAll(function(b){return b.resetId()})}i.set({dragResult:null,dragContent:null}),a&&[i,s].map(function(b){return b.trigger(o.dragEnd,c,a)})},t.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(e){return e.view}).filter(Boolean)},t.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Ll(Ll({},this._bhv||{}),e)},t.prototype.__getBehaviour=function(){return this._bhv||{}},t.prototype.startDrag=function(e,n){this.__startDrag(e,n),this.__getFrameViews().forEach(function(i){var o;return(o=i.droppable)===null||o===void 0?void 0:o.startCustom()})},t.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(n){var i;return(i=n.droppable)===null||i===void 0?void 0:i.endCustom(e)}),this.__endDrag()},t.prototype.postRender=function(){var e=this,n=e.categories,i=e.config,o=e.em,s=this.blocksVisible;this.blocksView=new kN({collection:s,categories:n},Ll(Ll({},i),{em:o})),this.__appendTo(s.models),this.__trgCustom()},t.prototype.add=function(e,n,i){i===void 0&&(i={});var o=n||{};return o.id=e,this.blocks.add(o,i)},t.prototype.get=function(e){return this.blocks.get(e)},t.prototype.getAll=function(){return this.blocks},t.prototype.getAllVisible=function(){return this.blocksVisible},t.prototype.remove=function(e,n){return n===void 0&&(n={}),this.__remove(e,n)},t.prototype.getCategories=function(){return this.categories},t.prototype.getContainer=function(){var e;return(e=this.blocksView)===null||e===void 0?void 0:e.el},t.prototype.getDragBlock=function(){return this._dragBlock},t.prototype.getBlocksByCategory=function(e){return tF(e||this.getAll().models)},t.prototype.render=function(e,n){n===void 0&&(n={});var i=this,o=i.categories,s=i.config,a=i.em,c=e||this.getAll().models;if(n.external){var u=new Ky(c,{em:a});return new kN({collection:u,categories:o},Ll(Ll({em:a},s),n)).render().el}return this.blocksView&&(this.blocksView.updateConfig(n),this.blocksView.collection.reset(c),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},t.prototype.destroy=function(){var e,n=[this.blocks,this.blocksVisible,this.categories];n.map(function(i){return i.stopListening()}),n.map(function(i){return i.reset()}),(e=this.blocksView)===null||e===void 0||e.remove()},t}(zl),AQ=SQ,TQ={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1},OQ=TQ,MQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mF=function(r){MQ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{name:"",label:""}},t.prototype.getName=function(){return this.get("name")},t.prototype.getLabel=function(){return this.get("label")||this.getName()},t}(rt.Kx),hS=mF;mF.prototype.idAttribute="name";var PQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IQ=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},RN="contentEditable",DQ=function(r){PQ(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this,i=e.config||{};return n.config=i,n.module=e.module,n.coll=e.coll||null,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.em=i.em,n.listenTo(n.model,"change:active",n.updateStatus),n}return t.prototype.template=function(){var e=this,n=e.pfx,i=e.model,o=e.config,s=i.get("label")||"";return Io(NN||(NN=IQ([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),n,n,n,s,n,n,o.iconTagRemove)},t.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},t.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},t.prototype.startEditTag=function(){var e=this.em,n=this.getInputEl();n[RN]="true",n.focus(),e?.setEditing(!0)},t.prototype.endEditTag=function(){var e=this,n=e.model,i=e.em,o=this.getInputEl(),s=o.textContent||"",a=i?.Selectors;o[RN]="false",i?.setEditing(!1),a&&a.rename(n,s)!==n&&(o.innerText=n.getLabel())},t.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.getActive())},t.prototype.removeTag=function(){this.module.removeSelected(this.model)},t.prototype.updateStatus=function(){var e=this,n=e.model,i=e.$el,o=e.config,s=o.iconTagOn,a=o.iconTagOff,c=i.find("[data-tag-status]");n.get("active")?(c.html(s),i.removeClass("opac50")):(c.html(a),i.addClass("opac50"))},t.prototype.render=function(){var e=this,n=e.pfx,i=e.ppfx,o=e.$el,s=e.model,a="".concat(n,"tag"),c=["".concat(a," ").concat(i,"three-bg")];return s.get("protected")&&c.push("".concat(a,"-protected")),o.html(this.template()),o.attr("class",c.join(" ")),this.updateStatus(),this},t}(rt.Ss),kQ=DQ,NN,RQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ip=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},NQ=function(r){RQ(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.className=n.pfx+"tags",n.stateInputId=n.pfx+"states",n.stateInputC=n.pfx+"input-c",n.states=n.config.states||[];var i=n.config.em,o=n.collection;n.target=i;var s=i.Selectors;n.module=s,n.em=i,n.componentChanged=(0,B.debounce)(n.componentChanged.bind(n),0),n.checkSync=(0,B.debounce)(n.checkSync.bind(n),0);var a=Wi.I.update,c="".concat(a,":classes"),u="component:toggled ".concat(c),f="".concat(c," ").concat(a,":attributes:id change:state");return n.listenTo(i,u,n.componentChanged),n.listenTo(i,"styleManager:update",n.componentChanged),n.listenTo(i,f,n.__handleStateChange),n.listenTo(i,"styleable:change change:device",n.checkSync),n.listenTo(o,"add",n.addNew),n.listenTo(o,"reset",n.renderClasses),n.listenTo(o,"remove",n.tagRemoved),n.listenTo(s.getAll(),s.events.state,(0,B.debounce)(function(){return n.renderStates()},0)),n.delegateEvents(),n}return t.prototype.template=function(e){var n=e.labelInfo,i=e.labelHead,o=e.iconSync,s=e.iconAdd,a=e.pfx,c=e.ppfx;return Io(jN||(jN=Ip([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),a,a,a,a,i,a,a,a,c,c,c,a,c,c,a,c,a,a,a,a,a,s,a,a,o,a,a,n,a)},t.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},t.prototype.syncStyle=function(){var e=this.em,n=this.getTarget(),i=e.Css,o={noDisabled:1},s=this.getCommonSelectors({opts:o}),a=e.get("state"),c=e.getCurrentMedia(),u=[],f=i.get(s,a,c)||i.add(s,a,c),g;this.getTargets().forEach(function(v){var _=i.getIdRule(v.getId(),{state:a,mediaText:c});g=_.getStyle(),_.setStyle({}),u.push(_)}),g&&f.addStyle(g),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:s,mediaText:c,rule:f,ruleComponents:u,state:a})},t.prototype.tagRemoved=function(e){this.updateStateVis()},t.prototype.addNew=function(e){this.addToClasses(e)},t.prototype.startNewTag=function(){var e,n;(e=this.$addBtn)===null||e===void 0||e.css({display:"none"}),(n=this.$input)===null||n===void 0||n.show().focus()},t.prototype.endNewTag=function(){var e,n;(e=this.$addBtn)===null||e===void 0||e.css({display:""}),(n=this.$input)===null||n===void 0||n.hide().val("")},t.prototype.onInputKeyUp=function(e){var n;e.keyCode===13?(e.preventDefault(),this.addNewTag((n=this.$input)===null||n===void 0?void 0:n.val())):e.keyCode===27&&this.endNewTag()},t.prototype.checkStates=function(){var e=this.em.getState(),n=this.getStates();n&&n.val(e)},t.prototype.componentChanged=function(e){var n=e===void 0?{}:e,i=n.targets;this.updateSelection(i)},t.prototype.updateSelection=function(e){var n=e||this.getTargets();n=(0,B.isArray)(n)?n:[n];var i=[];return n&&n.length&&(i=this.getCommonSelectors({targets:n}),this.checkSync({validSelectors:i})),this.collection.reset(i),this.updateStateVis(n),this.module.__trgCustom(),i},t.prototype.getCommonSelectors=function(e){var n=e===void 0?{}:e,i=n.targets,o=n.opts,s=o===void 0?{}:o,a=i||this.getTargets();return this.module.__getCommonSelectors(a,s)},t.prototype._commonSelectors=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(e=this.module).__common.apply(e,n)},t.prototype.checkSync=function(){var e=this,n=e.$btnSyncEl,i=e.config,o=e.collection,s=this.getTarget(),a;if(s&&i.componentFirst&&o.length){var c=s.getStyle();a=!(0,B.isEmpty)(c)}n&&n[a?"show":"hide"]()},t.prototype.getTarget=function(){return this.target.getSelected()},t.prototype.getTargets=function(){return this.target.getSelectedAll()},t.prototype.updateStateVis=function(e){var n=this.em,i=n&&n.getConfig().avoidInlineStyle,o=this.collection.length||i?"":"none";this.getStatesC().css("display",o),this.updateSelector(e)},t.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},t.prototype.updateSelector=function(e){var n=this,i=this.el.querySelector("[data-selected]"),o=[],s=e||this.getTargets();s=(0,B.isArray)(s)?s:[s],s.forEach(function(a){return o.push(n.__getName(a))}),i&&(i.innerHTML=o.join(", ")),this.checkStates()},t.prototype.__getName=function(e){var n=this,i=n.pfx,o=n.config,s=n.em,a=o.selectedName,c=o.componentFirst,u;if((0,B.isString)(e))u=Io(FN||(FN=Ip(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),i,e);else{var f=e?.getSelectors();if(!f)return"";var g=f.getStyleable(),v=s.get("state"),_=e.getId?Io(LN||(LN=Ip(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),i,e.getName(),i,e.getId()):"";u=this.collection.getFullString(g),u=u?Io(VN||(VN=Ip(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),i,u):e.get("selectorsAdd")||_,u=c&&_?_:u,u+=v?Io(BN||(BN=Ip(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),i,v):"",u=a?a({result:u,state:v,target:e}):u}return u&&'<span class="'.concat(i,'sel">').concat(u,"</span>")},t.prototype.stateChanged=function(e){var n=this.em,i=e.target.value;n.set("state",i)},t.prototype.addNewTag=function(e){var n=e.trim();n&&(this.module.addSelected({label:n}),this.endNewTag())},t.prototype.addToClasses=function(e,n){var i=n,o=this.getClasses(),s=new kQ({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return i?i.appendChild(s):o.append(s),s},t.prototype.renderClasses=function(){var e=this,n=document.createDocumentFragment(),i=this.getClasses();i.empty(),this.collection.each(function(o){return e.addToClasses(o,n)}),i.append(n)},t.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},t.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},t.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},t.prototype.renderStates=function(){var e=this,n=e.module,i=e.em,o=i.t("selectorManager.emptyState"),s=n.getStates().map(function(c){var u=i.t("selectorManager.states.".concat(c.id))||c.getLabel()||c.id;return'<option value="'.concat(c.id,'">').concat(u,"</option>")}).join(""),a=this.getStates();a&&a.html('<option value="">'.concat(o,"</option>").concat(s)),this.checkStates()},t.prototype.render=function(){var e=this,n=e.em,i=e.pfx,o=e.ppfx,s=e.config,a=e.$el,c=e.el,u=s.render,f=s.iconSync,g=s.iconAdd,v={iconSync:f,iconAdd:g,labelHead:n.t("selectorManager.label"),labelInfo:n.t("selectorManager.selected"),ppfx:o,pfx:i,el:c};a.html(this.template(v));var _=u&&u(v);return _&&_!==c&&a.empty().append(_),this.$input=a.find("[data-input]"),this.$addBtn=a.find("[data-add]"),this.$classes=a.find("#"+i+"tags-c"),this.$btnSyncEl=a.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),a.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},t}(rt.Ss),jQ=NQ,jN,FN,LN,VN,BN,FQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Hp=function(){return Hp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Hp.apply(this,arguments)},pS=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},UN=function(r){return(0,B.isString)(r)&&r[0]=="#"},HN=function(r){return(0,B.isString)(r)&&r[0]=="."},vF="selector",Zp="".concat(vF,":"),LQ="".concat(Zp,"add"),VQ="".concat(Zp,"update"),yF="".concat(Zp,"remove"),BQ="".concat(yF,":before"),UQ="".concat(Zp,"custom"),_F="".concat(Zp,"state"),HQ={all:vF,update:VQ,add:LQ,remove:yF,removeBefore:BQ,state:_F,custom:UQ},zQ=function(r){FQ(t,r);function t(e){var n=r.call(this,e,"SelectorManager",new Ul([]),HQ,OQ,{skipListen:!0})||this;n.Selector=mo,n.Selectors=Ul,n.storageKey="",(0,B.bindAll)(n,"__updateSelectedByComponents");var i=n.config,o=i.pStylePrefix;o&&(i.stylePrefix=o+i.stylePrefix),n.all=new Ul(i.selectors),n.selected=new Ul([],{em:e,config:i}),n.states=new rt.pM(i.states.map(function(c){return new hS(c)}),{model:hS}),n.model=new rt.Kx({cFirst:i.componentFirst,_undo:!0}),n.__update=(0,B.debounce)(function(){return n.__trgCustom()},0),n.__initListen({collections:[n.states,n.selected],propagate:[{entity:n.states,event:n.events.state}]}),e.on("change:state",function(c,u){return e.trigger(_F,u)}),n.model.on("change:cFirst",function(c,u){return e.trigger("selector:type",u)});var s="".concat(Wi.I.update,":classes");e.on("component:toggled ".concat(s),n.__updateSelectedByComponents);var a="component:toggled ".concat(s," change:device styleManager:update selector:state selector:type style:target");return n.model.listenTo(e,a,function(){return n.__update()}),n}return t.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},t.prototype.getAll=function(e){return e===void 0&&(e={}),this.all?e.array?pS([],this.all.models,!0):this.all:[]},t.prototype.__customData=function(e){return e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},t.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},t.prototype.select=function(e,n){n===void 0&&(n={});var i=Array.isArray(e)?e:[e],o=this.em.Styles.select(i,n);this.selected.reset(this.__getCommonSelectors(o));var s=this.selectorTags,a=o.filter(function(c){return c}).map(function(c){return(0,Le.isComponent)(c)||(0,Le.isRule)(c)&&!c.get("selectorsAdd")?c:c.getSelectorsString()});return s&&s.componentChanged({targets:a}),this},t.prototype.addSelector=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i={});var o=Hp({},n);(0,B.isObject)(e)?o=e:o.name=e,UN(o.name)?(o.name=o.name.substr(1),o.type=mo.TYPE_ID):HN(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var s=o.name,a=this.getConfig(),c=this,u=c.all,f=c.em,g=s?this.get(s,o.type):u.where(o)[0];if(!g){var v=o instanceof mo?o:new mo(o,Hp(Hp({},i),{config:a,em:f}));return u.add(v,i)}return g},t.prototype.getSelector=function(e,n){return n===void 0&&(n=mo.TYPE_CLASS),UN(e)?(e=e.substr(1),n=mo.TYPE_ID):HN(e)&&(e=e.substr(1)),this.all.where({name:e,type:n})[0]},t.prototype.add=function(e,n){var i=this;n===void 0&&(n={});var o=(0,B.isString)(e)?{}:n;return(0,B.isArray)(e)?e.map(function(s){return i.addSelector(s,n,o)}):this.addSelector(e,n,o)},t.prototype.addClass=function(e){var n=this,i=[];return(0,B.isString)(e)&&(e=e.trim().split(" ")),e.forEach(function(o){return i.push(n.addSelector(o))}),i},t.prototype.get=function(e,n){var i=this;if((0,B.isArray)(e)){var o=[],s=e.map(function(a){return i.getSelector(a)}).filter(Boolean);return s.forEach(function(a){return o.indexOf(a)<0&&o.push(a)}),o}else return this.getSelector(e,n)},t.prototype.remove=function(e,n){return this.__remove(e,n)},t.prototype.rename=function(e,n,i){var o=this.escapeName(n),s=this.get(o);return s||e.set({name:o,label:n},i)},t.prototype.setState=function(e){return this.em.setState(e),this},t.prototype.getState=function(){return this.em.getState()},t.prototype.getStates=function(){return pS([],this.states.models,!0)},t.prototype.setStates=function(e,n){return this.states.reset(e.map(function(i){return new hS(i)}),n)},t.prototype.getSelected=function(){return this.__getCommon()},t.prototype.getSelectedAll=function(){return pS([],this.selected.models,!0)},t.prototype.addSelected=function(e){var n=this.add(e);this.em.getSelectedAll().forEach(function(i){i.getSelectors().add(n)})},t.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(n){!e.get("protected")&&n&&n.getSelectors().remove(e)})},t.prototype.duplicateSelected=function(e,n){var i=this;n===void 0&&(n={});var o=this.em,s=this.getSelected();if(!(s.indexOf(e)<0)){var a=this.getState(),c=o.getCurrentMedia(),u=o.Css.get(s,a,c),f=u?.getStyle();if(o.getSelectedAll().forEach(function(v){var _=v.getSelectors();if(_.includes(e)){var b=n.suffix||" copy",C=e.getLabel(),S=i.addSelector("".concat(C).concat(b)),j=_.indexOf(e);_.remove(e),_.add(S,{at:j})}}),f){var g=o.Css.add(this.getSelected(),a,c);g.setStyle(f)}}},t.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},t.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},t.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},t.prototype.escapeName=function(e){var n=this.getConfig().escapeName;return n?n(e):mo.escapeName(e)},t.prototype.render=function(e){var n=this.selectorTags,i=this.getConfig(),o=n?.el;return this.selected.reset(e),this.selectorTags=new jQ({el:o,collection:this.selected,module:this,config:i}),this.selectorTags.render().el},t.prototype.destroy=function(){var e=this,n=e.selectorTags,i=e.model;i.stopListening(),this.__update.cancel(),this.__destroy(),n?.remove(),this.selectorTags=void 0},t.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},t.prototype.__getCommonSelectors=function(e,n){n===void 0&&(n={});var i=e.map(function(o){return o.getSelectors&&o.getSelectors().getValid(n)}).filter(Boolean);return this.__common.apply(this,i)},t.prototype.__common=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length?n.length===1?n[0]:n.length===2?n[0].filter(function(o){return n[1].indexOf(o)>=0}):n.slice(1).reduce(function(o,s){return e.__common(o,s)},n[0]):[]},t.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},t}(zl),$Q=zQ,WQ={textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}},qQ=WQ,Ls,Ko={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},rf=(Ls={},Ls[Ko.MEDIA_RULE]="media",Ls[Ko.FONT_FACE_RULE]="font-face",Ls[Ko.PAGE_RULE]="page",Ls[Ko.KEYFRAMES_RULE]="keyframes",Ls[Ko.COUNTER_STYLE_RULE]="counter-style",Ls[Ko.SUPPORTS_RULE]="supports",Ls[Ko.DOCUMENT_RULE]="document",Ls[Ko.FONT_FEATURE_VALUES_RULE]="font-feature-values",Ls[Ko.VIEWPORT_RULE]="viewport",Ls),wF=(0,B.keys)(rf),aA=[Ko.FONT_FACE_RULE,Ko.PAGE_RULE,Ko.COUNTER_STYLE_RULE,Ko.VIEWPORT_RULE],GQ=wF.filter(function(r){return aA.indexOf(Number(r))<0}).map(function(r){return rf[r]}).concat(["container","layer"]),KQ=aA.map(function(r){return rf[r]}),bF=function(r){r===void 0&&(r="");for(var t=[],e=[],n=r.split(","),i=0,o=n.length;i<o;i++){var s=n[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var a=s.split(".").filter(Boolean);e.push(a)}else t.push(s)}return{result:e,add:t}},QQ=function(r){for(var t=r.style,e={},n=0,i=t.length;n<i;n++){var o=t[n],s=t.getPropertyValue(o),a=t.getPropertyPriority(o);e[o]="".concat(s).concat(a?" !".concat(a):"")}return e},zN=function(r){var t=r.conditionText||r.media&&r.media.mediaText||r.name||r.selectorText||"";return t.trim()},VS=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},i=r.length,o=r[i-1],s=o?o.split(/:(.+)/):[],a=s[1],c=e.atRule,u=e.selectorsAdd,f=e.mediaText,g=KQ.indexOf(c)>=0;return g&&(n.singleAtRule=!0),c&&(n.atRuleType=c),u&&(n.selectorsAdd=u),f&&(n.mediaText=f),a&&(r[i-1]=s[0],n.state=a,s.splice(s.length-1,1)),n.selectors=r,n.style=t,n},$N=function(r){var t=r.cssText,e=t===void 0?"":t;return GQ.find(function(n){return e.indexOf("@".concat(n))===0})},CF=function(r){for(var t=[],e=r.cssRules||[],n=0,i=e.length;n<i;n++){var o=e[n],s=o.type,a=!1,c="",u="",f=o.selectorText||o.keyText||"",g=aA.indexOf(s)>=0;if(g)a=!0,c=rf[s],u=zN(o);else if(wF.indexOf("".concat(s))>=0||!s&&$N(o)){var v=CF(o),_=rf[s]||$N(o);u=zN(o);for(var b=0,C=v.length;b<C;b++){var S=v[b];u&&(S.mediaText=u),S.atRuleType=_}t=t.concat(v)}if(!(!f&&!g)){for(var j=QQ(o),q=bF(f),N=q.add,G=q.result,se=void 0,ue=0,Y=G.length;ue<Y;ue++){var L=VS(G[ue],j,{atRule:rf[s]});t.push(L),se=L}if(N.length){var k=N.join(", ");if(se)se.selectorsAdd=k;else{var L={selectors:[],selectorsAdd:k,style:j};a&&(L.singleAtRule=a),c&&(L.atRuleType=c),u&&(L.mediaText=u),t.push(L)}}}}return t},YQ=function(r){var t=document.createElement("style");t.innerHTML=r,document.head.appendChild(t);var e=t.sheet;return document.head.removeChild(t),e?CF(e):[]},JQ=function(r,t){return t===void 0&&(t={}),{parse:function(e){var n=this,i=[],o=t.parserCss,s=r?.Editor,a=o?o(e,s):YQ(e);return a.forEach(function(c){return i=i.concat(n.checkNode(c))}),r?.trigger("parse:css",{input:e,output:i,nodes:a}),i},checkNode:function(e){var n=e.selectors,i=e.style,o=[e];if((0,B.isString)(n)){var s=[],a=e,c=bF(n),u=c.result,f=c.add.join(", "),g={atRule:a.atRule,mediaText:a.params};if(u.length?u.forEach(function(_){s.push(VS(_,i,g))}):s.push(VS([],i,g)),f){var v=s[s.length-1];v.selectorsAdd=f}o=s}return o}}},ZQ=JQ,XQ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eY=function(r){XQ(t,r);function t(e){var n=r.call(this,e,"Parser",qQ)||this,i=n.config;return n.parserCss=ZQ(e,i),n.parserHtml=Gj(e,i),n}return t.prototype.parseHtml=function(e,n){n===void 0&&(n={});var i=this,o=i.em,s=i.parserHtml;return s.compTypes=o.Components.getTypes()||[],s.parse(e,this.parserCss,n)},t.prototype.parseCss=function(e){return this.parserCss.parse(e)},t.prototype.destroy=function(){},t}(ko),tY=eY,nY={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(r){return r},onLoad:function(r){return r},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(r){return r},onLoad:function(r){return r}}}},rY=nY,WN=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},qN=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},iY=function(){function r(){}return r.prototype.store=function(t){return WN(this,arguments,void 0,function(e,n){return n===void 0&&(n={}),qN(this,function(i){return this.hasLocal(n,!0)&&localStorage.setItem(n.key,JSON.stringify(e)),[2,e]})})},r.prototype.load=function(){return WN(this,arguments,void 0,function(t){var e;return t===void 0&&(t={}),qN(this,function(n){return e={},this.hasLocal(t,!0)&&(e=JSON.parse(localStorage.getItem(t.key)||"{}")),[2,e]})})},r.prototype.hasLocal=function(t,e){if(t===void 0&&(t={}),t.checkLocal&&(!(0,Le.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},r}(),oY=iY;function Qp(r){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(r)}function sY(r){var t=this.constructor;return this.then(function(e){return t.resolve(r()).then(function(){return e})},function(e){return t.resolve(r()).then(function(){return t.reject(e)})})}var aY=sY,lY=setTimeout;function xF(r){return!!(r&&typeof r.length<"u")}function cY(){}function uY(r,t){return function(){r.apply(t,arguments)}}function Lr(r){if(!(this instanceof Lr))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],SF(r,this)}function EF(r,t){for(;r._state===3;)r=r._value;if(r._state===0){r._deferreds.push(t);return}r._handled=!0,Lr._immediateFn(function(){var e=r._state===1?t.onFulfilled:t.onRejected;if(e===null){(r._state===1?BS:Yp)(t.promise,r._value);return}var n;try{n=e(r._value)}catch(i){Yp(t.promise,i);return}BS(t.promise,n)})}function BS(r,t){try{if(t===r)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(Qp(t)==="object"||typeof t=="function")){var e=t.then;if(t instanceof Lr){r._state=3,r._value=t,US(r);return}else if(typeof e=="function"){SF(uY(e,t),r);return}}r._state=1,r._value=t,US(r)}catch(n){Yp(r,n)}}function Yp(r,t){r._state=2,r._value=t,US(r)}function US(r){r._state===2&&r._deferreds.length===0&&Lr._immediateFn(function(){r._handled||Lr._unhandledRejectionFn(r._value)});for(var t=0,e=r._deferreds.length;t<e;t++)EF(r,r._deferreds[t]);r._deferreds=null}function dY(r,t,e){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof t=="function"?t:null,this.promise=e}function SF(r,t){var e=!1;try{r(function(n){e||(e=!0,BS(t,n))},function(n){e||(e=!0,Yp(t,n))})}catch(n){if(e)return;e=!0,Yp(t,n)}}Lr.prototype.catch=function(r){return this.then(null,r)};Lr.prototype.then=function(r,t){var e=new this.constructor(cY);return EF(this,new dY(r,t,e)),e};Lr.prototype.finally=aY;Lr.all=function(r){return new Lr(function(t,e){if(!xF(r))return e(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(r);if(n.length===0)return t([]);var i=n.length;function o(a,c){try{if(c&&(Qp(c)==="object"||typeof c=="function")){var u=c.then;if(typeof u=="function"){u.call(c,function(f){o(a,f)},e);return}}n[a]=c,--i===0&&t(n)}catch(f){e(f)}}for(var s=0;s<n.length;s++)o(s,n[s])})};Lr.resolve=function(r){return r&&Qp(r)==="object"&&r.constructor===Lr?r:new Lr(function(t){t(r)})};Lr.reject=function(r){return new Lr(function(t,e){e(r)})};Lr.race=function(r){return new Lr(function(t,e){if(!xF(r))return e(new TypeError("Promise.race accepts an array"));for(var n=0,i=r.length;n<i;n++)Lr.resolve(r[n]).then(t,e)})};Lr._immediateFn=typeof setImmediate=="function"&&function(r){setImmediate(r)}||function(r){lY(r,0)};Lr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var HS=Lr;(0,Le.hasWin)()&&(window.Promise=window.Promise||HS);var AF=typeof fetch=="function"?fetch.bind():function(r,t){return new HS(function(e,n){var i=new XMLHttpRequest;i.open(t.method||"get",r),i.withCredentials=t.credentials=="include";for(var o in t.headers||{})i.setRequestHeader(o,t.headers[o]);i.onload=function(s){return e({status:i.status,statusText:i.statusText,text:function(){return HS.resolve(i.responseText)}})},i.onerror=n,i.upload&&t.onProgress&&(i.upload.onprogress=t.onProgress),t.body?i.send(t.body):i.send()})},k_=function(){return k_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},k_.apply(this,arguments)},GN=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},KN=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fY=function(){function r(){}return r.prototype.store=function(t){return GN(this,arguments,void 0,function(e,n){return n===void 0&&(n={}),KN(this,function(i){switch(i.label){case 0:return[4,this.request(n.urlStore,this.__props(n,e),n)];case 1:return[2,i.sent()]}})})},r.prototype.load=function(){return GN(this,arguments,void 0,function(t){return t===void 0&&(t={}),KN(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlLoad,this.__props(t),t)];case 1:return[2,e.sent()]}})})},r.prototype.request=function(t,e,n){return e===void 0&&(e={}),n===void 0&&(n={}),AF(t,e).then(function(i){var o=i.text(),s=(i.status/200|0)===1;return s?o:o.then(Promise.reject)}).then(function(i){var o=i&&(0,B.isString)(i);return n.contentTypeJson&&o?JSON.parse(i):i})},r.prototype.__props=function(t,e){t===void 0&&(t={});var n=t.contentTypeJson,i=t.headers||{},o=t.fetchOptions||{},s="X-Requested-With",a="Content-Type",c;if((0,B.isUndefined)(i[s])&&(i[s]="XMLHttpRequest"),(0,B.isUndefined)(i[a])&&n&&(i[a]="application/json; charset=utf-8"),e)if(n)c=JSON.stringify(e);else{c=new FormData;for(var u in e)c.append(u,e[u])}var f={method:c?"POST":"GET",credentials:t.credentials,headers:i,body:c};return k_(k_({},f),(0,B.isFunction)(o)?o(f):o)},r}(),hY=fY,TF=function(r){return r.start="storage:start",r.startStore="storage:start:store",r.startLoad="storage:start:load",r.load="storage:load",r.store="storage:store",r.after="storage:after",r.afterStore="storage:after:store",r.afterLoad="storage:after:load",r.end="storage:end",r.endStore="storage:end:store",r.endLoad="storage:end:load",r.error="storage:error",r.errorStore="storage:error:store",r.errorLoad="storage:error:load",r}(TF||{}),ho=TF,pY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yd=function(){return Yd=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yd.apply(this,arguments)},gS=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},mS=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Qy="local",QN="remote",gY=function(r){pY(t,r);function t(e){var n=r.call(this,e,"StorageManager",rY)||this;n.storages={},n.events=ho;var i=n.config;return i._disable&&(i.type=void 0),n.storages={},n.add(Qy,new oY),n.add(QN,new hY),n.setCurrent(i.type),n}return t.prototype.isAutosave=function(){return!!this.config.autosave},t.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},t.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},t.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},t.prototype.add=function(e,n){return this.storages[e]=n,this},t.prototype.get=function(e){return this.storages[e]},t.prototype.getStorages=function(){return this.storages},t.prototype.getCurrent=function(){return this.config.currentStorage},t.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},t.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},t.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},t.prototype.store=function(e){return gS(this,arguments,void 0,function(n,i){var o,s,a,c,u,f;return i===void 0&&(i={}),mS(this,function(g){switch(g.label){case 0:o=this.getCurrentStorage(),s=Yd(Yd({},this.getCurrentOptions()),i),a=this.getRecoveryStorage(),c=this.getCurrentOptions(Qy),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(o,s,n)];case 2:return g.sent(),u=a,u?[4,this.__exec(a,c,{})]:[3,4];case 3:u=g.sent(),g.label=4;case 4:return[3,9];case 5:return f=g.sent(),a?[4,this.__exec(a,c,n)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw f;case 8:return[3,9];case 9:return[2,n]}})})},t.prototype.load=function(){return gS(this,arguments,void 0,function(e){var n,i,o,s,a,c;return e===void 0&&(e={}),mS(this,function(u){switch(u.label){case 0:return n=this.getCurrentStorage(),i=Yd(Yd({},this.getCurrentOptions()),e),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(Qy))]:[3,5];case 1:if(a=u.sent(),(0,B.isEmpty)(a))return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return u.sent(),s=a,[3,5];case 4:return c=u.sent(),[3,5];case 5:return s?[3,7]:[4,this.__exec(n,i)];case 6:s=u.sent(),u.label=7;case 7:return[2,s||{}]}})})},t.prototype.__askRecovery=function(){var e=this.em,n=this.getRecovery();return new Promise(function(i,o){(0,B.isFunction)(n)?n(i,o,e?.getEditor()):confirm(e?.t("storageManager.recover"))?i(null):o()})},t.prototype.getRecovery=function(){return this.config.recovery},t.prototype.getRecoveryStorage=function(){var e=this.getRecovery();return e&&this.getCurrent()===QN&&this.get(Qy)},t.prototype.__exec=function(e,n,i){return gS(this,void 0,void 0,function(){var o,s,a,c,u,f,g,v,_,b,C,S,j,q;return mS(this,function(N){switch(N.label){case 0:if(o=i?"store":"load",s=this.getConfig(),a=s.onStore,c=s.onLoad,!e)return[2,i||{}];this.onStart(o,i),N.label=1;case 1:return N.trys.push([1,14,,15]),f=(q=this.em)===null||q===void 0?void 0:q.getEditor(),g=void 0,i?(_=a,_?[4,a(i,f)]:[3,3]):[3,7];case 2:_=N.sent(),N.label=3;case 3:return v=_||i,b=n.onStore,b?[4,n.onStore(v,f)]:[3,5];case 4:b=N.sent(),N.label=5;case 5:return v=b||v,[4,e.store(v,n)];case 6:return g=N.sent(),u=i,[3,13];case 7:return[4,e.load(n)];case 8:return g=N.sent(),u=this.__clearKeys(g),C=n.onLoad,C?[4,n.onLoad(u,f)]:[3,10];case 9:C=N.sent(),N.label=10;case 10:return u=C||u,S=c,S?[4,c(u,f)]:[3,12];case 11:S=N.sent(),N.label=12;case 12:u=S||u,N.label=13;case 13:return this.onAfter(o,u,g),this.onEnd(o,u,g),[3,15];case 14:throw j=N.sent(),this.onError(o,j),j;case 15:return[2,u]}})})},t.prototype.__clearKeys=function(e){e===void 0&&(e={});var n=this.getConfig(),i=new RegExp("^".concat(n.id)),o={};for(var s in e){var a=s.replace(i,"");o[a]=e[s]}return o},t.prototype.getCurrentOptions=function(e){var n=this.getConfig(),i=e||this.getCurrent();return n.options[i]||{}},t.prototype.onStart=function(e,n){var i=this.em;if(i){var o=e==="load"?ho.startLoad:ho.startStore;i.trigger(ho.start,e,n),i.trigger(o,n)}},t.prototype.onAfter=function(e,n,i){var o=this.em;if(o){var s=e==="load"?ho.afterLoad:ho.afterStore;o.trigger(ho.after),o.trigger(s,n,i);var a=e==="load"?ho.load:ho.store;o.trigger(a,n,i)}},t.prototype.onEnd=function(e,n,i){var o=this.em;if(o){var s=e==="load"?ho.endLoad:ho.endStore;o.trigger(ho.end,e,n,i),o.trigger(s,n,i)}},t.prototype.onError=function(e,n){var i=this.em;if(i){var o=e==="load"?ho.errorLoad:ho.errorStore;i.trigger(ho.error,n,e),i.trigger(o,n),this.onEnd(e,n)}},t.prototype.canAutoload=function(){var e=this.getCurrentStorage();return!!e&&!!this.config.autoload},t.prototype.destroy=function(){this.storages={}},t}(ko),mY=gY,vY={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1},yY=vY,_Y=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zp=function(){return zp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zp.apply(this,arguments)},OF=function(r){_Y(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.events={},n.appendInput=!0;var i=e.config,o=i===void 0?{}:i,s=n,a=s.model,c=s.eventCapture,u=a.target,f=a.attributes.type;n.config=o,n.em=o.em,n.pfx=o.stylePrefix||"",n.ppfx=o.pStylePrefix||"",n.target=u,n.className=n.pfx+"trait",n.clsField="".concat(n.ppfx,"field ").concat(n.ppfx,"field-").concat(f);var g=[["change:value",n.onValueChange],["remove",n.removeView]];return g.forEach(function(v){var _=v[0],b=v[1];a.off(_,b),n.listenTo(a,_,b)}),a.view=n,n.listenTo(a,"change:label",n.render),n.listenTo(a,"change:placeholder",n.rerender),n.events={},c.forEach(function(v){return n.events[v]="onChange"}),n.delegateEvents(),n.init(),n}return t.prototype.attributes=function(){return this.model.get("attributes")||{}},t.prototype.templateLabel=function(e){var n=this.ppfx,i=this.getLabel();return'<div class="'.concat(n,'label" title="').concat(i,'">').concat(i,"</div>")},t.prototype.templateInput=function(e){var n=this.clsField;return'<div class="'.concat(n,'" data-input></div>')},t.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},t.prototype.removeView=function(){this.remove(),this.removed()},t.prototype.init=function(){},t.prototype.removed=function(){},t.prototype.onRender=function(e){},t.prototype.onUpdate=function(e){},t.prototype.onEvent=function(e){},t.prototype.onChange=function(e){var n=this.getInputElem();n&&!(0,B.isUndefined)(n.value)&&this.model.set("value",n.value),this.onEvent(zp(zp({},this.getClbOpts()),{event:e}))},t.prototype.getValueForTarget=function(){return this.model.get("value")},t.prototype.setInputValue=function(e){var n=this.getInputElem();n&&(n.value=e)},t.prototype.onValueChange=function(e,n,i){if(i===void 0&&(i={}),i.fromTarget)this.setInputValue(e.get("value")),this.postUpdate();else{var o=this.getValueForTarget();e.setTargetValue(o,i)}},t.prototype.renderLabel=function(){var e=this,n=e.$el,i=e.target,o=this.getLabel(),s=this.templateLabel(i);this.createLabel&&(s=this.createLabel({label:o,component:i,trait:this})||""),n.find("[data-label]").append(s)},t.prototype.getLabel=function(){var e=this.em,n=this.model.attributes,i=n.label,o=n.name;return e.t("traitManager.traits.labels.".concat(o))||(0,Le.capitalize)(i||o).replace(/-/g," ")},t.prototype.getComponent=function(){return this.target},t.prototype.getInputEl=function(){if(!this.$input){var e=this,n=e.em,i=e.model,o=i,s=i.attributes.name,a=o.get("placeholder")||o.get("default")||"",c=o.get("type")||"text",u=o.get("min"),f=o.get("max"),g=this.getModelValue(),v=(0,dr.default)('<input type="'.concat(c,'">')),_=n.t("traitManager.traits.attributes.".concat(s))||{};v.attr(zp({placeholder:a},_)),(0,B.isUndefined)(g)||(o.set({value:g},{silent:!0}),v.prop("value",g)),u&&v.prop("min",u),f&&v.prop("max",f),this.$input=v}return this.$input.get(0)},t.prototype.getInputElem=function(){var e=this,n=e.input,i=e.$input;return n||i&&i.get&&i.get(0)||this.getElInput()},t.prototype.getModelValue=function(){return this.model.getValue()},t.prototype.getElInput=function(){return this.elInput},t.prototype.renderField=function(){var e=this,n=e.$el,i=e.appendInput,o=e.model,s=n.find("[data-input]"),a=s[s.length-1],c=o.el;c||(c=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,B.isString)(c)?(a.innerHTML=c,this.elInput=a.firstChild):(i?a.appendChild(c):a.insertBefore(c,a.firstChild),this.elInput=c),o.el=this.elInput},t.prototype.hasLabel=function(){var e=this.model.attributes.label;return!this.noLabel&&e!==!1},t.prototype.rerender=function(){delete this.model.el,this.render()},t.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},t.prototype.render=function(){var e=this,n=e.$el,i=e.pfx,o=e.ppfx,s=e.model,a=s.attributes,c=a.type,u=a.id,f=this.hasLabel&&this.hasLabel(),g="".concat(i,"trait");delete this.$input;var v='<div class="'.concat(g," ").concat(g,"--").concat(c,`">
      `).concat(f?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(c,`" data-input>
        `).concat(this.templateInput?(0,B.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return n.empty().append(v),f&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(u),this.postUpdate(),this.onRender(this.getClbOpts()),this},t}(rt.Ss),Za=OF;OF.prototype.eventCapture=["change"];var wY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MF=function(r){wY(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.templateInput=function(){return""},t.prototype.onChange=function(){this.handleClick()},t.prototype.handleClick=function(){this.model.runCommand()},t.prototype.renderLabel=function(){this.model.get("label")&&Za.prototype.renderLabel.apply(this)},t.prototype.getInputEl=function(){var e=this,n=e.model,i=e.ppfx,o=n.props(),s=o.labelButton,a=o.text,c=o.full,u=s||a,f="".concat(i,"btn"),g='<button type="button" class="'.concat(f,"-prim").concat(c?" ".concat(f,"--full"):"",'">').concat(u,"</button>");return g},t}(Za),bY=MF;MF.prototype.eventCapture=["click button"];var CY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xY=function(r){CY(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.appendInput=!1,e}return t.prototype.templateInput=function(){var e=this,n=e.ppfx,i=e.clsField;return'<label class="'.concat(i,`" data-input>
    <i class="`).concat(n,`chk-icon"></i>
  </label>`)},t.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},t.prototype.setInputValue=function(e){var n=this.getInputElem();n&&(n.checked=!!e)},t.prototype.getInputEl=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=!this.$input,o=Za.prototype.getInputEl.apply(this,e);if(i){var s=void 0,a=void 0,c=this,u=c.model,f=c.target,g=u.attributes.valueFalse,v=u.getName();u.changeProp?(s=f.get(v),a=s):(a=f.get("attributes")[v],s=!!(a||a==="")),!(0,B.isUndefined)(g)&&a===g&&(s=!1),o.checked=s}return o},t}(Za),EY=xY;function SY(r,t){"use strict";if(!(0,Le.hasWin)())return;var e={beforeShow:_,move:_,change:_,show:_,hide:_,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],i=!!/msie/i.exec(window.navigator.userAgent),o=function(){function Q(Ne,ye){return!!~(""+Ne).indexOf(ye)}var le=document.createElement("div"),U=le.style;return U.cssText="background-color:rgba(0,0,0,.5)",Q(U.backgroundColor,"rgba")||Q(U.backgroundColor,"hsla")}(),s=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var Q="";if(i)for(var le=1;le<=6;le++)Q+="<div class='sp-"+le+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",Q,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function c(Q,le,U,Ne){for(var ye=[],Ue=0;Ue<Q.length;Ue++){var lt=Q[Ue];if(lt){var at=T(lt),tt=at.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";tt+=T.equals(le,lt)?" sp-thumb-active":"";var Tt=at.toString(Ne.preferredFormat||"rgb"),qt=o?"background-color:"+at.toRgbString():"filter:"+at.toFilter();ye.push('<span title="'+Tt+'" data-color="'+at.toRgbString()+'" class="'+tt+'"><span class="sp-thumb-inner" style="'+qt+';"></span></span>')}else{var en="sp-clear-display";ye.push(r("<div />").append(r('<span data-color="" style="background-color:transparent;" class="'+en+'"></span>').attr("title",Ne.noColorSelectedText)).html())}}return"<div class='sp-cf "+U+"'>"+ye.join("")+"</div>"}function u(){for(var Q=0;Q<n.length;Q++)n[Q]&&n[Q].hide()}function f(Q,le){var U=r.extend({},e,Q);return U.callbacks={move:C(U.move,le),change:C(U.change,le),show:C(U.show,le),hide:C(U.hide,le),beforeShow:C(U.beforeShow,le)},U}function g(Q,le){var U=f(le,Q),Ne=U.flat,ye=U.showSelectionPalette,Ue=U.localStorageKey,lt=U.theme,at=U.callbacks,tt=j(yr,10),Tt=!1,qt=!1,en=!0,Jt=0,Rn=0,ar=0,W=0,oe=0,ge=0,je=0,nt=0,xt=0,Ht=0,fn=0,Pn=1,In=[],zr=[],Cr={},$n=U.selectionPalette.slice(0),$r=U.maxSelectionSize,Nn="sp-dragging",Wn=null,Vn=Q.ownerDocument,Ci=Vn.body,cn=r(Q),Pr=!1,Dt=r(a,Vn).addClass(lt),Ir=Dt.find(".sp-picker-container"),Xn=Dt.find(".sp-color"),Wr=Dt.find(".sp-dragger"),gn=Dt.find(".sp-hue"),ht=Dt.find(".sp-slider"),pr=Dt.find(".sp-alpha-inner"),oi=Dt.find(".sp-alpha"),Qn=Dt.find(".sp-alpha-handle"),zt=Dt.find(".sp-input"),En=Dt.find(".sp-palette"),si=Dt.find(".sp-initial"),Dr=Dt.find(".sp-cancel"),Be=Dt.find(".sp-clear"),Nt=Dt.find(".sp-choose"),yi=Dt.find(".sp-palette-toggle"),H=cn.is("input"),re=H&&cn.attr("type")==="color"&&q(),De=H&&!Ne,He=De?r(s).addClass(lt).addClass(U.className).addClass(U.replacerClassName):r([]),Ge=De?He:cn,Gt=He.find(".sp-preview-inner"),tn=U.color||H&&cn.val(),Sn=!1,An=U.preferredFormat,ys=!U.showButtons||U.clickoutFiresChange,Qi=!tn,gr=U.allowEmpty&&!re;function qr(){if(U.showPaletteOnly&&(U.showPalette=!0),yi.text(U.showPaletteOnly?U.togglePaletteMoreText:U.togglePaletteLessText),U.palette){In=U.palette.slice(0),zr=r.isArray(In[0])?In:[In],Cr={};for(var At=0;At<zr.length;At++)for(var Ot=0;Ot<zr[At].length;Ot++){var $t=T(zr[At][Ot]).toRgbString();Cr[$t]=!0}}Dt.toggleClass("sp-flat",Ne),Dt.toggleClass("sp-input-disabled",!U.showInput),Dt.toggleClass("sp-alpha-enabled",U.showAlpha),Dt.toggleClass("sp-clear-enabled",gr),Dt.toggleClass("sp-buttons-disabled",!U.showButtons),Dt.toggleClass("sp-palette-buttons-disabled",!U.togglePaletteOnly),Dt.toggleClass("sp-palette-disabled",!U.showPalette),Dt.toggleClass("sp-palette-only",U.showPaletteOnly),Dt.toggleClass("sp-initial-disabled",!U.showInitial),Dt.addClass(U.className).addClass(U.containerClassName),yr()}function es(){if(i&&Dt.find("*:not(input)").attr("unselectable","on"),qr(),De&&cn.after(He).hide(),gr||Be.hide(),Ne)cn.after(Dt).hide();else{var At=U.appendTo==="parent"?cn.parent():r(U.appendTo);At.length!==1&&(At=r("body")),At.append(Dt)}jo(),Ge.bind("click.spectrum touchstart.spectrum",function(dt){Pr||xr(),dt.stopPropagation(),r(dt.target).is("input")||dt.preventDefault()}),(cn.is(":disabled")||U.disabled===!0)&&Co(),Dt.click(b),zt.change(lr),zt.bind("paste",function(){setTimeout(lr,1)}),zt.keydown(function(dt){dt.keyCode==13&&lr()}),Dr.text(U.cancelText),Dr.bind("click.spectrum",function(dt){dt.stopPropagation(),dt.preventDefault(),Di(),mr()}),Be.attr("title",U.clearText),Be.bind("click.spectrum",function(dt){dt.stopPropagation(),dt.preventDefault(),Qi=!0,Gr(),Ne&&Zi(!0)}),Nt.text(U.chooseText),Nt.bind("click.spectrum",function(dt){dt.stopPropagation(),dt.preventDefault(),i&&zt.is(":focus")&&zt.trigger("change"),ws()&&(Zi(!0),mr())}),yi.text(U.showPaletteOnly?U.togglePaletteMoreText:U.togglePaletteLessText),yi.bind("click.spectrum",function(dt){dt.stopPropagation(),dt.preventDefault(),U.showPaletteOnly=!U.showPaletteOnly,!U.showPaletteOnly&&!Ne&&Dt.css("left","-="+(Ir.outerWidth(!0)+5)),qr()}),S(oi,function(dt,er,ki){Pn=dt/ge,Qi=!1,ki.shiftKey&&(Pn=Math.round(Pn*10)/10),Gr()},xi,_s),S(gn,function(dt,er){xt=parseFloat(er/W),Qi=!1,U.showAlpha||(Pn=1),Gr()},xi,_s),S(Xn,function(dt,er,ki){if(!ki.shiftKey)Wn=null;else if(!Wn){var Ei=Ht*Jt,Er=Rn-fn*Rn,kr=Math.abs(dt-Ei)>Math.abs(er-Er);Wn=kr?"x":"y"}var li=!Wn||Wn==="x",xo=!Wn||Wn==="y";li&&(Ht=parseFloat(dt/Jt)),xo&&(fn=parseFloat((Rn-er)/Rn)),Qi=!1,U.showAlpha||(Pn=1),Gr()},xi,_s),tn?(Ji(tn),bo(),An=U.preferredFormat||T(tn).getFormat(),ts(tn)):bo(),Ne&&$s();function Ot(dt){return dt.data&&dt.data.ignore?(Ji(r(dt.target).closest(".sp-thumb-el").data("color")),Gr()):(Ji(r(dt.target).closest(".sp-thumb-el").data("color")),Gr(),U.hideAfterPaletteSelect&&(Zi(!0),mr())),!1}var $t=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";En.delegate(".sp-thumb-el",$t,Ot),si.delegate(".sp-thumb-el:nth-child(1)",$t,{ignore:!0},Ot)}function jo(){if(Ue&&window.localStorage){try{var At=window.localStorage[Ue].split(",#");At.length>1&&(delete window.localStorage[Ue],r.each(At,function(Ot,$t){ts($t)}))}catch{}try{$n=window.localStorage[Ue].split(";")}catch{}}}function ts(At){if(ye){var Ot=T(At).toRgbString();if(!Cr[Ot]&&r.inArray(Ot,$n)===-1)for($n.push(Ot);$n.length>$r;)$n.shift();if(Ue&&window.localStorage)try{window.localStorage[Ue]=$n.join(";")}catch{}}}function Tn(){var At=[];if(U.showPalette)for(var Ot=0;Ot<$n.length;Ot++){var $t=T($n[Ot]).toRgbString();Cr[$t]||At.push($n[Ot])}return At.reverse().slice(0,U.maxSelectionSize)}function Fo(){var At=vr(),Ot=r.map(zr,function($t,dt){return c($t,At,"sp-palette-row sp-palette-row-"+dt,U)});jo(),$n&&Ot.push(c(Tn(),At,"sp-palette-row sp-palette-row-selection",U)),En.html(Ot.join(""))}function Yi(){if(U.showInitial){var At=Sn,Ot=vr();si.html(c([At,Ot],Ot,"sp-palette-row-initial",U))}}function xi(){(Rn<=0||Jt<=0||W<=0)&&yr(),qt=!0,Dt.addClass(Nn),Wn=null,cn.trigger("dragstart.spectrum",[vr()])}function _s(){qt=!1,Dt.removeClass(Nn),cn.trigger("dragstop.spectrum",[vr()])}function lr(){var At=zt.val();if((At===null||At==="")&&gr)Ji(null),Zi(!0);else{var Ot=T(At);Ot.isValid()?(Ji(Ot),Zi(!0)):zt.addClass("sp-validation-error")}}function xr(){Tt?mr():$s()}function $s(){var At=r.Event("beforeShow.spectrum");if(Tt){yr();return}if(cn.trigger("beforeShow.spectrum",[vr()]),!(at.beforeShow(vr())===!1||At.isDefaultPrevented())){u(),Tt=!0;var Ot=r(Vn);Ot.bind("keydown.spectrum",Ea),Ot.bind("click.spectrum",Lo),r(window).bind("resize.spectrum",tt),He.addClass("sp-active"),Dt.removeClass("sp-hidden"),yr(),bo(),Sn=vr(),Yi(),at.show(Sn),cn.trigger("show.spectrum",[Sn])}}function Ea(At){At.keyCode===27&&mr()}function Lo(At){At.button!=2&&(qt||(ys?Zi(!0):Di(),mr()))}function mr(){!Tt||Ne||(Tt=!1,r(Vn).unbind("keydown.spectrum",Ea),r(Vn).unbind("click.spectrum",Lo),r(window).unbind("resize.spectrum",tt),He.removeClass("sp-active"),Dt.addClass("sp-hidden"),at.hide(vr()),cn.trigger("hide.spectrum",[vr()]))}function Di(){Ji(Sn,!0)}function Ji(At,Ot){if(T.equals(At,vr())){bo();return}var $t,dt;!At&&gr?Qi=!0:(Qi=!1,en=!At,$t=T(At),dt=$t.toHsv(),xt=dt.h%360/360,Ht=dt.s,fn=dt.v,Pn=dt.a),bo(),$t&&$t.isValid()&&!Ot&&(An=U.preferredFormat||$t.getFormat())}function vr(At){return At=At||{},gr&&Qi?null:T.fromRatio({h:xt,s:Ht,v:fn,a:Math.round(Pn*100)/100},{format:At.format||An})}function ws(){return!zt.hasClass("sp-validation-error")}function Gr(){bo(),at.move(vr()),cn.trigger("move.spectrum",[vr()])}function bo(){zt.removeClass("sp-validation-error"),Ws();var At=T.fromRatio({h:xt,s:1,v:1});Xn.css("background-color",At.toHexString());var Ot=An;Pn<1&&!(Pn===0&&Ot==="name")&&(Ot==="hex"||Ot==="hex3"||Ot==="hex6"||Ot==="name")&&(Ot="rgb");var $t=vr({format:Ot}),dt="";if(Gt.removeClass("sp-clear-display"),Gt.css("background-color","transparent"),!$t&&gr)Gt.addClass("sp-clear-display");else{var er=$t.toHexString(),ki=$t.toRgbString();if(o||$t.alpha===1?Gt.css("background-color",ki):(Gt.css("background-color","transparent"),Gt.css("filter",$t.toFilter())),U.showAlpha){var Ei=$t.toRgb();Ei.a=0;var Er=T(Ei).toRgbString(),kr="linear-gradient(left, "+Er+", "+er+")";i?pr.css("filter",T(Er).toFilter({gradientType:1},er)):(pr.css("background","-webkit-"+kr),pr.css("background","-moz-"+kr),pr.css("background","-ms-"+kr),pr.css("background","linear-gradient(to right, "+Er+", "+er+")"))}dt=$t.toString(Ot)}U.showInput&&zt.val(dt),U.showPalette&&Fo(),Yi()}function Ws(){var At=Ht,Ot=fn;if(gr&&Qi)Qn.hide(),ht.hide(),Wr.hide();else{Qn.show(),ht.show(),Wr.show();var $t=At*Jt,dt=Rn-Ot*Rn;$t=Math.max(-ar,Math.min(Jt-ar,$t-ar)),dt=Math.max(-ar,Math.min(Rn-ar,dt-ar)),Wr.css({top:dt+"px",left:$t+"px"});var er=Pn*ge;Qn.css({left:er-je/2+"px"});var ki=xt*W;ht.css({top:ki-nt+"px"})}}function Zi(At){var Ot=vr(),$t="",dt=en?!0:!T.equals(Ot,Sn);Ot&&($t=Ot.toString(An),!Tt&&ts(Ot)),H&&cn.val($t),At&&dt&&(at.change(Ot),cn.trigger("change",[Ot]))}function yr(){Tt&&(Jt=Xn.width(),Rn=Xn.height(),ar=Wr.height(),oe=gn.width(),W=gn.height(),nt=ht.height(),ge=oi.width(),je=Qn.width(),Ne||(Dt.css("position","absolute"),U.offset?Dt.offset(U.offset):Dt.offset(v(Dt,Ge))),Ws(),U.showPalette&&Fo(),cn.trigger("reflow.spectrum"))}function bs(){cn.show(),Ge.unbind("click.spectrum touchstart.spectrum"),Dt.remove(),He.remove(),n[ai.id]=null}function Vo(At,Ot){if(At===t)return r.extend({},U);if(Ot===t)return U[At];U[At]=Ot,At==="preferredFormat"&&(An=U.preferredFormat),qr()}function Xi(){Pr=!1,cn.attr("disabled",!1),Ge.removeClass("sp-disabled")}function Co(){mr(),Pr=!0,cn.attr("disabled",!0),Ge.addClass("sp-disabled")}function qs(At){U.offset=At,yr()}es();var ai={show:$s,hide:mr,toggle:xr,reflow:yr,option:Vo,enable:Xi,disable:Co,offset:qs,set:function(At){Ji(At),Zi()},get:vr,destroy:bs,container:Dt};return ai.id=n.push(ai)-1,ai}function v(Q,le){for(var U=le[0],Ne=Q[0],ye=Ne.parentElement,Ue=U.getBoundingClientRect(),lt=Ne.offsetWidth,at=Ne.offsetHeight,tt={top:0,left:0,width:U.offsetWidth,height:U.offsetHeight};U&&(tt.top+=U.offsetTop-U.scrollTop,tt.left+=U.offsetLeft-U.scrollLeft,!(U===ye||!ye.contains(U.offsetParent)));)U=U.offsetParent;return Ue.right+lt>window.innerWidth-window.scrollX&&Ue.right-lt>0&&(tt.left-=lt-tt.width),Ue.bottom+at<window.innerHeight-window.scrollY?tt.top+=tt.height:tt.top-=at,tt}function _(){}function b(Q){Q.stopPropagation()}function C(Q,le){var U=Array.prototype.slice,Ne=U.call(arguments,2);return function(){return Q.apply(le,Ne.concat(U.call(arguments)))}}function S(Q,le,U,Ne){le=le||function(){},U=U||function(){},Ne=Ne||function(){};var ye=document,Ue=!1,lt={},at=0,tt=0,Tt="ontouchstart"in window,qt={};qt.selectstart=en,qt.dragstart=en,qt["touchmove mousemove"]=Jt,qt["touchend mouseup"]=ar;function en(W){W.stopPropagation&&W.stopPropagation(),W.preventDefault&&W.preventDefault(),W.returnValue=!1}function Jt(W){if(Ue){if(i&&ye.documentMode<9&&!W.button)return ar();var oe=W&&W.touches&&W.touches[0],ge=oe&&oe.pageX||W.pageX,je=oe&&oe.pageY||W.pageY,nt=Math.max(0,Math.min(ge-lt.left,tt)),xt=Math.max(0,Math.min(je-lt.top,at));Tt&&en(W),le.apply(Q,[nt,xt,W])}}function Rn(W){var oe=W.which?W.which==3:W.button==2;!oe&&!Ue&&U.apply(Q,arguments)!==!1&&(Ue=!0,at=r(Q).height(),tt=r(Q).width(),lt=r(Q).offset(),r(ye).bind(qt),r(ye.body).addClass("sp-dragging"),Jt(W),en(W))}function ar(){Ue&&(r(ye).unbind(qt),r(ye.body).removeClass("sp-dragging"),setTimeout(function(){Ne.apply(Q,arguments)},0)),Ue=!1}r(Q).bind("touchstart mousedown",Rn)}function j(Q,le,U){var Ne;return function(){var ye=this,Ue=arguments,lt=function(){Ne=null,Q.apply(ye,Ue)};U&&clearTimeout(Ne),(U||!Ne)&&(Ne=setTimeout(lt,le))}}function q(){return r.fn.spectrum.inputTypeColorSupport()}var N="spectrum.id";r.fn.spectrum=function(Q,le){if(typeof Q=="string"){var U=this,Ne=Array.prototype.slice.call(arguments,1);return this.each(function(){var ye=n[r(this).data(N)];if(ye){var Ue=ye[Q];if(!Ue)throw new Error("Spectrum: no such method: '"+Q+"'");Q=="get"?U=ye.get():Q=="container"?U=ye.container:Q=="option"?U=ye.option.apply(ye,Ne):Q=="destroy"?(ye.destroy(),r(this).removeData(N)):Ue.apply(ye,Ne)}}),U}return this.spectrum("destroy").each(function(){var ye=r.extend({},Q,r(this).data()),Ue=g(this,ye);r(this).data(N,Ue.id)})},r.fn.spectrum.load=!0,r.fn.spectrum.loadOpts={},r.fn.spectrum.draggable=S,r.fn.spectrum.defaults=e,r.fn.spectrum.inputTypeColorSupport=function Q(){if(typeof Q._cachedResult>"u"){var le=r("<input type='color'/>")[0];Q._cachedResult=le.type==="color"&&le.value!==""}return Q._cachedResult},r.spectrum={},r.spectrum.localization={},r.spectrum.palettes={},r.fn.spectrum.processNativeColorInputs=function(){var Q=r("input[type=color]");Q.length&&!q()&&Q.spectrum({preferredFormat:"hex6"})};var G=/^[\s,#]+/,se=/\s+$/,ue=0,Y=Math,L=Y.round,k=Y.min,$=Y.max,I=Y.random,T=function(Q,le){if(Q=Q||"",le=le||{},Q instanceof T)return Q;if(!(this instanceof T))return new T(Q,le);var U=O(Q);this._originalInput=Q,this._r=U.r,this._g=U.g,this._b=U.b,this._a=U.a,this._roundA=L(100*this._a)/100,this._format=le.format||U.format,this._gradientType=le.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=U.ok,this._tc_id=ue++};T.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Q=this.toRgb();return(Q.r*299+Q.g*587+Q.b*114)/1e3},setAlpha:function(Q){return this._a=Lt(Q),this._roundA=L(100*this._a)/100,this},toHsv:function(){var Q=xe(this._r,this._g,this._b);return{h:Q.h*360,s:Q.s,v:Q.v,a:this._a}},toHsvString:function(){var Q=xe(this._r,this._g,this._b),le=L(Q.h*360),U=L(Q.s*100),Ne=L(Q.v*100);return this._a==1?"hsv("+le+", "+U+"%, "+Ne+"%)":"hsva("+le+", "+U+"%, "+Ne+"%, "+this._roundA+")"},toHsl:function(){var Q=ce(this._r,this._g,this._b);return{h:Q.h*360,s:Q.s,l:Q.l,a:this._a}},toHslString:function(){var Q=ce(this._r,this._g,this._b),le=L(Q.h*360),U=L(Q.s*100),Ne=L(Q.l*100);return this._a==1?"hsl("+le+", "+U+"%, "+Ne+"%)":"hsla("+le+", "+U+"%, "+Ne+"%, "+this._roundA+")"},toHex:function(Q){return ze(this._r,this._g,this._b,Q)},toHexString:function(Q){return"#"+this.toHex(Q)},toHex8:function(){return pt(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(R(this._r,255)*100)+"%",g:L(R(this._g,255)*100)+"%",b:L(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+L(R(this._r,255)*100)+"%, "+L(R(this._g,255)*100)+"%, "+L(R(this._b,255)*100)+"%)":"rgba("+L(R(this._r,255)*100)+"%, "+L(R(this._g,255)*100)+"%, "+L(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ln[ze(this._r,this._g,this._b,!0)]||!1},toFilter:function(Q){var le="#"+pt(this._r,this._g,this._b,this._a),U=le,Ne=this._gradientType?"GradientType = 1, ":"";if(Q){var ye=T(Q);U=ye.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+Ne+"startColorstr="+le+",endColorstr="+U+")"},toString:function(Q){var le=!!Q;Q=Q||this._format;var U=!1,Ne=this._a<1&&this._a>=0,ye=!le&&Ne&&(Q==="hex"||Q==="hex6"||Q==="hex3"||Q==="name");return ye?Q==="name"&&this._a===0?this.toName():this.toRgbString():(Q==="rgb"&&(U=this.toRgbString()),Q==="prgb"&&(U=this.toPercentageRgbString()),(Q==="hex"||Q==="hex6")&&(U=this.toHexString()),Q==="hex3"&&(U=this.toHexString(!0)),Q==="hex8"&&(U=this.toHex8String()),Q==="name"&&(U=this.toName()),Q==="hsl"&&(U=this.toHslString()),Q==="hsv"&&(U=this.toHsvString()),U||this.toHexString())},_applyModification:function(Q,le){var U=Q.apply(null,[this].concat([].slice.call(le)));return this._r=U._r,this._g=U._g,this._b=U._b,this.setAlpha(U._a),this},lighten:function(){return this._applyModification(Te,arguments)},brighten:function(){return this._applyModification($e,arguments)},darken:function(){return this._applyModification(de,arguments)},desaturate:function(){return this._applyModification(ft,arguments)},saturate:function(){return this._applyModification(Pt,arguments)},greyscale:function(){return this._applyModification(be,arguments)},spin:function(){return this._applyModification(Ae,arguments)},_applyCombination:function(Q,le){return Q.apply(null,[this].concat([].slice.call(le)))},analogous:function(){return this._applyCombination(ut,arguments)},complement:function(){return this._applyCombination(Re,arguments)},monochromatic:function(){return this._applyCombination(Xt,arguments)},splitcomplement:function(){return this._applyCombination(qe,arguments)},triad:function(){return this._applyCombination(Je,arguments)},tetrad:function(){return this._applyCombination(Qe,arguments)}},T.fromRatio=function(Q,le){if(typeof Q=="object"){var U={};for(var Ne in Q)Q.hasOwnProperty(Ne)&&(Ne==="a"?U[Ne]=Q[Ne]:U[Ne]=ve(Q[Ne]));Q=U}return T(Q,le)};function O(Q){var le={r:0,g:0,b:0},U=1,Ne=!1,ye=!1;return typeof Q=="string"&&(Q=Ct(Q)),typeof Q=="object"&&(Q.hasOwnProperty("r")&&Q.hasOwnProperty("g")&&Q.hasOwnProperty("b")?(le=Z(Q.r,Q.g,Q.b),Ne=!0,ye=String(Q.r).substr(-1)==="%"?"prgb":"rgb"):Q.hasOwnProperty("h")&&Q.hasOwnProperty("s")&&Q.hasOwnProperty("v")?(Q.s=ve(Q.s),Q.v=ve(Q.v),le=Ee(Q.h,Q.s,Q.v),Ne=!0,ye="hsv"):Q.hasOwnProperty("h")&&Q.hasOwnProperty("s")&&Q.hasOwnProperty("l")&&(Q.s=ve(Q.s),Q.l=ve(Q.l),le=V(Q.h,Q.s,Q.l),Ne=!0,ye="hsl"),Q.hasOwnProperty("a")&&(U=Q.a)),U=Lt(U),{ok:Ne,format:Q.format||ye,r:k(255,$(le.r,0)),g:k(255,$(le.g,0)),b:k(255,$(le.b,0)),a:U}}function Z(Q,le,U){return{r:R(Q,255)*255,g:R(le,255)*255,b:R(U,255)*255}}function ce(Q,le,U){Q=R(Q,255),le=R(le,255),U=R(U,255);var Ne=$(Q,le,U),ye=k(Q,le,U),Ue,lt,at=(Ne+ye)/2;if(Ne==ye)Ue=lt=0;else{var tt=Ne-ye;switch(lt=at>.5?tt/(2-Ne-ye):tt/(Ne+ye),Ne){case Q:Ue=(le-U)/tt+(le<U?6:0);break;case le:Ue=(U-Q)/tt+2;break;case U:Ue=(Q-le)/tt+4;break}Ue/=6}return{h:Ue,s:lt,l:at}}function V(Q,le,U){var Ne,ye,Ue;Q=R(Q,360),le=R(le,100),U=R(U,100);function lt(Tt,qt,en){return en<0&&(en+=1),en>1&&(en-=1),en<1/6?Tt+(qt-Tt)*6*en:en<1/2?qt:en<2/3?Tt+(qt-Tt)*(2/3-en)*6:Tt}if(le===0)Ne=ye=Ue=U;else{var at=U<.5?U*(1+le):U+le-U*le,tt=2*U-at;Ne=lt(tt,at,Q+1/3),ye=lt(tt,at,Q),Ue=lt(tt,at,Q-1/3)}return{r:Ne*255,g:ye*255,b:Ue*255}}function xe(Q,le,U){Q=R(Q,255),le=R(le,255),U=R(U,255);var Ne=$(Q,le,U),ye=k(Q,le,U),Ue,lt,at=Ne,tt=Ne-ye;if(lt=Ne===0?0:tt/Ne,Ne==ye)Ue=0;else{switch(Ne){case Q:Ue=(le-U)/tt+(le<U?6:0);break;case le:Ue=(U-Q)/tt+2;break;case U:Ue=(Q-le)/tt+4;break}Ue/=6}return{h:Ue,s:lt,v:at}}function Ee(Q,le,U){Q=R(Q,360)*6,le=R(le,100),U=R(U,100);var Ne=Y.floor(Q),ye=Q-Ne,Ue=U*(1-le),lt=U*(1-ye*le),at=U*(1-(1-ye)*le),tt=Ne%6,Tt=[U,lt,Ue,Ue,at,U][tt],qt=[at,U,U,lt,Ue,Ue][tt],en=[Ue,Ue,at,U,U,lt][tt];return{r:Tt*255,g:qt*255,b:en*255}}function ze(Q,le,U,Ne){var ye=[X(L(Q).toString(16)),X(L(le).toString(16)),X(L(U).toString(16))];return Ne&&ye[0].charAt(0)==ye[0].charAt(1)&&ye[1].charAt(0)==ye[1].charAt(1)&&ye[2].charAt(0)==ye[2].charAt(1)?ye[0].charAt(0)+ye[1].charAt(0)+ye[2].charAt(0):ye.join("")}function pt(Q,le,U,Ne){var ye=[X(fe(Ne)),X(L(Q).toString(16)),X(L(le).toString(16)),X(L(U).toString(16))];return ye.join("")}T.equals=function(Q,le){return!Q||!le?!1:T(Q).toRgbString()==T(le).toRgbString()},T.random=function(){return T.fromRatio({r:I(),g:I(),b:I()})};function ft(Q,le){le=le===0?0:le||10;var U=T(Q).toHsl();return U.s-=le/100,U.s=K(U.s),T(U)}function Pt(Q,le){le=le===0?0:le||10;var U=T(Q).toHsl();return U.s+=le/100,U.s=K(U.s),T(U)}function be(Q){return T(Q).desaturate(100)}function Te(Q,le){le=le===0?0:le||10;var U=T(Q).toHsl();return U.l+=le/100,U.l=K(U.l),T(U)}function $e(Q,le){le=le===0?0:le||10;var U=T(Q).toRgb();return U.r=$(0,k(255,U.r-L(255*-(le/100)))),U.g=$(0,k(255,U.g-L(255*-(le/100)))),U.b=$(0,k(255,U.b-L(255*-(le/100)))),T(U)}function de(Q,le){le=le===0?0:le||10;var U=T(Q).toHsl();return U.l-=le/100,U.l=K(U.l),T(U)}function Ae(Q,le){var U=T(Q).toHsl(),Ne=(L(U.h)+le)%360;return U.h=Ne<0?360+Ne:Ne,T(U)}function Re(Q){var le=T(Q).toHsl();return le.h=(le.h+180)%360,T(le)}function Je(Q){var le=T(Q).toHsl(),U=le.h;return[T(Q),T({h:(U+120)%360,s:le.s,l:le.l}),T({h:(U+240)%360,s:le.s,l:le.l})]}function Qe(Q){var le=T(Q).toHsl(),U=le.h;return[T(Q),T({h:(U+90)%360,s:le.s,l:le.l}),T({h:(U+180)%360,s:le.s,l:le.l}),T({h:(U+270)%360,s:le.s,l:le.l})]}function qe(Q){var le=T(Q).toHsl(),U=le.h;return[T(Q),T({h:(U+72)%360,s:le.s,l:le.l}),T({h:(U+216)%360,s:le.s,l:le.l})]}function ut(Q,le,U){le=le||6,U=U||30;var Ne=T(Q).toHsl(),ye=360/U,Ue=[T(Q)];for(Ne.h=(Ne.h-(ye*le>>1)+720)%360;--le;)Ne.h=(Ne.h+ye)%360,Ue.push(T(Ne));return Ue}function Xt(Q,le){le=le||6;for(var U=T(Q).toHsv(),Ne=U.h,ye=U.s,Ue=U.v,lt=[],at=1/le;le--;)lt.push(T({h:Ne,s:ye,v:Ue})),Ue=(Ue+at)%1;return lt}T.mix=function(Q,le,U){U=U===0?0:U||50;var Ne=T(Q).toRgb(),ye=T(le).toRgb(),Ue=U/100,lt=Ue*2-1,at=ye.a-Ne.a,tt;lt*at==-1?tt=lt:tt=(lt+at)/(1+lt*at),tt=(tt+1)/2;var Tt=1-tt,qt={r:ye.r*tt+Ne.r*Tt,g:ye.g*tt+Ne.g*Tt,b:ye.b*tt+Ne.b*Tt,a:ye.a*Ue+Ne.a*(1-Ue)};return T(qt)},T.readability=function(Q,le){var U=T(Q),Ne=T(le),ye=U.toRgb(),Ue=Ne.toRgb(),lt=U.getBrightness(),at=Ne.getBrightness(),tt=Math.max(ye.r,Ue.r)-Math.min(ye.r,Ue.r)+Math.max(ye.g,Ue.g)-Math.min(ye.g,Ue.g)+Math.max(ye.b,Ue.b)-Math.min(ye.b,Ue.b);return{brightness:Math.abs(lt-at),color:tt}},T.isReadable=function(Q,le){var U=T.readability(Q,le);return U.brightness>125&&U.color>500},T.mostReadable=function(Q,le){for(var U=null,Ne=0,ye=!1,Ue=0;Ue<le.length;Ue++){var lt=T.readability(Q,le[Ue]),at=lt.brightness>125&&lt.color>500,tt=3*(lt.brightness/125)+lt.color/500;(at&&!ye||at&&ye&&tt>Ne||!at&&!ye&&tt>Ne)&&(ye=at,Ne=tt,U=T(le[Ue]))}return U};var It=T.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ln=T.hexNames=xn(It);function xn(Q){var le={};for(var U in Q)Q.hasOwnProperty(U)&&(le[Q[U]]=U);return le}function Lt(Q){return Q=parseFloat(Q),(isNaN(Q)||Q<0||Q>1)&&(Q=1),Q}function R(Q,le){he(Q)&&(Q="100%");var U=Se(Q);return Q=k(le,$(0,parseFloat(Q))),U&&(Q=parseInt(Q*le,10)/100),Y.abs(Q-le)<1e-6?1:Q%le/parseFloat(le)}function K(Q){return k(1,$(0,Q))}function ee(Q){return parseInt(Q,16)}function he(Q){return typeof Q=="string"&&Q.indexOf(".")!=-1&&parseFloat(Q)===1}function Se(Q){return typeof Q=="string"&&Q.indexOf("%")!=-1}function X(Q){return Q.length==1?"0"+Q:""+Q}function ve(Q){return Q<=1&&(Q=Q*100+"%"),Q}function fe(Q){return Math.round(parseFloat(Q)*255).toString(16)}function yt(Q){return ee(Q)/255}var St=function(){var Q="[-\\+]?\\d+%?",le="[-\\+]?\\d*\\.\\d+%?",U="(?:"+le+")|(?:"+Q+")",Ne="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",ye="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?";return{rgb:new RegExp("rgb"+Ne),rgba:new RegExp("rgba"+ye),hsl:new RegExp("hsl"+Ne),hsla:new RegExp("hsla"+ye),hsv:new RegExp("hsv"+Ne),hsva:new RegExp("hsva"+ye),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ct(Q){Q=Q.replace(G,"").replace(se,"").toLowerCase();var le=!1;if(It[Q])Q=It[Q],le=!0;else if(Q=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var U;return(U=St.rgb.exec(Q))?{r:U[1],g:U[2],b:U[3]}:(U=St.rgba.exec(Q))?{r:U[1],g:U[2],b:U[3],a:U[4]}:(U=St.hsl.exec(Q))?{h:U[1],s:U[2],l:U[3]}:(U=St.hsla.exec(Q))?{h:U[1],s:U[2],l:U[3],a:U[4]}:(U=St.hsv.exec(Q))?{h:U[1],s:U[2],v:U[3]}:(U=St.hsva.exec(Q))?{h:U[1],s:U[2],v:U[3],a:U[4]}:(U=St.hex8.exec(Q))?{a:yt(U[1]),r:ee(U[2]),g:ee(U[3]),b:ee(U[4]),format:le?"name":"hex8"}:(U=St.hex6.exec(Q))?{r:ee(U[1]),g:ee(U[2]),b:ee(U[3]),format:le?"name":"hex"}:(U=St.hex3.exec(Q))?{r:ee(U[1]+""+U[1]),g:ee(U[2]+""+U[2]),b:ee(U[3]+""+U[3]),format:le?"name":"hex"}:!1}window.tinycolor=T,r(function(){r.fn.spectrum.load&&r.fn.spectrum.processNativeColorInputs()})}var AY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PF=function(r){AY(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this,i=e.ppfx||"";return n.opts=e,n.ppfx=i,n.em=e.target||{},!e.onChange&&n.listenTo(n.model,"change:value",n.handleModelChange),n}return t.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},t.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},t.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},t.prototype.elementUpdated=function(){this.model.trigger("el:change")},t.prototype.setValue=function(e,n){var i=this.model,o=e||i.get("defaults"),s=this.getInputEl();s&&(s.value=o)},t.prototype.handleModelChange=function(e,n,i){this.setValue(n,i)},t.prototype.handleChange=function(e){e.stopPropagation();var n=this.getInputEl().value;this.__onInputChange(n),this.elementUpdated()},t.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},t.prototype.getInputEl=function(){if(!this.inputEl){var e=this,n=e.model,i=e.opts,o=i.type||"text",s=n.get("placeholder")||n.get("defaults")||n.get("default")||"";this.inputEl=(0,dr.default)('<input type="'.concat(o,'" placeholder="').concat(s,'">'))}return this.inputEl.get(0)},t.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},t}(rt.Ss),R_=PF;PF.prototype.events={change:"handleChange"};var TY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$p=function(){return $p=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$p.apply(this,arguments)};dr.default&&SY(dr.default);var Yy=function(r){var t=r.getFormat()==="name"&&r.toName(),e=r.getAlpha()==1?r.toHexString():r.toRgbString();return t||e.replace(/ /g,"")},OY=function(r){TY(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.template=function(){var e=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(e,`field-colorp">
        <div class="`).concat(e,`field-colorp-c" data-colorp-c>
          <div class="`).concat(e,`checker-bg"></div>
        </div>
      </div>
    `)},t.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},t.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},t.prototype.remove=function(){return r.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},t.prototype.handleChange=function(e){e.stopPropagation();var n=e.target.value;(0,B.isUndefined)(n)||this.__onInputChange(n)},t.prototype.__onInputChange=function(e){var n=this,i=n.model,o=n.opts,s=o.onChange,a=e,c=this.getColorEl();if(c){c.spectrum("set",a);var u=c.spectrum("get"),f=a&&Yy(u);f&&(a=f)}s?s(a):i.set({value:a},{fromInput:1})},t.prototype.setValue=function(e,n){n===void 0&&(n={});var i=this.model,o=(0,B.isUndefined)(n.def)?i.get("defaults"):n.def,s=(0,B.isUndefined)(e)?(0,B.isUndefined)(o)?"":o:e,a=this.getInputEl(),c=this.getColorEl(),u=s!="none"?s:"";a.value=s,c.get(0).style.backgroundColor=u,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(c.spectrum("set",u),this.noneColor=s=="none",this.movedColor=u)},t.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var n=this,i=n.em,o=n.model,s=n.opts,a=this.ppfx,c=s.onChange,u=(0,dr.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),f=u.get(0).style,g=i&&i.getConfig&&i.getConfig().colorPicker||{};this.movedColor="";var v=!1,_;this.$el.find("[data-colorp-c]").append(u);var b=function(C,S){S===void 0&&(S=!0),c?c(C,!S):(S&&o.setValueFromInput(0,!1),o.setValueFromInput(C,S))};u.spectrum($p($p($p({color:o.getValue()||!1,containerClassName:"".concat(a,"one-bg ").concat(a,"two-color ").concat(a,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F",palette:[]},g),o.get("colorPicker")||{}),{move:function(C){var S=Yy(C);e.movedColor=S,f.backgroundColor=S,b(S,!1)},change:function(C){v=!0;var S=Yy(C);f.backgroundColor=S,b(S),e.noneColor=!1},show:function(C){v=!1,e.movedColor="",_=c?o.getValue({noDefault:!0}):Yy(C)},hide:function(){!v&&(_||c)&&(e.noneColor&&(_=""),f.backgroundColor=_,u.spectrum("set",_),b(_,!1))}})),i&&i.on&&this.listenTo(i,"component:selected",function(){e.movedColor&&b(e.movedColor),v=!0,e.movedColor="",u.spectrum("hide")}),this.colorEl=u}return this.colorEl},t.prototype.render=function(){return R_.prototype.render.call(this),this.getColorEl(),this},t}(R_),IF=OY,MY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PY=function(r){MY(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.templateInput=function(){return""},t.prototype.getInputEl=function(){if(!this.input){var e=this.model,n=this.getModelValue(),i=new IF({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=i.render();o.setValue(n,{fromTarget:1}),this.input=o.el}return this.input},t}(Za),IY=PY,DY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),DF=function(r){DY(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;return(0,B.bindAll)(n,"moveIncrement","upIncrement"),n.doc=document,n.listenTo(n.model,"change:unit",n.handleModelChange),n}return t.prototype.template=function(){var e=this.ppfx;return`
      <span class="`.concat(e,`input-holder"></span>
      <span class="`).concat(e,`field-units"></span>
      <div class="`).concat(e,`field-arrows" data-arrows>
        <div class="`).concat(e,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(e,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},t.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},t.prototype.setValue=function(e,n){var i=n||{},o=this.validateInputValue(e,{deepCheck:1}),s={value:o.value,unit:""};(o.unit||o.force)&&(s.unit=o.unit),this.model.set(s,i),i.silent&&this.handleModelChange()},t.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},t.prototype.handleUnitChange=function(e){e.stopPropagation();var n=this.getUnitEl().value;this.model.set("unit",n),this.elementUpdated()},t.prototype.handleKeyDown=function(e){e.key==="ArrowUp"&&(e.preventDefault(),this.upArrowClick()),e.key==="ArrowDown"&&(e.preventDefault(),this.downArrowClick())},t.prototype.elementUpdated=function(){this.model.trigger("el:change")},t.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var n=this.getUnitEl();n&&(n.value=e.get("unit")||"")},t.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,n=e.get("units")||[];if(n.length){var i=['<option value="" disabled hidden>-</option>'];n.forEach(function(s){var a=s==e.get("unit")?"selected":"";i.push("<option ".concat(a,">").concat(s,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(i.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},t.prototype.upArrowClick=function(){var e=this.model,n=e.get("step"),i=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(i+n)),this.elementUpdated()},t.prototype.downArrowClick=function(){var e=this.model,n=e.get("step"),i=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(i-n)),this.elementUpdated()},t.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var n=this.model.get("value")||0;n=this.normalizeValue(n),this.current={y:e.pageY,val:n},(0,st.on)(this.doc,"mousemove",this.moveIncrement),(0,st.on)(this.doc,"mouseup",this.upIncrement)},t.prototype.moveIncrement=function(e){this.moved=!0;var n=this.model,i=n.get("step"),o=this.current,s=this.normalizeValue(o.val+(o.y-e.pageY)*i),a=this.validateInputValue(s),c=a.value,u=a.unit;return this.prValue=c,n.set({value:c,unit:u},{avoidStore:1}),!1},t.prototype.upIncrement=function(){var e=this.model,n=e.get("step");if((0,st.AU)(this.doc,"mouseup",this.upIncrement),(0,st.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var i=this.prValue-n;e.set("value",i,{avoidStore:1}).set("value",i+n),this.elementUpdated()}},t.prototype.normalizeValue=function(e,n){n===void 0&&(n=0);var i=this.model,o=i.get("step"),s=0;if(isNaN(e))return n;if(e=parseFloat(e),Math.floor(e)!==e){var a=o.toString().split(".")[1];s=a?a.length:0}return s?parseFloat(e.toFixed(s)):e},t.prototype.validateInputValue=function(e,n){n===void 0&&(n={});var i=0,o=n||{},s=this.model,a="",c=(0,B.isUndefined)(e)?a:e,u=n.units||s.get("units")||[],f=s.get("unit")||u.length&&u[0]||"",g=(0,B.isUndefined)(n.max)?s.get("max"):n.max,v=(0,B.isUndefined)(n.min)?s.get("min"):n.min,_=!!s.get("limitlessMax"),b=!!s.get("limitlessMin");if(o.deepCheck){var C=s.get("fixedValues")||[];if(c===""&&(f=""),c){var S=new RegExp("^"+C.join("|"),"g");if(C.length&&S.test(c))c=c.match(S)[0],f="",i=1;else{var j=c+"";c+="",c=parseFloat(c.replace(",",".")),c=isNaN(c)?a:c;var q=j.replace(c,"");(0,B.indexOf)(u,q)>=0&&(f=q)}}}return!_&&!(0,B.isUndefined)(g)&&g!==""&&(c=c>g?g:c),!b&&!(0,B.isUndefined)(v)&&v!==""&&(c=c<v?v:c),{force:i,value:c,unit:f}},t.prototype.render=function(){R_.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},t}(R_),kF=DF;DF.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var kY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),RY=function(r){kY(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getValueForTarget=function(){var e=this.model,n=e.attributes,i=n.value,o=n.unit;return!(0,B.isUndefined)(i)&&i!==""?i+o:e.get("default")},t.prototype.getInputEl=function(){if(!this.input){var e=this,n=e.ppfx,i=e.model,o=this.getModelValue(),s=new kF({contClass:"".concat(n,"field-int"),type:"number",model:i,ppfx:n});s.render(),this.$input=s.inputEl,this.$unit=s.unitEl,i.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=s.el}return this.input},t}(Za),NY=RY,jY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FY=function(r){jY(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;return n.listenTo(n.model,"change:options",n.rerender),n}return t.prototype.templateInput=function(){var e=this,n=e.ppfx,i=e.clsField;return'<div class="'.concat(i,`">
      <div data-input></div>
      <div class="`).concat(n,`sel-arrow">
        <div class="`).concat(n,`d-s-arrow"></div>
      </div>
    </div>`)},t.prototype.getInputEl=function(){if(!this.$input){var e=this,n=e.model,i=e.em,o=n.get("name"),s=n.get("options")||[],a=[],c="<select>";s.forEach(function(g){var v="",_,b,C;(0,B.isString)(g)?(_=g,b=g):(_=g.name||g.label||g.value,b="".concat((0,B.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),C=g.style?g.style.replace(/"/g,"&quot;"):"",v+=C?' style="'.concat(C,'"'):"");var S=i.t("traitManager.traits.options.".concat(o,".").concat(b))||_;c+='<option value="'.concat(b,'"').concat(v,">").concat(S,"</option>"),a.push(b)}),c+="</select>",this.$input=(0,dr.default)(c);var u=n.getTargetValue(),f=a.indexOf(u)>=0?u:n.get("default");!(0,B.isUndefined)(f)&&this.$input.val(f)}return this.$input.get(0)},t}(Za),LY=FY,VY=kn(754),BY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),YN="data-categories",JN="data-no-categories",RF=function(r){BY(t,r);function t(e,n){var i=r.call(this,e)||this;i.reuseView=!0,i.renderedCategories=new Map,i.itemsView=n;var o=e.config||{};i.config=o;var s=e.editor;i.em=s;var a=o.pStylePrefix||"";return i.ppfx=a,i.pfx=a+o.stylePrefix||"",i.className="".concat(i.pfx,"traits"),i.traitContClass="".concat(a,"traits-c"),i.classNoCat="".concat(a,"traits-empty-c"),i.catsClass="".concat(a,"trait-categories"),i.collection=new u_([],{em:s}),i.listenTo(s,"component:toggled",i.updatedCollection),i.updatedCollection(),i}return t.prototype.updatedCollection=function(){var e=this,n=e.ppfx,i=e.em,o=i.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(n,"one-bg ").concat(n,"two-color"),this.collection=o?.traits||new u_([],{em:i}),this.render()},t.prototype.add=function(e,n){var i=this,o=i.config,s=i.renderedCategories,a=this.itemView,c=e.get(this.itemType);this.itemsView&&this.itemsView[c]&&(a=this.itemsView[c]);var u=new a({config:o,model:e,attributes:e.get("attributes")}),f=u.render().el,g=e.parent.initCategory(e);if(g){var v=g.getId(),_=this.getCategoriesEl(),b=s.get(v);!b&&_&&(b=new gF({model:g},o,"trait").render(),s.set(v,b),_.appendChild(b.el)),b?.append(f);return}n?n.appendChild(f):this.append(f)},t.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(YN,"]"))),this.catsEl},t.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(JN,"]"))),this.traitsEl},t.prototype.append=function(e){var n=this.getTraitsEl();n?.appendChild(e)},t.prototype.render=function(){var e=this,n=this,i=n.el,o=n.ppfx,s=n.catsClass,a=n.traitContClass,c=n.classNoCat,u=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,i.innerHTML=`
      <div class="`.concat(s,'" ').concat(YN,`></div>
      <div class="`).concat(c," ").concat(a,'" ').concat(JN,`></div>
    `),this.collection.forEach(function(g){return e.add(g,u)}),this.append(u);var f="".concat(a,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(f),this.rendered=!0,this},t}(VY.A),ZN=RF;RF.prototype.itemView=Za;var UY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),HY=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},zY=function(r){UY(t,r);function t(e){var n=r.call(this,e,"TraitManager",yY)||this;n.TraitsView=ZN,n.events=tA,n.state=new rt.Kx({traits:[]}),n.types={text:Za,number:NY,select:LY,checkbox:EY,color:IY,button:bY};var i=n,o=i.state,s=i.config,a=i.events,c=s.pStylePrefix;c&&(s.stylePrefix="".concat(c).concat(s.stylePrefix)),(0,B.bindAll)(n,"__onSelect");var u=(0,B.debounce)(function(){return n.__upSel()},0),f=(0,B.debounce)(function(){return n.__onUp()},0);return o.listenTo(e,"component:toggled",u),o.listenTo(e,a.value,f),o.on("change:traits",n.__onSelect),n.debounced=[u,f],n}return t.prototype.select=function(e){var n=e?.getTraits()||[];this.state.set({component:e,traits:n}),this.__trgCustom()},t.prototype.getCategories=function(){var e,n=this.getComponent(),i=((e=n?.traits.categories)===null||e===void 0?void 0:e.models)||[];return HY([],i,!0)},t.prototype.getTraits=function(){return this.getCurrent()},t.prototype.getTraitsByCategory=function(e){return tF(e||this.getTraits())},t.prototype.getComponent=function(){return this.state.attributes.component},t.prototype.addType=function(e,n){var i=this.getType("text");this.types[e]=i.extend(n)},t.prototype.getType=function(e){return this.getTypes()[e]},t.prototype.getTypes=function(){return this.types},t.prototype.getTraitsViewer=function(){return this.view},t.prototype.getCurrent=function(){return this.state.get("traits")||[]},t.prototype.render=function(){var e=this.view,n=this.em;return e=new ZN({el:e?.el,collection:[],editor:n,config:this.getConfig()},this.getTypes()),this.view=e,e.el},t.prototype.postRender=function(){this.__appendTo()},t.prototype.__onSelect=function(){var e=this,n=e.em,i=e.events,o=e.state,s=o.attributes,a=s.component,c=s.traits;n.trigger(i.select,{component:a,traits:c})},t.prototype.__trgCustom=function(e){e===void 0&&(e={});var n=this,i=n.em,o=n.events,s=n.__ctn;this.__ctn=s||e.container,i.trigger(o.custom,this.__customData())},t.prototype.__customData=function(){return{container:this.__ctn}},t.prototype.__upSel=function(){this.select(this.em.getSelected())},t.prototype.__onUp=function(){this.select(this.getComponent())},t}(ko),$Y=zY,WY={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}},qY=WY,GY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),KY=function(r){GY(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.items=[],n.opt=e;var i=e.config||{};n.config=i,n.module=e.module,n.parentView=e.parentView;var o=i.stylePrefix||"",s=i.pStylePrefix||"",a=n.collection;n.listenTo(a,"add",n.addTo),n.listenTo(a,"reset resetNavigator",n.render),n.listenTo(a,"remove",n.removeChildren),n.className="".concat(o,"layers");var c=i.em;if(i.sortable&&!n.opt.sorter){var u=c.Utils;n.opt.sorter=new u.Sorter({container:i.sortContainer||n.el,containerSel:".".concat(n.className),itemSel:".".concat(o,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:s,pfx:o,em:c})}return n.$el.data("collection",a),e.parent&&n.$el.data("model",e.parent),n}return t.prototype.removeChildren=function(e){var n=e.viewLayer;n&&(n.remove(),delete e.viewLayer)},t.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},t.prototype.addToCollection=function(e,n,i){var o=this,s=o.parentView,a=o.opt,c=o.config,u=o.el,f=a.ItemView,g=a.opened,v=a.module,_=a.level,b=a.sorter,C=e.viewLayer||new f({ItemView:f,level:_,model:e,parentView:s,config:c,sorter:b,opened:g,module:v}),S=C.render().el;if(n)n.appendChild(S);else{var j=u,q=j.childNodes;if((0,B.isUndefined)(i))j.appendChild(S);else{var N=q.length==i;N&&i--,N||!q.length?j.appendChild(S):j.insertBefore(S,q[i])}}return this.items.push(C),S},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return rt.Ss.prototype.remove.apply(this,e),this.items.map(function(i){return i.remove()}),this},t.prototype.render=function(){var e=this,n=this,i=n.el,o=n.module,s=document.createDocumentFragment();return i.innerHTML="",this.collection.map(function(a){return o.__getLayerFromComponent(a)}).forEach(function(a){return e.addToCollection(a,s)}),i.appendChild(s),i.className=this.className,this},t}(rt.Ss),QY=KY,vS=kn(570),YY={stylePrefix:"com-",defaults:{},strict:!0},JY=YY,ZY=kn(242),XY=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),N_=function(){return N_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},N_.apply(this,arguments)},XN=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},ej=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],NF={preserveSelected:1},jF=function(r){return function(t){return r.trigger("".concat(nA,":start"),t)}},FF=function(r){return function(t){return r.trigger(nA,t)}},LF=function(r,t,e){return e===void 0&&(e={}),function(n,i,o){t.forEach(function(s){return s.set("status",s.get("selectable")?"selected":"")}),r.setSelected(t),t[0].emitUpdate(),r.trigger("".concat(nA,":end"),o),setTimeout(function(){return r.runDefault(NF)}),(e.altMode||o.cancelled)&&r.set("_cmpDrag",1)}},eJ=function(r){XY(t,r);function t(e){var n=r.call(this,e,"Commands",JY)||this;n.CommandAbstract=vS.default,n.defaultCommands={},n.commands={},n.active={},n.events=ZY.A;var i=n.config,o=i.pStylePrefix,s=n.defaultCommands;o&&(i.stylePrefix=o+i.stylePrefix),Object.keys(i.defaults).forEach(function(c){var u=i.defaults[c];u.id&&n.add(u.id,u)}),s["tlb-delete"]={run:function(c){return c.runCommand("core:component-delete")}},s["tlb-clone"]={run:function(c){c.runCommand("core:copy"),c.runCommand("core:paste",{action:"clone-component"})}},s["tlb-move"]={run:function(c,u,f){var g;f===void 0&&(f={});var v,_=c.getModel(),b=f.event,C=f.target,S=C?[C]:XN([],c.getSelectedAll(),!0),j=S.map(function(T){var O,Z;return((Z=(O=T.delegate)===null||O===void 0?void 0:O.move)===null||Z===void 0?void 0:Z.call(O,T))||T}).filter(Boolean),q=j[j.length-1],N=b?.type==="dragstart",G=["absolute","translate"];if(!q?.get("draggable"))return _.logWarning("The element is not draggable");var se=q.get("dmode")||_.get("dmode"),ue=function(){return _.stopDefault(NF)},Y=(0,B.includes)(G,se);j.forEach(function(T){return T.trigger("disable",{fromMove:!0})}),N?setTimeout(ue,0):ue();var L=jF(_),k=FF(_),$=LF(_,j,{altMode:Y});if(Y)v=c.runCommand("core:component-drag",{guidesInfo:1,mode:se,target:q,onStart:L,onDrag:k,onEnd:$,event:b});else{N&&b.dataTransfer.setDragImage((g=q.view)===null||g===void 0?void 0:g.el,0,0);var I=c.Commands.get("move-comp");I.onStart=L,I.onDrag=k,I.onEndMoveFromModel=$,I.initSorterFromModels(j)}j.filter(function(T){return T.get("selectable")}).forEach(function(T){return T.set("status","freezed-selected")})}},s["core:undo"]=function(c){return c.UndoManager.undo()},s["core:redo"]=function(c){return c.UndoManager.redo()},ej.forEach(function(c){var u=c[2],f=kn(585)("./".concat(c[1])).default,g="core:".concat(c[0]);s[g]=f,u&&(s[u]=f,["run","stop"].forEach(function(v){e.on("".concat(v,":").concat(u),function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return e.trigger.apply(e,XN(["".concat(v,":").concat(g)],_,!1))})}))}),i.model=e.Canvas;for(var a in s)n.add(a,s[a]);return n}return t.prototype.add=function(e,n){var i=(0,B.isFunction)(n)?{run:n}:n;return i.stop||(i.noStop=!0),delete i.initialize,i.id=e,this.commands[e]=vS.default.extend(i),this},t.prototype.get=function(e){var n=this.commands[e];return(0,B.isFunction)(n)?(n=new n(this.config),this.commands[e]=n):n||this.em.logWarning("'".concat(e,"' command not found")),n},t.prototype.extend=function(e,n){n===void 0&&(n={});var i=this.get(e);if(i){var o=N_(N_({},i.constructor.prototype),n);this.add(e,o);var s=ej.filter(function(a){return"core:".concat(a[0])===e&&a[2]})[0];s&&this.add(s[2],o)}return this},t.prototype.has=function(e){return!!this.commands[e]},t.prototype.getAll=function(){return this.commands},t.prototype.run=function(e,n){return n===void 0&&(n={}),this.runCommand(this.get(e),n)},t.prototype.stop=function(e,n){return n===void 0&&(n={}),this.stopCommand(this.get(e),n)},t.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},t.prototype.getActive=function(){return this.active},t.prototype.runCommand=function(e,n){n===void 0&&(n={});var i;if(e&&e.run){var o=this,s=o.em,a=o.config,c=e.id,u=s.Editor;(!this.isActive(c)||n.force||!a.strict)&&(i=u&&e.callRun(u,n),c&&e.stop&&!e.noStop&&!n.abort&&(this.active[c]=i))}return i},t.prototype.stopCommand=function(e,n){n===void 0&&(n={});var i;if(e&&e.run){var o=this,s=o.em,a=o.config,c=e.id,u=s.Editor;(this.isActive(c)||n.force||!a.strict)&&(c&&delete this.active[c],i=e.callStop(u,n))}return i},t.prototype.create=function(e){e.stop||(e.noStop=!0);var n=vS.default.extend(e);return new n(this.config)},t.prototype.__onRun=function(e,n){var i=this,o=i.em,s=i.events;o.on("".concat(s.runCommand).concat(e),n)},t.prototype.__onStop=function(e,n){var i=this,o=i.em,s=i.events;o.on("".concat(s.stopCommand).concat(e),n)},t.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},t}(ko),tJ=eJ,nJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tj="contentEditable",Jy="data-toggle-move",rJ=function(r){nJ(t,r);function t(e){var n=r.call(this,e)||this;(0,B.bindAll)(n,"__render"),n.opt=e,n.module=e.module,n.config=e.config||{},n.sorter=e.sorter||"",n.parentView=e.parentView;var i=n,o=i.model,s=i.pfx,a=i.ppfx,c=o.get("type")||"default";return n.className="".concat(s,"layer ").concat(s,"layer__t-").concat(c," no-select ").concat(a,"two-color"),n.inputNameCls="".concat(a,"layer-name"),n.clsTitleC="".concat(s,"layer-title-c"),n.clsTitle="".concat(s,"layer-title"),n.clsCaret="".concat(s,"layer-caret"),n.clsCount="".concat(s,"layer-count"),n.clsMove="".concat(s,"layer-move"),n.clsChildren="".concat(s,"layer-children"),n.clsNoChild="".concat(s,"layer-no-chld"),n.clsEdit="".concat(n.inputNameCls,"--edit"),n.clsNoEdit="".concat(n.inputNameCls,"--no-edit"),n.initComponent(),n}return t.prototype.events=function(){var e;return e={},e["mousedown [".concat(Jy,"]")]="startSort",e["touchstart [".concat(Jy,"]")]="startSort",e["click [data-toggle-visible]"]="toggleVisibility",e["click [data-toggle-open]"]="toggleOpening",e["click [data-toggle-select]"]="handleSelect",e["mouseover [data-toggle-select]"]="handleHover",e["mouseout [data-toggle-select]"]="handleHoverOut",e["dblclick [data-name]"]="handleEdit",e["keydown [data-name]"]="handleEditKey",e["focusout [data-name]"]="handleEditEnd",e},t.prototype.template=function(e){var n=this,i=n.pfx,o=n.ppfx,s=n.config,a=n.clsNoEdit,c=n.module,u=n.opt,f=n.em,g=s.hidable,v=c.getComponents(e).length,_=v?"":this.clsNoChild,b="".concat(this.clsTitle," ").concat(_),C="".concat(this.clsTitleC),S="".concat(this.inputNameCls," ").concat(a," ").concat(o,"no-app"),j=u.level||0,q="".concat(j*10,"px"),N=e.getName(),G=e.getIcon(),se="".concat(i,"layer"),ue=(f?.getConfig()).icons,Y=ue,L=Y.move,k=Y.eye,$=Y.eyeOff,I=Y.chevron;return`
      <div class="`.concat(i,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(i,`layer-item-left">
          `).concat(g?'<i class="'.concat(i,`layer-vis" data-toggle-visible>
                <i class="`).concat(i,'layer-vis-on">').concat(k,`</i>
                <i class="`).concat(i,'layer-vis-off">').concat($,`</i>
              </i>`):"",`
          <div class="`).concat(C,`">
            <div class="`).concat(b,'" style="padding-left: ').concat(q,`">
              <div class="`).concat(i,'layer-title-inn" title="').concat(N,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(I,`</i>
                  `).concat(G?'<span class="'.concat(se,'__icon">').concat(G,"</span>"):"",`
                <span class="`).concat(S,'" data-name>').concat(N,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(i,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(v||"",`</div>
          <div class="`).concat(this.clsMove,'" ').concat(Jy,">").concat(L||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(t.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),t.prototype.initComponent=function(){var e=this,n=this,i=n.model,o=n.config,s=o.onInit,a=i.components();this.listenTo(a,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return e.listenTo(i,c[0],c[1])}),this.$el.data("model",i),this.$el.data("collection",a),i.viewLayer=this,s.bind(this)({component:i,render:this.__render,listenTo:this.listenTo})},t.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},t.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},t.prototype.updateVisibility=function(){var e=this,n=e.pfx,i=e.model,o=e.module,s="".concat(n,"layer-hidden"),a=!o.isVisible(i),c=a?"addClass":"removeClass";this.$el[c](s),this.getVisibilityEl()[c]("".concat(n,"layer-off"))},t.prototype.updateMove=function(){var e=this,n=e.model,i=e.config,o=this.getItemContainer().find("[".concat(Jy,"]"))[0];if(o){var s=n.get("draggable")&&i.sortable;o.style.display=s?"":"none"}},t.prototype.toggleVisibility=function(e){e?.stopImmediatePropagation();var n=this,i=n.module,o=n.model;i.setVisible(o,!i.isVisible(o))},t.prototype.handleEdit=function(e){e?.stopPropagation();var n=this,i=n.em,o=n.$el,s=n.clsNoEdit,a=n.clsEdit,c=this.getInputName();c[tj]="true",c.focus(),document.execCommand("selectAll",!1),i.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(s).addClass(a)},t.prototype.handleEditKey=function(e){e.stopPropagation(),((0,st.v$)(e)||(0,st.Ci)(e))&&this.handleEditEnd(e)},t.prototype.handleEditEnd=function(e){e?.stopPropagation();var n=this,i=n.em,o=n.$el,s=n.clsNoEdit,a=n.clsEdit,c=n.model,u=this.getInputName(),f=u.textContent;u.scrollLeft=0,u[tj]="false",c.setName(f),i.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(s).removeClass(a),this.updateName()},t.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},t.prototype.updateOpening=function(){var e=this,n=e.$el,i=e.model,o=e.pfx,s="open",a="".concat(o,"layer-open"),c=this.getCaret();this.module.isOpen(i)?(n.addClass(s),c.addClass(a)):(n.removeClass(s),c.removeClass(a))},t.prototype.toggleOpening=function(e){var n=this,i=n.model,o=n.module;e?.stopImmediatePropagation(),i.get("components").length&&o.setOpen(i,!o.isOpen(i))},t.prototype.handleSelect=function(e){e?.stopPropagation();var n=this,i=n.module,o=n.model;i.setLayerData(o,{selected:!0},{event:e})},t.prototype.handleHover=function(e){e?.stopPropagation();var n=this,i=n.module,o=n.model;i.setLayerData(o,{hovered:!0})},t.prototype.handleHoverOut=function(e){e?.stopPropagation();var n=this,i=n.module,o=n.model;i.setLayerData(o,{hovered:!1})},t.prototype.startSort=function(e){var n,i,o;e.stopPropagation();var s=this,a=s.em,c=s.sorter,u=s.model;if(!(e.button&&e.button!==0)&&c){var f=((i=(n=u.delegate)===null||n===void 0?void 0:n.move)===null||i===void 0?void 0:i.call(n,u))||u;c.onStart=jF(a),c.onMoveClb=FF(a),c.onEndMove=LF(a,[f]);var g=((o=f.viewLayer)===null||o===void 0?void 0:o.el)||e.target;c.startSort(g)}},t.prototype.updateStatus=function(){Xr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},t.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},t.prototype.checkChildren=function(){var e=this,n=e.model,i=e.clsNoChild,o=e.module,s=o.getComponents(n).length,a=this.getItemContainer(),c=a.find(".".concat(this.clsTitle)),u=a.find("[data-count]");c[s?"removeClass":"addClass"](i),u.html("".concat(s||"")),!s&&o.setOpen(n,!1)},t.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},t.prototype.setRoot=function(e){var n,i=(0,B.isString)(e)?(n=this.em.getWrapper())===null||n===void 0?void 0:n.find(e)[0]:e;i&&(this.stopListening(),this.model=i,this.initComponent(),this._rendered&&this.render())},t.prototype.updateLayerable=function(){var e=this.parentView,n=e||this;n.render()},t.prototype.__clearItems=function(){var e;(e=this.items)===null||e===void 0||e.remove()},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return rt.Ss.prototype.remove.apply(this,e),delete this.model.viewLayer,this.__clearItems(),this},t.prototype.render=function(){var e=this,n=e.model,i=e.config,o=e.pfx,s=e.ppfx,a=e.opt,c=e.sorter;this.__clearItems();var u=a.opened,f=a.module,g=a.ItemView,v=!f.__isLayerable(n),_=this.$el.empty(),b=a.level+1;delete this.inputName,this.items=new QY({ItemView:g,collection:n.get("components"),config:i,sorter:c,opened:u,parentView:this,parent:n,level:b,module:f});var C=this.items.render().$el;return!i.showWrapper&&b===1?_.append(C):(_.html(this.template(n)),_.find(".".concat(this.clsChildren)).append(C)),!f.isVisible(n)&&(this.className+=" ".concat(o,"hide")),v&&(this.className+=" ".concat(s,"hidden")),_.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},t.prototype.__render=function(){var e=this,n=e.model,i=e.config,o=e.el,s=i.onRender,a={component:n,el:o};s.bind(this)(a),this.em.trigger("layer:render",a)},t}(rt.Ss),iJ=rJ,oJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zS=function(){return zS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zS.apply(this,arguments)},VF="layer",lA="".concat(VF,":"),BF="".concat(lA,"root"),UF="".concat(lA,"component"),sJ="".concat(lA,"custom"),aJ={all:VF,root:BF,component:UF,custom:sJ},yS={mediaText:""},lJ=["open","status","locked","custom-name","components","classes"].map(function(r){return"".concat(Wi.I.update,":").concat(r)}).join(" "),cJ=function(r){return r===void 0&&(r={}),(r.display||"").trim().indexOf("none")===0},uJ=function(r){oJ(t,r);function t(e){var n=r.call(this,e,"LayerManager",qY)||this;return n.events=aJ,(0,B.bindAll)(n,"componentChanged","__onRootChange","__onComponent"),n.model=new Hl.A(n,{opened:{}}),n.config.stylePrefix=n.config.pStylePrefix,n}return t.prototype.onLoad=function(){var e=this,n=this,i=n.em,o=n.config,s=n.model;s.listenTo(i,"component:selected",this.componentChanged),s.on("change:root",this.__onRootChange),s.listenTo(i,lJ,this.__onComponent),this.componentChanged(),s.listenToOnce(i,"load",function(){e.setRoot(o.root),e.__appendTo()})},t.prototype.setRoot=function(e){var n=this.em.getWrapper(),i=(0,Le.isComponent)(e)?e:n;e&&(0,B.isString)(e)&&(0,Le.hasWin)()&&(i=n.find(e)[0]||n);var o=this.__getLayerFromComponent(i);return this.model.set("root",o),o},t.prototype.getRoot=function(){return this.model.get("root")},t.prototype.getComponents=function(e){var n=this;return e.components().map(function(i){return n.__getLayerFromComponent(i)}).filter(function(i){return n.__isLayerable(i)})},t.prototype.setOpen=function(e,n){e.set("open",n)},t.prototype.isOpen=function(e){return!!e.get("open")},t.prototype.setVisible=function(e,n){var i="__prev-display",o=e.getStyle(yS),s=o.display;if(n){var a=e.get(i);delete o.display,a&&(o.display=a,e.unset(i))}else s&&e.set(i,s),o.display="none";e.setStyle(o,yS),this.updateLayer(e),this.em.trigger("component:toggled")},t.prototype.isVisible=function(e){return!cJ(e.getStyle(yS))},t.prototype.setLocked=function(e,n){e.set("locked",n)},t.prototype.isLocked=function(e){return!!e.get("locked")},t.prototype.setName=function(e,n){e.set("custom-name",n)},t.prototype.getName=function(e){return e.getName()},t.prototype.getLayerData=function(e){var n=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:n==="selected",hovered:n==="hovered",visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},t.prototype.setLayerData=function(e,n,i){var o;i===void 0&&(i={});var s=this,a=s.em,c=s.config,u=n.open,f=n.selected,g=n.hovered,v=n.visible,_=n.locked,b=n.name,C=zS({fromLayers:!0},i);if((0,Le.isDef)(u)&&this.setOpen(e,u),(0,Le.isDef)(f))if(f){a.setSelected(e,C);var S=c.scrollCanvas;S&&((o=e.views)===null||o===void 0||o.forEach(function(j){return j.scrollIntoView(S)}))}else a.removeSelected(e,C);(0,Le.isDef)(g)&&c.showHover&&(g?a.setHovered(e,C):a.setHovered(null,C)),(0,Le.isDef)(v)&&v!==this.isVisible(e)&&this.setVisible(e,v),(0,Le.isDef)(_)&&this.setLocked(e,_),(0,Le.isDef)(b)&&this.setName(e,b)},t.prototype.componentChanged=function(e,n){var i;if(n===void 0&&(n={}),!n.fromLayers){var o=this,s=o.em,a=o.config,c=a.scrollLayers,u=this.model.get("opened"),f=s.getSelected(),g=f?.parent();for(var v in u)u[v].set("open",!1),delete u[v];for(;g;)g.set("open",!0),u[g.cid]=g,g=g.parent();if(f&&c){var _=(i=f.viewLayer)===null||i===void 0?void 0:i.el;_?.scrollIntoView(c)}}},t.prototype.getAll=function(){return this.view},t.prototype.render=function(){var e,n,i=this,o=i.config,s=i.model,a=iJ.extend(o.extend);return this.view=new a({el:(e=this.view)===null||e===void 0?void 0:e.el,ItemView:a,level:0,config:o,opened:s.get("opened"),model:this.getRoot(),module:this}),(n=this.view)===null||n===void 0?void 0:n.render().el},t.prototype.destroy=function(){var e;(e=this.view)===null||e===void 0||e.remove()},t.prototype.__onRootChange=function(){var e,n=this.getRoot();(e=this.view)===null||e===void 0||e.setRoot(n),this.em.trigger(BF,n),this.__trgCustom()},t.prototype.__getLayerFromComponent=function(e){var n,i;return((i=(n=e.delegate)===null||n===void 0?void 0:n.layer)===null||i===void 0?void 0:i.call(n,e))||e},t.prototype.__onComponent=function(e){this.updateLayer(e)},t.prototype.__isLayerable=function(e){var n=e.tagName,i=this.config.hideTextnode,o=!i||!e.isInstanceOf("textnode")&&n!=="br";return o&&e.get("layerable")},t.prototype.__trgCustom=function(e){var n=this,i=n.__ctn,o=n.em,s=n.events;this.__ctn=i||e?.container,o.trigger(s.custom,{container:this.__ctn,root:this.getRoot()})},t.prototype.updateLayer=function(e,n){this.em.trigger(UF,e,n)},t}(ko),dJ=uJ,fJ={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""},hJ=fJ,pJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),HF=function(r){pJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.getDefaults=function(){return(0,B.result)(this.prototype,"defaults")},t.prototype.defaults=function(){return{type:"",src:""}},t.prototype.getType=function(){return this.get("type")},t.prototype.getSrc=function(){return this.get("src")},t.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},t.prototype.getExtension=function(){return this.getFilename().split(".").pop()},t}(rt.Kx),$S=HF;HF.prototype.idAttribute="src";var gJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),j_=function(){return j_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},j_.apply(this,arguments)},mJ=function(r){gJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return j_(j_({},$S.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},t}($S),vJ=mJ,yJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_J=function(r){yJ(t,r);function t(e){var n=r.call(this,e)||this;n.options=e,n.collection=e.collection;var i=e.config||{};n.config=i,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.em=i.em,n.className=n.pfx+"asset",n.listenTo(n.model,"destroy remove",n.remove),n.model.view=n;var o=n.init&&n.init.bind(n);return o&&o(e),n}return t.prototype.__getBhv=function(){var e=this.em,n=e?.Assets;return n?.__getBehaviour()||{}},t.prototype.template=function(e,n){var i=this.pfx;return`
      <div class="`.concat(i,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(i,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(i,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},t.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,B.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},t.prototype.getPreview=function(){return""},t.prototype.getInfo=function(){return""},t.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},t}(rt.Ss),wJ=_J,bJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nj=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},zF=function(r){bJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getPreview=function(){var e=this,n=e.pfx,i=e.ppfx,o=e.model,s=o.get("src");return Io(rj||(rj=nj([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),n,s,n,i)},t.prototype.getInfo=function(){var e=this,n=e.pfx,i=e.model,o=i.get("name"),s=i.get("width"),a=i.get("height"),c=i.get("unitDim"),u=s&&a?"".concat(s,"x").concat(a).concat(c):"";return o=o||i.getFilename(),Io(ij||(ij=nj([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),n,o,n,u)},t.prototype.init=function(e){var n=this.pfx;this.className+=" ".concat(n,"asset-image")},t.prototype.onClick=function(){var e=this,n=e.model,i=e.pfx,o=this.__getBhv().select,s=this.config.onClick,a=this.collection;a.trigger("deselectAll"),this.$el.addClass(i+"highlight"),(0,B.isFunction)(o)?o(n,!1):(0,B.isFunction)(s)?s(n):this.updateTarget(a.target)},t.prototype.onDblClick=function(){var e=this,n=e.em,i=e.model,o=this.__getBhv().select,s=this.config.onDblClick,a=this.collection,c=a.target,u=a.onSelect;(0,B.isFunction)(o)?o(i,!0):(0,B.isFunction)(s)?s(i):(this.updateTarget(c),n?.Modal.close()),(0,B.isFunction)(u)&&u(i)},t.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},t}(wJ),CJ=zF;zF.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var rj,ij,F_=function(){return F_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},F_.apply(this,arguments)},xJ={types:[],initialize:function(r,t){var e=this;t===void 0&&(t={});var n=t.em;this.em=n,this.opts=t,this.model=function(o,s){o===void 0&&(o={}),s===void 0&&(s={});var a,c,u;if(o&&o.type){var f=e.getBaseType();u=e.getType(o.type),a=u?u.model:f.model,c=u?u.view:f.view}else{var g=e.recognizeType(o);u=g.type,a=u.model,c=u.view,o=g.attributes}var v=new a(o,F_(F_({},s),{em:n}));return v.typeView=c,e.model.prototype=a.prototype,v};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(r){for(var t=this.getTypes(),e=0;e<t.length;e++){var n=t[e],i=n.isType(r);if(i=typeof i=="boolean"&&i?{type:n.id}:i,i)return{type:n,attributes:i}}return{type:this.getBaseType(),attributes:r}},getBaseType:function(){var r=this.getTypes();return r[r.length-1]},getTypes:function(){return this.types},getType:function(r){for(var t=this.getTypes(),e=0;e<t.length;e++){var n=t[e];if(n.id===r)return n}},addType:function(r,t){var e=this.getType(r),n=this.getBaseType(),i=e?e.model:n.model,o=e?e.view:n.view,s=t.model,a=t.view,c=t.isType;s=s instanceof rt.Kx||(0,B.isFunction)(s)?s:i.extend(s||{}),a=a instanceof rt.Ss||(0,B.isFunction)(a)?a:o.extend(a||{}),this.extendViewApi&&!t.model&&!t.view&&(a=a.extend(t)),e?(e.model=s,e.view=a,e.isType=c||e.isType):(t.id=r,t.model=s,t.view=a,t.isType=c||function(u){if(u&&u.type==r)return!0},this.getTypes().unshift(t))}},$F=xJ,EJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),SJ=rt.pM.extend($F),WF=function(r){EJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(SJ),_S=WF;WF.prototype.types=[{id:"image",model:vJ,view:CJ,isType:function(r){return typeof r=="string"?{type:"image",src:r}:r}}];var qF=function(r){return r.add="asset:add",r.remove="asset:remove",r.removeBefore="asset:remove:before",r.update="asset:update",r.open="asset:open",r.close="asset:close",r.uploadStart="asset:upload:start",r.uploadEnd="asset:upload:end",r.uploadError="asset:upload:error",r.uploadResponse="asset:upload:response",r.custom="asset:custom",r.all="asset",r}(qF||{}),oj=qF,AJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),GF=function(r){AJ(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.options=e,n.config=e.config,n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.em=n.config.em;var i=n.collection;return n.listenTo(i,"reset",n.renderAssets),n.listenTo(i,"add",n.addToAsset),n.listenTo(i,"remove",n.removedAsset),n.listenTo(i,"deselectAll",n.deselectAll),n}return t.prototype.template=function(e){var n=e.pfx,i=e.ppfx,o=e.em,s="";return this.config.showUrlInput&&(s=`
          <form class="`.concat(n,`add-asset">
            <div class="`).concat(i,"field ").concat(n,`add-field">
              <input placeholder="`).concat(o?.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(i,'btn-prim">').concat(o?.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(n,`assets-cont">
      <div class="`).concat(n,`assets-header">
        `).concat(s,`
      </div>
      <div class="`).concat(n,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},t.prototype.handleSubmit=function(e){e.preventDefault();var n=this.getAddInput(),i=n&&n.value.trim(),o=this.config.handleAdd;if(i){n.value="";var s=this.getAssetsEl();s&&(s.scrollTop=0),o?o.bind(this)(i):this.options.globalCollection.add(i,{at:0})}},t.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},t.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},t.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},t.prototype.addToAsset=function(e){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(e)},t.prototype.addAsset=function(e,n){n===void 0&&(n=null);var i=n,o=this.collection,s=this.config,a=new e.typeView({model:e,collection:o,config:s}).render().el;if(i)i.appendChild(a);else{var c=this.getAssetsEl();c&&c.insertBefore(a,c.firstChild)}return a},t.prototype.toggleNoAssets=function(e){e===void 0&&(e=!1);var n=this.$el.find(".".concat(this.pfx,"assets"));if(e)n.empty();else{var i=this.config.noAssets;i&&n.append(i)}},t.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},t.prototype.renderAssets=function(){var e=this,n=document.createDocumentFragment(),i=this.$el.find(".".concat(this.pfx,"assets"));i.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return e.addAsset(o,n)}),i.append(n)},t.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},t}(rt.Ss),TJ=GF;GF.prototype.events={submit:"handleSubmit"};var OJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MJ=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},PJ=function(r){OJ(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;n.options=e;var i=e.config||{};n.module=e.module,n.config=i,n.em=n.config.em,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.target=n.options.globalCollection||{},n.uploadId=n.pfx+"uploadFile",n.disabled=i.disableUpload!==void 0?i.disableUpload:!i.upload&&!i.embedAsBase64,n.multiUpload=i.multiUpload!==void 0?i.multiUpload:!0;var o=i.uploadFile;return o?n.uploadFile=o.bind(n):!i.upload&&i.embedAsBase64&&(n.uploadFile=t.embedAsBase64),n.delegateEvents(),n}return t.prototype.template=function(e){var n=e.pfx,i=e.title,o=e.uploadId,s=e.disabled,a=e.multiUpload;return Io(sj||(sj=MJ([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),n,i,o,s?"disabled":"",a?"multiple":"")},t.prototype.events=function(){return{"change [data-input]":"uploadFile"}},t.prototype.onUploadStart=function(){var e=this.module;e?.__propEv(e.events.uploadStart)},t.prototype.onUploadEnd=function(e){var n=this,i=n.$el,o=n.module;o?.__propEv(o.events.uploadEnd,e);var s=i.find("input");s&&s.val("")},t.prototype.onUploadError=function(e){var n=this.module;console.error(e),this.onUploadEnd(e),n?.__propEv(n.events.uploadError,e)},t.prototype.onUploadResponse=function(e,n){var i=this,o=i.module,s=i.config,a=i.target,c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}o?.__propEv(o.events.uploadResponse,c),s.autoAdd&&a&&a.add(c.data,{at:0}),this.onUploadEnd(e),n?.(c)},t.prototype.uploadFile=function(e,n){var i=this,o=e.dataTransfer?e.dataTransfer.files:e.target.files,s=this.config,a=s.beforeUpload,c=a&&a(o);if(c!==!1){var u=new FormData,f=s.params,g=s.customFetch,v=s.fetchOptions;for(var _ in f)u.append(_,f[_]);if(this.multiUpload)for(var b=0;b<o.length;b++)u.append("".concat(s.uploadName).concat(s.multiUploadSuffix),o[b]);else o.length&&u.append(s.uploadName,o[0]);var C=s.upload,S=s.headers,j="X-Requested-With";if(typeof S[j]>"u"&&(S[j]="XMLHttpRequest"),C){this.onUploadStart();var q={method:"post",credentials:s.credentials||"include",headers:S,body:u},N=v?.(q)||q,G=g?g(C,N):AF(C,N).then(function(se){return(se.status/200|0)==1?se.text():se.text().then(function(ue){return Promise.reject(ue)})});return G.then(function(se){return i.onUploadResponse(se,n)}).catch(function(se){return i.onUploadError(se)})}}},t.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var n=this.uploadForm;"draggable"in n&&(this.uploadForm.ondragover=function(){return n.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return n.className="",!1},this.uploadForm.ondrop=function(i){n.className="",i.preventDefault(),e.uploadFile(i)})}},t.prototype.initDropzone=function(e){var n=this,i=0,o=this.config,s=e.model,a=e.el,c=s.Editor,u=s.Canvas.getBody(),f=this.ppfx,g="".concat(f,"dropzone-active"),v="".concat(f,"dropzone"),_=function(){a.className=a.className.replace(g,"").trim(),i=0},b=function(){return i||(a.className+=" ".concat(g),i=1),!1},C=function(){return _(),!1},S=function(j){if(_(),j.preventDefault(),j.stopPropagation(),n.uploadFile(j),o.openAssetsOnDrop&&c){var q=c.getSelected();c.runCommand("open-assets",{target:q,onSelect:function(){c.Modal.close(),c.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(v,'">').concat(o.dropzoneContent,"</div>")),_(),"draggable"in a&&[a,u].forEach(function(j){j.ondragover=b,j.ondragleave=C,j.ondrop=S})},t.prototype.render=function(){var e=this,n=e.$el,i=e.pfx,o=e.em;return n.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:i})),this.initDrop(),n.attr("class",i+"file-uploader"),this},t.embedAsBase64=function(e,n){var i=this,o=e.dataTransfer?e.dataTransfer.files:e.target.files,s={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var a=[],c=/^(.+)\/(.+)$/,u=function(_){var b=new Promise(function(C,S){var j=new FileReader;j.addEventListener("load",function(q){var N,G=_.name,se=c.exec(_.type);if(se?N=se[1]:N=_.type,N==="image"){var ue={src:j.result,name:G,type:N,height:0,width:0},Y=new Image;Y.addEventListener("error",function(L){S(L)}),Y.addEventListener("load",function(){ue.height=Y.height,ue.width=Y.width,C(ue)}),Y.src=ue.src}else C(N?{src:j.result,name:G,type:N}:j.result)}),j.addEventListener("error",function(q){S(q)}),j.addEventListener("abort",function(q){S("Aborted")}),j.readAsDataURL(_)});a.push(b)},f=0,g=o;f<g.length;f++){var v=g[f];u(v)}return Promise.all(a).then(function(_){s.data=_,i.onUploadResponse(s,n)},function(_){i.onUploadError(_)})},t}(rt.Ss),IJ=PJ,sj,DJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Jd=function(){return Jd=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Jd.apply(this,arguments)},aj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},Dp="open-assets",kJ=function(r){DJ(t,r);function t(e){var n=r.call(this,e,"AssetManager",new _S([],e),oj,hJ)||this;n.storageKey="assets",n.Asset=$S,n.Assets=_S,n.events=oj;var i=n,o=i.all,s=i.config;n.assetsVis=new _S([]);var a=s.pStylePrefix;return a&&(s.stylePrefix="".concat(a).concat(s.stylePrefix)),o.on("add",function(c){return n.getAllVisible().add(c)}),o.on("remove",function(c){return n.getAllVisible().remove(c)}),n.__onAllEvent=(0,B.debounce)(function(){return n.__trgCustom()},0),n}return t.prototype.open=function(e){e===void 0&&(e={});var n=this.em.Commands;n.run(Dp,Jd({types:["image"],select:function(){}},e))},t.prototype.close=function(){var e=this.em.Commands;e.stop(Dp)},t.prototype.isOpen=function(){var e=this.em.Commands;return!!e?.isActive(Dp)},t.prototype.add=function(e,n){return n===void 0&&(n={}),typeof n.at>"u"&&(n.at=0),this.all.add(e,n)},t.prototype.get=function(e){return this.all.where({src:e})[0]||null},t.prototype.getAll=function(){return this.all},t.prototype.getAllVisible=function(){return this.assetsVis},t.prototype.remove=function(e,n){return this.__remove(e,n)},t.prototype.store=function(){return this.getProjectData()},t.prototype.load=function(e){return this.loadProjectData(e)},t.prototype.getContainer=function(){var e,n=this.__getBehaviour();return n.container||((e=this.am)===null||e===void 0?void 0:e.el)},t.prototype.getAssetsEl=function(){var e;return(e=this.am)===null||e===void 0?void 0:e.el.querySelector("[data-el=assets]")},t.prototype.render=function(e){if(!this.getConfig().custom){var n=e||this.getAll().models;if(!this.am){var i=this.__viewParams();i.fu=this.FileUploader(),this.am=new TJ(Jd({},i)),this.am.render()}return this.assetsVis.reset(n),this.getContainer()}},t.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},t.prototype.addType=function(e,n){this.getAll().addType(e,n)},t.prototype.getType=function(e){return this.getAll().getType(e)},t.prototype.getTypes=function(){return this.getAll().getTypes()},t.prototype.AssetsView=function(){return this.am},t.prototype.FileUploader=function(){return this.fu||(this.fu=new IJ(this.__viewParams())),this.fu},t.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var n=this,i=n.em,o=n.events;i.Commands.__onRun(Dp,function(){return e.__propEv(o.open)}),i.Commands.__onStop(Dp,function(){return e.__propEv(o.close)})},t.prototype.postRender=function(e){var n;this.config.dropzone&&((n=this.fu)===null||n===void 0||n.initDropzone(e))},t.prototype.setTarget=function(e){this.assetsVis.target=e},t.prototype.onSelect=function(e){this.assetsVis.onSelect=e},t.prototype.onClick=function(e){this.config.onClick=e},t.prototype.onDblClick=function(e){this.config.onDblClick=e},t.prototype.__propEv=function(e){for(var n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];(n=this.em).trigger.apply(n,aj([e],o,!1)),(i=this.getAll()).trigger.apply(i,aj([e],o,!1))},t.prototype.__trgCustom=function(){var e=this.__getBehaviour(),n=this.getConfig().custom;!e.container&&!n.open||this.em.trigger(this.events.custom,this.__customData())},t.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:n.types||[],container:n.container,close:function(){return e.close()},remove:function(i,o){return e.remove(i,o)},select:function(i,o){var s=e.add(i);(0,B.isFunction)(n.select)&&n.select(s,o)},options:n.options||{}}},t.prototype.__behaviour=function(e){return e===void 0&&(e={}),this._bhv=Jd(Jd({},this._bhv||{}),e)},t.prototype.__getBehaviour=function(e){return e===void 0&&(e={}),this._bhv||{}},t.prototype.destroy=function(){var e,n;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(e=this.fu)===null||e===void 0||e.remove(),(n=this.am)===null||n===void 0||n.remove(),this._bhv={}},t}(zl),RJ=kJ,NJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jJ=function(r){NJ(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e,n)||this,o=n.em,s={};i.em=o,e.frames||(s.component=e.component,s.styles=e.styles,["component","styles"].map(function(u){return i.unset(u)}));var a=e.frames||[s],c=new zj(o.Canvas,a);return c.page=i,i.set("frames",c),!i.getId()&&i.set("id",o?.Pages._createId()),o?.UndoManager.add(c),i}return t.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},t.prototype.onRemove=function(){this.getFrames().reset()},t.prototype.getFrames=function(){return this.get("frames")},t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.get("name")},t.prototype.setName=function(e){return this.set({name:e})},t.prototype.getAllFrames=function(){return this.getFrames().models||[]},t.prototype.getMainFrame=function(){return this.getFrames().at(0)},t.prototype.getMainComponent=function(){var e=this.getMainFrame();return e?.getComponent()},t.prototype.toJSON=function(e){e===void 0&&(e={});var n=rt.Kx.prototype.toJSON.call(this,e),i=(0,B.result)(this,"defaults");return(0,B.forEach)(n,function(o,s){s.indexOf("_")===0&&delete n[s]}),(0,B.forEach)(i,function(o,s){n[s]===o&&delete n[s]}),n},t}(rt.Kx),WS=jJ,FJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),L_=function(){return L_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},L_.apply(this,arguments)},LJ=function(r){FJ(t,r);function t(e,n){var i=r.call(this,e)||this;return i.on("reset",i.onReset),i.on("remove",i.onRemove),i.model=function(o,s){return s===void 0&&(s={}),new WS(o,L_(L_({},s),{em:n}))},i}return t.prototype.onReset=function(e,n){var i=this,o;(o=n?.previousModels)===null||o===void 0||o.map(function(s){return i.onRemove(s)})},t.prototype.onRemove=function(e){e?.onRemove()},t}(rt.pM),VJ=LJ,BJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UJ=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},lj="change:selected",cj="main",HJ=function(r){BJ(t,r);function t(e){var n=r.call(this,e,"PageManager",new VJ([],e),DS)||this;n.events=DS,n.storageKey="pages",(0,B.bindAll)(n,"_onPageChange");var i=new Hl.A({_undo:!0});return n.model=i,n.pages.on("reset",function(o){return o.at(0)&&n.select(o.at(0))}),n.pages.on("all",n.__onChange,n),i.on(lj,n._onPageChange),n}return Object.defineProperty(t.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),t.prototype.getAll=function(){return UJ([],this.all.models,!0)},t.prototype.__onChange=function(e,n,i,o){var s=this,a=s.em,c=s.events,u=o||i;a.trigger(c.all,{event:e,page:n,options:u})},t.prototype.onLoad=function(){var e,n=this,i=n.pages,o=n.config,s=n.em,a={silent:!0},c=((e=o.pages)===null||e===void 0?void 0:e.map(function(f){return new WS(f,{em:s,config:o})}))||[];i.add(c,a);var u=i.length?this._initPage():this.add({type:cj},a);u&&this.select(u,a)},t.prototype._onPageChange=function(e,n,i){var o=this,s=o.em,a=o.events,c=s.Layers,u=n.getMainComponent();c&&u&&c.setRoot(u),s.trigger(a.select,n,e.previous("selected")),this.__onChange(lj,n,i)},t.prototype.postLoad=function(){var e=this,n=e.em,i=e.model,o=e.pages,s=n.UndoManager;s.add(i),s.add(o),o.on("add remove reset change",function(a,c,u){return n.changesUp(u||c)})},t.prototype.add=function(e,n){var i=this;n===void 0&&(n={});var o=this,s=o.em,a=o.events;e.id=e.id||this._createId();var c=function(){var u=i.pages.add(new WS(e,{em:i.em,config:i.config}),n);return n.select&&i.select(u),u};return!n.silent&&s.trigger(a.addBefore,e,c,n),n.abort?void 0:c()},t.prototype.remove=function(e,n){var i=this;n===void 0&&(n={});var o=this,s=o.em,a=o.events,c=(0,B.isString)(e)?this.get(e):e,u=function(){return c&&i.pages.remove(c,n),c};return!n.silent&&s.trigger(a.removeBefore,c,u,n),!n.abort&&u()},t.prototype.get=function(e){return this.pages.filter(function(n){return n.get(n.idAttribute)===e})[0]},t.prototype.getMain=function(){var e=this.pages;return e.filter(function(n){return n.get("type")===cj})[0]||e.at(0)},t.prototype.getAllWrappers=function(){var e=this.getAll();return(0,B.unique)((0,B.flatten)(e.map(function(n){return n.getAllFrames().map(function(i){return i.getComponent()})})))},t.prototype.select=function(e,n){n===void 0&&(n={});var i=this,o=i.em,s=i.model,a=i.events,c=(0,B.isString)(e)?this.get(e):e;return c&&(o.trigger(a.selectBefore,c,n),s.set("selected",c,n)),this},t.prototype.getSelected=function(){return this.model.get("selected")},t.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(n){return e[n]=0})},t.prototype.store=function(){return this.getProjectData()},t.prototype.load=function(e){var n=this.loadProjectData(e,{all:this.pages,reset:!0});return this.pages.forEach(function(i){return i.getFrames().initRefs()}),n},t.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},t.prototype._createId=function(){var e=this.getAll(),n=e.length+16,i=this.getAllMap(),o;do o=(0,Le.createId)(n);while(i[o]);return o},t}(zl),zJ=HJ,wS={placeholder:"eg. Text here"},$J={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:wS,alt:wS,title:wS,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}},WJ={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:$J},messagesAdd:void 0},qJ=WJ,KF=function(r){return r.add="i18n:add",r.update="i18n:update",r.locale="i18n:locale",r}(KF||{}),GJ=KF,KJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QJ=function(r){KJ(t,r);function t(e){var n=r.call(this,e,"I18n",qJ)||this;n.events=GJ;var i=n.config.messagesAdd;return i&&n.addMessages(i),n.config.detectLocale&&(n.config.locale=n._localLang()),n}return t.prototype.setLocale=function(e){var n=this,i=n.em,o=n.config,s=n.events;return i.trigger(s.locale,{value:e,valuePrev:o.locale}),o.locale=e,this},t.prototype.getLocale=function(){return this.config.locale},t.prototype.getMessages=function(e,n){n===void 0&&(n={});var i=this.config.messages;return e&&!i[e]&&this._debug("'".concat(e,"' i18n lang not found"),n),e?i[e]:i},t.prototype.setMessages=function(e){var n=this,i=n.em,o=n.config,s=n.events;return o.messages=e,i.trigger(s.update,e),this},t.prototype.addMessages=function(e){var n=this,i=n.em,o=n.events,s=n.config,a=s.messages;return i.trigger(o.add,e),this.setMessages((0,Le.deepMerge)(a,e)),this},t.prototype.t=function(e,n){n===void 0&&(n={});var i=this.config,o=n.params||{},s=n.l||this.getLocale(),a=n.lFlb||i.localeFallback,c=this._getMsg(e,s,n);return c||(c=this._getMsg(e,a,n)),!c&&this._debug("'".concat(e,"' i18n key not found in '").concat(s,"' lang"),n),c=c&&(0,B.isString)(c)?this._addParams(c,o):c,c},t.prototype._localLang=function(){var e=(0,Le.hasWin)()&&window.navigator||{},n=e.language||e.userLanguage;return n?n.split("-")[0]:"en"},t.prototype._addParams=function(e,n){var i=new RegExp("{([\\w\\d-]*)}","g");return e.replace(i,function(o,s){return n[s]||""}).trim()},t.prototype._getMsg=function(e,n,i){i===void 0&&(i={});var o=this.getMessages(n,i);if(o){var s=o[e];return!s&&e.indexOf(".")>0&&(s=e.split(".").reduce(function(a,c){if(!(0,B.isUndefined)(a))return a[c]},o)),s}},t.prototype._debug=function(e,n){n===void 0&&(n={});var i=this,o=i.em,s=i.config;(n.debug||s.debug)&&o&&o.logWarning(e)},t.prototype.destroy=function(){},t}(ko),YJ=QJ,JJ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ha=function(){return ha=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ha.apply(this,arguments)},ZJ=function(){},XJ=fs.F.Target,uj={id:"sorter-target",type:XJ},eZ=function(r){JJ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initialize=function(e){e===void 0&&(e={}),this.opt=e||{},(0,B.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var n=e||{};this.elT=0,this.elL=0,this.borderOffset=n.borderOffset||10;var i=n.container;this.el=typeof i=="string"?document.querySelector(i):i,this.$el=(0,dr.default)(this.el),this.containerSel=n.containerSel||"div",this.itemSel=n.itemSel||"div",this.draggable=n.draggable||!0,this.nested=!!n.nested,this.pfx=n.pfx||"",this.ppfx=n.ppfx||"",this.freezeClass=n.freezeClass||this.pfx+"freezed",this.onStart=n.onStart||ZJ,this.onEndMove=n.onEndMove,this.customTarget=n.customTarget,this.onEnd=n.onEnd,this.direction=n.direction||"v",this.onMoveClb=n.onMove,this.relative=n.relative||!1,this.ignoreViewChildren=!!n.ignoreViewChildren,this.plh=n.placer,this.wmargin=n.wmargin||0,this.offTop=n.offsetTop||0,this.offLeft=n.offsetLeft||0,this.document=n.document||document,this.em=n.em,this.canvasRelative=!!n.canvasRelative,this.selectOnEnd=!n.avoidSelectOnEnd,this.scale=n.scale;var o=this.em;o?.on&&(o.on(o.Canvas.events.refresh,this.updateOffset),this.updateOffset())},t.prototype.getScale=function(){return(0,B.result)(this,"scale")||1},t.prototype.getContainerEl=function(e){if(e&&(this.el=e),!this.el){var n=this.opt.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,dr.default)(this.el)}return this.el},t.prototype.getDocuments=function(e){var n=this.em,i=e?e.ownerDocument:n?.Canvas.getBody().ownerDocument,o=[document];return i&&o.push(i),o},t.prototype.updateOffset=function(){var e,n=((e=this.em)===null||e===void 0?void 0:e.get("canvasOffset"))||{};this.offTop=n.top,this.offLeft=n.left},t.prototype.setDropContent=function(e){delete this.dropModel,this.dropContent=e},t.prototype.updateTextViewCursorPosition=function(e){var n=this.em;if(n){var i=n.Canvas,o=i.getDocument(),s=null;if(o.caretRangeFromPoint){var a=(0,st.G2)(e);s=o.caretRangeFromPoint(a.clientX,a.clientY)}else e.rangeParent&&(s=o.createRange(),s.setStart(e.rangeParent,e.rangeOffset));var c=i.getWindow().getSelection();i.getFrameEl().focus(),c?.removeAllRanges(),s&&c?.addRange(s),this.setContentEditable(this.activeTextModel,!0)}},t.prototype.setContentEditable=function(e,n){if(e){var i=e.getEl();i.contentEditable!=n&&(i.contentEditable=n)}},t.prototype.toggleSortCursor=function(e){var n=this.em,i=n?.Canvas;i&&(e?i.startAutoscroll():i.stopAutoscroll())},t.prototype.setDragHelper=function(e,n){for(var i=n||"",o=e.cloneNode(!0),s=e.getBoundingClientRect(),a=getComputedStyle(e),c="",u=0;u<a.length;u++){var f=a[u];c+="".concat(f,":").concat(a.getPropertyValue(f),";")}if(document.body.appendChild(o),o.className+=" ".concat(this.pfx,"bdrag"),o.setAttribute("style",c),this.dragHelper=o,o.style.width="".concat(s.width,"px"),o.style.height="".concat(s.height,"px"),i&&this.moveDragHelper(i),this.em){var g=(0,dr.default)(this.em.Canvas.getBody().ownerDocument);g.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,dr.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},t.prototype.moveDragHelper=function(e){var n=e.target.ownerDocument;if(!(!this.dragHelper||!n)){var i=e.pageY,o=e.pageX,s=0,a=0,c=n.defaultView||n.parentWindow,u=c.frameElement,f=this.dragHelper.style;if(u){var g=u.getBoundingClientRect();s=g.top+document.documentElement.scrollTop,a=g.left+document.documentElement.scrollLeft,i=e.clientY,o=e.clientX}f.top=i+s+"px",f.left=o+a+"px"}},t.prototype.matches=function(e,n){return Le.matches.call(e,n)},t.prototype.closest=function(e,n){if(e)for(var i=e.parentNode;i&&i.nodeType===1;){if(this.matches(i,n))return i;i=i.parentNode}},t.prototype.offset=function(e){var n=e.getBoundingClientRect();return{top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft}},t.prototype.createPlaceholder=function(){var e=this.pfx,n=document.createElement("div"),i=document.createElement("div");return n.className=e+"placeholder",n.style.display="none",n.style.pointerEvents="none",i.className=e+"placeholder-int",n.appendChild(i),n},t.prototype.startSort=function(e,n){var i,o;n===void 0&&(n={});var s=this,a=s.em,c=s.itemSel,u=s.containerSel,f=s.plh,g=this.getContainerEl(n.container),v=this.getDocuments(e),_;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,e&&!this.matches(e,"".concat(c,", ").concat(u))&&(e=this.closest(e,c)),this.sourceEl=e,f||(this.plh=this.createPlaceholder(),g.appendChild(this.plh)),e&&(_=this.getSourceModel(e),_?.set&&_.set("status","freezed"),this.srcModel=_),(0,st.on)(g,"mousemove dragover",this.onMove),(0,st.on)(v,"mouseup dragend touchend",this.endMove),(0,st.on)(v,"keydown",this.rollback),this.onStart({sorter:this,target:_,parent:_&&((i=_.parent)===null||i===void 0?void 0:i.call(_)),index:_&&((o=_.index)===null||o===void 0?void 0:o.call(_))}),a?.clearSelection(),this.toggleSortCursor(!0),a?.trigger("sorter:drag:start",e,_)},t.prototype.getTargetModel=function(e){var n=e||this.target;return(0,dr.default)(n).data("model")},t.prototype.getSourceModel=function(e,n){var i=this,o=n===void 0?{}:n,s=o.target,a=o.avoidChildren,c=a===void 0?1:a,u=this,f=u.em,g=u.sourceEl,v=e||g,_=this,b=_.dropModel,C=_.dropContent,S=function(G){return G&&s&&G.opt&&G.opt.avoidChildren&&i.isTextableActive(G,s)};if(C&&f){if(S(b)&&(b=void 0),!b){var j=f.Components.getComponents(),q={avoidChildren:c,avoidStore:1,avoidUpdateStyle:1},N=j.add(C,ha(ha({},q),{temporary:!0}));if(b=j.remove(N,q),b=b instanceof Array?b[0]:b,this.dropModel=b,S(b))return this.getSourceModel(v,{target:s,avoidChildren:0})}return b}return v&&(0,dr.default)(v).data("model")},t.prototype.selectTargetModel=function(e,n){if(!(e instanceof rt.pM)&&!(n&&n===e)){var i=this.targetModel;if(i&&i!==this.srcModel&&i.set("status",""),e?.set){var o=this.em.Canvas,s=fs.F.Select,a=fs.F.Hover,c=fs.F.Spacing;[s,a,c].forEach(function(u){return o.removeSpots({type:u})}),o.addSpot(ha(ha({},uj),{component:e})),e.set("status","selected-parent"),this.targetModel=e}}},t.prototype.onMove=function(e){var n=e,i=this,o=i.em,s=i.onMoveClb,a=i.plh,c=i.customTarget;this.moved=!0;var u=a.style.display;(!u||u==="none")&&(a.style.display="block");var f=this.offset(this.el);this.elT=this.wmargin?Math.abs(f.top):f.top,this.elL=this.wmargin?Math.abs(f.left):f.left;var g=e.pageY-this.elT+this.el.scrollTop,v=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&o){var _=o.Canvas.getMouseRelativeCanvas(e,{noScroll:1});v=_.x,g=_.y}this.rX=v,this.rY=g,this.eventMove=e;var b=this.getSourceModel(),C=c?c({sorter:this,event:e}):e.target,S=this.dimsFromTarget(C,v,g),j=this.target,q=j&&this.getTargetModel(j);if(this.selectTargetModel(q,b),q||(a.style.display="none"),!!j){this.lastDims=S;var N=this.findPosition(S,v,g);this.isTextableActive(b,q)?(this.activeTextModel=q,a.style.display="none",this.lastPos=N,this.updateTextViewCursorPosition(n)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=N.index||this.lastPos.method!=N.method)&&(this.movePlaceholder(this.plh,S,N,this.prevTargetDim),this.$plh||(this.$plh=(0,dr.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=N)),(0,B.isFunction)(s)&&s({event:e,target:b,parent:q,index:N.index+(N.method=="after"?1:0)}),o&&o.trigger("sorter:drag",{target:j,targetModel:q,sourceModel:b,dims:S,pos:N,x:v,y:g})}},t.prototype.isTextableActive=function(e,n){var i;return((i=e?.get)===null||i===void 0?void 0:i.call(e,"textable"))&&n?.isInstanceOf("text")},t.prototype.disableTextable=function(){var e=this.activeTextModel;e?.getView().disableEditing(),this.setContentEditable(e,!1)},t.prototype.isInFlow=function(e,n){if(!e)return!1;n=n||document.body;var i=-1,o,s=e;return o=s.offsetHeight,!!this.styleInFlow(s,n)},t.prototype.styleInFlow=function(e,n){if(!(0,st.ir)(e)){var i=e.style||{},o=(0,dr.default)(e),s=n&&(0,dr.default)(n);if(!(i.overflow&&i.overflow!=="visible")){var a=o.css("float");if(!(a&&a!=="none")&&!(s&&s.css("display")=="flex"&&s.css("flex-direction")!=="column")){switch(i.position){case"static":case"relative":case"":break;default:return}switch(e.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(o.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},t.prototype.validTarget=function(e,n){var i,o,s=this.lastPos,a=this.getTargetModel(e),c=this.getSourceModel(n,{target:a});n=(i=c?.view)===null||i===void 0?void 0:i.el,e=(o=a?.view)===null||o===void 0?void 0:o.el;var u={valid:!0,src:n,srcModel:c,trg:e,trgModel:a,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!n||!e)return u.valid=!1,u;var f=s?s.method==="after"?s.indexEl+1:s.indexEl:a.components().length,g=c.get("draggable");if((0,B.isFunction)(g)){var v=g(c,a,f);u.dragInfo=v,u.draggable=v,g=v}else g=g instanceof Array?g.join(", "):g,u.dragInfo=g,g=(0,B.isString)(g)?this.matches(e,g):g,u.draggable=g;var _=a.get("droppable");if((0,B.isFunction)(_)){var v=_(c,a,f);u.droppable=v,u.dropInfo=v,_=v}else _=_ instanceof rt.pM?1:_,_=_ instanceof Array?_.join(", "):_,u.dropInfo=_,_=(0,B.isString)(_)?this.matches(n,_):_,_=g&&this.isTextableActive(c,a)?1:_,u.droppable=_;return(!_||!g)&&(u.valid=!1),u},t.prototype.dimsFromTarget=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=0);var o=this.em,s=[];if(!e||(this.matches(e,"".concat(this.itemSel,", ").concat(this.containerSel))||(e=this.closest(e,this.itemSel)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),!e))return s;if(this.prevTarget&&this.prevTarget!=e&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(e,this.containerSel);var a=this.validTarget(e);if(o&&o.trigger("sorter:drag:validation",a),!a.valid&&this.targetP)return this.dimsFromTarget(this.targetP,n,i);this.prevTarget=e,this.prevTargetDim=this.getDim(e),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(e)}if(this.prevTarget==e&&(s=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,n,i)||!this.nested&&!this.cacheDims.length){var c=this.targetP;c&&this.validTarget(c).valid&&(s=this.cacheDimsP,this.target=c)}return delete this.lastPos,s},t.prototype.getTargetFromEl=function(e){var n=e,i,o=this.targetPrev,s=this.em,a=this.containerSel,c=this.itemSel;if(this.matches(n,"".concat(c,", ").concat(a))||(n=this.closest(n,c)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),o&&o!=n&&delete this.targetPrev,!this.targetPrev){i=this.closest(n,a);var u=this.validTarget(n);if(s&&s.trigger("sorter:drag:validation",u),!u.valid&&i)return this.getTargetFromEl(i);this.targetPrev=n}return this.nearElBorders(n)&&(i=this.closest(n,a),i&&this.validTarget(i).valid&&(n=i)),n},t.prototype.nearElBorders=function(e){var n=10,i=e.getBoundingClientRect(),o=e.ownerDocument.body,s=this.getCurrentPos(),a=s.x,c=s.y,u=i.top+o.scrollTop,f=i.left+o.scrollLeft,g=i.width,v=i.height;if(c<u+n||c>u+v-n||a<f+n||a>f+g-n)return 1},t.prototype.getCurrentPos=function(){var e=this.eventMove,n=e?.pageX||0,i=e?.pageY||0;return{x:n,y:i}},t.prototype.getDim=function(e){var n=this,i=n.em,o=n.canvasRelative,s=i?.Canvas,a=s?s.getElementOffsets(e):{},c,u,f,g;if(o&&i){var v=s.getElementPos(e,{noScroll:1});c=v.top,u=v.left,f=v.height,g=v.width}else{var _=this.offset(e);c=this.relative?e.offsetTop:_.top-(this.wmargin?-1:1)*this.elT,u=this.relative?e.offsetLeft:_.left-(this.wmargin?-1:1)*this.elL,f=e.offsetHeight,g=e.offsetWidth}return{top:c,left:u,height:f,width:g,offsets:a}},t.prototype.getChildrenDim=function(e){var n=this,i=[];if(!e)return i;var o=this.getTargetModel(e);if(o&&o.view&&!this.ignoreViewChildren){var s=o.getCurrentView?o.getCurrentView():o.view;e=s.getChildrenContainer()}return(0,B.each)(e.children,function(a,c){var u=a,f=(0,Le.getModel)(u,dr.default),g=f&&f.index?f.index():c;if(!(!(0,st.ir)(u)&&!n.matches(u,n.itemSel))){var v=n.getDim(u),_=n.direction,b;_=="v"?b=!0:_=="h"?b=!1:b=n.isInFlow(u,e),v.dir=b,v.el=u,v.indexEl=g,i.push(v)}}),i},t.prototype.nearBorders=function(e,n,i){var o=!1,s=this.borderOffset,a=n||0,c=i||0,u=e.top,f=e.left,g=e.height,v=e.width;return(u+s>c||c>u+g-s||f+s>a||a>f+v-s)&&(o=!0),o},t.prototype.findPosition=function(e,n,i){for(var o={index:0,indexEl:0,method:"before"},s=0,a=0,c=0,u=0,f=0,g=0,v=0,_,b=0,C=e.length;b<C;b++){_=e[b];var S=_.top,j=_.left,q=_.height,N=_.width;if(c=j+N,v=S+q,f=j+N/2,g=S+q/2,!(a&&j>a||u&&g>=u||s&&c<s))if(o.index=b,o.indexEl=_.indexEl,!_.dir)i<v&&(u=v),n<f?(a=f,o.method="before"):(s=f,o.method="after");else if(i<g){o.method="before";break}else o.method="after"}return o},t.prototype.movePlaceholder=function(e,n,i,o){var s=0,a=0,c=0,u="",f="",g="px",v=5,_=i.method,b=n[i.index];if(e.classList.remove("vertical"),e.classList.add("horizontal"),b){var C=b.top,S=b.left,j=b.height,q=b.width;b.dir?(u=q+g,f="auto",a=_=="before"?C-s:C+j-s,c=S):(u="auto",f=j-s*2+g,a=C+s,c=_=="before"?S-s:S+q-s,e.classList.remove("horizontal"),e.classList.add("vertical"))}else{if(!this.nested){e.style.display="none";return}if(o){var N=o.offsets||{},G=N.paddingTop||v,se=N.paddingLeft||v,ue=N.borderTopWidth||0,Y=N.borderLeftWidth||0,L=N.borderRightWidth||0,k=Y+L;a=o.top+G+ue,c=o.left+se+Y,u=parseInt("".concat(o.width))-se*2-k+g,f="auto"}}e.style.top=a+g,e.style.left=c+g,u&&(e.style.width=u),f&&(e.style.height=f)},t.prototype.parents=function(e){return e?[e].concat(this.parents(e.parent())):[]},t.prototype.sort=function(e,n){var i=e.parents.filter(function(c){return n.parents.includes(c)}),o=i[0];if(!o)return n.model.index()-e.model.index();var s=e.parents[e.parents.indexOf(o)-1],a=n.parents[n.parents.indexOf(o)-1];return a.index()-s.index()},t.prototype.endMove=function(){var e=this,n,i=this.sourceEl,o=[],s=this.getDocuments(),a=this.getContainerEl(),c=this.onEndMove,u=this.onEnd,f=this,g=f.target,v=f.lastPos,_;if((0,st.AU)(a,"mousemove dragover",this.onMove),(0,st.AU)(s,"mouseup dragend touchend",this.endMove),(0,st.AU)(s,"keydown",this.rollback),this.plh.style.display="none",i&&(_=this.getSourceModel()),this.moved&&g){var b=this.toMove,C=(0,B.isArray)(b)?b:b?[b]:[i],S=0;C.length===1?o.push(this.move(g,C[0],v)):C.map(function(N){return{model:N,parents:e.parents(N)}}).sort(this.sort).forEach(function(N){var G=N.model,se=G.index(),ue=G.parent().getEl();o.push(e.move(g,G,ha(ha({},v),{indexEl:v.indexEl-S,index:v.index-S}))),ue===g&&se<=v.index&&S++})}this.plh&&(this.plh.style.display="none");var j=this.dragHelper;if(j&&(j.parentNode.removeChild(j),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(n=this.em)===null||n===void 0||n.Canvas.removeSpots(uj),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,B.isFunction)(c)){var q={target:_,parent:_&&_.parent(),index:_&&_.index()};o.length?o.forEach(function(N){return c(N,e,q)}):c(null,this,ha(ha({},q),{cancelled:1}))}(0,B.isFunction)(u)&&u({sorter:this})},t.prototype.move=function(e,n,i){var o=this,s=o.em,a=o.dropContent,c=(0,Le.getElement)(n),u=[],f=i.method==="after"?i.indexEl+1:i.indexEl,g=this.validTarget(e,c),v=(0,dr.default)(e).data("collection"),_=g.trgModel,b=g.srcModel,C=g.draggable,S=_ instanceof rt.pM?1:g.droppable,j,q;if(v&&S&&C){var N={at:f,action:"move-component"},G=this.isTextableActive(b,_);if(a)j=(0,B.isFunction)(a)?a():a,N.avoidUpdateStyle=!0,N.action="add-component";else{var se=b.collection.indexOf(b),ue=v===b.collection,Y=se===f||se===f-1,L=!ue||!Y||G;L&&(j=b.collection.remove(b,{temporary:!0}),ue&&f>se&&(N.at=f-1))}j&&(G?(delete N.at,q=_.getView().insertComponent(j,N)):q=v.add(j,N)),delete this.dropContent,delete this.prevTarget}else if(s){var k=g.dropInfo||_?.get("droppable"),$=g.dragInfo||b?.get("draggable");!v&&u.push("Target collection not found"),!S&&k&&u.push("Target is not droppable, accepts [".concat(k,"]")),!C&&$&&u.push("Component not draggable, acceptable by [".concat($,"]")),s.logWarning("Invalid target position",{errors:u,model:b,context:"sorter",target:_})}return s?.trigger("sorter:drag:end",{targetCollection:v,modelToDrop:j,warns:u,validResult:g,dst:e,srcEl:c}),q},t.prototype.rollback=function(e){(0,st.AU)(this.getDocuments(),"keydown",this.rollback);var n=e.which||e.keyCode;n==27&&(this.moved=!1,this.endMove())},t}(rt.Ss),tZ=eZ,Xc=function(){return Xc=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Xc.apply(this,arguments)},nZ=function(r,t){t===void 0&&(t={});var e=t.prefix||"",n=document.createElement("i");return n.className=e+"resizer-h "+e+"resizer-h-"+r,n.setAttribute("data-"+e+"handler",r),n},rZ=function(r,t){var e=t||window,n=r.getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:n.width,height:n.height}},iZ=function(){function r(t){t===void 0&&(t={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Xc({},this.defOpts),this.setOptions(t),(0,B.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return r.prototype.getConfig=function(){return this.opts},r.prototype.setOptions=function(t,e){t===void 0&&(t={}),this.opts=Xc(Xc({},e?this.defOpts:this.opts),t),this.setup()},r.prototype.setup=function(){var t=this.opts,e=t.prefix||"",n=t.appendTo||document.body,i=this.container;for(i||(i=document.createElement("div"),i.className="".concat(e,"resizer-c"),n.appendChild(i),this.container=i);i.firstChild;)i.removeChild(i.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(c){return o[c]=t[c]?nZ(c,t):null});for(var s in o){var a=o[s];a&&i.appendChild(a)}this.handlers=o,this.mousePosFetcher=t.mousePosFetcher,this.updateTarget=t.updateTarget,this.posFetcher=t.posFetcher,this.onStart=t.onStart,this.onMove=t.onMove,this.onEnd=t.onEnd,this.onUpdateContainer=t.onUpdateContainer},r.prototype.toggleFrames=function(t){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,B.each)(e,function(n){return n.style.pointerEvents=t?"none":""})}},r.prototype.isHandler=function(t){var e=this.handlers;for(var n in e)if(e[n]===t)return!0;return!1},r.prototype.getFocusedEl=function(){return this.el},r.prototype.getParentEl=function(){var t;return(t=this.el)===null||t===void 0?void 0:t.parentElement},r.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.posFetcher;return n?n(t,e):rZ(t)},r.prototype.focus=function(t){t&&t===this.el||(this.el=t,this.updateContainer({forceShow:!0}),(0,st.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},r.prototype.blur=function(){this.container.style.display="none",this.el&&((0,st.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},r.prototype.start=function(t){var e=t;if(e.button===0){e.preventDefault(),e.stopPropagation();var n=this.el,i=this.getParentEl(),o=this,s=this.opts||{},a=this.mousePosFetcher,c="data-"+s.prefix+"handler",u=this.getElementPos(n,{avoidFrameZoom:!0,avoidFrameOffset:!0}),f=this.getElementPos(i),g=e.target;this.handlerAttr=g.getAttribute(c),this.clickedHandler=g,this.startDim={t:u.top,l:u.left,w:u.width,h:u.height},this.rectDim={t:u.top,l:u.left,w:u.width,h:u.height},this.startPos=a?a(e):{x:e.clientX,y:e.clientY},this.parentDim={t:f.top,l:f.left,w:f.width,h:f.height};var v=this.getDocumentEl();this.docs=v,(0,st.on)(v,"pointermove",this.move),(0,st.on)(v,"keydown",this.handleKeyDown),(0,st.on)(v,"pointerup",this.stop),(0,B.isFunction)(this.onStart)&&this.onStart(e,{docs:v,config:s,el:n,resizer:o}),this.toggleFrames(!0),this.move(e)}},r.prototype.move=function(t){var e=t,n=this.onMove,i=this.mousePosFetcher,o=i?i(e):{x:e.clientX,y:e.clientY};this.currentPos=o,this.delta={x:o.x-this.startPos.x,y:o.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),n&&n(e)},r.prototype.stop=function(t){var e=this.el,n=this.opts,i=this.docs||this.getDocumentEl();(0,st.AU)(i,"pointermove",this.move),(0,st.AU)(i,"keydown",this.handleKeyDown),(0,st.AU)(i,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,B.isFunction)(this.onEnd)&&this.onEnd(t,{docs:i,config:n,el:e,resizer:this}),delete this.docs},r.prototype.updateRect=function(t){var e=this.el,n=this,i=this.opts,o=this.rectDim,s=this.updateTarget,a=this.getSelectedHandler(),c=i.unitHeight,u=i.unitWidth,f=i.keyWidth,g=i.keyHeight;if((0,B.isFunction)(s))s(e,o,{store:t,selectedHandler:a,resizer:n,config:i});else{var v=e.style;v[f]=o.w+u,v[g]=o.h+c}this.updateContainer()},r.prototype.updateContainer=function(t){var e;t===void 0&&(t={});var n=this,i=n.opts,o=n.container,s=n.el,a=o.style;!i.avoidContainerUpdate&&s&&t.forceShow&&(a.display="block"),(e=this.onUpdateContainer)===null||e===void 0||e.call(this,{el:o,resizer:this,opts:Xc(Xc({},i),t)})},r.prototype.getSelectedHandler=function(){var t=this.handlers;if(this.selectedHandler){for(var e in t)if(t[e]===this.selectedHandler)return e}},r.prototype.handleKeyDown=function(t){t.keyCode===27&&(this.rectDim=this.startDim,this.stop(t))},r.prototype.handleMouseDown=function(t){var e=t.target;this.isHandler(e)?(this.selectedHandler=e,this.start(t)):e!==this.el&&(delete this.selectedHandler,this.blur())},r.prototype.calc=function(t){var e,n=this.opts||{},i=n.step,o=this.startDim,s=n.minDim,a=n.maxDim,c=t.delta.x,u=t.delta.y,f=this.parentDim.w,g=this.parentDim.h,v=this.opts.unitWidth,_=this.opts.unitHeight,b=v==="%"?o.w/100*f:o.w,C=_==="%"?o.h/100*g:o.h,S={t:o.t,l:o.l,w:b,h:C};if(t){var j=t.handlerAttr;~j.indexOf("r")&&(e=v==="%"?(0,Le.normalizeFloat)((b+c*i)/f*100,.01):(0,Le.normalizeFloat)(b+c*i,i),e=Math.max(s,e),a&&(e=Math.min(a,e)),S.w=e),~j.indexOf("b")&&(e=_==="%"?(0,Le.normalizeFloat)((C+u*i)/g*100,.01):(0,Le.normalizeFloat)(C+u*i,i),e=Math.max(s,e),a&&(e=Math.min(a,e)),S.h=e),~j.indexOf("l")&&(e=v==="%"?(0,Le.normalizeFloat)((b-c*i)/f*100,.01):(0,Le.normalizeFloat)(b-c*i,i),e=Math.max(s,e),a&&(e=Math.min(a,e)),S.w=e),~j.indexOf("t")&&(e=_==="%"?(0,Le.normalizeFloat)((C-u*i)/g*100,.01):(0,Le.normalizeFloat)(C-u*i,i),e=Math.max(s,e),a&&(e=Math.min(a,e)),S.h=e);var q=n.ratioDefault?!t.keys.shift:t.keys.shift;if(j.indexOf("c")<0&&q){var N=o.w/o.h;S.w/S.h>N?S.h=Math.round(S.w/N):S.w=Math.round(S.h*N)}~j.indexOf("l")&&(S.l+=o.w-S.w),~j.indexOf("t")&&(S.t+=o.h-S.h);for(var G in S){var se=G;S[se]=parseInt("".concat(S[se]),10)}return S}},r}(),oZ=iZ,sZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qS=function(){return qS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},qS.apply(this,arguments)},aZ=function(r){sZ(t,r);function t(e){var n=r.call(this,e,"Utils")||this;return n.Sorter=tZ,n.Resizer=oZ,n.Dragger=iF.A,n.helpers=qS({},Le),n}return t.prototype.destroy=function(){},t}(ko),lZ=aZ,Do,Jo={},go={16:!1,18:!1,17:!1,91:!1},QF="all",ou={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},YF={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},cA=function(r){return YF[r]||r.toUpperCase().charCodeAt(0)},af=[];for(Do=1;Do<20;Do++)YF["f"+Do]=111+Do;function Wp(r,t){for(var e=r.length;e--;)if(r[e]===t)return e;return-1}function cZ(r,t){if(r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}var uZ={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function dZ(r){for(Do in go)go[Do]=r[uZ[Do]]}function fZ(r){var t,e,n,i,o,s;if(t=r.keyCode,Wp(af,t)==-1&&af.push(t),(t==93||t==224)&&(t=91),t in go){go[t]=!0;for(n in ou)ou[n]==t&&(vo[n]=!0);return}if(dZ(r),!!vo.filter.call(this,r)&&t in Jo){for(s=uA(),i=0;i<Jo[t].length;i++)if(e=Jo[t][i],e.scope==s||e.scope=="all"){o=e.mods.length>0;for(n in go)(!go[n]&&Wp(e.mods,+n)>-1||go[n]&&Wp(e.mods,+n)==-1)&&(o=!1);(e.mods.length==0&&!go[16]&&!go[18]&&!go[17]&&!go[91]||o)&&e.method(r,e)===!1&&(r.preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation&&r.stopPropagation(),r.cancelBubble&&(r.cancelBubble=!0))}}}function hZ(r){var t=r.keyCode,e,n=Wp(af,t);if(n>=0&&af.splice(n,1),(t==93||t==224)&&(t=91),t in go){go[t]=!1;for(e in ou)ou[e]==t&&(vo[e]=!1)}}function pZ(){for(Do in go)go[Do]=!1;for(Do in ou)vo[Do]=!1}function vo(r,t,e){var n,i;n=JF(r),e===void 0&&(e=t,t="all");for(var o=0;o<n.length;o++)i=[],r=n[o].split("+"),r.length>1&&(i=ZF(r),r=[r[r.length-1]]),r=r[0],r=cA(r),r in Jo||(Jo[r]=[]),Jo[r].push({shortcut:n[o],scope:t,method:e,key:n[o],mods:i})}function gZ(r,t){var e,n,i=[],o,s,a;for(e=JF(r),s=0;s<e.length;s++){if(n=e[s].split("+"),n.length>1&&(i=ZF(n)),r=n[n.length-1],r=cA(r),t===void 0&&(t=uA()),!Jo[r])return;for(o=0;o<Jo[r].length;o++)a=Jo[r][o],a.scope===t&&cZ(a.mods,i)&&(Jo[r][o]={})}}function mZ(r){return typeof r=="string"&&(r=cA(r)),Wp(af,r)!=-1}function vZ(){return af.slice(0)}function yZ(r){var t=(r.target||r.srcElement).tagName;return!(t=="INPUT"||t=="SELECT"||t=="TEXTAREA")}for(Do in ou)vo[Do]=!1;function _Z(r){QF=r||"all"}function uA(){return QF||"all"}function wZ(r){var t,e,n;for(t in Jo)for(e=Jo[t],n=0;n<e.length;)e[n].scope===r?e.splice(n,1):n++}function JF(r){var t;return r=r.replace(/\s/g,""),t=r.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function ZF(r){for(var t=r.slice(0,r.length-1),e=0;e<t.length;e++)t[e]=ou[t[e]];return t}function bS(r,t,e){r.addEventListener?r.addEventListener(t,e,!1):r.attachEvent&&r.attachEvent("on"+t,function(){e(window.event)})}vo.setScope=_Z;vo.getScope=uA;vo.deleteScope=wZ;vo.filter=yZ;vo.isPressed=mZ;vo.getPressedKeyCodes=vZ;vo.unbind=gZ;vo.handlers=Jo;vo.init=function(r){bS(r.document,"keydown",function(t){fZ(t)}),bS(r.document,"keyup",hZ),bS(r,"focus",pZ)};var Np=vo,bZ={defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}},CZ=bZ,xZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};(0,Le.hasWin)()&&Np.init(window);var EZ=function(r){xZ(t,r);function t(e){var n=r.call(this,e,"Keymaps",CZ)||this;return n.keymaster=Np,n.keymaps={},n}return t.prototype.onLoad=function(){var e=this.config.defaults;for(var n in e){var i=e[n];this.add(n,i.keys,i.handler,i.opts||{})}},t.prototype.add=function(e,n,i,o){o===void 0&&(o={});var s=this.em,a=s.Commands,c=s.getEditor(),u=s.Canvas,f={id:e,keys:n,handler:i},g=this.keymaps[e];return g&&this.remove(e),this.keymaps[e]=f,Np(n,function(v,_){var b={event:v,h:_},C=(0,B.isString)(i)?a.get(i):i,S=!s.isEditing()&&!c.Canvas.isInputFocused();if(S||o.force){o.prevent&&u.getCanvasView().preventDefault(v),(0,B.isFunction)(C)?C(c,0,b):a.runCommand(C,b);var j=[e,_.shortcut,v];s.trigger.apply(s,dj(["keymap:emit"],j,!1)),s.trigger.apply(s,dj(["keymap:emit:".concat(e)],j,!1))}},void 0),s.trigger("keymap:add",f),f},t.prototype.get=function(e){return this.keymaps[e]},t.prototype.getAll=function(){return this.keymaps},t.prototype.remove=function(e){var n=this.em,i=this.get(e);if(i)return delete this.keymaps[e],i.keys.split(", ").forEach(function(o){Np.unbind(o.trim())}),n?.trigger("keymap:remove",i),i},t.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(n){return e.remove(n)}),Np.handlers={},this},t.prototype.destroy=function(){this.removeAll(),this.keymaps={}},t}(ko),SZ=EZ,AZ={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}},TZ=AZ,OZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MZ=function(r){OZ(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},t.prototype.open=function(){this.set("open",!0)},t.prototype.close=function(){this.set("open",!1)},t}(Hl.A),PZ=MZ,IZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),V_=function(){return V_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},V_.apply(this,arguments)},DZ=function(r){IZ(t,r);function t(e){var n=r.call(this,e)||this,i=n.model;return n.listenTo(i,"change:open",n.updateOpen),n.listenTo(i,"change:title",n.updateTitle),n.listenTo(i,"change:content",n.updateContent),n}return t.prototype.template=function(e){var n=e.pfx,i=e.ppfx,o=e.content,s=e.title;return'<div class="'.concat(n,"dialog ").concat(i,"one-bg ").concat(i,`two-color">
      <div class="`).concat(n,`header">
        <div class="`).concat(n,'title">').concat(s,`</div>
        <div class="`).concat(n,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(n,`content">
        <div id="`).concat(n,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(n,'collector" style="display: none"></div>')},t.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},t.prototype.onClick=function(e){var n=this.config.backdrop;n&&e.target===this.el&&this.hide()},t.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},t.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},t.prototype.getTitle=function(e){return e===void 0&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},t.prototype.updateContent=function(){var e=this.getContent(),n=e.children(),i=this.getCollector(),o=this.model.get("content");n.length&&i.append(n),e.empty().append(o)},t.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},t.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},t.prototype.hide=function(){this.model.close()},t.prototype.show=function(){this.model.open()},t.prototype.updateAttr=function(e){var n=this,i=n.pfx,o=n.$el,s=n.el,a=[].slice.call(s.attributes).map(function(c){return c.name});o.removeAttr(a.join(" ")),o.attr(V_(V_({},e||{}),{class:"".concat(i,"container ").concat(e&&e.class||"").trim()}))},t.prototype.render=function(){var e=this.$el,n=this.model.toJSON();return n.pfx=this.pfx,n.ppfx=this.ppfx,e.html(this.template(n)),this.updateAttr(),this.updateOpen(),this},t}(hs),kZ=DZ,RZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),NZ=function(r){RZ(t,r);function t(e){var n=r.call(this,e,"Modal",TZ)||this;return n.model=new PZ(n),n.model.on("change:open",function(i,o){e.trigger("modal:".concat(o?"open":"close"))}),n.model.on("change",(0,B.debounce)(function(){var i=n._evData(),o=n.config.custom;(0,B.isFunction)(o)&&o(i),e.trigger("modal",i)},0)),n}return t.prototype._evData=function(){var e=this,n=this.getTitle(),i=this.getContent(),o=this.model.attributes,s=o.open,a=o.attributes;return{open:s,attributes:a,title:(0,B.isString)(n)?(0,st.GZ)(n):n,content:(0,B.isString)(i)?(0,st.GZ)(i):i.get?i.get(0):i,close:function(){e.close()}}},t.prototype.postRender=function(e){var n=e.model.config.el||e.el,i=this.render();i&&n?.appendChild(i)},t.prototype.open=function(e){e===void 0&&(e={});var n=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",n),this.model.open(),this.modal&&this.modal.updateAttr(n),this},t.prototype.close=function(){return this.model.close(),this},t.prototype.onceClose=function(e){return this.em.once("modal:close",e),this},t.prototype.onceOpen=function(e){return this.em.once("modal:open",e),this},t.prototype.isOpen=function(){return!!this.model.get("open")},t.prototype.setTitle=function(e){return this.model.set("title",e),this},t.prototype.getTitle=function(){return this.model.get("title")},t.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},t.prototype.getContent=function(){return this.model.get("content")},t.prototype.getContentEl=function(){var e;return(e=this.modal)===null||e===void 0?void 0:e.getContent().get(0)},t.prototype.getModel=function(){return this.model},t.prototype.render=function(){var e;if(!this.config.custom){var n=kZ.extend(this.config.extend),i=this.modal&&this.modal.el;return this.modal=new n({el:i,model:this.model,config:this.config}),(e=this.modal)===null||e===void 0?void 0:e.render().el}},t.prototype.destroy=function(){var e;(e=this.modal)===null||e===void 0||e.remove()},t}(ko),jZ=NZ,fj="sw-visibility",hj="export-template",pj="open-sm",gj="open-tm",mj="open-layers",vj="open-blocks",CS="fullscreen",xS="preview",FZ={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:fj,className:"fa fa-square-o",command:"core:component-outline",context:fj,attributes:{title:"View components"}},{id:xS,className:"fa fa-eye",command:xS,context:xS,attributes:{title:"Preview"}},{id:CS,className:"fa fa-arrows-alt",command:CS,context:CS,attributes:{title:"Fullscreen"}},{id:hj,className:"fa fa-code",command:hj,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:pj,className:"fa fa-paint-brush",command:pj,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:gj,className:"fa fa-cog",command:gj,togglable:!1,attributes:{title:"Settings"}},{id:mj,className:"fa fa-bars",command:mj,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:vj,className:"fa fa-th-large",command:vj,togglable:!1,attributes:{title:"Open Blocks"}}]}]},ES=FZ,LZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VZ=function(r){LZ(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.get("buttons").length&&i.set("buttons",new tL(i.module,i.get("buttons"))),i}return t.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(t.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),t}(Hl.A),XF=VZ,BZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eL=function(r){BZ(t,r);function t(e,n){return r.call(this,e,n,XF)||this}return t.prototype.deactivateAllExceptOne=function(e,n){this.forEach(function(i,o){i!==e&&(i.set("active",!1),n&&i.get("buttons").length&&i.get("buttons").deactivateAllExceptOne(e,n))})},t.prototype.deactivateAll=function(e,n){var i=e||"";this.forEach(function(o){o.get("context")==i&&o!==n&&o.set("active",!1,{fromCollection:!0})})},t.prototype.disableAllButtons=function(e){var n=e||"";this.forEach(function(i,o){i.get("context")==n&&i.set("disable",!0)})},t.prototype.disableAllButtonsExceptOne=function(e,n){this.forEach(function(i,o){i!==e&&(i.set("disable",!0),n&&i.get("buttons").length&&i.get("buttons").disableAllButtonsExceptOne(e,n))})},t}(n0),tL=eL;eL.prototype.model=XF;var UZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),HZ=function(r){UZ(t,r);function t(e,n){var i=r.call(this,e,n)||this,o=i.get("buttons")||[];return i.buttons=new tL(e,o),i}return t.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(t.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),t}(Hl.A),nL=HZ,zZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rL=function(r){zZ(t,r);function t(e,n){return r.call(this,e,n,nL)||this}return t}(n0),$Z=rL;rL.prototype.model=nL;var WZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zd=function(){return Zd=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Zd.apply(this,arguments)},qZ=function(r){WZ(t,r);function t(e){var n=r.call(this,e)||this,i=n,o=i.model,s=i.em,a=i.pfx,c=i.ppfx,u=o.className,f=o.attributes,g=f.command,v=f.listen;if(n.id=a+o.get("id"),n.activeCls="".concat(a,"active ").concat(c,"four-color"),n.disableCls="".concat(c,"disabled"),n.btnsVisCls="".concat(a,"visible"),n.className=a+"btn"+(u?" "+u:""),n.listenTo(o,"change",n.render),n.listenTo(o,"change:active updateActive",n.updateActive),n.listenTo(o,"checkActive",n.checkActive),n.listenTo(o,"change:bntsVis",n.updateBtnsVis),n.listenTo(o,"change:attributes",n.updateAttributes),n.listenTo(o,"change:className",n.updateClassName),n.listenTo(o,"change:disable",n.updateDisable),s&&(0,B.isString)(g)&&v){var _={fromListen:!0};n.listenTo(s,"run:".concat(g),function(){return o.set("active",!0,_)}),n.listenTo(s,"stop:".concat(g),function(){return o.set("active",!1,_)})}return s&&s.get&&(n.commands=s.get("Commands")),n}return t.prototype.tagName=function(){return this.model.get("tagName")},t.prototype.events=function(){return{click:"clicked"}},t.prototype.updateClassName=function(){var e=this,n=e.model,i=e.pfx,o=n.className,s=n.get("attributes").class,a="".concat(s||""," ").concat(i,"btn ").concat(o||"");this.$el.attr("class",a.trim())},t.prototype.updateAttributes=function(){var e=this,n=e.em,i=e.model,o=e.$el,s=i.get("attributes")||{},a=n&&n.t&&n.t("panels.buttons.titles.".concat(i.id));o.attr(s),a&&o.attr({title:a}),this.updateClassName()},t.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},t.prototype.updateActive=function(e,n,i){var o;i===void 0&&(i={});var s=this,a=s.model,c=s.commands,u=s.$el,f=s.activeCls,g=i.fromCollection,v=i.fromListen,_=a.get("context"),b=a.get("options"),C=a.command,S={};C&&(c&&(0,B.isString)(C)?S=c.get(C)||{}:(0,B.isFunction)(C)?S=c.create({run:C}):C!==null&&(0,B.isObject)(C)&&(S=c.create(C)),a.active?(!g&&((o=a.collection)===null||o===void 0||o.deactivateAll(_,a)),a.set("active",!0,{silent:!0}).trigger("checkActive"),!v&&c.runCommand(S,Zd(Zd({},b),{sender:a})),S.noStop&&a.set("active",!1)):(u.removeClass(f),!v&&c.stopCommand(S,Zd(Zd({},b),{sender:a,force:1}))))},t.prototype.updateDisable=function(){var e=this,n=e.disableCls,i=e.model,o=i.disable;this.$el[o?"addClass":"removeClass"](n)},t.prototype.checkActive=function(){var e=this,n=e.model,i=e.$el,o=e.activeCls;n.active?i.addClass(o):i.removeClass(o)},t.prototype.clicked=function(){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},t.prototype.toggleActive=function(){var e=this,n=e.model,i=e.em,o=n.active,s=n.togglable;o&&!s||(n.active=!o,o?n.runDefaultCommand&&i.runDefault():n.stopDefaultCommand&&i.stopDefault())},t.prototype.render=function(){var e=this.model,n=e.get("label"),i=this.$el;return!e.get("el")&&i.empty(),this.updateAttributes(),n&&i.append(n),this.checkActive(),this.updateDisable(),this},t}(hs),GZ=qZ,KZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QZ=function(r){KZ(t,r);function t(e){var n=r.call(this,{collection:e})||this;return n.listenTo(n.collection,"add",n.addTo),n.listenTo(n.collection,"reset remove",n.render),n.className=n.pfx+"buttons",n}return t.prototype.addTo=function(e){this.addToCollection(e)},t.prototype.addToCollection=function(e,n){var i=n||null,o=e.get("el"),s=new GZ({el:o,model:e}),a=s.render().el;return i?i.appendChild(a):this.$el.append(a),a},t.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(i){return e.addToCollection(i,n)}),this.$el.append(n),this.$el.attr("class",(0,B.result)(this,"className")),this},t}(hs),YZ=QZ,JZ=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),GS=function(){return GS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},GS.apply(this,arguments)},ZZ=function(r){JZ(t,r);function t(e){var n=r.call(this,{model:e,el:e.get("el")})||this;return n.className=n.pfx+"panel",n.id=n.pfx+e.get("id"),n.listenTo(e,"change:appendContent",n.appendContent),n.listenTo(e,"change:content",n.updateContent),n.listenTo(e,"change:visible",n.toggleVisible),e.view=n,n}return t.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},t.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},t.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},t.prototype.attributes=function(){return this.model.get("attributes")},t.prototype.initResize=function(){var e=this.em,n=e?.Editor,i=this.model.get("resizable");if(n&&i){var o=i===!0?[!0,!0,!0,!0]:i,s=o.length,a=void 0,c=void 0,u=void 0,f=!1;if(s==2){var g=o;a=g[0],u=g[0],c=g[1],f=g[1]}else if(s==4){var g=o;a=g[0],c=g[1],u=g[2],f=g[3]}var v=new n.Utils.Resizer(GS({tc:a,cr:c,bc:u,cl:f,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:n.getConfig().stylePrefix,onEnd:function(){e.Canvas.refresh({all:!0})},posFetcher:function(_,b){var C=b.target,S=_.style,j=v.getConfig(),q=j.keyWidth,N=j.keyHeight,G=_.getBoundingClientRect(),se=C=="container",ue=S[q],Y=S[N],L=ue&&!se?parseFloat(ue):G.width,k=Y&&!se?parseFloat(Y):G.height;return{left:0,top:0,width:L,height:k}}},i&&typeof i!="boolean"?i:{}));v.blur=function(){},v.focus(this.el)}},t.prototype.render=function(){var e=this.model.buttons,n=this.$el,i=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(i,"one-bg ").concat(i,"two-color");if(n.addClass(o),this.toggleVisible(),e.length){var s=new YZ(e);n.append(s.render().el)}return n.append(this.model.get("content")),this},t}(hs),XZ=ZZ,eX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tX=function(r){eX(t,r);function t(e){var n=r.call(this,{collection:e})||this;return n.listenTo(e,"add",n.addTo),n.listenTo(e,"reset",n.render),n.listenTo(e,"remove",n.onRemove),n.className=n.pfx+"panels",n}return t.prototype.onRemove=function(e){var n=e.view;n&&n.remove()},t.prototype.addTo=function(e){this.addToCollection(e)},t.prototype.addToCollection=function(e,n){var i=n||null,o=e.get("el"),s=new XZ(e),a=s.render().el,c=e.get("appendTo");if(!o)if(c){var u=document.querySelector(c);u?.appendChild(a)}else i?i.appendChild(a):this.$el.append(a);return s.initResize(),a},t.prototype.render=function(){var e=this,n=this.$el,i=document.createDocumentFragment();return n.empty(),this.collection.each(function(o){return e.addToCollection(o,i)}),n.append(i),n.attr("class",this.className),this},t}(hs),nX=tX,rX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),iX=function(r){rX(t,r);function t(e){var n=r.call(this,e,"Panels",ES)||this;n.panels=new $Z(n,n.config.defaults);for(var i in ES)i in n.config||(n.config[i]=ES[i]);return n}return t.prototype.getPanels=function(){return this.panels},t.prototype.getPanelsEl=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0?void 0:e.el},t.prototype.addPanel=function(e){return this.panels.add(e)},t.prototype.removePanel=function(e){return this.panels.remove(e)},t.prototype.getPanel=function(e){var n=this.panels.where({id:e});return n.length?n[0]:null},t.prototype.addButton=function(e,n){var i=this.getPanel(e);return i?i.buttons.add(n):null},t.prototype.removeButton=function(e,n){var i=this.getPanel(e);return i&&i.buttons.remove(n)},t.prototype.getButton=function(e,n){var i=this.getPanel(e);if(i){var o=i.buttons.where({id:n});return o.length?o[0]:null}return null},t.prototype.render=function(){var e;return(e=this.PanelsViewObj)===null||e===void 0||e.remove(),this.PanelsViewObj=new nX(this.panels),this.PanelsViewObj.render().el},t.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(n){n.get("active")&&n.trigger("updateActive")})})},t.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(n){n.get("disable")&&n.trigger("change:disable")})})},t.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},t}(ko),oX=iX,sX={stylePrefix:"cm-",optsCodeViewer:{}},aX=sX,lX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cX=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},uX=function(r){lX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.build=function(e,n){n===void 0&&(n={});var i=n.em,o=cX(n,["em"]),s=o;if(n.cleanId&&i){var a=i.Css.getAll(),c=a.toJSON().map(function(u){var f=u.selectors,g=f&&f.length===1&&f.models[0];return g&&g.isId()&&g.get("name")}).filter(Boolean);s.attributes||(s.attributes=function(u,f){var g=f.id;return g&&g[0]==="i"&&!u.get("script")&&!u.get("attributes").id&&c.indexOf(g)<0&&delete f.id,f})}return e.toHTML(s)},t}(rt.Kx),dX=uX,fX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hX=function(r){fX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.build=function(e){var n=this,i=e.toJSON();return this.beforeEach(i),(0,B.each)(i,function(o,s){var a=i[s];if(a instanceof rt.Kx)i[s]=n.build(a);else if(a instanceof rt.pM){var c=a;i[s]=[],c.length&&c.forEach(function(u,f){i[s][f]=n.build(u)})}}),i},t.prototype.beforeEach=function(e){delete e.status},t}(rt.Kx),pX=hX,gX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();function mX(r){var t,e=((t=r.toString().match(/\{([\s\S]*)\}/m))===null||t===void 0?void 0:t[1])||"";return e.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var vX=function(r){gX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.mapModel=function(e){var n,i=this,o="",s=e.get("script-export")||e.get("script"),a=e.get("type"),c=e.get("components"),u=e.getId();if(s){var f=e.get("attributes");f=(0,B.extend)({},f,{id:u}),e.set("attributes",f,{silent:!0});var g=e.getScriptString(s),v=e.get("script-props");if(e.get("scriptUpdated")&&!v)this.mapJs[a+"-"+u]={ids:[u],code:g};else{var _=void 0,b=this.mapJs[a];if(v&&(_=e.__getScriptProps()),b)b.ids.push(u),_&&(b.props[u]=_);else{var C={ids:[u],code:g};_&&(C.props=(n={},n[u]=_,n)),this.mapJs[a]=C}}}return c.forEach(function(S){o+=i.mapModel(S)}),o},t.prototype.build=function(e){this.mapJs={},this.mapModel(e);var n="";for(var i in this.mapJs){var o=this.mapJs[i];if(o.code)if(o.props){if(mX(o.code))continue;n+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var s="#"+o.ids.join(", #");n+=`
          var items = document.querySelectorAll('`.concat(s,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return n},t}(rt.Kx),yX=vX,_X=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),KS=function(){return KS=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},KS.apply(this,arguments)},qp;(0,Le.hasWin)()&&(qp=kn(237),kn(520),kn(656),kn(862));var iL=function(r){_X(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},t.prototype.init=function(e){return(0,B.bindAll)(this,"onChange"),this.editor=qp.fromTextArea(e,KS({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},t.prototype.onChange=function(){this.trigger("update",this)},t.prototype.getEditor=function(){return this.editor},t.prototype.getElement=function(){return this.element},t.prototype.setElement=function(e){return this.element=e,this},t.prototype.refresh=function(){return this.getEditor().refresh(),this},t.prototype.focus=function(){return this.getEditor().focus(),this},t.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},t.prototype.setContent=function(e,n){var i=this;n===void 0&&(n={});var o=this.editor;if(o){o.setValue(e);var s=this.get("autoFormat"),a=o.autoFormatRange&&(s===!0||Array.isArray(s)&&s.includes(this.get("codeName")));a&&(qp.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),qp.commands.goDocStart(o)),!n.noRefresh&&setTimeout(function(){return i.refresh()})}},t}(rt.Kx),wX=iL;iL.prototype.CodeMirror=qp;var bX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CX=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},xX=function(r){bX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.template=function(e){var n=e.pfx,i=e.codeName,o=e.label;return Io(yj||(yj=CX([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),n,n,i,n,o,n)},t.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},t.prototype.render=function(){var e,n,i=this,o=i.model,s=i.pfx,a=i.$el,c=o.toJSON(),u=o.get("input")||((n=(e=o).getElement)===null||n===void 0?void 0:n.call(e));return c.pfx=s,a.html(this.template(c)),a.attr("class","".concat(s,"editor-c")),a.find("#".concat(s,"code")).append(u),this},t}(rt.Ss),EX=xX,yj,SX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),B_=function(){return B_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},B_.apply(this,arguments)},AX="CodeMirror",TX=function(r){SX(t,r);function t(e){var n=r.call(this,e,"CodeManager",aX)||this;n.EditorView=EX;var i=n.config,o=i.pStylePrefix;return o&&(i.stylePrefix=o+i.stylePrefix),n.generators={},n.viewers={},n.defGenerators={html:new dX,css:new tQ,json:new pX,js:new yX},n.defViewers={CodeMirror:new wX},n.loadDefaultGenerators().loadDefaultViewers(),n}return t.prototype.addGenerator=function(e,n){return this.generators[e]=n,this},t.prototype.getGenerator=function(e){return this.generators[e]},t.prototype.getGenerators=function(){return this.generators},t.prototype.addViewer=function(e,n){return this.viewers[e]=n,this},t.prototype.getViewer=function(e){return this.viewers[e]},t.prototype.getViewers=function(){return this.viewers},t.prototype.createViewer=function(e){e===void 0&&(e={});var n=(0,B.isUndefined)(e.type)?AX:e.type,i=this.getViewer(n)&&this.getViewer(n).clone(),o=document.createElement("div"),s=document.createElement("textarea");return o.appendChild(s),i.set(B_(B_({},this.config.optsCodeViewer),e)),i.init(s),i.setElement(o),i},t.prototype.updateViewer=function(e,n){e.setContent(n)},t.prototype.getCode=function(e,n,i){i===void 0&&(i={}),i.em=this.em;var o=this.getGenerator(n);return o?o.build(e,i):""},t.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},t.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},t.prototype.destroy=function(){},t}(ko),OX=TX,MX=kn(982),PX=kn.n(MX),IX={maximumStackLength:500,trackSelection:!0},DX=IX,kX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qa=function(){return Qa=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Qa.apply(this,arguments)},RX=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},Zy=function(r){return r.avoidStore||r.noUndo},_j=function(r){return Object.keys(r.changedAttributes())},NX=function(r){kX(t,r);function t(e){var n=r.call(this,e,"UndoManager",DX)||this;n.config._disable&&(n.config.maximumStackLength=0);var i=!0;return n.um=new(PX())(Qa({track:!0,register:[]},n.config)),n.um.changeUndoType("change",{condition:function(o){var s=o.get("_undo");if(s){var a=o.get("_undoexc");if((0,B.isArray)(a)&&_j(o).some(function(c){return a.indexOf(c)>=0}))return!1;if((0,B.isBoolean)(s)||(0,B.isArray)(s)&&_j(o).some(function(c){return s.indexOf(c)>=0}))return!0}return!1},on:function(o,s,a){var c=this;!this.beforeCache&&(this.beforeCache=o.previousAttributes());var u=a||s||{};if(u.noUndo&&setTimeout(function(){c.beforeCache=null}),!Zy(u)){var f=o.toJSON({fromUndo:i}),g={object:o,before:this.beforeCache,after:f};return this.beforeCache=null,(0,B.isEmpty)(f)?void 0:g}}}),n.um.changeUndoType("add",{on:function(o,s,a){if(a===void 0&&(a={}),!(Zy(a)||!n.isRegistered(s)))return{object:s,before:void 0,after:o,options:Qa(Qa({},a),{fromUndo:i})}}}),n.um.changeUndoType("remove",{on:function(o,s,a){if(a===void 0&&(a={}),!(Zy(a)||!n.isRegistered(s)))return{object:s,before:o,after:void 0,options:Qa(Qa({},a),{fromUndo:i})}}}),n.um.changeUndoType("reset",{undo:function(o,s){o.reset(s,{fromUndo:i})},redo:function(o,s,a){o.reset(a,{fromUndo:i})},on:function(o,s){if(s===void 0&&(s={}),!(Zy(s)||!n.isRegistered(o)))return{object:o,before:s.previousModels,after:RX([],o.models,!0),options:Qa(Qa({},s),{fromUndo:i})}}}),n.um.on("undo redo",function(){e.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),["undo","redo"].forEach(function(o){return n.um.on(o,function(){return e.trigger(o)})}),n}return t.prototype.postLoad=function(){var e=this,n=e.config,i=e.em;n.trackSelection&&i&&this.add(i.get("selected"))},t.prototype.add=function(e){return this.um.register(e),this},t.prototype.remove=function(e){return this.um.unregister(e),this},t.prototype.removeAll=function(){return this.um.unregisterAll(),this},t.prototype.start=function(){return this.um.startTracking(),this},t.prototype.stop=function(){return this.um.stopTracking(),this},t.prototype.undo=function(e){e===void 0&&(e=!0);var n=this,i=n.em,o=n.um;return!i.isEditing()&&o.undo(e),this},t.prototype.undoAll=function(){return this.um.undoAll(),this},t.prototype.redo=function(e){e===void 0&&(e=!0);var n=this,i=n.em,o=n.um;return!i.isEditing()&&o.redo(e),this},t.prototype.redoAll=function(){return this.um.redoAll(),this},t.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},t.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},t.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},t.prototype.getStack=function(){return this.um.stack},t.prototype.getStackGroup=function(){var e=[],n=[];return this.getStack().forEach(function(i){var o=i.get("magicFusionIndex");n.indexOf(o)<0&&(n.push(o),e.push(i))}),e},t.prototype.skip=function(e){var n=!!this.um.isTracking();n&&this.stop(),e(),n&&this.start()},t.prototype.getGroupedStack=function(){var e={},n=this.getStack(),i=function(o,s){var a=o.attributes,c=a.type,u=a.after,f=a.before,g=a.object,v=a.options,_=v===void 0?{}:v;return{index:s,type:c,after:u,before:f,object:g,options:_}};return n.forEach(function(o,s){var a=o.get("magicFusionIndex"),c=i(o,s);e[a]?e[a].push(c):e[a]=[c]}),Object.keys(e).map(function(o){var s=e[o];return{index:s[s.length-1].index,actions:s,labels:(0,B.unique)(s.reduce(function(a,c){var u,f=(u=c.options)===null||u===void 0?void 0:u.action;return f&&a.push(f),a},[]))}})},t.prototype.goToGroup=function(e){var n=this;if(e){var i=this.getPointer(),o=e.index-i;(0,B.times)(Math.abs(o),function(){n[o<0?"undo":"redo"](!1)})}},t.prototype.getPointer=function(){return this.getStack().pointer},t.prototype.clear=function(){return this.um.clear(),this},t.prototype.getInstance=function(){return this.um},t.prototype.destroy=function(){this.clear().removeAll()},t}(ko),jX=NX,FX={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1},LX=FX,Xd=function(){return Xd=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Xd.apply(this,arguments)},QS=function(r){return r[r.ACTIVE=1]="ACTIVE",r[r.INACTIVE=0]="INACTIVE",r[r.DISABLED=-1]="DISABLED",r}(QS||{}),SS="_rte",nu={ACTIVE:1,INACTIVE:0,DISABLED:-1},Xy=function(r,t){t===void 0&&(t="A");var e=r.selection()||{},n=e.anchorNode,i=e.focusNode,o=n?.parentNode,s=i?.parentNode;return o?.nodeName==t||s?.nodeName==t},U_="data-selectme",kp={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(r){return r.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(r){return r.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(r){return r.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(r){return r.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(r){return r&&r.selection()&&Xy(r)?nu.ACTIVE:nu.INACTIVE},result:function(r){Xy(r)?r.exec("unlink"):r.insertHTML('<a href="" '.concat(U_,">").concat(r.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(r){return r?.selection()&&Xy(r,"SPAN")?nu.DISABLED:nu.INACTIVE},result:function(r){!Xy(r,"SPAN")&&r.insertHTML("<span ".concat(U_,">").concat(r.selection(),"</span>"),{select:!0})}}},VX=function(){function r(t,e,n){n===void 0&&(n={});var i=this;if(this.em=t,this.settings=n,e[SS])return e[SS];e[SS]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(n.actions||[]).map(function(f){var g=f;return(0,B.isString)(f)?g=Xd({},kp[f]):kp[f.name]&&(g=Xd(Xd({},kp[f.name]),f)),g}),s=o.length?o:Object.keys(kp).map(function(f){return kp[f]});n.classes=Xd({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},n.classes);var a=n.classes,c=n.actionbar;if(this.actionbar=c,this.classes=a,this.actions=s,!c){if(!this.isCustom(n.module)){var u=n.actionbarContainer;c=document.createElement("div"),c.className=a.actionbar,u?.appendChild(c),this.actionbar=c}s.forEach(function(f){return i.addAction(f)})}return n.styleWithCSS&&this.exec("styleWithCSS"),this}return r.prototype.isCustom=function(t){var e=t||this.em.RichTextEditor;return!!(e?.config.custom||e?.customRte)},r.prototype.destroy=function(){},r.prototype.setEl=function(t){this.el=t,this.doc=t.ownerDocument},r.prototype.updateActiveActions=function(){var t=this,e=this.getActions();e.forEach(function(n){var i=n.update,o=n.btn,s=t.classes,a=s.active,c=s.inactive,u=s.disabled,f=n.state,g=n.name,v=t.doc,_=QS.INACTIVE;if(o&&(o.className=o.className.replace(a,"").trim(),o.className=o.className.replace(c,"").trim(),o.className=o.className.replace(u,"").trim()),f){var b=f(t,v);if(_=b,o)switch(b){case nu.ACTIVE:o.className+=" ".concat(a);break;case nu.INACTIVE:o.className+=" ".concat(c);break;case nu.DISABLED:o.className+=" ".concat(u);break}}else v.queryCommandSupported(g)&&v.queryCommandState(g)&&(o&&(o.className+=" ".concat(a)),_=QS.ACTIVE);n.currentState=_,i?.(t,n)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},r.prototype.enable=function(t){return this.enabled?this:this.__toggleEffects(!0,t)},r.prototype.disable=function(){return this.__toggleEffects(!1)},r.prototype.__toggleEffects=function(t,e){t===void 0&&(t=!1),e===void 0&&(e={});var n=t?st.on:st.AU,i=this,o=i.el,s=i.doc,a=this.actionbarEl();if(a&&(a.style.display=t?"":"none"),o.contentEditable="".concat(!!t),n(o,"mouseup keyup",this.updateActiveActions),n(s,"keydown",this.__onKeydown),n(s,"paste",this.__onPaste),this.enabled=t,t){var c=e.event;if(this.syncActions(),this.updateActiveActions(),c){var u=null;if(s.caretRangeFromPoint){var f=(0,st.G2)(c);u=s.caretRangeFromPoint(f.clientX,f.clientY)}else c.rangeParent&&(u=s.createRange(),u.setStart(c.rangeParent,c.rangeOffset));var g=s.getSelection();g?.removeAllRanges(),u&&g?.addRange(u)}o.focus()}return this},r.prototype.__onKeydown=function(t){var e=this.em,n=e.RichTextEditor.getConfig().onKeydown;if(n)return n({ev:t,rte:this,editor:e.getEditor()});var i=this.doc,o=["insertOrderedList","insertUnorderedList"];t.key==="Enter"&&!o.some(function(s){return i.queryCommandState(s)})&&(i.execCommand("insertLineBreak"),t.preventDefault())},r.prototype.__onPaste=function(t){var e=this.em,n=e.RichTextEditor.getConfig().onPaste;if(n)return n({ev:t,rte:this,editor:e.getEditor()});var i=t.clipboardData,o=i.getData("text"),s=i.getData("text/html");if(o&&!s){t.preventDefault();var a=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,a)}},r.prototype.syncActions=function(){var t=this;this.getActions().forEach(function(e){if(t.actionbar&&(!e.state||e.state&&e.state(t,t.doc)>=0)){var n=e.event||"click",i=e.btn;i&&(i["on".concat(n)]=function(){e.result(t,e),t.updateActiveActions()})}})},r.prototype.addAction=function(t,e){e===void 0&&(e={});var n=e.sync,i=this.actionbarEl();if(i){var o=t.icon,s=t.attributes,a=s===void 0?{}:s,c=document.createElement("span");c.className=this.classes.button,t.btn=c;for(var u in a)c.setAttribute(u,a[u]);typeof o=="string"?c.innerHTML=o:c.appendChild(o),i.appendChild(c)}n&&(this.actions.push(t),this.syncActions())},r.prototype.getActions=function(){return this.actions},r.prototype.selection=function(){return this.doc.getSelection()},r.prototype.exec=function(t,e){this.doc.execCommand(t,!1,e)},r.prototype.actionbarEl=function(){return this.actionbar},r.prototype.insertHTML=function(t,e){var n=e===void 0?{}:e,i=n.select,o=this,s=o.em,a=o.doc,c=o.el,u=a.getSelection();if(u&&u.rangeCount){var f=(0,Le.getComponentModel)(c)||s.getSelected(),g=a.createElement("div"),v=u.getRangeAt(0);v.deleteContents(),(0,B.isString)(t)?g.innerHTML=t:t&&g.appendChild(t),Array.prototype.slice.call(g.childNodes).forEach(function(_){v.insertNode(_)}),u.removeAllRanges(),u.addRange(v),c.focus(),i&&f&&(f.once("rte:disable",function(){var _=f.find("[".concat(U_,"]"))[0];_&&(s.setSelected(_),_.removeAttributes(U_))}),f.trigger("disable"))}},r}(),BX=VX,UX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wj=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},bj=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},HX=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},AS="".concat(e_.refresh," frame:scroll ").concat(Wi.I.update),zX="rte:enable",$X="rte:disable",WX="rte:custom",qX={enable:zX,disable:$X,custom:WX},GX=function(r){UX(t,r);function t(e){var n=r.call(this,e,"RichTextEditor",LX)||this;n.events=qX;var i=n.config,o=i.pStylePrefix;o&&(i.stylePrefix=o+i.stylePrefix),n.pfx=i.stylePrefix,n.actions=i.actions||[];var s=new rt.Kx;return n.model=s,s.on("change:currentView",n.__trgCustom,n),n.__dbdTrgCustom=(0,B.debounce)(function(){return n.__trgCustom()},0),n}return t.prototype.onLoad=function(){if((0,Le.hasWin)()){var e=this.config,n=e.pStylePrefix,i=e.custom,o=(0,st.a_)("div",{class:(0,st.cx)("".concat(n,"rte-toolbar"),!i&&"".concat(n,"one-bg ").concat(n,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,st.a_)("div")),(0,st.on)(o,"mousedown",function(s){return s.stopPropagation()})}},t.prototype.__trgCustom=function(){var e=this,n=e.model,i=e.em,o=e.events;i.trigger(o.custom,{enabled:!!n.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},t.prototype.destroy=function(){var e,n,i;(e=this.globalRte)===null||e===void 0||e.destroy(),(i=(n=this.customRte)===null||n===void 0?void 0:n.destroy)===null||i===void 0||i.call(n),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,st.YZ)(this.toolbar)},t.prototype.postRender=function(e){var n=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),n.getToolsEl().appendChild(this.toolbar)},t.prototype.initRte=function(e){var n=this.globalRte,i=this,o=i.em,s=i.pfx,a=i.actionbar,c=i.config,u=this.actions||HX([],c.actions,!0),f={actionbar:"".concat(s,"actionbar"),button:"".concat(s,"action"),active:"".concat(s,"active"),inactive:"".concat(s,"inactive"),disabled:"".concat(s,"disabled")};return n?(n.em=o,n.setEl(e)):(n=new BX(o,e,{classes:f,actions:u,actionbar:a,actionbarContainer:this.toolbar,module:this}),this.globalRte=n),n.actionbar&&(this.actionbar=n.actionbar),n.actions&&(this.actions=n.actions),n},t.prototype.add=function(e,n){var i;n===void 0&&(n={}),n.name=e,(i=this.globalRte)===null||i===void 0||i.addAction(n,{sync:!0})},t.prototype.get=function(e){var n,i;return(n=this.globalRte)===null||n===void 0||n.getActions().forEach(function(o){o.name==e&&(i=o)}),i},t.prototype.getAll=function(){var e;return((e=this.globalRte)===null||e===void 0?void 0:e.getActions())||[]},t.prototype.remove=function(e){var n,i=this.getAll(),o=this.get(e);if(o){var s=o.btn,a=i.indexOf(o);(n=s?.parentNode)===null||n===void 0||n.removeChild(s),i.splice(a,1)}return o},t.prototype.run=function(e){var n=this.globalRte,i=(0,B.isString)(e)?this.get(e):e;n&&i&&(i.result(n,i),n.updateActiveActions())},t.prototype.getToolbarEl=function(){return this.toolbar},t.prototype.updatePosition=function(){var e=this,n=e.em,i=e.toolbar,o="px",s=n.Canvas,a=i.style,c=s.getTargetToElementFixed(this.lastEl,i,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(u){var f=c[u];(0,Le.isDef)(f)&&(a[u]=(0,B.isString)(f)?f:(f||0)+o)})},t.prototype.enable=function(e,n){return wj(this,arguments,void 0,function(i,o,s){var a,c,u,f,g;return s===void 0&&(s={}),bj(this,function(v){switch(v.label){case 0:return this.lastEl=i.el,a=this,c=a.customRte,u=a.em,f=i.getChildrenContainer(),this.toolbar.style.display="",[4,c?c.enable(f,o):this.initRte(f).enable(s)];case 1:return g=v.sent(),u&&(setTimeout(this.updatePosition.bind(this),0),u.off(AS,this.updatePosition,this),u.on(AS,this.updatePosition,this),u.trigger("rte:enable",i,g)),this.model.set({currentView:i}),[2,g]}})})},t.prototype.getContent=function(e,n){return wj(this,void 0,void 0,function(){var i;return bj(this,function(o){switch(o.label){case 0:return i=this.customRte,i&&n&&(0,B.isFunction)(i.getContent)?[4,i.getContent(e.el,n)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,e.getChildrenContainer().innerHTML]}})})},t.prototype.hideToolbar=function(){var e=this.toolbar.style,n="-1000px";e.top=n,e.left=n,e.display="none"},t.prototype.disable=function(e,n,i){i===void 0&&(i={});var o=this.em,s=this.customRte,a=e.getChildrenContainer();s?s.disable(a,n):n&&n.disable(),this.hideToolbar(),o&&(o.off(AS,this.updatePosition,this),!i.fromMove&&o.trigger("rte:disable",e,n)),this.model.unset("currentView")},t}(ko),KX=GX,QX={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]},YX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),po=function(){return po=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},po.apply(this,arguments)},JX=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},Cj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},dA=function(r){YX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.getDefaults=function(){return(0,B.result)(this.prototype,"defaults")},t.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},t.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.em=n.em;var i=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||i).replace(/ /g,"-"));var s=this.get("property");!this.get("id")&&this.set("id",s),!o&&this.set("name",(0,Le.capitalize)(s).replace(/-/g," ")),this.on("change",this.__upTargets),t.callInit(this,e,n)},t.prototype.__getParentProp=function(){var e,n;return(n=(e=this.collection)===null||e===void 0?void 0:e.opts)===null||n===void 0?void 0:n.parentProp},t.prototype.__upTargets=function(e,n){var i,o=this;n===void 0&&(n={});var s=this.em,a=s.Styles,c=this.getName(),u=n.__clear,f=u?"":this.__getFullValue(n),g=this.__getParentProp(),v=this.changedAttributes(),_=(0,B.keys)(v).reduce(function(N,G){return N[G]=o.previous(G),N},{}),b=Cj(Cj([],(0,B.keys)(this.__getClearProps()),!0),["__p"],!1),C=(0,B.keys)(v),S=!n.__up&&!g&&(u||b.some(function(N){return C.indexOf(N)>=0})),j=this.get("onChange"),q={property:this,from:_,to:v,value:f,opts:n};a.__trgEv(a.events.propertyUpdate,q),j&&j(q),S&&this.__upTargetsStyle((i={},i[c]=f,i),n)},t.prototype.__upTargetsStyle=function(e,n){var i,o=(i=this.em)===null||i===void 0?void 0:i.get("StyleManager");o?.addStyleTargets(po(po({},e),{__p:!!n.avoidStore}),n)},t.prototype._up=function(e,n){n===void 0&&(n={}),n.noTarget&&(n.__up=!0);var i=n.partial,o=JX(n,["partial"]);return e.__p=!!(o.avoidStore||i),this.set(e,po(po({},o),{avoidStore:e.__p}))},t.prototype.up=function(e,n){n===void 0&&(n={}),this.set(e,po(po({},n),{__up:!0}))},t.prototype.init=function(){},t.prototype.getId=function(){return this.get("id")},t.prototype.getType=function(){return this.get("type")},t.prototype.getName=function(){return this.get("property")},t.prototype.getLabel=function(e){var n;e===void 0&&(e={});var i=e.locale,o=i===void 0?!0:i,s=this.getId(),a=this.get("name")||this.get("label");return o&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.properties.".concat(s)))||a},t.prototype.getValue=function(e){e===void 0&&(e={});var n=e.noDefault,i=this.get("value");return!this.hasValue()&&!n?this.getDefaultValue():i},t.prototype.hasValue=function(e){e===void 0&&(e={});var n=e.noParent,i=n&&this.getParentTarget(),o=this.get("value");return!(0,B.isUndefined)(o)&&o!==""&&!i},t.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},t.prototype.getStyle=function(e){var n;e===void 0&&(e={});var i=this.getName(),o=e.camelCase?(0,Le.camelCase)(i):i;return n={},n[o]=this.__getFullValue(e),n},t.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,B.isUndefined)(e)?this.get("defaults"):e)},t.prototype.upValue=function(e,n){n===void 0&&(n={});var i=e===null||e===""?this.__getClearProps():this.__parseValue(e,n);return this._up(i,n)},t.prototype.isVisible=function(){return!!this.get("visible")},t.prototype.clear=function(e){return e===void 0&&(e={}),this._up(this.__getClearProps(),po(po({},e),{__clear:!0})),this},t.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},t.prototype.getParent=function(){return this.__getParentProp()},t.prototype.isFull=function(){return!!this.get("full")},t.prototype.__parseValue=function(e,n){return this.parseValue(e,n)},t.prototype.__getClearProps=function(){return{value:""}},t.prototype.setValue=function(e,n,i){n===void 0&&(n=!0),i===void 0&&(i={});var o=this.parseValue(e),s=!n;!s&&this.set({value:void 0},{avoidStore:s,silent:!0}),this.set(o,po({avoidStore:s},i))},t.prototype.setValueFromInput=function(e,n,i){i===void 0&&(i={}),this.setValue(e,n,po(po({},i),{fromInput:1}))},t.prototype.parseValue=function(e,n){n===void 0&&(n={});var i={value:e},o="!important",s=this.get("functionName")||"";if((0,B.isString)(e)&&e.indexOf(o)!==-1&&(i.value=e.replace(o,"").trim(),i.important=!0),!s&&!n.complete)return i;var a=[],c="".concat(i.value).trim(),u=c.indexOf("(")+1,f=s||c.substring(0,u-1);if(f&&(i.functionName=f),!s||c.indexOf("".concat(s,"("))===0){var g=c.lastIndexOf(")");a.push(u),g>=0&&a.push(g),i.value=String.prototype.substring.apply(c,a)}if(n.numeric){var v=parseFloat(i.value);i.unit=i.value.replace(v,""),i.value=v}return i},t.prototype.__getFullValue=function(e){var n=e===void 0?{}:e,i=n.withDefault;return!this.hasValue()&&i?this.getDefaultValue():this.getFullValue()},t.prototype.getFullValue=function(e,n){n===void 0&&(n={});var i=this.get("functionName"),o=this.getDefaultValue(),s=(0,B.isUndefined)(e)?this.get("value"):e,a=!(0,B.isUndefined)(s)&&s!=="";if(s&&o&&s===o)return o;if(i&&a){var c=i==="url"?"'".concat(s.replace(/'|"/g,""),"'"):s;s="".concat(i,"(").concat(c,")")}return a&&this.get("important")&&!n.skipImportant&&(s="".concat(s," !important")),s||""},t.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},t.prototype.getParentTarget=function(){return this.get("parentTarget")||null},t.prototype.__parseFn=function(e){e===void 0&&(e="");var n=e.indexOf("(")+1,i=e.lastIndexOf(")");return{name:e.substring(0,n-1).trim(),value:String.prototype.substring.apply(e,[n,i>=0?i:void 0]).trim()}},t.prototype.__checkVisibility=function(e){var n=e.target,i=e.component,o=e.sectors,s=i||n;if(!s)return!1;var a=this.getId(),c=this.getName(),u=this.get("toRequire"),f=this.get("requires"),g=this.get("requiresParent"),v=s.get("unstylable"),_=s.get("stylable-require"),b=s.get("stylable");if((0,B.isArray)(b)&&(b=b.indexOf(c)>=0),(0,B.isArray)(v)&&(b=v.indexOf(c)<0),u&&(b=!n||_&&(_.indexOf(a)>=0||_.indexOf(c)>=0)),o&&f){var C=(0,B.keys)(f);o.forEach(function(N){N.getProperties().forEach(function(G){if((0,B.includes)(C,G.id)){var se=f[G.id];b=b&&(0,B.includes)(se,G.get("value"))}})})}if(g){var S=i&&i.parent(),j=S&&S.getEl();if(j){var q=(0,Le.hasWin)()?window.getComputedStyle(j):{};(0,B.each)(g,function(N,G){b=b&&q[G]&&(0,B.includes)(N,q[G])})}else b=!1}return!!b},t}(rt.Kx),or=dA;dA.callParentInit=function(r,t,e,n){n===void 0&&(n={}),r.prototype.initialize.apply(t,[e,po(po({},n),{skipInit:1})])};dA.callInit=function(r,t,e){e===void 0&&(e={}),!e.skipInit&&r.init(t,e)};var ZX=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),H_=function(){return H_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},H_.apply(this,arguments)},XX=function(r){ZX(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return{values:{}}},t.prototype.initialize=function(){var e=this.collection;this.prop=e?.prop},t.prototype.getId=function(){return this.cid},t.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},t.prototype.getValues=function(e){e===void 0&&(e={});var n=this.get("values");return e.camelCase?Object.keys(n).reduce(function(i,o){return i[(0,Le.camelCase)(o)]=n[o],i},{}):n},t.prototype.getLabel=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.getLayerLabel(this)},t.prototype.isSelected=function(){var e;return((e=this.prop)===null||e===void 0?void 0:e.getSelectedLayer())===this},t.prototype.select=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.selectLayer(this)},t.prototype.remove=function(){var e;return(e=this.prop)===null||e===void 0?void 0:e.removeLayer(this)},t.prototype.move=function(e){var n;return(n=this.prop)===null||n===void 0?void 0:n.moveLayer(this,e)},t.prototype.getStylePreview=function(e){var n;return e===void 0&&(e={}),(n=this.prop)===null||n===void 0?void 0:n.getStylePreview(this,e)},t.prototype.hasPreview=function(){var e;return!!(!((e=this.prop)===null||e===void 0)&&e.get("preview"))},t.prototype.upValues=function(e){return e===void 0&&(e={}),this.set("values",H_(H_({},this.getValues()),e))},t}(rt.Kx),eee=XX,tee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),oL=function(r){tee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initialize=function(e,n){n===void 0&&(n={}),this.prop=n.prop},t}(rt.pM),nee=oL;oL.prototype.model=eee;var ree=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ef=function(){return ef=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ef.apply(this,arguments)},xj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},sL=function(r){return r==="integer"||r==="number"},iee=function(r){ree(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return ef(ef({},or.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},t.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),or.callParentInit(or,this,e,n);var i=this.em,o=new hA(this.get("properties")||[],{em:i,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),or.callInit(this,e,n)},Object.defineProperty(t.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),t.prototype.getProperties=function(){return xj([],this.get("properties").models,!0)},t.prototype.getProperty=function(e){return this.properties.filter(function(n){return n.getId()===e||n.getName()===e})[0]},t.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},t.prototype.isDetached=function(){return!!this.get("detached")},t.prototype.getValues=function(e){var n=e===void 0?{}:e,i=n.byName;return this.getProperties().reduce(function(o,s){var a=i?s.getName():s.getId();return o[a]="".concat(s.__getFullValue()),o},{})},t.prototype.getSeparator=function(){return this.getSplitSeparator()},t.prototype.getJoin=function(){return this.__getJoin()},t.prototype.getStyleFromProps=function(e){var n;e===void 0&&(e={});var i=this.getName(),o=this.__getJoin(),s=this.get("toStyle"),a=this.getValues(),c={};if(s)c=s(a,{join:o,name:i,property:this});else if(a=this.getValues({byName:!0}),this.isDetached())c=a;else{var u=this.getProperties().map(function(f){return f.__getFullValue({withDefault:1})}).filter(Boolean).join(o);c=(n={},n[i]=u,n)}return this.isDetached()?c[i]="":(c[i]=c[i]||"",c=ef(ef({},c),this.getProperties().reduce(function(f,g){return f[g.getName()]="",f},{}))),e.camelCase?Object.keys(c).reduce(function(f,g){return f[(0,Le.camelCase)(g)]=c[g],f},{}):c},t.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},t.prototype.__upProperties=function(e,n){if(n===void 0&&(n={}),!(n.__up||n.__clearIn)){var i=this.__getParentProp();if(i)return i.__upProperties(this,n);this.__upTargetsStyleProps(n,e)}},t.prototype.__upTargetsStyleProps=function(e,n){var i;e===void 0&&(e={});var o=this.getStyleFromProps();if(this.isDetached()&&n){var s=n.getName();o=(i={},i[s]=o[s],i)}this.__upTargetsStyle(o,e)},t.prototype._up=function(e,n){return n===void 0&&(n={}),this.__setProperties(this.__getSplitValue(e.value),n),or.prototype._up.call(this,e,n),this},t.prototype.getStyle=function(e){return this.getStyleFromProps(e)},t.prototype.__getFullValue=function(e){if(e===void 0&&(e={}),this.isDetached()||e.__clear)return"";var n=this.getStyleFromProps()[this.getName()]||"";return RS(n)},t.prototype.__getJoin=function(){var e=this.get("join");return(0,B.isString)(e)?e:this.get("separator")},t.prototype.__styleHasProps=function(e){e===void 0&&(e={});var n=this.getName(),i=this.getProperties(),o=i.map(function(a){return a.getName()}),s=xj([n],o,!0);return s.some(function(a){return!(0,B.isUndefined)(e[a])&&e[a]!==""})},t.prototype.__splitValue=function(e,n){return RS(e).split(n).map(function(i){return i.trim()}).filter(Boolean)},t.prototype.__splitStyleName=function(e,n,i){return this.__splitValue(e[n]||"",i)},t.prototype.__getSplitValue=function(e,n){e===void 0&&(e="");var i=n===void 0?{}:n,o=i.byName,s=this.getProperties(),a=s.length===4&&s.every(function(f){return sL(f.getType())}),c=this.__splitValue(e,this.getSplitSeparator()),u={};return s.forEach(function(f,g){var v=c[g],_=(0,B.isUndefined)(v)?"":v;if(a){var b=c.length;_=c[g]||c[g%b+(b!=1&&b%2?1:0)]||_}var C=o?f.getName():f.getId();u[C]=_||""}),u},t.prototype.__getPropsFromStyle=function(e,n){if(e===void 0&&(e={}),n===void 0&&(n={}),!this.__styleHasProps(e))return null;var i=n.byName,o=this.getName(),s=this.getProperties(),a=this.getSplitSeparator(),c=this.get("fromStyle"),u=c?c(e,{property:this,name:o,separator:a}):{};return c||(u=this.__getSplitValue(e[o]||"",{byName:i}),s.forEach(function(f){var g=e[f.getName()],v=i?f.getName():f.getId();!(0,B.isUndefined)(g)&&g!==""&&(u[v]=g)})),u},t.prototype.__setProperties=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.getProperties().forEach(function(o){var s=e[o.getId()];o.__getFullValue()!==s&&o.upValue(s,n)});var i=(0,B.keys)(e).map(function(o){return e[o]}).join(" ");this.set("value",i,{silent:!0})},t.prototype.clear=function(){var e=this;return this.getProperties().map(function(n){return n.clear({__clearIn:!e.isDetached()})}),or.prototype.clear.call(this),this},t.prototype.hasValue=function(e){return this.getProperties().some(function(n){return n.hasValue(e)})},t.prototype.getFullValue=function(){return this.__getFullValue()},t.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},t}(or),Gd=iee,oee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Oo=function(){return Oo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Oo.apply(this,arguments)},see=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},aee=/,(?![^\(]*\))/,lee=/\s(?![^(]*\))/,cee=function(r){oee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return Oo(Oo({},Gd.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},t.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),Gd.callParentInit(Gd,this,e,n);var i=this.get("layers"),o=new nee(i,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),Gd.callInit(this,e,n)},Object.defineProperty(t.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),t.prototype.getLayers=function(){return this.layers.models},t.prototype.hasLayers=function(){return this.getLayers().length>0},t.prototype.getLayer=function(e){return e===void 0&&(e=0),this.layers.at(e)||void 0},t.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},t.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},t.prototype.selectLayerAt=function(e){e===void 0&&(e=0);var n=this.getLayer(e);return n&&this.selectLayer(n)},t.prototype.moveLayer=function(e,n){n===void 0&&(n=0);var i=this.layers,o=e?e.getIndex():-1;o>=0&&(0,B.isNumber)(n)&&n>=0&&n<i.length&&o!==n&&(this.removeLayer(e),i.add(e,{at:n}))},t.prototype.addLayer=function(e,n){e===void 0&&(e={}),n===void 0&&(n={});var i={};this.getProperties().forEach(function(s){var a=s.getId(),c=e[a];i[a]=(0,B.isUndefined)(c)?s.getDefaultValue():c});var o=this.layers.push({values:i},n);return o},t.prototype.removeLayer=function(e){return this.layers.remove(e)},t.prototype.removeLayerAt=function(e){e===void 0&&(e=0);var n=this.getLayer(e);return n?this.removeLayer(n):null},t.prototype.getLayerLabel=function(e){var n="";if(e){var i=this.get("layerLabel"),o=e.getValues(),s=e.getIndex();if(i)n=i(e,{index:s,values:o,property:this});else{var a=[];this.getProperties().map(function(c){a.push(o[c.getId()])}),n=a.filter(Boolean).join(" ")}}return n},t.prototype.getStyleFromLayer=function(e,n){var i;n===void 0&&(n={});var o=this.__getJoin(),s=this.__getJoinLayers(),a=this.get("toStyle"),c=this.getName(),u=e.getValues(),f;if(a)f=a(u,{join:o,joinLayers:s,name:c,layer:e,property:this});else{var g=this.getProperties().map(function(v){var _=v.getName(),b=u[v.getId()],C=(0,B.isUndefined)(b)?v.getDefaultValue():b;if(n.number&&sL(v.getType())){var S=v.parseValue(b,n.number);C="".concat(S.value).concat(S.unit)}return{name:_,value:C}});f=this.isDetached()?g.reduce(function(v,_){return v[_.name]=_.value,v},{}):(i={},i[this.getName()]=g.map(function(v){return v.value}).join(o),i)}return n.camelCase?Object.keys(f).reduce(function(v,_){return v[(0,Le.camelCase)(_)]=f[_],v},{}):f},t.prototype.getStylePreview=function(e,n){n===void 0&&(n={});var i={},o=this.get("preview");return o&&(i=this.getStyleFromLayer(e,n)),i},t.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,B.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},t.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},t.prototype.__upProperties=function(e,n){var i;n===void 0&&(n={});var o=this.getSelectedLayer();o&&(o.upValues((i={},i[e.getId()]=e.__getFullValue(),i)),!n.__up&&this.__upTargetsStyleProps(n))},t.prototype.__upLayers=function(e,n,i){this.__upTargetsStyleProps(i||n)},t.prototype.__upTargets=function(e,n){if(n===void 0&&(n={}),!n.__select)return or.prototype.__upTargets.call(this,e,n)},t.prototype.__upTargetsStyleProps=function(e){e===void 0&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(e),e)},t.prototype.__upTargetsStyle=function(e,n){return or.prototype.__upTargetsStyle.call(this,e,n)},t.prototype.__upSelected=function(e,n){var i=e===void 0?{}:e,o=i.noEvent;n===void 0&&(n={});var s=this.em.Styles,a=this.getSelectedLayer(),c=a?.getValues();c&&this.getProperties().forEach(function(u){var f,g=(f=c[u.getId()])!==null&&f!==void 0?f:"";u.__getFullValue()!==g&&u.upValue(g,Oo(Oo({},n),{__up:!0}))}),!o&&s.__trgEv(s.events.layerSelect,{property:this})},t.prototype._up=function(e,n){n===void 0&&(n={});var i=e.__layers,o=i===void 0?[]:i,s=see(e,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},n),or.prototype._up.call(this,s,n),this},t.prototype.__setLayers=function(e,n){e===void 0&&(e=[]),n===void 0&&(n={});var i=this.layers,o=e.map(function(s){return{values:s}});i.length===o.length?o.map(function(s,a){var c;return(c=i.at(a))===null||c===void 0?void 0:c.upValues(s.values)}):i.reset(o),this.set({isEmptyValue:!!n.isEmptyValue}),this.__upSelected({noEvent:!0})},t.prototype.__parseValue=function(e){var n=this,i=this.parseValue(e);return i.__layers=e.split(aee).map(function(o){return o.trim()}).map(function(o){return n.__parseLayer(o)}).filter(Boolean),i},t.prototype.__parseLayer=function(e){var n=this.get("parseLayer"),i=e.split(lee),o=this.getProperties();return n?n({value:e,values:i}):o.reduce(function(s,a,c){var u=i[c];return s[a.getId()]=(0,B.isUndefined)(u)?a.getDefaultValue():u,s},{})},t.prototype.__getLayersFromStyle=function(e){var n=this;if(e===void 0&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var i=this.getName(),o=this.getProperties(),s=this.getLayerSeparator(),a=this.attributes.fromStyle,c=a?a(e,{property:this,name:i,separatorLayers:s}):[];if(!a){var u=this.__splitStyleName(e,i,s).map(function(f){return f.split(n.getSplitSeparator())}).map(function(f){var g={};return o.forEach(function(v,_){var b=f[_];g[v.getId()]=(0,B.isUndefined)(b)?v.getDefaultValue():b}),g});o.forEach(function(f){var g=f.getId();n.__splitStyleName(e,f.getName(),s).map(function(v){var _;return _={},_[g]=v||f.getDefaultValue(),_}).forEach(function(v,_){u[_]=u[_]?Oo(Oo({},u[_]),v):v})}),c=u}return(0,B.isArray)(c)?c:[c]},t.prototype.getStyle=function(e){return e===void 0&&(e={}),this.getStyleFromLayers(e)},t.prototype.getStyleFromLayers=function(e){var n=this;e===void 0&&(e={});var i={},o=this.getName(),s=this.getLayers(),a=this.getProperties(),c=s.map(function(f){return n.getStyleFromLayer(f,e)});if(c.forEach(function(f){(0,B.keys)(f).map(function(g){i[g]||(i[g]=[]),i[g].push(f[g])})}),(0,B.keys)(i).map(function(f){i[f]=i[f].join(n.__getJoinLayers())}),this.isDetached())i[o]="",!s.length&&a.map(function(f){i[f.getName()]=""});else{var u=a.reduce(function(f,g){return f[g.getName()]="",f},{});i[o]=i[o]||"",i=Oo(Oo({},i),u)}return Oo(Oo({},i),e.__clear?{}:this.getEmptyValueStyle())},t.prototype.isEmptyValueStyle=function(e){e===void 0&&(e={});var n=this.getEmptyValueStyle({force:!0}),i=(0,B.keys)(n);return!!i.length&&i.every(function(o){return n[o]===e[o]})},t.prototype.getEmptyValueStyle=function(e){e===void 0&&(e={});var n=this.attributes.emptyValue;if(n&&(!this.hasLayers()||e.force)){var i=this.getName(),o=this.getProperties(),s=(0,B.isString)(n)?n:n({property:this});if((0,B.isString)(s)){var a={};return this.isDetached()?o.map(function(c){a[c.getName()]=s}):a[i]=s,a}else return s}else return{}},t.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),n=this.get("layerSeparator");return e||((0,B.isString)(n)?n:e)},t.prototype.__getFullValue=function(){if(this.get("detached"))return"";var e=this.getStyleFromLayers();return RS(e[this.getName()])},t.prototype.hasValue=function(e){e===void 0&&(e={});var n=e.noParent,i=n&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!i},t.prototype.clear=function(e){return e===void 0&&(e={}),this.layers.reset(),this.__upTargetsStyleProps(Oo(Oo({},e),{__clear:!0})),or.prototype.clear.call(this),this},t.prototype.__canClearProp=function(){return!1},t.prototype.__getLayers=function(){return this.layers},t}(Gd),uee=cee,dee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),z_=function(){return z_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},z_.apply(this,arguments)},fee=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},hee=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},TS="data-clear-style",pee=function(r){dee(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this;(0,B.bindAll)(n,"__change","__updateStyle");var i=e.config||{},o=i.em;n.config=i,n.em=o,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.__destroyFn=n.destroy?n.destroy.bind(n):function(){};var s=n.model;s.view=n,n.onValueChange=(0,B.debounce)(n.onValueChange.bind(n),10),n.updateStatus=(0,B.debounce)(n.updateStatus.bind(n),0),n.listenTo(s,"destroy remove",n.remove),n.listenTo(s,"change:visible",n.updateVisibility),n.listenTo(s,"change:name change:className change:full",n.render),n.listenTo(s,"change:value",n.onValueChange),n.listenTo(s,"change:parentTarget",n.updateStatus),n.listenTo(o,"change:device",n.onValueChange);var a=n.init&&n.init.bind(n);return a&&a(),n}return t.prototype.events=function(){var e;return e={change:"inputValueChanged"},e["click [".concat(TS,"]")]="clear",e},t.prototype.template=function(e){var n=this,i=n.pfx,o=n.ppfx;return`
      <div class="`.concat(i,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},t.prototype.templateLabel=function(e){var n=this,i=n.pfx,o=n.em,s=e.parent,a=e.attributes,c=a.icon,u=c===void 0?"":c,f=a.info,g=f===void 0?"":f,v=o?.getConfig().icons,_=v?.close||"";return`
      <span class="`.concat(i,"icon ").concat(u,'" title="').concat(g,`">
        `).concat(e.getLabel(),`
      </span>
      `).concat(s?"":'<div class="'.concat(i,'clear" style="display: none" ').concat(TS,">").concat(_,"</div>"),`
    `)},t.prototype.templateInput=function(e){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(e.getDefaultValue(),`"/>
      </div>
    `)},t.prototype.remove=function(){var e=this;return rt.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(n){return e[n]=null}),this.__destroyFn(this._getClbOpts()),this},t.prototype.updateStatus=function(){var e,n=this,i=n.model,o=n.pfx,s=n.ppfx,a=n.config,c="".concat(s,"four-color"),u="".concat(s,"color-warn"),f=this.$el.children(".".concat(o,"label")),g=this.getClearEl(),v=g?g.style:{};f.removeClass("".concat(c," ").concat(u)),v.display="none",i.hasValue({noParent:!0})&&a.highlightChanged?(f.addClass(c),a.clearProperties&&(v.display="")):i.hasValue()&&a.highlightComputed&&f.addClass(u),(e=this.parent)===null||e===void 0||e.updateStatus()},t.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},t.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(TS,"]"))),this.clearEl},t.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),!this.emit&&this.model.upValue(e.target.value)},t.prototype.onValueChange=function(e,n,i){i===void 0&&(i={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},t.prototype.setValue=function(e){var n=this.model,i=(0,B.isUndefined)(e)||e===""?n.getDefaultValue():e;if(this.update)return this.__update(i);this.__setValueInput(i)},t.prototype.__setValueInput=function(e){var n=this.getInputEl();n&&(n.value=e)},t.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},t.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},t.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},t.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},t.prototype.__update=function(e){var n=this.update&&this.update.bind(this);n&&n(z_(z_({},this._getClbOpts()),{value:e}))},t.prototype.__change=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.emit&&this.emit.bind(this);i&&i.apply(void 0,hee([this._getClbOpts()],e,!1))},t.prototype.__updateStyle=function(e,n){n===void 0&&(n={});var i=n.complete,o=n.partial,s=fee(n,["complete","partial"]),a=this.model,c=i!==!1&&o!==!0;(0,Le.isObject)(e)?a.__upTargetsStyle(e,{avoidStore:!c}):a.upValue(e,{partial:!c})},t.prototype._getClbOpts=function(){var e=this,n=e.model,i=e.el,o=e.createdEl;return{el:i,createdEl:o,property:n,props:n.attributes,change:this.__change,updateStyle:this.__updateStyle}},t.prototype.render=function(){this.clearCached();var e=this,n=e.pfx,i=e.model,o=e.el,s=e.$el,a=i.getName(),c=i.getType(),u=i.get("className")||"",f="".concat(n,"property"),g=c==="number"?"".concat(n).concat(c," ").concat(n,"integer"):"".concat(n).concat(c);this.createdEl&&this.__destroyFn(this._getClbOpts()),s.empty().append(this.template(i)),s.find("[data-sm-label]").append(this.templateLabel(i));var v=this.create&&this.create.bind(this);this.createdEl=v&&v(this._getClbOpts()),s.find("[data-sm-fields]").append(this.createdEl||this.templateInput(i)),o.className="".concat(f," ").concat(g," ").concat(f,"__").concat(a," ").concat(u).trim(),o.className+=i.isFull()?" ".concat(f,"--full"):"";var _=this.onRender&&this.onRender.bind(this);return _&&_(),this.setValue(i.getValue()),this},t.prototype.onRender=function(){},t}(rt.Ss),Ja=pee,gee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mee=function(r){gee(t,r);function t(e){var n=r.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||"",n.properties=[],n.parent=e.parent;var i=n.collection;return n.listenTo(i,"add",n.addTo),n.listenTo(i,"reset",n.render),n}return t.prototype.addTo=function(e,n,i){this.add(e,null,i)},t.prototype.add=function(e,n,i){i===void 0&&(i={});var o=this,s=o.parent,a=o.config,c=n||this.el,u=new e.typeView({model:e,config:a});s&&(u.parent=s),u.render();var f=u.el;this.properties.push(u),(0,st.Sc)(c,f,i.at)},t.prototype.remove=function(){return rt.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},t.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},t.prototype.render=function(){var e=this,n=this,i=n.$el,o=n.pfx;this.clearItems();var s=document.createDocumentFragment();return this.collection.forEach(function(a){return e.add(a,s)}),i.empty(),i.append(s),i.attr("class","".concat(o,"properties")),this},t}(rt.Ss),fA=mee,vee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$_=function(){return $_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$_.apply(this,arguments)},yee=function(r){vee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.templateInput=function(){var e=this.pfx;return`
      <div class="`.concat(e,"field ").concat(e,`composite">
        <span id="`).concat(e,`input-holder"></span>
      </div>
    `)},t.prototype.remove=function(){var e;return(e=this.props)===null||e===void 0||e.remove(),Ja.prototype.remove.apply(this,arguments),this},t.prototype.onValueChange=function(){},t.prototype.onRender=function(){var e=this.pfx,n=this.model,i=n.get("properties");if(i.length&&!this.props){var o=n.isDetached(),s=new fA({config:$_($_({},this.config),{highlightComputed:o,highlightChanged:o}),collection:i,parent:this});s.render(),this.$el.find("#".concat(e,"input-holder")).append(s.el),this.props=s}},t.prototype.clearCached=function(){Ja.prototype.clearCached.apply(this,arguments),delete this.props},t}(Ja),jp=yee,_ee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wee=function(r){_ee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},t.prototype.template=function(){var e=this,n=e.pfx,i=e.ppfx,o=e.em,s=o?.getConfig().icons,a=s?.close||"",c=s?.move||"";return`
      <div class="`.concat(n,`label-wrp">
        <div id="`).concat(n,'move" class="').concat(i,`no-touch-actions" data-move-layer>
          `).concat(c,`
        </div>
        <div id="`).concat(n,`label" data-label></div>
        <div id="`).concat(n,'preview-box" class="').concat(n,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(n,'preview" class="').concat(n,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(n,'close-layer" class="').concat(n,`btn-close" data-close-layer>
          `).concat(a,`
        </div>
      </div>
      <div id="`).concat(n,`inputs" data-properties></div>
    `)},t.prototype.initialize=function(e){e===void 0&&(e={});var n=this.model,i=e.config||{};this.em=i.em,this.config=i,this.sorter=e.sorter,this.pfx=i.stylePrefix||"",this.ppfx=i.pStylePrefix||"",this.propertyView=e.propertyView;var o=this.propertyView.model;this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),n.view=this,n.set({droppable:0,draggable:1}),this.$el.data("model",n)},t.prototype.initSorter=function(){var e;(e=this.sorter)===null||e===void 0||e.startSort(this.el)},t.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},t.prototype.select=function(){this.model.select()},t.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},t.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},t.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},t.prototype.updateLabel=function(){var e=this.model,n=e.getLabel();if(this.getLabelEl().innerHTML=n,e.hasPreview()){var i=this.getPreviewEl(),o=e.getStylePreview({number:{min:-3,max:3}}),s=(0,B.keys)(o).map(function(a){return"".concat(a,":").concat(o[a])}).join(";");i.setAttribute("style",s)}},t.prototype.updateVisibility=function(){var e,n=this,i=n.pfx,o=n.model,s=n.propertyView,a=this.getPropertiesWrapper(),c=o.isSelected();a.style.display=c?"":"none",this.$el[c?"addClass":"removeClass"]("".concat(i,"active")),c&&a.appendChild((e=s.props)===null||e===void 0?void 0:e.el)},t.prototype.render=function(){var e=this,n=e.el,i=e.pfx,o=e.model;return n.innerHTML=this.template(),n.className="".concat(i,"layer"),o.hasPreview()&&(n.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},t}(rt.Ss),bee=wee,Cee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xee=function(r){Cee(t,r);function t(e){var n=r.call(this,e)||this,i=n.collection,o=e.config||{},s=o.em,a=o.stylePrefix||"",c=o.pStylePrefix||"";n.config=o,n.pfx=a,n.ppfx=c,n.propertyView=e.propertyView,n.className="".concat(a,"layers ").concat(c,"field"),n.listenTo(i,"add",n.addTo),n.listenTo(i,"reset",n.reset),n.items=[];var u=s?.Utils;return n.sorter=u?new u.Sorter({container:n.el,ignoreViewChildren:1,containerSel:".".concat(a,"layers"),itemSel:".".concat(a,"layer"),pfx:o.pStylePrefix,em:s}):"",i.view=n,n.$el.data("model",i),n.$el.data("collection",i),n}return t.prototype.addTo=function(e){var n=this.collection.indexOf(e);this.addToCollection(e,null,n)},t.prototype.addToCollection=function(e,n,i){var o=n||null,s=this,a=s.propertyView,c=s.config,u=s.sorter,f=s.$el,g=new bee({model:e,config:c,sorter:u,propertyView:a}),v=g.render().el;if(this.items.push(g),o)o.appendChild(v);else if(typeof i<"u"){var _="before";f.children().length===i&&(i--,_="after"),i<0?f.append(v):f.children().eq(i)[_](v)}else f.append(v);return v},t.prototype.reset=function(e,n){this.clearItems(),this.render()},t.prototype.remove=function(){return this.clearItems(),rt.Ss.prototype.remove.apply(this,arguments),this},t.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},t.prototype.render=function(){var e=this,n=this,i=n.$el,o=n.sorter,s=document.createDocumentFragment();return i.empty(),this.collection.forEach(function(a){return e.addToCollection(a,s)}),i.append(s),i.attr("class",this.className),o&&(o.plh=null),this},t}(rt.Ss),Eee=xee,See=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tf=function(){return tf=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tf.apply(this,arguments)},Aee=function(r){See(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return tf(tf({},jp.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},t.prototype.templateInput=function(){var e=this,n=e.pfx,i=e.em,o=i?.getConfig().icons,s=o?.plus||"+";return`
      <div class="`.concat(n,"field ").concat(n,`stack">
        <button type="button" id="`).concat(n,`add" data-add-layer>
          `).concat(s,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},t.prototype.init=function(){var e=this.model;this.listenTo(e.layers,"change reset",this.updateStatus),this.listenTo(e,"change:isEmptyValue",this.updateStatus)},t.prototype.addLayer=function(){this.model.addLayer({},{at:0})},t.prototype.setValue=function(){},t.prototype.remove=function(){var e;return(e=this.layersView)===null||e===void 0||e.remove(),jp.prototype.remove.apply(this,arguments),this},t.prototype.clearCached=function(){jp.prototype.clearCached.apply(this,arguments),delete this.layersView},t.prototype.onRender=function(){var e=this,n=e.model,i=e.el,o=e.config,s=n.get("properties");if(s.length&&!this.props){var a=new fA({config:tf(tf({},o),{highlightComputed:!1,highlightChanged:!1}),collection:s,parent:this});a.render();var c=new Eee({collection:n.layers,config:o,propertyView:this});c.render();var u=i.querySelector("[data-layers-wrapper]");u.appendChild(c.el),this.props=a,this.layersView=c}},t}(jp),Tee=Aee,Oee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),W_=function(){return W_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},W_.apply(this,arguments)},Mee=function(r){Oee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return W_(W_({},Ja.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},t.prototype.templateInput=function(){var e,n=this,i=n.pfx,o=n.em,s=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,a=s?.close;return`
      <div class="`.concat(i,"field ").concat(i,`file">
        <div id='`).concat(i,`input-holder'>
          <div class="`).concat(i,`btn-c">
            <button class="`).concat(i,'btn" id="').concat(i,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(i,'preview-box" class="').concat(i,`preview-file" data-preview-box>
          <div id="`).concat(i,'preview-file" class="').concat(i,`preview-file-cnt" data-preview></div>
          <div id="`).concat(i,'close" class="').concat(i,'preview-file-close" data-clear-asset>').concat(a,`</div>
        </div>
      </div>
    `)},t.prototype.__setValueInput=function(e){var n=this,i=n.model,o=n.el,s=i.getDefaultValue(),a=o.querySelector("[data-preview-box]"),c=o.querySelector("[data-preview]");a.style.display=!e||e===s?"none":"",c.style.backgroundImage=e||i.getDefaultValue()},t.prototype.openAssetManager=function(){var e=this,n,i=(n=this.em)===null||n===void 0?void 0:n.Assets;i?.open({select:function(o,s){var a=(0,B.isString)(o)?o:o.get("src");e.model.upValue(a,{partial:!s}),s&&i.close()},types:["image"],accept:"image/*"})},t}(Ja),Pee=Mee,Iee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Dee=function(r){Iee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.templateInput=function(e){return""},t.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},t.prototype.setValue=function(e){},t.prototype.onRender=function(){var e=this,n=e.ppfx,i=e.model,o=e.el;if(!this.inputInst){var s=i.input;s.ppfx=n,s.render();var a=o.querySelector(".".concat(n,"fields"));a.appendChild(s.el),this.input=s.inputEl.get(0),this.inputInst=s}},t.prototype.clearCached=function(){Ja.prototype.clearCached.apply(this,arguments),this.inputInst=null},t}(Ja),Ya=Dee,kee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ree=function(r){kee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.setValue=function(e){var n;(n=this.inputInst)===null||n===void 0||n.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},t.prototype.remove=function(){var e=this;Ya.prototype.remove.apply(this,arguments);var n=this.inputInst;return n&&n.remove&&n.remove(),["inputInst","$color"].forEach(function(i){return e[i]=null}),this},t.prototype.__handleChange=function(e,n){this.model.upValue(e,{partial:n})},t.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var n=this,i=n.ppfx,o=n.model,s=n.em,a=n.el,c=new IF({target:s,model:o,ppfx:i,onChange:this.__handleChange}),u=c.render();a.querySelector(".".concat(i,"fields")).appendChild(u.el),this.input=(e=u.inputEl)===null||e===void 0?void 0:e.get(0),this.inputInst=u}},t}(Ya),Nee=Ree,jee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),q_=function(){return q_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},q_.apply(this,arguments)},Ej=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},Fee=function(r){jee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return q_(q_({},or.getDefaults()),{options:[],full:0})},t.prototype.getOptions=function(){var e=this.attributes,n=e.options,i=e.list;return(n&&n.length?n:i)||[]},t.prototype.getOption=function(e){var n=this,i=(0,Le.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(o){return n.getOptionId(o)===i})[0]||null},t.prototype.setOptions=function(e){return e===void 0&&(e=[]),this.set("options",e),this},t.prototype.addOption=function(e){if(e){var n=this.getOptions();this.setOptions(Ej(Ej([],n,!0),[e],!1))}return this},t.prototype.getOptionId=function(e){return(0,Le.isDef)(e.id)?e.id:e.value},t.prototype.getOptionLabel=function(e,n){var i;n===void 0&&(n={});var o=n.locale,s=o===void 0?!0:o,a=((0,B.isString)(e)?this.getOption(e):e)||{},c=this.getOptionId(a),u=a.label||a.name||c,f=n.property||this.getId();return s&&((i=this.em)===null||i===void 0?void 0:i.t("styleManager.options.".concat(f,".").concat(c)))||u},t.prototype.initialize=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];or.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},t.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},t}(or),YS=Fee,Lee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vee=function(r){Lee(t,r);function t(e){var n=r.call(this,e)||this;return n.listenTo(n.model,"change:options",n.updateOptions),n}return t.prototype.templateInput=function(){var e=this,n=e.pfx,i=e.ppfx;return`
      <div class="`.concat(i,"field ").concat(i,`select">
        <span id="`).concat(n,`input-holder"></span>
        <div class="`).concat(i,`sel-arrow">
          <div class="`).concat(i,`d-s-arrow"></div>
        </div>
      </div>
    `)},t.prototype.updateOptions=function(){delete this.input,this.onRender()},t.prototype.onRender=function(){var e=this.pfx,n=this.model,i=n.getOptions();if(!this.input){var o=[];i.forEach(function(a){var c=n.getOptionId(a),u=n.getOptionLabel(c),f=a.style?a.style.replace(/"/g,"&quot;"):"",g=f?'style="'.concat(f,'"'):"",v=c.replace(/"/g,"&quot;");o.push('<option value="'.concat(v,'" ').concat(g,">").concat(u,"</option>"))});var s=this.el.querySelector("#".concat(e,"input-holder"));s.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=s.firstChild}},t.prototype.__setValueInput=function(e){var n=this.model,i=this.getInputEl(),o=n.getOptions()[0],s=o?n.getOptionId(o):"";i&&(i.value=e||s)},t}(Ja),aL=Vee,Bee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),G_=function(){return G_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},G_.apply(this,arguments)},Uee=function(r){Bee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return G_(G_({},YS.getDefaults()),{full:1})},t}(YS),Hee=Uee,zee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$ee=function(r){zee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},t.prototype.onRender=function(){var e=this,n=e.pfx,i=e.ppfx,o=this.model,s="".concat(i,"radio-item-label"),a=o.getName(),c=o.getOptions(),u="".concat(n,"radio ").concat(n,"radio-").concat(a),f=o.cid;if(!this.input){var g=[];c.forEach(function(_){var b=_.className?"".concat(_.className," ").concat(n,"icon ").concat(s):"",C=o.getOptionId(_),S="".concat(a,"-").concat(C,"-").concat(f),j=b?"":o.getOptionLabel(C),q=_.title?'title="'.concat(_.title,'"'):"",N=o.getValue()===C?"checked":"";g.push(`
          <div class="`.concat(i,`radio-item">
            <input type="radio" class="`).concat(u,'" id="').concat(S,'" name="').concat(a,"-").concat(f,'" value="').concat(C,'" ').concat(N,`/>
            <label class="`).concat(b||s,'" ').concat(q,' for="').concat(S,'">').concat(j,`</label>
          </div>
        `))});var v=this.el.querySelector(".".concat(i,"field"));v.innerHTML='<div class="'.concat(i,'radio-items">').concat(g.join(""),"</div>"),this.input=v.firstChild}},t.prototype.__setValueInput=function(e){var n,i=this.model,o=e||i.getDefaultValue(),s=(n=this.getInputEl())===null||n===void 0?void 0:n.querySelector('[value="'.concat(o,'"]'));s&&(s.checked=!0)},t}(aL),Wee=$ee,qee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eu=function(){return eu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},eu.apply(this,arguments)},Gee=function(r){qee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return eu(eu({},or.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},t.prototype.getUnits=function(){return this.get("units")||[]},t.prototype.getUnit=function(){return this.get("unit")},t.prototype.getMin=function(){return this.get("min")},t.prototype.getMax=function(){return this.get("max")},t.prototype.getStep=function(){return this.get("step")},t.prototype.upUnit=function(e,n){return n===void 0&&(n={}),this._up({unit:e},n)},t.prototype.initialize=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),or.callParentInit(or,this,e,n);var i=this.get("unit"),o=this.getUnits();this.input=(0,Le.hasWin)()?new kF({model:this}):void 0,o.length&&!i&&this.set("unit",o[0],{silent:!0}),or.callInit(this,e,n)},t.prototype.__getClearProps=function(){return eu(eu({},or.prototype.__getClearProps()),{unit:""})},t.prototype.parseValue=function(e,n){n===void 0&&(n={});var i=or.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(i.value,eu({deepCheck:1},n)),s=o.value,a=o.unit;return i.value=s,i.unit=a,i},t.prototype.getFullValue=function(){var e=this.get("value"),n=this.get("unit"),i=(0,B.isUndefined)(e)?"":"".concat(e),o=!(0,B.isUndefined)(n)&&i?n:"",s="".concat(i).concat(o);return or.prototype.getFullValue.apply(this,[s])},t}(or),K_=Gee,Kee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q_=function(){return Q_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Q_.apply(this,arguments)},Qee=function(r){Kee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.defaults=function(){return Q_(Q_({},K_.getDefaults()),{showInput:1})},t}(K_),Yee=Qee,Jee=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Y_=function(){return Y_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Y_.apply(this,arguments)},Zee=function(r){Jee(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.events=function(){return Y_(Y_({},Ya.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},t.prototype.templateInput=function(e){var n=this.ppfx;return`
      <div class="`.concat(n,"field ").concat(n,`field-range">
        <input type="range" min="`).concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),`"/>
      </div>
    `)},t.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},t.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},t.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},t.prototype.setValue=function(e){var n=this.model,i=n.parseValue(e);this.getSliderEl().value=e===""?n.getDefaultValue():parseFloat(i.value),Ya.prototype.setValue.apply(this,arguments)},t.prototype.onRender=function(){Ya.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},t.prototype.clearCached=function(){Ya.prototype.clearCached.apply(this,arguments),delete this.slider},t}(Ya),Xee=Zee,ete=rt.pM.extend($F),tte=ete.extend({extendViewApi:1,init:function(){var r=this,t=r.opts,e=r.em,n=t.module||e?.get("StyleManager");n&&(n.__listenAdd(this,n.events.propertyAdd),n.__listenRemove(this,n.events.propertyRemove))},types:[{id:"stack",model:uee,view:Tee,isType:function(r){if(r&&r.type=="stack")return r}},{id:"composite",model:Gd,view:jp,isType:function(r){if(r&&r.type=="composite")return r}},{id:"file",model:or,view:Pee,isType:function(r){if(r&&r.type=="file")return r}},{id:"color",model:or,view:Nee,isType:function(r){if(r&&r.type=="color")return r}},{id:"select",model:YS,view:aL,isType:function(r){if(r&&r.type=="select")return r}},{id:"radio",model:Hee,view:Wee,isType:function(r){if(r&&r.type=="radio")return r}},{id:"slider",model:Yee,view:Xee,isType:function(r){if(r&&r.type=="slider")return r}},{id:"integer",model:K_,view:Ya,isType:function(r){if(r&&r.type=="integer")return r}},{id:"number",model:K_,view:Ya,isType:function(r){if(r&&r.type=="number")return r}},{id:"base",model:or,view:Ja,isType:function(r){return r.type="base",r}}]}),hA=tte,nte=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),J_=function(){return J_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},J_.apply(this,arguments)},rte=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},ite=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},ote=function(r){nte(t,r);function t(e,n){n===void 0&&(n={});var i=r.call(this,e)||this,o=n.em;i.em=o;var s=e||{},a=i.buildProperties(s.buildProps),c=i.get("name")||"",u=[];!i.get("id")&&i.set("id",c.replace(/ /g,"_").toLowerCase()),a?u=i.extendProperties(a):u=i.get("properties").map(function(g){return(0,B.isString)(g)?i.buildProperties(g)[0]:g}).filter(Boolean),u=u.map(function(g){return i.checkExtend(g)});var f=new hA(u,{em:o});return f.sector=i,i.set("properties",f),i}return t.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(t.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.get("id")},t.prototype.getName=function(){var e,n=this.getId();return((e=this.em)===null||e===void 0?void 0:e.t("styleManager.sectors.".concat(n)))||this.get("name")},t.prototype.setName=function(e){return this.set("name",e)},t.prototype.isOpen=function(){return!!this.get("open")},t.prototype.setOpen=function(e){return this.set("open",e)},t.prototype.isVisible=function(){return!!this.get("visible")},t.prototype.getProperties=function(e){e===void 0&&(e={});var n=this.properties,i=n.models?ite([],n.models,!0):n;return i.filter(function(o){var s=!0;if(e.withValue&&(s=o.hasValue({noParent:!0})),e.withParentValue){var a=o.hasValue({noParent:!0});s=!a&&o.hasValue()}return s})},t.prototype.getProperty=function(e){return this.getProperties().filter(function(n){return n.get("id")===e})[0]||void 0},t.prototype.addProperty=function(e,n){return this.properties.add(this.checkExtend(e),n)},t.prototype.extendProperties=function(e,n,i){i===void 0&&(i=!1);for(var o=e.length,s=n||this.get("properties"),a=this.get("extendBuilded"),c=[],u=0,f=s.length;u<f;u++){for(var g=s[u],v=0,_=0;_<o;_++){var b=e[_];if(g.property==b.property||g.id==b.property){var C=g.properties;C&&C.length&&(g.properties=this.extendProperties(b.properties||[],C,1)),e[_]=a?(0,B.extend)(b,g):g,c[_]=e[_],v=1;continue}}v||(e.push(g),c.push(g))}return i?c.filter(function(S){return S}):e},t.prototype.checkExtend=function(e){var n=((0,B.isString)(e)?{extend:e}:e)||{},i=n.extend,o=rte(n,["extend"]);return i?J_(J_({},this.buildProperties([i])[0]||{}),o):e},t.prototype.buildProperties=function(e){var n,i=e||[];if(!i.length)return[];var o=(n=this.em)===null||n===void 0?void 0:n.Styles.builtIn;return o?.build(i)},t}(rt.Kx),lL=ote,ste=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Z_=function(){return Z_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Z_.apply(this,arguments)},ate=function(r){ste(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.initialize=function(e,n){n===void 0&&(n={});var i=n.module,o=n.em;this.em=o,this.module=i,this.listenTo(this,"reset",this.onReset)},t.prototype.model=function(e,n){n===void 0&&(n={});var i=n.collection.em;return new lL(e,Z_(Z_({},n),{em:i}))},t.prototype.onReset=function(e,n){n===void 0&&(n={});var i=n.previousModels||[];i.forEach(function(o){return o.get("properties").reset()})},t}(rt.pM),lte=ate,Vl=function(){return Vl=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Vl.apply(this,arguments)},cte=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},Qc=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},gi=function(r){return r.map(function(t){return{id:t}})},ute=function(){function r(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var t=", sans-serif",e=["flex-start","flex-end","center"],n=Qc(Qc([],e,!0),["baseline","stretch"],!1);this.optsBgSize=gi(["auto","cover","contain"]),this.optsBgAttach=gi(["scroll","fixed","local"]),this.optsBgRepeat=gi(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=gi(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=gi(["visible","hidden","scroll","auto"]),this.optsDir=gi(["row","row-reverse","column","column-reverse"]),this.opstDisplay=gi(["block","inline","inline-block","flex","none"]),this.optsTransitFn=gi(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=gi(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=gi(["none","left","right"]),this.optsPos=gi(["static","relative","absolute","fixed"]),this.optsTextAlign=gi(["left","center","right","justify"]),this.optsFlexAlign=gi(n),this.optsJustCont=gi(Qc(Qc([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=gi(Qc(Qc([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=gi(Qc(["auto"],n,!0)),this.optsTransitProp=gi(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=gi(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=gi(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+t,"Arial Black, Gadget"+t,"Brush Script MT"+t,"Comic Sans MS, cursive"+t,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+t,"Impact, Charcoal"+t,"Lucida Sans Unicode, Lucida Grande"+t,"Tahoma, Geneva"+t,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+t,"Verdana, Geneva"+t].map(function(i){return{id:i,label:i.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return r.prototype.__sub=function(t){var e=this;return function(){return t.map(function(n){if((0,B.isString)(n))return e.get(n);var i=n.extend,o=cte(n,["extend"]);return Vl(Vl({},e.get(i)),o)})}},r.prototype.init=function(){var t=this,e=this,n=e.fixedValues,i=e.requireFlex,o=e.typeNumber;this.props={};var s=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:n},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:i},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:i}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:i},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:i},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(a,c){var u=c.values,f=u["box-shadow-h"],g=u["box-shadow-v"],v=u["box-shadow-blur"],_=u["box-shadow-spread"];return"".concat(f," ").concat(g," ").concat(v," ").concat(_)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(a,c){var u=c.values,f=u["text-shadow-h"],g=u["text-shadow-v"],v=u["text-shadow-blur"];return"".concat(f," ").concat(g," ").concat(v)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(a,c){var u=c.values,f=u["background-repeat-sub"]||"",g=u["background-position-sub"]||"",v=u["background-attachment-sub"]||"",_=u["background-size-sub"]||"";return[f,g,v,_].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(a,c){var u=c.property,f=c.name,g=a[f]||"",v=u.getLayerSeparator();return g?g.split(v).map(function(_){var b=u.__parseFn(_),C=b.name,S=b.value;return{"transform-type":C,"transform-value":S}}):[]},toStyle:function(a,c){var u,f=c.name;return u={},u[f]="".concat(a["transform-type"],"(").concat(a["transform-value"],")"),u},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(a){var c=a.property,u=a.to;if(u.value){var f=c.getOption(),g=Vl({},f.propValue||{}),v=c.getParent().getProperty("transform-value"),_=v.getUnit();(!_||g?.units.indexOf(_)<0)&&(g.unit=g?.units[0]||""),v.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return s.forEach(function(a){var c=a[0],u=a[1],f=a[2];t.add(c,u||{},{from:f})}),this},r.prototype.add=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.from||"",o=this.props[i||t]||{},s=Vl(Vl(Vl({},o),{property:t}),e);return s.properties&&(0,B.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[t]=s,s},r.prototype.get=function(t){return this.props[t]},r.prototype.build=function(t){var e=this,n=[],i=(0,B.isString)(t)?[t]:t;return i.forEach(function(o){n.push(e.get(o)||{property:o})}),n},r}(),dte=ute,fte=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hte=function(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r},pte=function(r){fte(t,r);function t(e){var n=r.call(this,e)||this,i=e.config||{},o=n.model,s=i.em;return n.config=i,n.em=s,n.pfx=i.stylePrefix||"",n.listenTo(o,"destroy remove",n.remove),n.listenTo(o,"change:open",n.updateOpen),n.listenTo(o,"change:visible",n.updateVisibility),n}return t.prototype.template=function(e){var n,i=e.pfx,o=e.label,s=(n=this.em)===null||n===void 0?void 0:n.getConfig().icons,a=s?.caret||"",c="".concat(i,"sector-");return Io(Sj||(Sj=hte([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),c,c,a,c,o)},t.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},t.prototype.updateOpen=function(){var e=this,n=e.$el,i=e.model,o=e.pfx,s=i.isOpen();n[s?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=s?"":"none"},t.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},t.prototype.getPropertiesEl=function(){var e=this,n=e.$el,i=e.pfx;return n.find(".".concat(i,"properties")).get(0)},t.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},t.prototype.renderProperties=function(){var e=this,n=e.model,i=e.config,o=n.get("properties");if(o){var s=new fA({collection:o,config:i});this.$el.append(s.render().el)}},t.prototype.render=function(){var e=this,n=e.pfx,i=e.model,o=e.$el,s=i.getId(),a=i.getName();return o.html(this.template({pfx:n,label:a})),this.renderProperties(),o.attr("class","".concat(n,"sector ").concat(n,"sector__").concat(s," no-select")),this.updateOpen(),this},t}(rt.Ss),gte=pte,Sj,mte=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vte=function(r){mte(t,r);function t(e){e===void 0&&(e={});var n=r.call(this,e)||this,i=e.module,o=e.config,s=n.collection;return n.pfx=o?.stylePrefix||"",n.ppfx=o?.pStylePrefix||"",n.config=o,n.module=i,n.listenTo(s,"add",n.addTo),n.listenTo(s,"reset",n.render),n}return t.prototype.remove=function(){var e=this;return rt.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(n){return e[n]={}}),this},t.prototype.addTo=function(e,n,i){i===void 0&&(i={}),this.addToCollection(e,null,i)},t.prototype.addToCollection=function(e,n,i){i===void 0&&(i={});var o=this,s=o.config,a=o.el,c=n||a,u=new gte({model:e,config:s}).render().el;return(0,st.Sc)(c,u,i.at),u},t.prototype.render=function(){var e=this,n=this,i=n.$el,o=n.pfx,s=n.ppfx;i.empty();var a=document.createDocumentFragment();return this.collection.each(function(c){return e.addToCollection(c,a)}),i.append(a),i.addClass("".concat(o,"sectors ").concat(s,"one-bg ").concat(s,"two-color")),this},t}(rt.Ss),yte=vte,_te=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bl=function(){return Bl=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Bl.apply(this,arguments)},Aj=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},cL="style",Xp="".concat(cL,":"),pA="".concat(Xp,"sector"),wte="".concat(pA,":add"),bte="".concat(pA,":remove"),Cte="".concat(pA,":update"),gA="".concat(Xp,"property"),xte="".concat(gA,":add"),Ete="".concat(gA,":remove"),Ste="".concat(gA,":update"),uL="".concat(Xp,"layer:select"),JS="".concat(Xp,"target"),Ate="".concat(Xp,"custom"),Tj=function(r){return r||r===0},Tte={all:cL,sectorAdd:wte,sectorRemove:bte,sectorUpdate:Cte,propertyAdd:xte,propertyRemove:Ete,propertyUpdate:Ste,layerSelect:uL,target:JS,custom:Ate},Ote=function(r){_te(t,r);function t(e){var n=r.call(this,e,"StyleManager",new lte([],{em:e}),Tte,QX)||this;n.Sector=lL,n.storageKey="",(0,B.bindAll)(n,"__clearStateTarget");var i=n.config,o=i.pStylePrefix;o&&(i.stylePrefix=o+i.stylePrefix),n.builtIn=new dte,n.properties=new hA([],{em:e,module:n}),n.sectors=n.all;var s=new rt.Kx({targets:[]});n.model=s;var a=Wi.I.update,c="component:toggled ".concat(a,":classes change:state change:device frame:resized selector:type");n.upAll=(0,B.debounce)(function(){return n.__upSel()},0),s.listenTo(e,c,n.upAll),s.listenTo(e,"component:toggled",n.__clearStateTarget);var u=(0,B.debounce)(function(){n.__upProps(),n.__trgCustom()},0);s.listenTo(e,"styleable:change undo redo",u);var f=(0,B.debounce)(function(){return n.__trgCustom()},0);return s.listenTo(e,"".concat(uL," ").concat(JS),f),s.on("change:lastTarget",function(){return e.trigger(JS,n.getSelected())}),n}return t.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},t.prototype.__trgCustom=function(e){e===void 0&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},t.prototype.__trgEv=function(e){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];(n=this.em).trigger.apply(n,Aj([e],i,!1))},t.prototype.__clearStateTarget=function(){var e=this,n=this.em,i=this.__getStateTarget();i&&n?.skip(function(){n.Css.remove(i),e.model.set({stateTarget:null})})},t.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},t.prototype.postRender=function(){this.__appendTo()},t.prototype.addSector=function(e,n,i){i===void 0&&(i={});var o=this.getSector(e);return o||(n.id=e,o=this.sectors.add(n,i)),o},t.prototype.getSector=function(e,n){n===void 0&&(n={});var i=this.sectors.where({id:e})[0];return!i&&n.warn&&this._logNoSector(e),i||null},t.prototype.getSectors=function(e){e===void 0&&(e={});var n=this.sectors,i=n&&n.models?e.array?Aj([],n.models,!0):n:[];return e.visible?i.filter(function(o){return o.isVisible()}):i},t.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},t.prototype.addProperty=function(e,n,i){i===void 0&&(i={});var o=this.getSector(e,{warn:!0}),s;return o&&(s=o.addProperty(n,i)),s},t.prototype.getProperty=function(e,n){var i=this.getSector(e,{warn:!0}),o;return i&&(o=i.properties.filter(function(s){return s.get("property")===n||s.get("id")===n})[0]),o},t.prototype.getProperties=function(e){var n,i=this.getSector(e,{warn:!0});return i&&(n=i.properties),n},t.prototype.removeProperty=function(e,n){var i=this.getProperties(e);return i?i.remove(this.getProperty(e,n)):null},t.prototype.select=function(e,n){var i=this;n===void 0&&(n={});var o=this.em,s=(0,B.isArray)(e)?e:[e],a=n.stylable,c=o.Css,u=[];s.filter(Boolean).forEach(function(C){var S=C;if((0,B.isString)(C)){var j=c.getRule(C)||c.setRule(C);!(0,B.isUndefined)(a)&&j.set({stylable:a}),S=j}u.push(S)});var f=n.component||u.filter(function(C){return(0,Le.isComponent)(C)}).reverse()[0];u=u.map(function(C){return i.getModelToStyle(C)});var g=o.getState(),v=u.slice().reverse()[0],_=this.getParentRules(v,{state:g,component:f}),b=this.__getStateTarget();return o.skip(function(){var C;if(g&&(!((C=v?.getState)===null||C===void 0)&&C.call(v))){var S=v.getStyle();b?b.setStyle(S):b=c.getAll().add({selectors:"gjs-selected",style:S,shallow:!0,important:!0})}else b&&(c.remove(b),b=void 0)}),this.model.set({targets:u,lastTarget:v,lastTargetParents:_,stateTarget:b,component:f}),this.__upProps(n),u},t.prototype.getSelected=function(){return this.model.get("lastTarget")},t.prototype.getSelectedAll=function(){return this.model.get("targets")},t.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},t.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},t.prototype.addStyleTargets=function(e,n){this.getSelectedAll().map(function(s){return s.addStyle(e,n)});var i=this.getSelected();i&&this.__emitCmpStyleUpdate(e);var o=this.__getStateTarget();i&&o?.setStyle(i.getStyle(),n)},t.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},t.prototype.getBuiltInAll=function(){return this.builtIn.props},t.prototype.addBuiltIn=function(e,n){return this.builtIn.add(e,n)},t.prototype.getModelToStyle=function(e,n){n===void 0&&(n={});var i=this.em,o=n.skipAdd;if(i&&e?.toHTML){var s=i.getConfig(),a=i.UndoManager,c=i.Css,u=i.Selectors,f=u?u.getConfig():{},g=s.devicePreviewMode?"":i.get("state"),v=e.get("classes"),_=v.getStyleable(),b=_.length,C=!f.componentFirst||n.useClasses,S={noCount:1},j={state:g,addOpts:S};a.skip(function(){var q;if(b&&C){var N=i.getCurrentMedia();q=c.get(_,g,N),!q&&!o&&(q=c.add(_,g,N,{},S))}else if(s.avoidInlineStyle){var G=e.getId();q=c.getIdRule(G,j),!q&&!o&&(q=c.setIdRule(G,{},j)),e.is("wrapper")&&q.set("wrapper",1,S)}q&&(e=q)})}return e},t.prototype.getParentRules=function(e,n){var i=n===void 0?{}:n,o=i.state,s=i.component,a=this.em,c=[];if(a&&e){var u=s,f=a.Css,g=a.CodeManager.getGenerator("css"),v=e.toHTML?e:e.getComponent(),_={array:!0},b=[],C=[],S=[],j=[],q=[],N=function(L){return L.length?f.getRules().filter(function(k){var $=k.getSelectors().map(function(I){return I.getFullName()});return $.length===0?!1:$.every(function(I){return L.indexOf(I)>=0})}):[]},G=function(L){return L?f.getRules().filter(function(k){return k.selectorsToString()===L}):[]};if(v)b=f.getRules("#".concat(v.getId())),C=G(v.get("tagName")),j=u?N(u.getSelectors().getFullName(_)):[],q=j.concat(C).concat(b);else{b=u?f.getRules("#".concat(u.getId())):[],C=G(u?.get("tagName")||"");var se=u?.getSelectors().getFullName(_)||[],ue=se.filter(function(L){return e.getSelectors().getFullName(_).findIndex(function(k){return k===L})===-1});S=N(ue.concat(e.getSelectors().getFullName(_))),q=C.concat(b).concat(S)}var Y=q.filter(function(L){return(0,B.isUndefined)(o)?1:L.get("state")===o}).sort(g.sortRules).reverse();c=Y.slice(Y.indexOf(e)+1)}return c},t.prototype.addType=function(e,n){this.properties.addType(e,n)},t.prototype.getType=function(e){return this.properties.getType(e)},t.prototype.getTypes=function(){return this.properties.getTypes()},t.prototype.createType=function(e,n){var i=n===void 0?{}:n,o=i.model,s=o===void 0?{}:o,a=i.view,c=a===void 0?{}:a,u=this.config,f=this.getType(e);if(f)return new f.view(Bl({model:new f.model(s),config:u},c))},t.prototype.render=function(){var e=this,n=e.config,i=e.em,o=e.SectView,s=o&&o.el;return this.SectView=new yte({el:s,em:i,config:n,module:this,collection:this.sectors}),this.SectView.render().el},t.prototype._logNoSector=function(e){var n=this.em;n&&n.logWarning("'".concat(e,"' sector not found"))},t.prototype.__emitCmpStyleUpdate=function(e,n){n===void 0&&(n={});var i=this.em;if(!e.__p){var o=this.getSelectedAll(),s=n.components||i.getSelectedAll(),a=Array.isArray(s)?s:[s],c=Bl({},e);delete c.__p,a.forEach(function(u){return!o.includes(u)&&u.__onStyleChange(c)})}},t.prototype.__upProps=function(e){var n=this;e===void 0&&(e={});var i=this.getSelected();if(i){var o=this.sectors,s=this.model.get("component"),a=this.getSelectedParents(),c=i.getStyle(),u=a.map(function(f){return{target:f,style:f.getStyle()}});o.map(function(f){f.getProperties().map(function(g){n.__upProp(g,c,u,e)})}),o.forEach(function(f){var g=f.getProperties();g.forEach(function(_){var b=_.__checkVisibility({target:i,component:s,sectors:o});_.set("visible",b)});var v=g.some(function(_){return _.isVisible()});f.set("visible",v)})}},t.prototype.__upProp=function(e,n,i,o){var s=this,a=e.getName(),c=n[a],u=Tj(c),f=e.getType()==="stack",g=e.getType()==="composite",v=Bl(Bl({},o),{__up:!0}),_=!g&&!f,b=e,C=e,S=f?b.__getLayersFromStyle(n):[],j=g?C.__getPropsFromStyle(n):{},q=u?c:null,N=null;if(f&&S===null||g&&j===null){var G=f?"__getLayersFromStyle":"__getPropsFromStyle",se=i.filter(function($){return b[G]($.style)!==null})[0];if(se){q=se.style[a],N=se.target;var ue=b[G](se.style);f?S=ue:j=ue}}else if(!u){q=null;var se=i.filter(function(I){return Tj(I.style[a])})[0];se&&(q=se.style[a],N=se.target)}if(e.__setParentTarget(N),_&&e.__getFullValue()!==q&&e.upValue(q,v),f&&b.__setLayers(S||[],{isEmptyValue:b.isEmptyValueStyle(n)}),g){var Y=C.getProperties();if(C.isDetached()){var L=C.__getPropsFromStyle(n,{byName:!0})||{},k=i.map(function($){return Bl(Bl({},$),{style:C.__getPropsFromStyle($.style,{byName:!0})||{}})});Y.map(function($){return s.__upProp($,L,k,o)})}else C.__setProperties(j||{},v),C.getProperties().map(function($){return $.__setParentTarget(N)})}},t.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(n){n.reset(),n.stopListening()}),(e=this.SectView)===null||e===void 0||e.remove(),this.model.stopListening(),this.upAll.cancel()},t}(zl),Mte=Ote,Pte=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$i=function(){return $i=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},$i.apply(this,arguments)},OS=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},MS=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ite=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},Dte=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};tq().$=dr.default;var kte=[lZ,YJ,SZ,jX,mY,Eq,tY,Mte,$Q,jZ,OX,oX,KX,$Y,dJ,zG,tJ,AQ],Rte=[RJ,uQ,zJ,KK];nq({$:dr.default});var Oj={debug:console.log,info:console.info,warning:console.warn,error:console.error},Nte=function(r){Pte(t,r);function t(e){e===void 0&&(e={});var n=r.call(this)||this;n.__skip=!1,n.defaultRunning=!1,n.destroyed=!1,n._config=e;var i=n.config;n.set("Config",e),n.set("modules",[]),n.set("toLoad",[]),n.set("storables",[]),n.set("selected",new oq),n.set("dmode",i.dragMode);var o=i.el,s=i.log,a=s===!0?(0,B.keys)(Oj):(0,B.isArray)(s)?s:[];return(0,B.bindAll)(n,"initBaseColorPicker"),o&&i.fromElement&&(i.components=o.innerHTML),n.attrsOrig=o?(0,B.toArray)(o.attributes).reduce(function(c,u){return c[u.nodeName]=u.nodeValue,c},{}):"",i.components&&!i.pageManager&&(i.pageManager={pages:[{component:i.components}]}),kte.forEach(function(c){return n.loadModule(c)}),Rte.forEach(function(c){return n.loadStorableModule(c)}),n.on("change:componentHovered",n.componentHovered,n),n.on("change:changesCount",n.updateChanges,n),n.on("change:readyLoad change:readyCanvas",n._checkReady,n),a.forEach(function(c){return n.listenLog(c)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(c){var u=c.from,f=c.to;n.listenTo(n,u,function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];n.trigger.apply(n,Dte([f],g,!1)),n.logWarning("The event '".concat(u,"' is deprecated, replace it with '").concat(f,"'"))})}),n}return t.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(t.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),t.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},t.prototype.getContainer=function(){return this.config.el},t.prototype.listenLog=function(e){this.listenTo(this,"log:".concat(e),Oj[e])},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(e){var n=this.config;return(0,B.isUndefined)(e)?n:n[e]},t.prototype.loadOnStart=function(){var e=this,n=this.config,i=n.projectData,o=n.headless,s=this.Storage;this.toLoad.reverse().forEach(function(u){return u.onLoad()});var a=function(){e.modules.forEach(function(u){return u.postLoad&&u.postLoad(e)}),e.set("readyLoad",1)};o?(i&&this.loadData(i),a()):this._storageTimeout=setTimeout(function(){return OS(e,void 0,void 0,function(){var u;return MS(this,function(f){switch(f.label){case 0:return i?(this.loadData(i),[3,5]):[3,1];case 1:if(!s?.canAutoload())return[3,5];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.load()];case 3:return f.sent(),[3,5];case 4:return u=f.sent(),this.logError(u),[3,5];case 5:return a(),[2]}})})});var c=new t({noticeOnUnload:!1,storageManager:!1,undoManager:!1});c.Pages.onLoad(),c.Canvas.postLoad(),this.set("shallow",c)},t.prototype.updateChanges=function(e,n,i){var o=this,s=this.Storage,a=this.getDirtyCount();i.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=a?function(){return!0}:null),s.isAutosave()&&a>=s.getStepsBeforeSave()&&this.store().catch(function(c){return o.logError(c)})},t.prototype.loadModule=function(e){var n=new e(this);return this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),n},t.prototype.loadStorableModule=function(e){var n=this.loadModule(e);return this.storables.push(n),n},t.prototype.init=function(e,n){n===void 0&&(n={}),this.destroyed&&(this.initialize(n),this.destroyed=!1),this.set("Editor",e)},t.prototype.getEditor=function(){return this.get("Editor")},t.prototype.handleUpdates=function(e,n,i){var o=this;i===void 0&&(i={}),!(this.__skip||i.temporary||i.noCount||i.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var s=o.getDirtyCount()||0,a=i.unset,c=Ite(i,["unset"]);o.set("changesCount",s+1,c)},0))},t.prototype.changesUp=function(e){this.handleUpdates(0,0,e)},t.prototype.componentHovered=function(e,n,i){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,i),n&&this.trigger("component:hovered",n,i)},t.prototype.getSelected=function(){return this.selected.lastComponent()},t.prototype.getSelectedAll=function(){return this.selected.allComponents()},t.prototype.setSelected=function(e,n){var i=this;n===void 0&&(n={});var o=n.event,s=o&&(o.ctrlKey||o.metaKey),a=(o||{}).shiftKey,c=((0,B.isArray)(e)?e:[e]).map(function(v){var _,b;return((b=(_=v?.delegate)===null||_===void 0?void 0:_.select)===null||b===void 0?void 0:b.call(_,v))||v}).filter(Boolean),u=this.getSelectedAll(),f=this.getConfig().multipleSelection,g=(0,B.isArray)(e);(g||!e)&&this.removeSelected(u.filter(function(v){return!(0,B.contains)(c,v)})),c.forEach(function(v){if(v&&(i.trigger("component:select:before",v,n),!v.get("selectable")||n.abort))if(n.useValid){for(var _=v.parent();_&&!_.get("selectable");)_=_.parent();v=_}else return;if(s&&f)return i.toggleSelected(v);if(a&&f){i.clearSelection(i.Canvas.getWindow());var b=v.collection,C=v.index(),S,j;if(i.getSelectedAll().forEach(function(q){var N=q.collection,G=q.index();N===b&&(G<C?S=(0,B.isUndefined)(S)?G:Math.max(S,G):G>C&&(j=(0,B.isUndefined)(j)?G:Math.min(j,G)))}),!(0,B.isUndefined)(S))for(;S!==C;)i.addSelected(b.at(S)),S++;if(!(0,B.isUndefined)(j))for(;j!==C;)i.addSelected(b.at(j)),j--;return i.addSelected(v)}!g&&i.removeSelected(u.filter(function(q){return q!==v})),i.addSelected(v,n)})},t.prototype.addSelected=function(e,n){var i=this;n===void 0&&(n={});var o=(0,B.isArray)(e)?e:[e];o.forEach(function(s){var a=i.selected;if(!(!s||!s.get("selectable")||s.parents().some(function(u){return a.hasComponent(u)}))){n.forceChange&&i.removeSelected(s,n);var c=a.allComponents().filter(function(u){return(0,B.contains)(u.parents(),s)});c.forEach(function(u){return i.removeSelected(u,n)}),a.addComponent(s,n),i.trigger("component:select",s,n),i.Canvas.addSpot({type:fs.F.Select,component:s})}})},t.prototype.removeSelected=function(e,n){var i=this;n===void 0&&(n={}),this.selected.removeComponent(e,n);var o=(0,B.isArray)(e)?e:[e];o.forEach(function(s){return i.Canvas.removeSpots({type:fs.F.Select,component:s})})},t.prototype.toggleSelected=function(e,n){var i=this;n===void 0&&(n={});var o=(0,B.isArray)(e)?e:[e];o.forEach(function(s){i.selected.hasComponent(s)?i.removeSelected(s,n):i.addSelected(s,n)})},t.prototype.setHovered=function(e,n){var i=this;n===void 0&&(n={});var o=function(c,u){var f=i,g=f.config,v=f.Canvas,_=i.getHovered(),b=i.getSelectedAll(),C=fs.F.Hover,S=fs.F.Spacing;i.set("componentHovered",c||null,u),_&&(v.removeSpots({type:C,component:_}),v.removeSpots({type:S,component:_})),c&&(v.addSpot({type:C,component:c}),(!b.includes(c)||g.showOffsetsSelected)&&v.addSpot({type:S,component:c}))};if(!e)return o();var s="component:hover";if(n.forceChange&&o(),this.trigger("".concat(s,":before"),e,n),!e.get("hoverable"))if(n.useValid&&!n.abort){for(var a=e.parent();a&&!a.get("hoverable");)a=a.parent();e=a}else return;n.abort||(o(e,n),this.trigger(s,e,n))},t.prototype.getHovered=function(){return this.get("componentHovered")},t.prototype.setComponents=function(e,n){return n===void 0&&(n={}),this.Components.setComponents(e,n)},t.prototype.getComponents=function(){var e=this.Components,n=this.CodeManager;if(!(!e||!n)){var i=e.getComponents();return n.getCode(i,"json")}},t.prototype.setStyle=function(e,n){n===void 0&&(n={});var i=this.Css;return i.clear(n),i.getAll().add(e,n),this},t.prototype.addStyle=function(e,n){n===void 0&&(n={});var i=this.getStyle().add(e,n);return(0,B.isArray)(i)?i:[i]},t.prototype.getStyle=function(){return this.Css.getAll()},t.prototype.setState=function(e){return this.set("state",e),this},t.prototype.getState=function(){return this.get("state")||""},t.prototype.getHtml=function(e){e===void 0&&(e={});var n=this.config,i=n.optsHtml,o=n.jsInHtml?this.getJs(e):"",s=e.component||this.Components.getComponent(),a=s?this.CodeManager.getCode(s,"html",$i($i({},i),e)):"";return a+=o?"<script>".concat(o,"<\/script>"):"",a},t.prototype.getCss=function(e){e===void 0&&(e={});var n=this.config,i=n.optsCss,o=e.avoidProtected,s=(0,B.isUndefined)(e.keepUnusedStyles)?n.keepUnusedStyles:e.keepUnusedStyles,a=this.Css,c=e.component||this.Components.getComponent(),u=o?"":n.protectedCss,f=c&&this.CodeManager.getCode(c,"css",$i($i({cssc:a,keepUnusedStyles:s},i),e));return c?e.json?f:u+f:""},t.prototype.getJs=function(e){e===void 0&&(e={});var n=e.component||this.Components.getWrapper();return n?this.CodeManager.getCode(n,"js").trim():""},t.prototype.store=function(e){return OS(this,void 0,void 0,function(){var n;return MS(this,function(i){switch(i.label){case 0:return n=this.storeData(),[4,this.Storage.store(n,e)];case 1:return i.sent(),this.clearDirtyCount(),[2,n]}})})},t.prototype.load=function(e){return OS(this,arguments,void 0,function(n,i){var o;return i===void 0&&(i={}),MS(this,function(s){switch(s.label){case 0:return[4,this.Storage.load(n)];case 1:return o=s.sent(),this.loadData(o),[4,(0,Le.wait)()];case 2:return s.sent(),i.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}})})},t.prototype.storeData=function(){var e={},n=this.getEditing();return n&&n.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(i){e=$i($i({},e),i.store(1))}),JSON.parse(JSON.stringify(e))},t.prototype.loadData=function(e){return e===void 0&&(e={}),(0,Le.isEmptyObj)(e)||(this.storables.forEach(function(n){return n.clear()}),this.storables.forEach(function(n){return n.load(e)})),e},t.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},t.prototype.runDefault=function(e){e===void 0&&(e={});var n=this.get("Commands").get(this.config.defaultCommand);!n||this.defaultRunning||(n.stop(this,this,e),n.run(this,this,e),this.defaultRunning=!0)},t.prototype.stopDefault=function(e){e===void 0&&(e={});var n=this.get("Commands");if(n){var i=n.get(this.config.defaultCommand);!i||!this.defaultRunning||(i.stop(this,this,e),this.defaultRunning=!1)}},t.prototype.refreshCanvas=function(e){e===void 0&&(e={}),this.Canvas.refresh({spots:e.tools})},t.prototype.clearSelection=function(e){var n,i=e||window;(n=i.getSelection())===null||n===void 0||n.removeAllRanges()},t.prototype.getCurrentMedia=function(){var e=this.config,n=this.getDeviceModel(),i=e.mediaCondition,o=e.devicePreviewMode,s=n&&n.get("widthMedia");return n&&s&&!o?"(".concat(i,": ").concat(s,")"):""},t.prototype.getWrapper=function(){return this.Components.getWrapper()},t.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},t.prototype.getCurrentFrame=function(){return this.get("currentFrame")},t.prototype.getCurrentFrameModel=function(){var e;return(e=this.getCurrentFrame()||{})===null||e===void 0?void 0:e.model},t.prototype.getIcon=function(e){var n=this.config.icons||{};return n[e]||""},t.prototype.getDirtyCount=function(){return this.get("changesCount")},t.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},t.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},t.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},t.prototype.setDragMode=function(e){return this.set("dmode",e)},t.prototype.getDragMode=function(e){var n=e?.getDragMode()||this.get("dmode");return n||""},t.prototype.t=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=this.get("I18n");return i?.t.apply(i,e)},t.prototype.inAbsoluteMode=function(e){return this.getDragMode(e)==="absolute"},t.prototype.destroyAll=function(){var e=this,n=this,i=n.config,o=n.view,s=this.getEditor(),a=(i.grapesjs||{}).editors,c=a===void 0?[]:a,u=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),u?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(f){return f.destroy()}),o?.remove&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(f){return e[f]={}}),c.splice(c.indexOf(s),1),(0,Le.hasWin)()&&(0,dr.default)(i.el).empty().attr(this.attrsOrig)},t.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},t.prototype.setEditing=function(e){return this.set("editing",e),this},t.prototype.isEditing=function(){return!!this.get("editing")},t.prototype.log=function(e,n){n===void 0&&(n={});var i=n.ns,o=n.level,s=o===void 0?"debug":o;if(this.trigger("log",e,n),s&&this.trigger("log:".concat(s),e,n),i){var a="log-".concat(i);this.trigger(a,e,n),s&&this.trigger("".concat(a,":").concat(s),e,n)}},t.prototype.logInfo=function(e,n){this.log(e,$i($i({},n),{level:"info"}))},t.prototype.logWarning=function(e,n){this.log(e,$i($i({},n),{level:"warning"}))},t.prototype.logError=function(e,n){this.log(e,$i($i({},n),{level:"error"}))},t.prototype.initBaseColorPicker=function(e,n){n===void 0&&(n={});var i=this.config,o=i.colorPicker,s=o===void 0?{}:o,a=i.el,c=i.stylePrefix;return(0,dr.default)(e).spectrum($i($i({containerClassName:"".concat(c,"one-bg ").concat(c,"two-color"),appendTo:a||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F"},n),s))},t.prototype.skip=function(e){this.__skip=!0;var n=this.UndoManager;n?n.skip(e):e(),this.__skip=!1},t.prototype.data=function(e,n,i){var o="_gjs-data";if(e[o]||(e[o]={}),(0,B.isUndefined)(i))return e[o][n];e[o][n]=i},t}(rt.Kx),jte=Nte,Fte=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lte=function(r){Fte(t,r);function t(e){var n=r.call(this,{model:e})||this,i=e.Panels,o=e.UndoManager;return e.view=n,e.once("change:ready",function(){i.active(),i.disableButtons(),o.clear(),setTimeout(function(){e.trigger("load",e.Editor),e.clearDirtyCount()})}),n}return t.prototype.render=function(){var e=this,n=this,i=n.$el,o=n.model,s=o.Panels,a=o.Canvas,c=o.config,u=o.modules,f=c.stylePrefix,g=["".concat(f,"editor")];!c.customUI&&g.push("".concat(f,"one-bg ").concat(f,"two-color"));var v=(0,dr.default)(c.el||"body ".concat(c.container));c.cssIcons&&(0,Le.appendStyles)(c.cssIcons,{unique:!0,prepand:!0}),i.empty(),c.width&&v.css("width",c.width),c.height&&v.css("height",c.height),i.append(a.render()),i.append(s.render());var _=o.shallow,b=_.Canvas.render();return b.style.display="none",i.append(b),i.attr("class",g.join(" ")),v.addClass("".concat(f,"editor-cont")).empty().append(i),u.forEach(function(C){var S;return(S=C.postRender)===null||S===void 0?void 0:S.call(C,e)}),this},t}(rt.Ss),Vte=Lte,Gp=function(){return Gp=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Gp.apply(this,arguments)},Mj=function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(n.next(f))}catch(g){s(g)}}function c(f){try{u(n.throw(f))}catch(g){s(g)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((n=n.apply(r,t||[])).next())})},Pj=function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Bte=function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},Ute=function(){function r(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n;this.html=Io,this.config=Gp(Gp(Gp({},hN),t),{pStylePrefix:(n=t.stylePrefix)!==null&&n!==void 0?n:hN.stylePrefix}),this.em=new jte(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(r.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){return this.em.getConfig(t)},r.prototype.getHtml=function(t){return this.em.getHtml(t)},r.prototype.getCss=function(t){return this.em.getCss(t)},r.prototype.getJs=function(t){return this.em.getJs(t)},r.prototype.getComponents=function(){return this.Components.getComponents()},r.prototype.getWrapper=function(){return this.Components.getWrapper()},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.em.setComponents(t,e),this},r.prototype.addComponents=function(t,e){return this.getWrapper().append(t,e)},r.prototype.getStyle=function(){return this.em.Css.getAll()},r.prototype.setStyle=function(t,e){return e===void 0&&(e={}),this.em.setStyle(t,e),this},r.prototype.addStyle=function(t,e){return e===void 0&&(e={}),this.em.addStyle(t,e)},r.prototype.getSelected=function(){return this.em.getSelected()},r.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},r.prototype.getSelectedToStyle=function(){var t=this.em.getSelected();if(t)return this.StyleManager.getModelToStyle(t)},r.prototype.select=function(t,e){return this.em.setSelected(t,e),this},r.prototype.selectAdd=function(t){return this.em.addSelected(t),this},r.prototype.selectRemove=function(t){return this.em.removeSelected(t),this},r.prototype.selectToggle=function(t){return this.em.toggleSelected(t),this},r.prototype.getEditing=function(){return this.em.getEditing()},r.prototype.setDevice=function(t){return this.em.set("device",t),this},r.prototype.getDevice=function(){return this.em.get("device")},r.prototype.runCommand=function(t,e){return e===void 0&&(e={}),this.Commands.run(t,e)},r.prototype.stopCommand=function(t,e){return e===void 0&&(e={}),this.Commands.stop(t,e)},r.prototype.store=function(t){return Mj(this,void 0,void 0,function(){return Pj(this,function(e){switch(e.label){case 0:return[4,this.em.store(t)];case 1:return[2,e.sent()]}})})},r.prototype.load=function(t){return Mj(this,arguments,void 0,function(e,n){return n===void 0&&(n={}),Pj(this,function(i){switch(i.label){case 0:return[4,this.em.load(e,n)];case 1:return[2,i.sent()]}})})},r.prototype.getProjectData=function(){return this.em.storeData()},r.prototype.loadProjectData=function(t){return this.em.loadData(t)},r.prototype.storeData=function(){return this.em.storeData()},r.prototype.loadData=function(t){return this.em.loadData(t)},r.prototype.getContainer=function(){return this.config.el},r.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},r.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},r.prototype.refresh=function(t){this.em.refreshCanvas(t)},r.prototype.setCustomRte=function(t){this.RichTextEditor.customRte=t},r.prototype.setCustomParserCss=function(t){return this.Parser.getConfig().parserCss=t,this},r.prototype.setDragMode=function(t){return this.em.setDragMode(t),this},r.prototype.log=function(t,e){return e===void 0&&(e={}),this.em.log(t,e),this},r.prototype.t=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.em).t.apply(t,e)},r.prototype.on=function(t,e){return this.em.on(t,e),this},r.prototype.once=function(t,e){return this.em.once(t,e),this},r.prototype.off=function(t,e){return this.em.off(t,e),this},r.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.em.trigger.apply(this.em,Bte([t],e,!0)),this},r.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},r.prototype.getEl=function(){var t;return(t=this.editorView)===null||t===void 0?void 0:t.el},r.prototype.getModel=function(){return this.em},r.prototype.render=function(){var t;return(t=this.editorView)===null||t===void 0||t.remove(),this.editorView=new Vte(this.em),this.editorView.render().el},r.prototype.onReady=function(t){this.em.get("ready")?t(this):this.em.on("load",t)},r}(),Hte=Ute,zte=function(r,t){var e=t.get(r);if(!e){var n=(0,Le.getGlobal)()[r];e=n?.default||n}return e},dL=function(r,t){return(0,B.isString)(r)?zte(r,t):r?.default||r},fL=function(r,t){r.getModel().logWarning("Plugin ".concat(t," not found"),{context:"plugins",plugin:t})},$te=function(){function r(){this.plugins={}}return r.prototype.add=function(t,e){var n=this.get(t);return n||(this.plugins[t]=e,e)},r.prototype.get=function(t){return this.plugins[t]},r.prototype.getAll=function(){return this.plugins},r}(),Wte=$te,qte=function(){var r=function(){for(var e,n=window.navigator.userAgent,i=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<i.length;o++){var s=i[o];if(e=s[1].exec(n),e)break}return!!e};if((0,Le.hasWin)()&&r()){var t=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=""),t.apply(document.implementation,[e])}}},X_=function(){return X_=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},X_.apply(this,arguments)};qte();var ZS=new Wte,Ij=[],hL=function(r,t){var e=dL(r,ZS);return function(n){e?e(n,t||{}):fL(n,r)}},pL={$:dr.default,editors:Ij,plugins:ZS,usePlugin:hL,version:"0.21.13",init:function(r){r===void 0&&(r={});var t=r.headless,e=r.container;if(!e&&!t)throw new Error("'container' is required");var n=X_(X_({autorender:!0,plugins:[],pluginsOpts:{}},r),{grapesjs:this,el:t?void 0:(0,B.isElement)(e)?e:document.querySelector(e)}),i=new Hte(n,{$:dr.default}),o=i.getModel();return n.plugins.forEach(function(s){var a=dL(s,ZS),c=n.pluginsOpts[s]||{};a?a(i,c):fL(i,s)}),o.loadOnStart(),n.autorender&&!t&&i.render(),Ij.push(i),i}},Gte=pL,gL=e0.Ay,jpe=e0.I0,Fpe=e0.nu;var Kte="firebase",Qte="10.13.2";wl(Kte,Qte,"app");var au=new Ha("ANGULARFIRE2_VERSION");var Yte=(r,t)=>{let e=t?[t]:xI(),n=[];return e.forEach(i=>{i.container.getProvider(r).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},su=class{constructor(){return Yte(Jte)}},Jte="app-check";function mA(){}var r0=class{zone;delegate;constructor(t,e=Nb){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let i=this.zone,o=function(s){i.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,e,n)}},vA=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mA,{},mA,mA)),e.pipe(Jr({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},i0=(()=>{class r{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new r0(Zone.current)),this.insideAngular=e.run(()=>new r0(Zone.current,Th)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||r)(Xe(_n))};static \u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Zte(){let r=globalThis.\u0275AngularFireScheduler;if(!r)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return r}function Ro(r){return Xte(Zte())(r)}function Xte(r){return function(e){return e=e.lift(new vA(r.ngZone)),e.pipe(Os(r.outsideAngular),is(r.insideAngular))}}var nne=new Map,rne={activated:!1,tokenObservers:[]},ine={initialized:!1,enabled:!1};function Vs(r){return nne.get(r)||Object.assign({},rne)}function bL(){return ine}var one="https://content-firebaseappcheck.googleapis.com/v1";var sne="exchangeDebugToken",vL={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},tge=24*60*60*1e3;var _A=class{constructor(t,e,n,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return ke(this,null,function*(){this.stop();try{this.pending=new yb,this.pending.promise.catch(e=>{}),yield ane(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new yb,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function ane(r){return new Promise(t=>{setTimeout(t,r)})}var lne={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$l=new bI("appCheck","AppCheck",lne);function CL(r){if(!Vs(r).activated)throw $l.create("use-before-activation",{appName:r.name})}function xL(n,i){return ke(this,arguments,function*({url:r,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(r,a)}catch(_){throw $l.create("fetch-network-error",{originalErrorMessage:_?.message})}if(c.status!==200)throw $l.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(_){throw $l.create("fetch-parse-error",{originalErrorMessage:_?.message})}let f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw $l.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let g=Number(f[1])*1e3,v=Date.now();return{token:u.token,expireTimeMillis:v+g,issuedAtTimeMillis:v}})}function EL(r,t){let{projectId:e,appId:n,apiKey:i}=r.options;return{url:`${one}/projects/${e}/apps/${n}:${sne}?key=${i}`,body:{debug_token:t}}}var cne="firebase-app-check-database",une=1,wA="firebase-app-check-store";var o0=null;function dne(){return o0||(o0=new Promise((r,t)=>{try{let e=indexedDB.open(cne,une);e.onsuccess=n=>{r(n.target.result)},e.onerror=n=>{var i;t($l.create("storage-open",{originalErrorMessage:(i=n.target.error)===null||i===void 0?void 0:i.message}))},e.onupgradeneeded=n=>{let i=n.target.result;switch(n.oldVersion){case 0:i.createObjectStore(wA,{keyPath:"compositeKey"})}}}catch(e){t($l.create("storage-open",{originalErrorMessage:e?.message}))}}),o0)}function fne(r,t){return hne(pne(r),t)}function hne(r,t){return ke(this,null,function*(){let n=(yield dne()).transaction(wA,"readwrite"),o=n.objectStore(wA).put({compositeKey:r,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},n.onerror=c=>{var u;a($l.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function pne(r){return`${r.options.appId}-${r.name}`}var bA=new wm("@firebase/app-check");function yA(r,t){return _m()?fne(r,t).catch(e=>{bA.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function SL(){return bL().enabled}function AL(){return ke(this,null,function*(){let r=bL();if(r.enabled&&r.token)return r.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gne={error:"UNKNOWN_ERROR"};function mne(r){return yI.encodeString(JSON.stringify(r),!1)}function CA(r,t=!1){return ke(this,null,function*(){let e=r.app;CL(e);let n=Vs(e),i=n.token,o;if(i&&!eg(i)&&(n.token=void 0,i=void 0),!i){let c=yield n.cachedTokenPromise;c&&(eg(c)?i=c:yield yA(e,void 0))}if(!t&&i&&eg(i))return{token:i.token};let s=!1;if(SL()){n.exchangeTokenPromise||(n.exchangeTokenPromise=xL(EL(e,yield AL()),r.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),s=!0);let c=yield n.exchangeTokenPromise;return yield yA(e,c),n.token=c,{token:c.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),s=!0),i=yield Vs(e).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?bA.warn(c.message):bA.error(c),o=c}let a;return i?o?eg(i)?a={token:i.token,internalError:o}:a=_L(o):(a={token:i.token},n.token=i,yield yA(e,i)):a=_L(o),s&&wne(e,a),a})}function vne(r){return ke(this,null,function*(){let t=r.app;CL(t);let{provider:e}=Vs(t);if(SL()){let n=yield AL(),{token:i}=yield xL(EL(t,n),r.heartbeatServiceProvider);return{token:i}}else{let{token:n}=yield e.getToken();return{token:n}}})}function yne(r,t,e,n){let{app:i}=r,o=Vs(i),s={next:e,error:n,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&eg(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),yL(r)}).catch(()=>{})}o.cachedTokenPromise.then(()=>yL(r))}function TL(r,t){let e=Vs(r),n=e.tokenObservers.filter(i=>i.next!==t);n.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=n}function yL(r){let{app:t}=r,e=Vs(t),n=e.tokenRefresher;n||(n=_ne(r),e.tokenRefresher=n),!n.isRunning()&&e.isTokenAutoRefreshEnabled&&n.start()}function _ne(r){let{app:t}=r;return new _A(()=>ke(this,null,function*(){let e=Vs(t),n;if(e.token?n=yield CA(r,!0):n=yield CA(r),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let e=Vs(t);if(e.token){let n=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,i=e.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,i),Math.max(0,n-Date.now())}else return 0},vL.RETRIAL_MIN_WAIT,vL.RETRIAL_MAX_WAIT)}function wne(r,t){let e=Vs(r).tokenObservers;for(let n of e)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function eg(r){return r.expireTimeMillis-Date.now()>0}function _L(r){return{token:mne(gne),error:r}}var xA=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Vs(this.app);for(let e of t)TL(this.app,e.next);return Promise.resolve()}};function bne(r,t){return new xA(r,t)}function Cne(r){return{getToken:t=>CA(r,t),getLimitedUseToken:()=>vne(r),addTokenListener:t=>yne(r,"INTERNAL",t),removeTokenListener:t=>TL(r.app,t)}}var xne="@firebase/app-check",Ene="0.8.8";var Sne="app-check",wL="app-check-internal";function Ane(){xh(new Cc(Sne,r=>{let t=r.getProvider("app").getImmediate(),e=r.getProvider("heartbeat");return bne(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,t,e)=>{r.getProvider(wL).initialize()})),xh(new Cc(wL,r=>{let t=r.getProvider("app-check").getImmediate();return Cne(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),wl(xne,Ene)}Ane();var Tne=["localhost","0.0.0.0","127.0.0.1"],hge=typeof window<"u"&&Tne.includes(window.location.hostname);var One="firebase",Mne="10.13.2";so.registerVersion(One,Mne,"app-compat");var Pne=["ngOnDestroy"],PL=(r,t,e,n={})=>new Proxy(r,{get:(i,o)=>e.runOutsideAngular(()=>{if(r[o])return n?.spy?.get&&n.spy.get(o,r[o]),r[o];if(Pne.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>e.run(()=>u)):e.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(f=>{let g=f?.(...u);return n?.spy?.apply&&n.spy.apply(o,u,g),g})})})});var s0=class{constructor(t){return t}},lf=new wt("angularfire2.app.options"),cf=new wt("angularfire2.app.name");function tg(r,t,e){let n=typeof e=="string"&&e||"[DEFAULT]",i=typeof e=="object"&&e||{};i.name=i.name||n;let s=so.apps.filter(a=>a&&a.name===i.name)[0]||t.runOutsideAngular(()=>so.initializeApp(r,i));try{if(JSON.stringify(r)!==JSON.stringify(s.options)){let a=!!module.hot;Ine("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new s0(s)}var Ine=(r,...t)=>{Qx()&&typeof console<"u"&&console[r](...t)},Dne={provide:s0,useFactory:tg,deps:[lf,_n,[new Gh,cf]]},IL=(()=>{class r{static initializeApp(e,n){return{ngModule:r,providers:[{provide:lf,useValue:e},{provide:cf,useValue:n}]}}constructor(e){so.registerVersion("angularfire",au.full,"core"),so.registerVersion("angularfire",au.full,"app-compat"),so.registerVersion("angular",Nk.full,e.toString())}static \u0275fac=function(n){return new(n||r)(Xe(Vi))};static \u0275mod=Or({type:r});static \u0275inj=Tr({providers:[Dne]})}return r})();function a0(r,t,e,n,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===r)||[];if(o)return kne(i,s)||(ML("error",`${t} was already initialized on the ${e} Firebase App with different settings.${Rne?" You may need to reload as Firebase is not HMR aware.":""}`),ML("warn",{is:i,was:s})),o;{let a=n();return globalThis.\u0275AngularfireInstanceCache.push([r,a,i]),a}}function kne(r,t){try{return r.toString()===t.toString()}catch{return r===t}}var Rne=typeof module<"u"&&!!module.hot,ML=(r,...t)=>{Qx()&&typeof console<"u"&&console[r](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var EA=new wt("angularfire2.auth.use-emulator"),SA=new wt("angularfire2.auth.settings"),AA=new wt("angularfire2.auth.tenant-id"),TA=new wt("angularfire2.auth.langugage-code"),OA=new wt("angularfire2.auth.use-device-language"),MA=new wt("angularfire.auth.persistence"),PA=(r,t,e,n,i,o,s,a)=>a0(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{let c=t.runOutsideAngular(()=>r.auth());if(e&&c.useEmulator(...e),n&&(c.tenantId=n),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,f]of Object.entries(s))c.settings[u]=f;return a&&c.setPersistence(a),c},[e,n,i,o,s,a]),ng=(()=>{class r{authState;idToken;user;idTokenResult;credential;constructor(e,n,i,o,s,a,c,u,f,g,v,_){let b=new Fr,C=Ft(void 0).pipe(is(s.outsideAngular),ur(()=>o.runOutsideAngular(()=>import("./chunk-CWOYOKDL.js"))),Vt(()=>tg(e,o,n)),Vt(S=>PA(S,o,a,u,f,g,c,v)),Gm({bufferSize:1,refCount:!1}));if(Dl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ft(null);else{C.pipe(os()).subscribe();let S=C.pipe(ur(N=>N.getRedirectResult().then(G=>G,()=>null)),Ro,Gm({bufferSize:1,refCount:!1})),j=C.pipe(ur(N=>new un(G=>({unsubscribe:o.runOutsideAngular(()=>N.onAuthStateChanged(se=>G.next(se),se=>G.error(se),()=>G.complete()))})))),q=C.pipe(ur(N=>new un(G=>({unsubscribe:o.runOutsideAngular(()=>N.onIdTokenChanged(se=>G.next(se),se=>G.error(se),()=>G.complete()))}))));this.authState=S.pipe(Km(j),Os(s.outsideAngular),is(s.insideAngular)),this.user=S.pipe(Km(q),Os(s.outsideAngular),is(s.insideAngular)),this.idToken=this.user.pipe(ur(N=>N?yn(N.getIdToken()):Ft(null))),this.idTokenResult=this.user.pipe(ur(N=>N?yn(N.getIdTokenResult()):Ft(null))),this.credential=Vb(S,b,this.authState.pipe(pi(N=>!N))).pipe(Vt(N=>N?.user?N:null),Os(s.outsideAngular),is(s.insideAngular))}return PL(this,C,o,{spy:{apply:(S,j,q)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&q.then(N=>b.next(N))}}})}static \u0275fac=function(n){return new(n||r)(Xe(lf),Xe(cf,8),Xe(Vi),Xe(_n),Xe(i0),Xe(EA,8),Xe(SA,8),Xe(AA,8),Xe(TA,8),Xe(OA,8),Xe(MA,8),Xe(su,8))};static \u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"any"})}return r})(),DL=(()=>{class r{constructor(){so.registerVersion("angularfire",au.full,"auth-compat")}static \u0275fac=function(n){return new(n||r)};static \u0275mod=Or({type:r});static \u0275inj=Tr({providers:[ng]})}return r})();var RL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NL={};var Wl,IA;(function(){var r;function t(Y,L){function k(){}k.prototype=L.prototype,Y.D=L.prototype,Y.prototype=new k,Y.prototype.constructor=Y,Y.C=function($,I,T){for(var O=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)O[Z-2]=arguments[Z];return L.prototype[I].apply($,O)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(Y,L,k){k||(k=0);var $=Array(16);if(typeof L=="string")for(var I=0;16>I;++I)$[I]=L.charCodeAt(k++)|L.charCodeAt(k++)<<8|L.charCodeAt(k++)<<16|L.charCodeAt(k++)<<24;else for(I=0;16>I;++I)$[I]=L[k++]|L[k++]<<8|L[k++]<<16|L[k++]<<24;L=Y.g[0],k=Y.g[1],I=Y.g[2];var T=Y.g[3],O=L+(T^k&(I^T))+$[0]+3614090360&4294967295;L=k+(O<<7&4294967295|O>>>25),O=T+(I^L&(k^I))+$[1]+3905402710&4294967295,T=L+(O<<12&4294967295|O>>>20),O=I+(k^T&(L^k))+$[2]+606105819&4294967295,I=T+(O<<17&4294967295|O>>>15),O=k+(L^I&(T^L))+$[3]+3250441966&4294967295,k=I+(O<<22&4294967295|O>>>10),O=L+(T^k&(I^T))+$[4]+4118548399&4294967295,L=k+(O<<7&4294967295|O>>>25),O=T+(I^L&(k^I))+$[5]+1200080426&4294967295,T=L+(O<<12&4294967295|O>>>20),O=I+(k^T&(L^k))+$[6]+2821735955&4294967295,I=T+(O<<17&4294967295|O>>>15),O=k+(L^I&(T^L))+$[7]+4249261313&4294967295,k=I+(O<<22&4294967295|O>>>10),O=L+(T^k&(I^T))+$[8]+1770035416&4294967295,L=k+(O<<7&4294967295|O>>>25),O=T+(I^L&(k^I))+$[9]+2336552879&4294967295,T=L+(O<<12&4294967295|O>>>20),O=I+(k^T&(L^k))+$[10]+4294925233&4294967295,I=T+(O<<17&4294967295|O>>>15),O=k+(L^I&(T^L))+$[11]+2304563134&4294967295,k=I+(O<<22&4294967295|O>>>10),O=L+(T^k&(I^T))+$[12]+1804603682&4294967295,L=k+(O<<7&4294967295|O>>>25),O=T+(I^L&(k^I))+$[13]+4254626195&4294967295,T=L+(O<<12&4294967295|O>>>20),O=I+(k^T&(L^k))+$[14]+2792965006&4294967295,I=T+(O<<17&4294967295|O>>>15),O=k+(L^I&(T^L))+$[15]+1236535329&4294967295,k=I+(O<<22&4294967295|O>>>10),O=L+(I^T&(k^I))+$[1]+4129170786&4294967295,L=k+(O<<5&4294967295|O>>>27),O=T+(k^I&(L^k))+$[6]+3225465664&4294967295,T=L+(O<<9&4294967295|O>>>23),O=I+(L^k&(T^L))+$[11]+643717713&4294967295,I=T+(O<<14&4294967295|O>>>18),O=k+(T^L&(I^T))+$[0]+3921069994&4294967295,k=I+(O<<20&4294967295|O>>>12),O=L+(I^T&(k^I))+$[5]+3593408605&4294967295,L=k+(O<<5&4294967295|O>>>27),O=T+(k^I&(L^k))+$[10]+38016083&4294967295,T=L+(O<<9&4294967295|O>>>23),O=I+(L^k&(T^L))+$[15]+3634488961&4294967295,I=T+(O<<14&4294967295|O>>>18),O=k+(T^L&(I^T))+$[4]+3889429448&4294967295,k=I+(O<<20&4294967295|O>>>12),O=L+(I^T&(k^I))+$[9]+568446438&4294967295,L=k+(O<<5&4294967295|O>>>27),O=T+(k^I&(L^k))+$[14]+3275163606&4294967295,T=L+(O<<9&4294967295|O>>>23),O=I+(L^k&(T^L))+$[3]+4107603335&4294967295,I=T+(O<<14&4294967295|O>>>18),O=k+(T^L&(I^T))+$[8]+1163531501&4294967295,k=I+(O<<20&4294967295|O>>>12),O=L+(I^T&(k^I))+$[13]+2850285829&4294967295,L=k+(O<<5&4294967295|O>>>27),O=T+(k^I&(L^k))+$[2]+4243563512&4294967295,T=L+(O<<9&4294967295|O>>>23),O=I+(L^k&(T^L))+$[7]+1735328473&4294967295,I=T+(O<<14&4294967295|O>>>18),O=k+(T^L&(I^T))+$[12]+2368359562&4294967295,k=I+(O<<20&4294967295|O>>>12),O=L+(k^I^T)+$[5]+4294588738&4294967295,L=k+(O<<4&4294967295|O>>>28),O=T+(L^k^I)+$[8]+2272392833&4294967295,T=L+(O<<11&4294967295|O>>>21),O=I+(T^L^k)+$[11]+1839030562&4294967295,I=T+(O<<16&4294967295|O>>>16),O=k+(I^T^L)+$[14]+4259657740&4294967295,k=I+(O<<23&4294967295|O>>>9),O=L+(k^I^T)+$[1]+2763975236&4294967295,L=k+(O<<4&4294967295|O>>>28),O=T+(L^k^I)+$[4]+1272893353&4294967295,T=L+(O<<11&4294967295|O>>>21),O=I+(T^L^k)+$[7]+4139469664&4294967295,I=T+(O<<16&4294967295|O>>>16),O=k+(I^T^L)+$[10]+3200236656&4294967295,k=I+(O<<23&4294967295|O>>>9),O=L+(k^I^T)+$[13]+681279174&4294967295,L=k+(O<<4&4294967295|O>>>28),O=T+(L^k^I)+$[0]+3936430074&4294967295,T=L+(O<<11&4294967295|O>>>21),O=I+(T^L^k)+$[3]+3572445317&4294967295,I=T+(O<<16&4294967295|O>>>16),O=k+(I^T^L)+$[6]+76029189&4294967295,k=I+(O<<23&4294967295|O>>>9),O=L+(k^I^T)+$[9]+3654602809&4294967295,L=k+(O<<4&4294967295|O>>>28),O=T+(L^k^I)+$[12]+3873151461&4294967295,T=L+(O<<11&4294967295|O>>>21),O=I+(T^L^k)+$[15]+530742520&4294967295,I=T+(O<<16&4294967295|O>>>16),O=k+(I^T^L)+$[2]+3299628645&4294967295,k=I+(O<<23&4294967295|O>>>9),O=L+(I^(k|~T))+$[0]+4096336452&4294967295,L=k+(O<<6&4294967295|O>>>26),O=T+(k^(L|~I))+$[7]+1126891415&4294967295,T=L+(O<<10&4294967295|O>>>22),O=I+(L^(T|~k))+$[14]+2878612391&4294967295,I=T+(O<<15&4294967295|O>>>17),O=k+(T^(I|~L))+$[5]+4237533241&4294967295,k=I+(O<<21&4294967295|O>>>11),O=L+(I^(k|~T))+$[12]+1700485571&4294967295,L=k+(O<<6&4294967295|O>>>26),O=T+(k^(L|~I))+$[3]+2399980690&4294967295,T=L+(O<<10&4294967295|O>>>22),O=I+(L^(T|~k))+$[10]+4293915773&4294967295,I=T+(O<<15&4294967295|O>>>17),O=k+(T^(I|~L))+$[1]+2240044497&4294967295,k=I+(O<<21&4294967295|O>>>11),O=L+(I^(k|~T))+$[8]+1873313359&4294967295,L=k+(O<<6&4294967295|O>>>26),O=T+(k^(L|~I))+$[15]+4264355552&4294967295,T=L+(O<<10&4294967295|O>>>22),O=I+(L^(T|~k))+$[6]+2734768916&4294967295,I=T+(O<<15&4294967295|O>>>17),O=k+(T^(I|~L))+$[13]+1309151649&4294967295,k=I+(O<<21&4294967295|O>>>11),O=L+(I^(k|~T))+$[4]+4149444226&4294967295,L=k+(O<<6&4294967295|O>>>26),O=T+(k^(L|~I))+$[11]+3174756917&4294967295,T=L+(O<<10&4294967295|O>>>22),O=I+(L^(T|~k))+$[2]+718787259&4294967295,I=T+(O<<15&4294967295|O>>>17),O=k+(T^(I|~L))+$[9]+3951481745&4294967295,Y.g[0]=Y.g[0]+L&4294967295,Y.g[1]=Y.g[1]+(I+(O<<21&4294967295|O>>>11))&4294967295,Y.g[2]=Y.g[2]+I&4294967295,Y.g[3]=Y.g[3]+T&4294967295}n.prototype.u=function(Y,L){L===void 0&&(L=Y.length);for(var k=L-this.blockSize,$=this.B,I=this.h,T=0;T<L;){if(I==0)for(;T<=k;)i(this,Y,T),T+=this.blockSize;if(typeof Y=="string"){for(;T<L;)if($[I++]=Y.charCodeAt(T++),I==this.blockSize){i(this,$),I=0;break}}else for(;T<L;)if($[I++]=Y[T++],I==this.blockSize){i(this,$),I=0;break}}this.h=I,this.o+=L},n.prototype.v=function(){var Y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Y[0]=128;for(var L=1;L<Y.length-8;++L)Y[L]=0;var k=8*this.o;for(L=Y.length-8;L<Y.length;++L)Y[L]=k&255,k/=256;for(this.u(Y),Y=Array(16),L=k=0;4>L;++L)for(var $=0;32>$;$+=8)Y[k++]=this.g[L]>>>$&255;return Y};function o(Y,L){var k=a;return Object.prototype.hasOwnProperty.call(k,Y)?k[Y]:k[Y]=L(Y)}function s(Y,L){this.h=L;for(var k=[],$=!0,I=Y.length-1;0<=I;I--){var T=Y[I]|0;$&&T==L||(k[I]=T,$=!1)}this.g=k}var a={};function c(Y){return-128<=Y&&128>Y?o(Y,function(L){return new s([L|0],0>L?-1:0)}):new s([Y|0],0>Y?-1:0)}function u(Y){if(isNaN(Y)||!isFinite(Y))return g;if(0>Y)return S(u(-Y));for(var L=[],k=1,$=0;Y>=k;$++)L[$]=Y/k|0,k*=4294967296;return new s(L,0)}function f(Y,L){if(Y.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(Y.charAt(0)=="-")return S(f(Y.substring(1),L));if(0<=Y.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(L,8)),$=g,I=0;I<Y.length;I+=8){var T=Math.min(8,Y.length-I),O=parseInt(Y.substring(I,I+T),L);8>T?(T=u(Math.pow(L,T)),$=$.j(T).add(u(O))):($=$.j(k),$=$.add(u(O)))}return $}var g=c(0),v=c(1),_=c(16777216);r=s.prototype,r.m=function(){if(C(this))return-S(this).m();for(var Y=0,L=1,k=0;k<this.g.length;k++){var $=this.i(k);Y+=(0<=$?$:4294967296+$)*L,L*=4294967296}return Y},r.toString=function(Y){if(Y=Y||10,2>Y||36<Y)throw Error("radix out of range: "+Y);if(b(this))return"0";if(C(this))return"-"+S(this).toString(Y);for(var L=u(Math.pow(Y,6)),k=this,$="";;){var I=G(k,L).g;k=j(k,I.j(L));var T=((0<k.g.length?k.g[0]:k.h)>>>0).toString(Y);if(k=I,b(k))return T+$;for(;6>T.length;)T="0"+T;$=T+$}},r.i=function(Y){return 0>Y?0:Y<this.g.length?this.g[Y]:this.h};function b(Y){if(Y.h!=0)return!1;for(var L=0;L<Y.g.length;L++)if(Y.g[L]!=0)return!1;return!0}function C(Y){return Y.h==-1}r.l=function(Y){return Y=j(this,Y),C(Y)?-1:b(Y)?0:1};function S(Y){for(var L=Y.g.length,k=[],$=0;$<L;$++)k[$]=~Y.g[$];return new s(k,~Y.h).add(v)}r.abs=function(){return C(this)?S(this):this},r.add=function(Y){for(var L=Math.max(this.g.length,Y.g.length),k=[],$=0,I=0;I<=L;I++){var T=$+(this.i(I)&65535)+(Y.i(I)&65535),O=(T>>>16)+(this.i(I)>>>16)+(Y.i(I)>>>16);$=O>>>16,T&=65535,O&=65535,k[I]=O<<16|T}return new s(k,k[k.length-1]&-2147483648?-1:0)};function j(Y,L){return Y.add(S(L))}r.j=function(Y){if(b(this)||b(Y))return g;if(C(this))return C(Y)?S(this).j(S(Y)):S(S(this).j(Y));if(C(Y))return S(this.j(S(Y)));if(0>this.l(_)&&0>Y.l(_))return u(this.m()*Y.m());for(var L=this.g.length+Y.g.length,k=[],$=0;$<2*L;$++)k[$]=0;for($=0;$<this.g.length;$++)for(var I=0;I<Y.g.length;I++){var T=this.i($)>>>16,O=this.i($)&65535,Z=Y.i(I)>>>16,ce=Y.i(I)&65535;k[2*$+2*I]+=O*ce,q(k,2*$+2*I),k[2*$+2*I+1]+=T*ce,q(k,2*$+2*I+1),k[2*$+2*I+1]+=O*Z,q(k,2*$+2*I+1),k[2*$+2*I+2]+=T*Z,q(k,2*$+2*I+2)}for($=0;$<L;$++)k[$]=k[2*$+1]<<16|k[2*$];for($=L;$<2*L;$++)k[$]=0;return new s(k,0)};function q(Y,L){for(;(Y[L]&65535)!=Y[L];)Y[L+1]+=Y[L]>>>16,Y[L]&=65535,L++}function N(Y,L){this.g=Y,this.h=L}function G(Y,L){if(b(L))throw Error("division by zero");if(b(Y))return new N(g,g);if(C(Y))return L=G(S(Y),L),new N(S(L.g),S(L.h));if(C(L))return L=G(Y,S(L)),new N(S(L.g),L.h);if(30<Y.g.length){if(C(Y)||C(L))throw Error("slowDivide_ only works with positive integers.");for(var k=v,$=L;0>=$.l(Y);)k=se(k),$=se($);var I=ue(k,1),T=ue($,1);for($=ue($,2),k=ue(k,2);!b($);){var O=T.add($);0>=O.l(Y)&&(I=I.add(k),T=O),$=ue($,1),k=ue(k,1)}return L=j(Y,I.j(L)),new N(I,L)}for(I=g;0<=Y.l(L);){for(k=Math.max(1,Math.floor(Y.m()/L.m())),$=Math.ceil(Math.log(k)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),T=u(k),O=T.j(L);C(O)||0<O.l(Y);)k-=$,T=u(k),O=T.j(L);b(T)&&(T=v),I=I.add(T),Y=j(Y,O)}return new N(I,Y)}r.A=function(Y){return G(this,Y).h},r.and=function(Y){for(var L=Math.max(this.g.length,Y.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)&Y.i($);return new s(k,this.h&Y.h)},r.or=function(Y){for(var L=Math.max(this.g.length,Y.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)|Y.i($);return new s(k,this.h|Y.h)},r.xor=function(Y){for(var L=Math.max(this.g.length,Y.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)^Y.i($);return new s(k,this.h^Y.h)};function se(Y){for(var L=Y.g.length+1,k=[],$=0;$<L;$++)k[$]=Y.i($)<<1|Y.i($-1)>>>31;return new s(k,Y.h)}function ue(Y,L){var k=L>>5;L%=32;for(var $=Y.g.length-k,I=[],T=0;T<$;T++)I[T]=0<L?Y.i(T+k)>>>L|Y.i(T+k+1)<<32-L:Y.i(T+k);return new s(I,Y.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,IA=NL.Md5=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Wl=NL.Integer=s}).apply(typeof RL<"u"?RL:typeof self<"u"?self:typeof window<"u"?window:{});var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xa={};var DA,kA,uf,RA,rg,c0,NA,jA,FA;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,E,D){return y==Array.prototype||y==Object.prototype||(y[E]=D.value),y};function e(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof l0=="object"&&l0];for(var E=0;E<y.length;++E){var D=y[E];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var n=e(this);function i(y,E){if(E)e:{var D=n;y=y.split(".");for(var J=0;J<y.length-1;J++){var Ce=y[J];if(!(Ce in D))break e;D=D[Ce]}y=y[y.length-1],J=D[y],E=E(J),E!=J&&E!=null&&t(D,y,{configurable:!0,writable:!0,value:E})}}function o(y,E){y instanceof String&&(y+="");var D=0,J=!1,Ce={next:function(){if(!J&&D<y.length){var Oe=D++;return{value:E(Oe,y[Oe]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Ce[Symbol.iterator]=function(){return Ce},Ce}i("Array.prototype.values",function(y){return y||function(){return o(this,function(E,D){return D})}});var s=s||{},a=this||self;function c(y){var E=typeof y;return E=E!="object"?E:y?Array.isArray(y)?"array":E:"null",E=="array"||E=="object"&&typeof y.length=="number"}function u(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function f(y,E,D){return y.call.apply(y.bind,arguments)}function g(y,E,D){if(!y)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ce,J),y.apply(E,Ce)}}return function(){return y.apply(E,arguments)}}function v(y,E,D){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function _(y,E){var D=Array.prototype.slice.call(arguments,1);return function(){var J=D.slice();return J.push.apply(J,arguments),y.apply(this,J)}}function b(y,E){function D(){}D.prototype=E.prototype,y.aa=E.prototype,y.prototype=new D,y.prototype.constructor=y,y.Qb=function(J,Ce,Oe){for(var Ze=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)Ze[mn-2]=arguments[mn];return E.prototype[Ce].apply(J,Ze)}}function C(y){let E=y.length;if(0<E){let D=Array(E);for(let J=0;J<E;J++)D[J]=y[J];return D}return[]}function S(y,E){for(let D=1;D<arguments.length;D++){let J=arguments[D];if(c(J)){let Ce=y.length||0,Oe=J.length||0;y.length=Ce+Oe;for(let Ze=0;Ze<Oe;Ze++)y[Ce+Ze]=J[Ze]}else y.push(J)}}class j{constructor(E,D){this.i=E,this.j=D,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function q(y){return/^[\s\xa0]*$/.test(y)}function N(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function G(y){return G[" "](y),y}G[" "]=function(){};var se=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function ue(y,E,D){for(let J in y)E.call(D,y[J],J,y)}function Y(y,E){for(let D in y)E.call(void 0,y[D],D,y)}function L(y){let E={};for(let D in y)E[D]=y[D];return E}let k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(y,E){let D,J;for(let Ce=1;Ce<arguments.length;Ce++){J=arguments[Ce];for(D in J)y[D]=J[D];for(let Oe=0;Oe<k.length;Oe++)D=k[Oe],Object.prototype.hasOwnProperty.call(J,D)&&(y[D]=J[D])}}function I(y){var E=1;y=y.split(":");let D=[];for(;0<E&&y.length;)D.push(y.shift()),E--;return y.length&&D.push(y.join(":")),D}function T(y){a.setTimeout(()=>{throw y},0)}function O(){var y=ze;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class Z{constructor(){this.h=this.g=null}add(E,D){let J=ce.get();J.set(E,D),this.h?this.h.next=J:this.g=J,this.h=J}}var ce=new j(()=>new V,y=>y.reset());class V{constructor(){this.next=this.g=this.h=null}set(E,D){this.h=E,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,Ee=!1,ze=new Z,pt=()=>{let y=a.Promise.resolve(void 0);xe=()=>{y.then(ft)}};var ft=()=>{for(var y;y=O();){try{y.h.call(y.g)}catch(D){T(D)}var E=ce;E.j(y),100>E.h&&(E.h++,y.next=E.g,E.g=y)}Ee=!1};function Pt(){this.s=this.s,this.C=this.C}Pt.prototype.s=!1,Pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{let D=()=>{};a.addEventListener("test",D,E),a.removeEventListener("test",D,E)}catch{}return y}();function $e(y,E){if(be.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var D=this.type=y.type,J=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget){if(se){e:{try{G(E.nodeName);var Ce=!0;break e}catch{}Ce=!1}Ce||(E=null)}}else D=="mouseover"?E=y.fromElement:D=="mouseout"&&(E=y.toElement);this.relatedTarget=E,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:de[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&$e.aa.h.call(this)}}b($e,be);var de={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Je(y,E,D,J,Ce){this.listener=y,this.proxy=null,this.src=E,this.type=D,this.capture=!!J,this.ha=Ce,this.key=++Re,this.da=this.fa=!1}function Qe(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function qe(y){this.src=y,this.g={},this.h=0}qe.prototype.add=function(y,E,D,J,Ce){var Oe=y.toString();y=this.g[Oe],y||(y=this.g[Oe]=[],this.h++);var Ze=Xt(y,E,J,Ce);return-1<Ze?(E=y[Ze],D||(E.fa=!1)):(E=new Je(E,this.src,Oe,!!J,Ce),E.fa=D,y.push(E)),E};function ut(y,E){var D=E.type;if(D in y.g){var J=y.g[D],Ce=Array.prototype.indexOf.call(J,E,void 0),Oe;(Oe=0<=Ce)&&Array.prototype.splice.call(J,Ce,1),Oe&&(Qe(E),y.g[D].length==0&&(delete y.g[D],y.h--))}}function Xt(y,E,D,J){for(var Ce=0;Ce<y.length;++Ce){var Oe=y[Ce];if(!Oe.da&&Oe.listener==E&&Oe.capture==!!D&&Oe.ha==J)return Ce}return-1}var It="closure_lm_"+(1e6*Math.random()|0),Ln={};function xn(y,E,D,J,Ce){if(J&&J.once)return K(y,E,D,J,Ce);if(Array.isArray(E)){for(var Oe=0;Oe<E.length;Oe++)xn(y,E[Oe],D,J,Ce);return null}return D=yt(D),y&&y[Ae]?y.K(E,D,u(J)?!!J.capture:!!J,Ce):Lt(y,E,D,!1,J,Ce)}function Lt(y,E,D,J,Ce,Oe){if(!E)throw Error("Invalid event type");var Ze=u(Ce)?!!Ce.capture:!!Ce,mn=ve(y);if(mn||(y[It]=mn=new qe(y)),D=mn.add(E,D,J,Ze,Oe),D.proxy)return D;if(J=R(),D.proxy=J,J.src=y,J.listener=D,y.addEventListener)Te||(Ce=Ze),Ce===void 0&&(Ce=!1),y.addEventListener(E.toString(),J,Ce);else if(y.attachEvent)y.attachEvent(Se(E.toString()),J);else if(y.addListener&&y.removeListener)y.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return D}function R(){function y(D){return E.call(y.src,y.listener,D)}let E=X;return y}function K(y,E,D,J,Ce){if(Array.isArray(E)){for(var Oe=0;Oe<E.length;Oe++)K(y,E[Oe],D,J,Ce);return null}return D=yt(D),y&&y[Ae]?y.L(E,D,u(J)?!!J.capture:!!J,Ce):Lt(y,E,D,!0,J,Ce)}function ee(y,E,D,J,Ce){if(Array.isArray(E))for(var Oe=0;Oe<E.length;Oe++)ee(y,E[Oe],D,J,Ce);else J=u(J)?!!J.capture:!!J,D=yt(D),y&&y[Ae]?(y=y.i,E=String(E).toString(),E in y.g&&(Oe=y.g[E],D=Xt(Oe,D,J,Ce),-1<D&&(Qe(Oe[D]),Array.prototype.splice.call(Oe,D,1),Oe.length==0&&(delete y.g[E],y.h--)))):y&&(y=ve(y))&&(E=y.g[E.toString()],y=-1,E&&(y=Xt(E,D,J,Ce)),(D=-1<y?E[y]:null)&&he(D))}function he(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[Ae])ut(E.i,y);else{var D=y.type,J=y.proxy;E.removeEventListener?E.removeEventListener(D,J,y.capture):E.detachEvent?E.detachEvent(Se(D),J):E.addListener&&E.removeListener&&E.removeListener(J),(D=ve(E))?(ut(D,y),D.h==0&&(D.src=null,E[It]=null)):Qe(y)}}}function Se(y){return y in Ln?Ln[y]:Ln[y]="on"+y}function X(y,E){if(y.da)y=!0;else{E=new $e(E,this);var D=y.listener,J=y.ha||y.src;y.fa&&he(y),y=D.call(J,E)}return y}function ve(y){return y=y[It],y instanceof qe?y:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(y){return typeof y=="function"?y:(y[fe]||(y[fe]=function(E){return y.handleEvent(E)}),y[fe])}function St(){Pt.call(this),this.i=new qe(this),this.M=this,this.F=null}b(St,Pt),St.prototype[Ae]=!0,St.prototype.removeEventListener=function(y,E,D,J){ee(this,y,E,D,J)};function Ct(y,E){var D,J=y.F;if(J)for(D=[];J;J=J.F)D.push(J);if(y=y.M,J=E.type||E,typeof E=="string")E=new be(E,y);else if(E instanceof be)E.target=E.target||y;else{var Ce=E;E=new be(J,y),$(E,Ce)}if(Ce=!0,D)for(var Oe=D.length-1;0<=Oe;Oe--){var Ze=E.g=D[Oe];Ce=Q(Ze,J,!0,E)&&Ce}if(Ze=E.g=y,Ce=Q(Ze,J,!0,E)&&Ce,Ce=Q(Ze,J,!1,E)&&Ce,D)for(Oe=0;Oe<D.length;Oe++)Ze=E.g=D[Oe],Ce=Q(Ze,J,!1,E)&&Ce}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var y=this.i,E;for(E in y.g){for(var D=y.g[E],J=0;J<D.length;J++)Qe(D[J]);delete y.g[E],y.h--}}this.F=null},St.prototype.K=function(y,E,D,J){return this.i.add(String(y),E,!1,D,J)},St.prototype.L=function(y,E,D,J){return this.i.add(String(y),E,!0,D,J)};function Q(y,E,D,J){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();for(var Ce=!0,Oe=0;Oe<E.length;++Oe){var Ze=E[Oe];if(Ze&&!Ze.da&&Ze.capture==D){var mn=Ze.listener,tr=Ze.ha||Ze.src;Ze.fa&&ut(y.i,Ze),Ce=mn.call(tr,J)!==!1&&Ce}}return Ce&&!J.defaultPrevented}function le(y,E,D){if(typeof y=="function")D&&(y=v(y,D));else if(y&&typeof y.handleEvent=="function")y=v(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(y,E||0)}function U(y){y.g=le(()=>{y.g=null,y.i&&(y.i=!1,U(y))},y.l);let E=y.h;y.h=null,y.m.apply(null,E)}class Ne extends Pt{constructor(E,D){super(),this.m=E,this.l=D,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:U(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(y){Pt.call(this),this.h=y,this.g={}}b(ye,Pt);var Ue=[];function lt(y){ue(y.g,function(E,D){this.g.hasOwnProperty(D)&&he(E)},y),y.g={}}ye.prototype.N=function(){ye.aa.N.call(this),lt(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var at=a.JSON.stringify,tt=a.JSON.parse,Tt=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function qt(){}qt.prototype.h=null;function en(y){return y.h||(y.h=y.i())}function Jt(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ar(){be.call(this,"d")}b(ar,be);function W(){be.call(this,"c")}b(W,be);var oe={},ge=null;function je(){return ge=ge||new St}oe.La="serverreachability";function nt(y){be.call(this,oe.La,y)}b(nt,be);function xt(y){let E=je();Ct(E,new nt(E))}oe.STAT_EVENT="statevent";function Ht(y,E){be.call(this,oe.STAT_EVENT,y),this.stat=E}b(Ht,be);function fn(y){let E=je();Ct(E,new Ht(E,y))}oe.Ma="timingevent";function Pn(y,E){be.call(this,oe.Ma,y),this.size=E}b(Pn,be);function In(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},E)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Cr(y,E,D,J,Ce,Oe){y.info(function(){if(y.g)if(Oe)for(var Ze="",mn=Oe.split("&"),tr=0;tr<mn.length;tr++){var hn=mn[tr].split("=");if(1<hn.length){var Dn=hn[0];hn=hn[1];var Jn=Dn.split("_");Ze=2<=Jn.length&&Jn[1]=="type"?Ze+(Dn+"="+hn+"&"):Ze+(Dn+"=redacted&")}}else Ze=null;else Ze=Oe;return"XMLHTTP REQ ("+J+") [attempt "+Ce+"]: "+E+`
`+D+`
`+Ze})}function $n(y,E,D,J,Ce,Oe,Ze){y.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Ce+"]: "+E+`
`+D+`
`+Oe+" "+Ze})}function $r(y,E,D,J){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Wn(y,D)+(J?" "+J:"")})}function Nn(y,E){y.info(function(){return"TIMEOUT: "+E})}zr.prototype.info=function(){};function Wn(y,E){if(!y.g)return E;if(!E)return null;try{var D=JSON.parse(E);if(D){for(y=0;y<D.length;y++)if(Array.isArray(D[y])){var J=D[y];if(!(2>J.length)){var Ce=J[1];if(Array.isArray(Ce)&&!(1>Ce.length)){var Oe=Ce[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var Ze=1;Ze<Ce.length;Ze++)Ce[Ze]=""}}}}return at(D)}catch{return E}}var Vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ci={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cn;function Pr(){}b(Pr,qt),Pr.prototype.g=function(){return new XMLHttpRequest},Pr.prototype.i=function(){return{}},cn=new Pr;function Dt(y,E,D,J){this.j=y,this.i=E,this.l=D,this.R=J||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ir}function Ir(){this.i=null,this.g="",this.h=!1}var Xn={},Wr={};function gn(y,E,D){y.L=1,y.v=Fo(qr(E)),y.m=D,y.P=!0,ht(y,null)}function ht(y,E){y.F=Date.now(),Qn(y),y.A=qr(y.v);var D=y.A,J=y.R;Array.isArray(J)||(J=[String(J)]),ws(D.i,"t",J),y.C=0,D=y.j.J,y.h=new Ir,y.g=Bo(y.j,D?E:null,!y.m),0<y.O&&(y.M=new Ne(v(y.Y,y,y.g),y.O)),E=y.U,D=y.g,J=y.ca;var Ce="readystatechange";Array.isArray(Ce)||(Ce&&(Ue[0]=Ce.toString()),Ce=Ue);for(var Oe=0;Oe<Ce.length;Oe++){var Ze=xn(D,Ce[Oe],J||E.handleEvent,!1,E.h||E);if(!Ze)break;E.g[Ze.key]=Ze}E=y.H?L(y.H):{},y.m?(y.u||(y.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,E)):(y.u="GET",y.g.ea(y.A,y.u,null,E)),xt(),Cr(y.i,y.u,y.A,y.l,y.R,y.m)}Dt.prototype.ca=function(y){y=y.target;let E=this.M;E&&_i(y)==3?E.j():this.Y(y)},Dt.prototype.Y=function(y){try{if(y==this.g)e:{let Jn=_i(this.g);var E=this.g.Ba();let P=this.g.Z();if(!(3>Jn)&&(Jn!=3||this.g&&(this.h.h||this.g.oa()||Sr(this.g)))){this.J||Jn!=4||E==7||(E==8||0>=P?xt(3):xt(2)),En(this);var D=this.g.Z();this.X=D;t:if(pr(this)){var J=Sr(this.g);y="";var Ce=J.length,Oe=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),si(this);var Ze="";break t}this.h.i=new a.TextDecoder}for(E=0;E<Ce;E++)this.h.h=!0,y+=this.h.i.decode(J[E],{stream:!(Oe&&E==Ce-1)});J.length=0,this.h.g+=y,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=D==200,$n(this.i,this.u,this.A,this.l,this.R,Jn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var mn,tr=this.g;if((mn=tr.g?tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(mn)){var hn=mn;break t}}hn=null}if(D=hn)$r(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Be(this,D);else{this.o=!1,this.s=3,fn(12),Dr(this),si(this);break e}}if(this.P){D=!0;let z;for(;!this.J&&this.C<Ze.length;)if(z=oi(this,Ze),z==Wr){Jn==4&&(this.s=4,fn(14),D=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(z==Xn){this.s=4,fn(15),$r(this.i,this.l,Ze,"[Invalid Chunk]"),D=!1;break}else $r(this.i,this.l,z,null),Be(this,z);if(pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jn!=4||Ze.length!=0||this.h.h||(this.s=1,fn(16),D=!1),this.o=this.o&&D,!D)$r(this.i,this.l,Ze,"[Invalid Chunked Response]"),Dr(this),si(this);else if(0<Ze.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),Qs(Dn),Dn.M=!0,fn(11))}}else $r(this.i,this.l,Ze,null),Be(this,Ze);Jn==4&&Dr(this),this.o&&!this.J&&(Jn==4?ju(this.j,this):(this.o=!1,Qn(this)))}else Ru(this.g),D==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Dr(this),si(this)}}}catch{}finally{}};function pr(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function oi(y,E){var D=y.C,J=E.indexOf(`
`,D);return J==-1?Wr:(D=Number(E.substring(D,J)),isNaN(D)?Xn:(J+=1,J+D>E.length?Wr:(E=E.slice(J,J+D),y.C=J+D,E)))}Dt.prototype.cancel=function(){this.J=!0,Dr(this)};function Qn(y){y.S=Date.now()+y.I,zt(y,y.I)}function zt(y,E){if(y.B!=null)throw Error("WatchDog timer not null");y.B=In(v(y.ba,y),E)}function En(y){y.B&&(a.clearTimeout(y.B),y.B=null)}Dt.prototype.ba=function(){this.B=null;let y=Date.now();0<=y-this.S?(Nn(this.i,this.A),this.L!=2&&(xt(),fn(17)),Dr(this),this.s=2,si(this)):zt(this,this.S-y)};function si(y){y.j.G==0||y.J||ju(y.j,y)}function Dr(y){En(y);var E=y.M;E&&typeof E.ma=="function"&&E.ma(),y.M=null,lt(y.U),y.g&&(E=y.g,y.g=null,E.abort(),E.ma())}function Be(y,E){try{var D=y.j;if(D.G!=0&&(D.g==y||De(D.h,y))){if(!y.K&&De(D.h,y)&&D.G==3){try{var J=D.Da.g.parse(E)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Ce=J;if(Ce[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<y.F)Pa(D),Gs(D);else break e;Ma(D),fn(18)}}else D.za=Ce[1],0<D.za-D.T&&37500>Ce[2]&&D.F&&D.v==0&&!D.C&&(D.C=In(v(D.Za,D),6e3));if(1>=re(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else Ri(D,11)}else if((y.K||D.g==y)&&Pa(D),!q(E))for(Ce=D.Da.g.parse(E),E=0;E<Ce.length;E++){let hn=Ce[E];if(D.T=hn[0],hn=hn[1],D.G==2)if(hn[0]=="c"){D.K=hn[1],D.ia=hn[2];let Dn=hn[3];Dn!=null&&(D.la=Dn,D.j.info("VER="+D.la));let Jn=hn[4];Jn!=null&&(D.Aa=Jn,D.j.info("SVER="+D.Aa));let P=hn[5];P!=null&&typeof P=="number"&&0<P&&(J=1.5*P,D.L=J,D.j.info("backChannelRequestTimeoutMs_="+J)),J=D;let z=y.g;if(z){let ne=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var Oe=J.h;Oe.g||ne.indexOf("spdy")==-1&&ne.indexOf("quic")==-1&&ne.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(He(Oe,Oe.h),Oe.h=null))}if(J.D){let ae=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(J.ya=ae,Tn(J.I,J.D,ae))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-y.F,D.j.info("Handshake RTT: "+D.R+"ms")),J=D;var Ze=y;if(J.qa=Cs(J,J.J?J.ia:null,J.W),Ze.K){Ge(J.h,Ze);var mn=Ze,tr=J.L;tr&&(mn.I=tr),mn.B&&(En(mn),Qn(mn)),J.g=Ze}else fc(J);0<D.i.length&&Ta(D)}else hn[0]!="stop"&&hn[0]!="close"||Ri(D,7);else D.G==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Ri(D,7):Sa(D):hn[0]!="noop"&&D.l&&D.l.ta(hn),D.v=0)}}xt(4)}catch{}}var Nt=class{constructor(y,E){this.g=y,this.map=E}};function yi(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function H(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function re(y){return y.h?1:y.g?y.g.size:0}function De(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function He(y,E){y.g?y.g.add(E):y.h=E}function Ge(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}yi.prototype.cancel=function(){if(this.i=Gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let y of this.g.values())y.cancel();this.g.clear()}};function Gt(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let E=y.i;for(let D of y.g.values())E=E.concat(D.D);return E}return C(y.i)}function tn(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(c(y)){for(var E=[],D=y.length,J=0;J<D;J++)E.push(y[J]);return E}E=[],D=0;for(J in y)E[D++]=y[J];return E}function Sn(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(c(y)||typeof y=="string"){var E=[];y=y.length;for(var D=0;D<y;D++)E.push(D);return E}E=[],D=0;for(let J in y)E[D++]=J;return E}}}function An(y,E){if(y.forEach&&typeof y.forEach=="function")y.forEach(E,void 0);else if(c(y)||typeof y=="string")Array.prototype.forEach.call(y,E,void 0);else for(var D=Sn(y),J=tn(y),Ce=J.length,Oe=0;Oe<Ce;Oe++)E.call(void 0,J[Oe],D&&D[Oe],y)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qi(y,E){if(y){y=y.split("&");for(var D=0;D<y.length;D++){var J=y[D].indexOf("="),Ce=null;if(0<=J){var Oe=y[D].substring(0,J);Ce=y[D].substring(J+1)}else Oe=y[D];E(Oe,Ce?decodeURIComponent(Ce.replace(/\+/g," ")):"")}}}function gr(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof gr){this.h=y.h,es(this,y.j),this.o=y.o,this.g=y.g,jo(this,y.s),this.l=y.l;var E=y.i,D=new mr;D.i=E.i,E.g&&(D.g=new Map(E.g),D.h=E.h),ts(this,D),this.m=y.m}else y&&(E=String(y).match(ys))?(this.h=!1,es(this,E[1]||"",!0),this.o=Yi(E[2]||""),this.g=Yi(E[3]||"",!0),jo(this,E[4]),this.l=Yi(E[5]||"",!0),ts(this,E[6]||"",!0),this.m=Yi(E[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}gr.prototype.toString=function(){var y=[],E=this.j;E&&y.push(xi(E,lr,!0),":");var D=this.g;return(D||E=="file")&&(y.push("//"),(E=this.o)&&y.push(xi(E,lr,!0),"@"),y.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&y.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&y.push("/"),y.push(xi(D,D.charAt(0)=="/"?$s:xr,!0))),(D=this.i.toString())&&y.push("?",D),(D=this.m)&&y.push("#",xi(D,Lo)),y.join("")};function qr(y){return new gr(y)}function es(y,E,D){y.j=D?Yi(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function jo(y,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);y.s=E}else y.s=null}function ts(y,E,D){E instanceof mr?(y.i=E,bo(y.i,y.h)):(D||(E=xi(E,Ea)),y.i=new mr(E,y.h))}function Tn(y,E,D){y.i.set(E,D)}function Fo(y){return Tn(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Yi(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function xi(y,E,D){return typeof y=="string"?(y=encodeURI(y).replace(E,_s),D&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function _s(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var lr=/[#\/\?@]/g,xr=/[#\?:]/g,$s=/[#\?]/g,Ea=/[#\?@]/g,Lo=/#/g;function mr(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Di(y){y.g||(y.g=new Map,y.h=0,y.i&&Qi(y.i,function(E,D){y.add(decodeURIComponent(E.replace(/\+/g," ")),D)}))}r=mr.prototype,r.add=function(y,E){Di(this),this.i=null,y=Gr(this,y);var D=this.g.get(y);return D||this.g.set(y,D=[]),D.push(E),this.h+=1,this};function Ji(y,E){Di(y),E=Gr(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function vr(y,E){return Di(y),E=Gr(y,E),y.g.has(E)}r.forEach=function(y,E){Di(this),this.g.forEach(function(D,J){D.forEach(function(Ce){y.call(E,Ce,J,this)},this)},this)},r.na=function(){Di(this);let y=Array.from(this.g.values()),E=Array.from(this.g.keys()),D=[];for(let J=0;J<E.length;J++){let Ce=y[J];for(let Oe=0;Oe<Ce.length;Oe++)D.push(E[J])}return D},r.V=function(y){Di(this);let E=[];if(typeof y=="string")vr(this,y)&&(E=E.concat(this.g.get(Gr(this,y))));else{y=Array.from(this.g.values());for(let D=0;D<y.length;D++)E=E.concat(y[D])}return E},r.set=function(y,E){return Di(this),this.i=null,y=Gr(this,y),vr(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},r.get=function(y,E){return y?(y=this.V(y),0<y.length?String(y[0]):E):E};function ws(y,E,D){Ji(y,E),0<D.length&&(y.i=null,y.g.set(Gr(y,E),C(D)),y.h+=D.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let y=[],E=Array.from(this.g.keys());for(var D=0;D<E.length;D++){var J=E[D];let Oe=encodeURIComponent(String(J)),Ze=this.V(J);for(J=0;J<Ze.length;J++){var Ce=Oe;Ze[J]!==""&&(Ce+="="+encodeURIComponent(String(Ze[J]))),y.push(Ce)}}return this.i=y.join("&")};function Gr(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function bo(y,E){E&&!y.j&&(Di(y),y.i=null,y.g.forEach(function(D,J){var Ce=J.toLowerCase();J!=Ce&&(Ji(this,J),ws(this,Ce,D))},y)),y.j=E}function Ws(y,E){let D=new zr;if(a.Image){let J=new Image;J.onload=_(yr,D,"TestLoadImage: loaded",!0,E,J),J.onerror=_(yr,D,"TestLoadImage: error",!1,E,J),J.onabort=_(yr,D,"TestLoadImage: abort",!1,E,J),J.ontimeout=_(yr,D,"TestLoadImage: timeout",!1,E,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=y}else E(!1)}function Zi(y,E){let D=new zr,J=new AbortController,Ce=setTimeout(()=>{J.abort(),yr(D,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:J.signal}).then(Oe=>{clearTimeout(Ce),Oe.ok?yr(D,"TestPingServer: ok",!0,E):yr(D,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Ce),yr(D,"TestPingServer: error",!1,E)})}function yr(y,E,D,J,Ce){try{Ce&&(Ce.onload=null,Ce.onerror=null,Ce.onabort=null,Ce.ontimeout=null),J(D)}catch{}}function bs(){this.g=new Tt}function Vo(y,E,D){let J=D||"";try{An(y,function(Ce,Oe){let Ze=Ce;u(Ce)&&(Ze=at(Ce)),E.push(J+Oe+"="+encodeURIComponent(Ze))})}catch(Ce){throw E.push(J+"type="+encodeURIComponent("_badmap")),Ce}}function Xi(y){this.l=y.Ub||null,this.j=y.eb||!1}b(Xi,qt),Xi.prototype.g=function(){return new Co(this.l,this.j)},Xi.prototype.i=function(y){return function(){return y}}({});function Co(y,E){St.call(this),this.D=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Co,St),r=Co.prototype,r.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=E,this.readyState=1,At(this)},r.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(E.body=y),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},r.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qs(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function qs(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}r.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?ai(this):At(this),this.readyState==3&&qs(this)}},r.Ra=function(y){this.g&&(this.response=this.responseText=y,ai(this))},r.Qa=function(y){this.g&&(this.response=y,ai(this))},r.ga=function(){this.g&&ai(this)};function ai(y){y.readyState=4,y.l=null,y.j=null,y.v=null,At(y)}r.setRequestHeader=function(y,E){this.u.append(y,E)},r.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let y=[],E=this.h.entries();for(var D=E.next();!D.done;)D=D.value,y.push(D[0]+": "+D[1]),D=E.next();return y.join(`\r
`)};function At(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Ot(y){let E="";return ue(y,function(D,J){E+=J,E+=":",E+=D,E+=`\r
`}),E}function $t(y,E,D){e:{for(J in D){var J=!1;break e}J=!0}J||(D=Ot(D),typeof y=="string"?D!=null&&encodeURIComponent(String(D)):Tn(y,E,D))}function dt(y){St.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(dt,St);var er=/^https?$/i,ki=["POST","PUT"];r=dt.prototype,r.Ha=function(y){this.J=y},r.ea=function(y,E,D,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cn.g(),this.v=this.o?en(this.o):en(cn),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(Oe){Ei(this,Oe);return}if(y=D||"",D=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Ce in J)D.set(Ce,J[Ce]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(let Oe of J.keys())D.set(Oe,J.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(D.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),Ce=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ki,E,void 0))||J||Ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[Oe,Ze]of D)this.g.setRequestHeader(Oe,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(y),this.u=!1}catch(Oe){Ei(this,Oe)}};function Ei(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.m=5,Er(y),li(y)}function Er(y){y.A||(y.A=!0,Ct(y,"complete"),Ct(y,"error"))}r.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Ct(this,"complete"),Ct(this,"abort"),li(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),dt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?kr(this):this.bb())},r.bb=function(){kr(this)};function kr(y){if(y.h&&typeof s<"u"&&(!y.v[1]||_i(y)!=4||y.Z()!=2)){if(y.u&&_i(y)==4)le(y.Ea,0,y);else if(Ct(y,"readystatechange"),_i(y)==4){y.h=!1;try{let Ze=y.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var D;if(!(D=E)){var J;if(J=Ze===0){var Ce=String(y.D).match(ys)[1]||null;!Ce&&a.self&&a.self.location&&(Ce=a.self.location.protocol.slice(0,-1)),J=!er.test(Ce?Ce.toLowerCase():"")}D=J}if(D)Ct(y,"complete"),Ct(y,"success");else{y.m=6;try{var Oe=2<_i(y)?y.g.statusText:""}catch{Oe=""}y.l=Oe+" ["+y.Z()+"]",Er(y)}}finally{li(y)}}}}function li(y,E){if(y.g){xo(y);let D=y.g,J=y.v[0]?()=>{}:null;y.g=null,y.v=null,E||Ct(y,"ready");try{D.onreadystatechange=J}catch{}}}function xo(y){y.I&&(a.clearTimeout(y.I),y.I=null)}r.isActive=function(){return!!this.g};function _i(y){return y.g?y.g.readyState:0}r.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),tt(E)}};function Sr(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ru(y){let E={};y=(y.g&&2<=_i(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<y.length;J++){if(q(y[J]))continue;var D=I(y[J]);let Ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();let Oe=E[Ce]||[];E[Ce]=Oe,Oe.push(D)}Y(E,function(J){return J.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(y,E,D){return D&&D.internalChannelParams&&D.internalChannelParams[y]||E}function dc(y){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,y),this.cb=ns("retryDelaySeedMs",1e4,y),this.Wa=ns("forwardChannelMaxRetries",2,y),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(y&&y.concurrentRequestLimit),this.Da=new bs,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=dc.prototype,r.la=8,r.G=1,r.connect=function(y,E,D,J){fn(0),this.W=y,this.H=E||{},D&&J!==void 0&&(this.H.OSID=D,this.H.OAID=J),this.F=this.X,this.I=Cs(this,null,this.W),Ta(this)};function Sa(y){if(Aa(y),y.G==3){var E=y.U++,D=qr(y.I);if(Tn(D,"SID",y.K),Tn(D,"RID",E),Tn(D,"TYPE","terminate"),Ks(y,D),E=new Dt(y,y.j,E),E.L=2,E.v=Fo(qr(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=E.v,D=!0),D||(E.g=Bo(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Qn(E)}Yn(y)}function Gs(y){y.g&&(Qs(y),y.g.cancel(),y.g=null)}function Aa(y){Gs(y),y.u&&(a.clearTimeout(y.u),y.u=null),Pa(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function Ta(y){if(!H(y.h)&&!y.s){y.s=!0;var E=y.Ga;xe||pt(),Ee||(xe(),Ee=!0),ze.add(E,y),y.B=0}}function Nu(y,E){return re(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=E.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=In(v(y.Ga,y,E),ul(y,y.B)),y.B++,!0)}r.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;let Ce=new Dt(this,this.j,y),Oe=this.o;if(this.S&&(Oe?(Oe=L(Oe),$(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(Ce.H=Oe,Oe=null),this.P)e:{for(var E=0,D=0;D<this.i.length;D++){t:{var J=this.i[D];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(E+=J,4096<E){E=D;break e}if(E===4096||D===this.i.length-1){E=D+1;break e}}E=1e3}else E=1e3;E=cl(this,Ce,E),D=qr(this.I),Tn(D,"RID",y),Tn(D,"CVER",22),this.D&&Tn(D,"X-HTTP-Session-Id",this.D),Ks(this,D),Oe&&(this.O?E="headers="+encodeURIComponent(String(Ot(Oe)))+"&"+E:this.m&&$t(D,this.m,Oe)),He(this.h,Ce),this.Ua&&Tn(D,"TYPE","init"),this.P?(Tn(D,"$req",E),Tn(D,"SID","null"),Ce.T=!0,gn(Ce,D,null)):gn(Ce,D,E),this.G=2}}else this.G==3&&(y?Oa(this,y):this.i.length==0||H(this.h)||Oa(this))};function Oa(y,E){var D;E?D=E.l:D=y.U++;let J=qr(y.I);Tn(J,"SID",y.K),Tn(J,"RID",D),Tn(J,"AID",y.T),Ks(y,J),y.m&&y.o&&$t(J,y.m,y.o),D=new Dt(y,y.j,D,y.B+1),y.m===null&&(D.H=y.o),E&&(y.i=E.D.concat(y.i)),E=cl(y,D,1e3),D.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),He(y.h,D),gn(D,J,E)}function Ks(y,E){y.H&&ue(y.H,function(D,J){Tn(E,J,D)}),y.l&&An({},function(D,J){Tn(E,J,D)})}function cl(y,E,D){D=Math.min(y.i.length,D);var J=y.l?v(y.l.Na,y.l,y):null;e:{var Ce=y.i;let Oe=-1;for(;;){let Ze=["count="+D];Oe==-1?0<D?(Oe=Ce[0].g,Ze.push("ofs="+Oe)):Oe=0:Ze.push("ofs="+Oe);let mn=!0;for(let tr=0;tr<D;tr++){let hn=Ce[tr].g,Dn=Ce[tr].map;if(hn-=Oe,0>hn)Oe=Math.max(0,Ce[tr].g-100),mn=!1;else try{Vo(Dn,Ze,"req"+hn+"_")}catch{J&&J(Dn)}}if(mn){J=Ze.join("&");break e}}}return y=y.i.splice(0,D),E.D=y,J}function fc(y){if(!y.g&&!y.u){y.Y=1;var E=y.Fa;xe||pt(),Ee||(xe(),Ee=!0),ze.add(E,y),y.v=0}}function Ma(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=In(v(y.Fa,y),ul(y,y.v)),y.v++,!0)}r.Fa=function(){if(this.u=null,rs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=In(v(this.ab,this),y)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Gs(this),rs(this))};function Qs(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function rs(y){y.g=new Dt(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var E=qr(y.qa);Tn(E,"RID","rpc"),Tn(E,"SID",y.K),Tn(E,"AID",y.T),Tn(E,"CI",y.F?"0":"1"),!y.F&&y.ja&&Tn(E,"TO",y.ja),Tn(E,"TYPE","xmlhttp"),Ks(y,E),y.m&&y.o&&$t(E,y.m,y.o),y.L&&(y.g.I=y.L);var D=y.g;y=y.ia,D.L=1,D.v=Fo(qr(E)),D.m=null,D.P=!0,ht(D,y)}r.Za=function(){this.C!=null&&(this.C=null,Gs(this),Ma(this),fn(19))};function Pa(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function ju(y,E){var D=null;if(y.g==E){Pa(y),Qs(y),y.g=null;var J=2}else if(De(y.h,E))D=E.D,Ge(y.h,E),J=1;else return;if(y.G!=0){if(E.o)if(J==1){D=E.m?E.m.length:0,E=Date.now()-E.F;var Ce=y.B;J=je(),Ct(J,new Pn(J,D)),Ta(y)}else fc(y);else if(Ce=E.s,Ce==3||Ce==0&&0<E.X||!(J==1&&Nu(y,E)||J==2&&Ma(y)))switch(D&&0<D.length&&(E=y.h,E.i=E.i.concat(D)),Ce){case 1:Ri(y,5);break;case 4:Ri(y,10);break;case 3:Ri(y,6);break;default:Ri(y,2)}}}function ul(y,E){let D=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(D*=2),D*E}function Ri(y,E){if(y.j.info("Error code "+E),E==2){var D=v(y.fb,y),J=y.Xa;let Ce=!J;J=new gr(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||es(J,"https"),Fo(J),Ce?Ws(J.toString(),D):Zi(J.toString(),D)}else fn(2);y.G=0,y.l&&y.l.sa(E),Yn(y),Aa(y)}r.fb=function(y){y?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function Yn(y){if(y.G=0,y.ka=[],y.l){let E=Gt(y.h);(E.length!=0||y.i.length!=0)&&(S(y.ka,E),S(y.ka,y.i),y.h.i.length=0,C(y.i),y.i.length=0),y.l.ra()}}function Cs(y,E,D){var J=D instanceof gr?qr(D):new gr(D);if(J.g!="")E&&(J.g=E+"."+J.g),jo(J,J.s);else{var Ce=a.location;J=Ce.protocol,E=E?E+"."+Ce.hostname:Ce.hostname,Ce=+Ce.port;var Oe=new gr(null);J&&es(Oe,J),E&&(Oe.g=E),Ce&&jo(Oe,Ce),D&&(Oe.l=D),J=Oe}return D=y.D,E=y.ya,D&&E&&Tn(J,D,E),Tn(J,"VER",y.la),Ks(y,J),J}function Bo(y,E,D){if(E&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Ca&&!y.pa?new dt(new Xi({eb:D})):new dt(y.pa),E.Ha(y.J),E}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xs(){}r=xs.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ia(){}Ia.prototype.g=function(y,E){return new ci(y,E)};function ci(y,E){St.call(this),this.g=new dc(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(y?y["X-WebChannel-Client-Profile"]=E.va:y={"X-WebChannel-Client-Profile":E.va}),this.g.S=y,(y=E&&E.Sb)&&!q(y)&&(this.g.m=y),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!q(E)&&(this.g.D=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new eo(this)}b(ci,St),ci.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ci.prototype.close=function(){Sa(this.g)},ci.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var D={};D.__data__=y,y=D}else this.u&&(D={},D.__data__=at(y),y=D);E.i.push(new Nt(E.Ya++,y)),E.G==3&&Ta(E)},ci.prototype.N=function(){this.g.l=null,delete this.j,Sa(this.g),delete this.g,ci.aa.N.call(this)};function dl(y){ar.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(let D in E){y=D;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}b(dl,ar);function Da(){W.call(this),this.status=1}b(Da,W);function eo(y){this.g=y}b(eo,xs),eo.prototype.ua=function(){Ct(this.g,"a")},eo.prototype.ta=function(y){Ct(this.g,new dl(y))},eo.prototype.sa=function(y){Ct(this.g,new Da)},eo.prototype.ra=function(){Ct(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,ci.prototype.send=ci.prototype.o,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,FA=Xa.createWebChannelTransport=function(){return new Ia},jA=Xa.getStatEventTarget=function(){return je()},NA=Xa.Event=oe,c0=Xa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,rg=Xa.ErrorCode=Vn,Ci.COMPLETE="complete",RA=Xa.EventType=Ci,Jt.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",St.prototype.listen=St.prototype.K,uf=Xa.WebChannel=Jt,kA=Xa.FetchXmlHttpFactory=Xi,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,DA=Xa.XhrIo=dt}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var jL="@firebase/firestore";var ni=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");var Uf="10.13.2";var Zl=new wm("@firebase/firestore");function gf(){return Zl.logLevel}function LV(r){Zl.setLogLevel(r)}function Ke(r,...t){if(Zl.logLevel<=Js.DEBUG){let e=t.map(HO);Zl.debug(`Firestore (${Uf}): ${r}`,...e)}}function Vr(r,...t){if(Zl.logLevel<=Js.ERROR){let e=t.map(HO);Zl.error(`Firestore (${Uf}): ${r}`,...e)}}function gs(r,...t){if(Zl.logLevel<=Js.WARN){let e=t.map(HO);Zl.warn(`Firestore (${Uf}): ${r}`,...e)}}function HO(r){if(typeof r=="string")return r;try{return function(e){return JSON.stringify(e)}(r)}catch{return r}}function Et(r="Unexpected state"){let t=`FIRESTORE (${Uf}) INTERNAL ASSERTION FAILED: `+r;throw Vr(t),new Error(t)}function Rt(r,t){r||Et()}function VV(r,t){r||Et()}function gt(r,t){return r}var Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},We=class extends wI{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ri=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var w0=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},HA=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ni.UNAUTHENTICATED))}shutdown(){}},zA=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},$A=class{constructor(t){this.t=t,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i,i=c=>this.i!==n?(n=this.i,e(c)):Promise.resolve(),o=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ri,t.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;t.enqueueRetryable(()=>ke(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ri)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Rt(typeof n.accessToken=="string"),new w0(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return Rt(t===null||typeof t=="string"),new ni(t)}},WA=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qA=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new WA(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}},GA=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},KA=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let n=o=>{o.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Ke("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>n(o))};let i=o=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Rt(typeof e.token=="string"),this.R=e.token,new GA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Nne(r){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<r;n++)e[n]=Math.floor(256*Math.random());return e}var b0=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let i=Nne(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<e&&(n+=t.charAt(i[o]%t.length))}return n}};function Zt(r,t){return r<t?-1:r>t?1:0}function Ef(r,t,e){return r.length===t.length&&r.every((n,i)=>e(n,t[i]))}function BV(r){return r+"\0"}var br=class r{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new We(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new We(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new We(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new We(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return r.fromMillis(Date.now())}static fromDate(t){return r.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new r(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Zt(this.nanoseconds,t.nanoseconds):Zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Bt=class r{constructor(t){this.timestamp=t}static fromTimestamp(t){return new r(t)}static min(){return new r(new br(0,0))}static max(){return new r(new br(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var C0=class r{constructor(t,e,n){e===void 0?e=0:e>t.length&&Et(),n===void 0?n=t.length-e:n>t.length-e&&Et(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return r.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof r?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let i=0;i<n;i++){let o=t.get(i),s=e.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},bn=class r extends C0{construct(t,e,n){return new r(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new We(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(i=>i.length>0))}return new r(e)}static emptyPath(){return new r([])}},jne=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Br=class r extends C0{construct(t,e,n){return new r(t,e,n)}static isValidIdentifier(t){return jne.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new r(["__name__"])}static fromServerFormat(t){let e=[],n="",i=0,o=()=>{if(n.length===0)throw new We(Ie.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""},s=!1;for(;i<t.length;){let a=t[i];if(a==="\\"){if(i+1===t.length)throw new We(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new We(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new We(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new r(e)}static emptyPath(){return new r([])}};var mt=class r{constructor(t){this.path=t}static fromPath(t){return new r(bn.fromString(t))}static fromName(t){return new r(bn.fromString(t).popFirst(5))}static empty(){return new r(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return bn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new r(new bn(t.slice()))}};var Sf=class{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}};function QA(r){return r.fields.find(t=>t.kind===2)}function cu(r){return r.fields.filter(t=>t.kind!==2)}Sf.UNKNOWN_ID=-1;var bf=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var gg=class r{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new r(0,ms.min())}};function UV(r,t){let e=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Bt.fromTimestamp(n===1e9?new br(e+1,0):new br(e,n));return new ms(i,mt.empty(),t)}function HV(r){return new ms(r.readTime,r.key,-1)}var ms=class r{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new r(Bt.min(),mt.empty(),-1)}static max(){return new r(Bt.max(),mt.empty(),-1)}};function zO(r,t){let e=r.readTime.compareTo(t.readTime);return e!==0?e:(e=mt.comparator(r.documentKey,t.documentKey),e!==0?e:Zt(r.largestBatchId,t.largestBatchId))}var zV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",x0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function lc(r){return ke(this,null,function*(){if(r.code!==Ie.FAILED_PRECONDITION||r.message!==zV)throw r;Ke("LocalStore","Unexpectedly lost primary lease")})}var Me=class r{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new r((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof r?e:r.resolve(e)}catch(e){return r.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):r.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):r.reject(e)}static resolve(t){return new r((e,n)=>{e(t)})}static reject(t){return new r((e,n)=>{n(t)})}static waitFor(t){return new r((e,n)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&e()},c=>n(c))}),s=!0,o===i&&e()})}static or(t){let e=r.resolve(!1);for(let n of t)e=e.next(i=>i?r.resolve(i):n());return e}static forEach(t,e){let n=[];return t.forEach((i,o)=>{n.push(e.call(this,i,o))}),this.waitFor(n)}static mapArray(t,e){return new r((n,i)=>{let o=t.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;e(t[u]).next(f=>{s[u]=f,++a,a===o&&n(s)},f=>i(f))}})}static doWhile(t,e){return new r((n,i)=>{let o=()=>{t()===!0?e().next(()=>{o()},i):n()};o()})}};var E0=class r{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new ri,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new gu(t,e.error)):this.V.resolve()},this.transaction.onerror=n=>{let i=$O(n.target.error);this.V.reject(new gu(t,i))}}static open(t,e,n,i){try{return new r(e,t.transaction(i,n))}catch(o){throw new gu(e,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Ke("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let e=this.transaction.objectStore(t);return new JA(e)}},Xl=class r{constructor(t,e,n){this.name=t,this.version=e,this.p=n,r.S(Ch())===12.2&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ke("SimpleDb","Removing database:",t),uu(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!_m())return!1;if(r.v())return!0;let t=Ch(),e=r.S(t),n=0<e&&e<10,i=$V(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,e){return t.store(e)}static S(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}M(t){return ke(this,null,function*(){return this.db||(Ke("SimpleDb","Opening database:",this.name),this.db=yield new Promise((e,n)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;e(s)},i.onblocked=()=>{n(new gu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?n(new We(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new We(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new gu(t,s))},i.onupgradeneeded=o=>{Ke("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db})}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,i){return ke(this,null,function*(){let o=e==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(t);let a=E0.open(this.db,t,o?"readonly":"readwrite",n),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),Me.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(Ke("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function $V(r){let t=r.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}var YA=class{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return uu(this.B.delete())}},gu=class extends We{constructor(t,e){super(Ie.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function cc(r){return r.name==="IndexedDbTransactionError"}var JA=class{constructor(t){this.store=t}put(t,e){let n;return e!==void 0?(Ke("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),uu(n)}add(t){return Ke("SimpleDb","ADD",this.store.name,t,t),uu(this.store.add(t))}get(t){return uu(this.store.get(t)).next(e=>(e===void 0&&(e=null),Ke("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ke("SimpleDb","DELETE",this.store.name,t),uu(this.store.delete(t))}count(){return Ke("SimpleDb","COUNT",this.store.name),uu(this.store.count())}U(t,e){let n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(n.range);return new Me((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(n),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(t,e){let n=this.store.getAll(t,e===null?void 0:e);return new Me((i,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}j(t,e){Ke("SimpleDb","DELETE ALL",this.store.name);let n=this.options(t,e);n.H=!1;let i=this.cursor(n);return this.W(i,(o,s,a)=>a.delete())}J(t,e){let n;e?n=t:(n={},e=t);let i=this.cursor(n);return this.W(i,e)}Y(t){let e=this.cursor({});return new Me((n,i)=>{e.onerror=o=>{let s=$O(o.target.error);i(s)},e.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}W(t,e){let n=[];return new Me((i,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new YA(a),u=e(a.primaryKey,a.value,c);if(u instanceof Me){let f=u.catch(g=>(c.done(),Me.reject(g)));n.push(f)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>Me.waitFor(n))}options(t,e){let n;return t!==void 0&&(typeof t=="string"?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let n=this.store.index(t.index);return t.H?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}};function uu(r){return new Me((t,e)=>{r.onsuccess=n=>{let i=n.target.result;t(i)},r.onerror=n=>{let i=$O(n.target.error);e(i)}})}var FL=!1;function $O(r){let t=Xl.S(Ch());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){let n=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FL||(FL=!0,setTimeout(()=>{throw n},0)),n}}return r}var ZA=class{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){Ke("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>ke(this,null,function*(){this.task=null;try{Ke("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(e){cc(e)?Ke("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):yield lc(e)}yield this.X(6e4)}))}},XA=class{constructor(t,e){this.localStore=t,this.persistence=e}ee(t=50){return ke(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.te(e,t))})}te(t,e){let n=new Set,i=e,o=!0;return Me.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!n.has(s))return Ke("IndexBackfiller",`Processing collection: ${s}`),this.ne(t,s,i).next(a=>{i-=a,n.add(s)});o=!1})).next(()=>e-i)}ne(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.re(i,o)).next(a=>(Ke("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}re(t,e){let n=t;return e.changes.forEach((i,o)=>{let s=HV(o);zO(s,n)>0&&(n=s)}),new ms(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}};var Zo=(()=>{class r{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return r.oe=-1,r})();function Lg(r){return r==null}function mg(r){return r===0&&1/r==-1/0}function WV(r){return typeof r=="number"&&Number.isInteger(r)&&!mg(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function yo(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=LL(t)),t=Fne(r.get(e),t);return LL(t)}function Fne(r,t){let e=t,n=r.length;for(let i=0;i<n;i++){let o=r.charAt(i);switch(o){case"\0":e+="";break;case"":e+="";break;default:e+=o}}return e}function LL(r){return r+""}function pa(r){let t=r.length;if(Rt(t>=2),t===2)return Rt(r.charAt(0)===""&&r.charAt(1)===""),bn.emptyPath();let e=t-2,n=[],i="";for(let o=0;o<t;){let s=r.indexOf("",o);switch((s<0||s>e)&&Et(),r.charAt(s+1)){case"":let a=r.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),n.push(c);break;case"":i+=r.substring(o,s),i+="\0";break;case"":i+=r.substring(o,s+1);break;default:Et()}o=s+2}return new bn(n)}var VL=["userId","batchId"];function p0(r,t){return[r,yo(t)]}function qV(r,t,e){return[r,yo(t),e]}var Lne={},Vne=["prefixPath","collectionGroup","readTime","documentId"],Bne=["prefixPath","collectionGroup","documentId"],Une=["collectionGroup","readTime","prefixPath","documentId"],Hne=["canonicalId","targetId"],zne=["targetId","path"],$ne=["path","targetId"],Wne=["collectionId","parent"],qne=["indexId","uid"],Gne=["uid","sequenceNumber"],Kne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qne=["indexId","uid","orderedDocumentKey"],Yne=["userId","collectionPath","documentId"],Jne=["userId","collectionPath","largestBatchId"],Zne=["userId","collectionGroup","largestBatchId"],GV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xne=[...GV,"documentOverlays"],KV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QV=KV,WO=[...QV,"indexConfiguration","indexState","indexEntries"],ere=WO,tre=[...WO,"globals"];var vg=class extends x0{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}};function mi(r,t){let e=gt(r);return Xl.F(e._e,t)}function BL(r){let t=0;for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Tu(r,t){for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function YV(r){for(let t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}var sr=class r{constructor(t,e){this.comparator=t,this.root=e||ma.EMPTY}insert(t,e){return new r(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ma.BLACK,null,null))}remove(t){return new r(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ma.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wf(this.root,t,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wf(this.root,t,this.comparator,!0)}},wf=class{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ma=class r{constructor(t,e,n,i,o){this.key=t,this.value=e,this.color=n??r.RED,this.left=i??r.EMPTY,this.right=o??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,o){return new r(t??this.key,e??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this,o=n(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,n),null):o===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return r.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();let t=this.left.check();if(t!==this.right.check())throw Et();return t+(this.isRed()?0:1)}};ma.EMPTY=null,ma.RED=!0,ma.BLACK=!1;ma.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(t,e,n,i,o){return this}insert(t,e,n){return new ma(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Kn=class r{constructor(t){this.comparator=t,this.data=new sr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(t){return new S0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof r)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let i=e.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new r(this.comparator);return e.data=t,e}},S0=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function df(r){return r.hasNext()?r.getNext():void 0}var Xo=class r{constructor(t){this.fields=t,t.sort(Br.comparator)}static empty(){return new r([])}unionWith(t){let e=new Kn(Br.comparator);for(let n of this.fields)e=e.add(n);for(let n of t)e=e.add(n);return new r(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ef(this.fields,t.fields,(e,n)=>e.isEqual(n))}};var A0=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function JV(){return typeof atob<"u"}var Hr=class r{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new A0("Invalid base64 string: "+o):o}}(t);return new r(e)}static fromUint8Array(t){let e=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new r(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Hr.EMPTY_BYTE_STRING=new Hr("");var nre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(r){if(Rt(!!r),typeof r=="string"){let t=0,e=nre.exec(r);if(Rt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}let n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:fr(r.seconds),nanos:fr(r.nanos)}}function fr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ec(r){return typeof r=="string"?Hr.fromBase64String(r):Hr.fromUint8Array(r)}function mw(r){var t,e;return((e=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function qO(r){let t=r.mapValue.fields.__previous_value__;return mw(t)?qO(t):t}function yg(r){let t=nl(r.mapValue.fields.__local_write_time__.timestampValue);return new br(t.seconds,t.nanos)}var eT=class{constructor(t,e,n,i,o,s,a,c,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},tc=class r{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new r("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof r&&t.projectId===this.projectId&&t.database===this.database}};var Yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},g0={nullValue:"NULL_VALUE"};function mu(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?mw(r)?4:ZV(r)?9007199254740991:vw(r)?10:11:Et()}function _a(r,t){if(r===t)return!0;let e=mu(r);if(e!==mu(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return yg(r).isEqual(yg(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=nl(i.timestampValue),a=nl(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(i,o){return ec(i.bytesValue).isEqual(ec(o.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(i,o){return fr(i.geoPointValue.latitude)===fr(o.geoPointValue.latitude)&&fr(i.geoPointValue.longitude)===fr(o.geoPointValue.longitude)}(r,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return fr(i.integerValue)===fr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=fr(i.doubleValue),a=fr(o.doubleValue);return s===a?mg(s)===mg(a):isNaN(s)&&isNaN(a)}return!1}(r,t);case 9:return Ef(r.arrayValue.values||[],t.arrayValue.values||[],_a);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(BL(s)!==BL(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!_a(s[c],a[c])))return!1;return!0}(r,t);default:return Et()}}function _g(r,t){return(r.values||[]).find(e=>_a(e,t))!==void 0}function nc(r,t){if(r===t)return 0;let e=mu(r),n=mu(t);if(e!==n)return Zt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Zt(r.booleanValue,t.booleanValue);case 2:return function(o,s){let a=fr(o.integerValue||o.doubleValue),c=fr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(r,t);case 3:return UL(r.timestampValue,t.timestampValue);case 4:return UL(yg(r),yg(t));case 5:return Zt(r.stringValue,t.stringValue);case 6:return function(o,s){let a=ec(o),c=ec(s);return a.compareTo(c)}(r.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let f=Zt(a[u],c[u]);if(f!==0)return f}return Zt(a.length,c.length)}(r.referenceValue,t.referenceValue);case 8:return function(o,s){let a=Zt(fr(o.latitude),fr(s.latitude));return a!==0?a:Zt(fr(o.longitude),fr(s.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return HL(r.arrayValue,t.arrayValue);case 10:return function(o,s){var a,c,u,f;let g=o.fields||{},v=s.fields||{},_=(a=g.value)===null||a===void 0?void 0:a.arrayValue,b=(c=v.value)===null||c===void 0?void 0:c.arrayValue,C=Zt(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((f=b?.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:HL(_,b)}(r.mapValue,t.mapValue);case 11:return function(o,s){if(o===Yl.mapValue&&s===Yl.mapValue)return 0;if(o===Yl.mapValue)return 1;if(s===Yl.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){let v=Zt(c[g],f[g]);if(v!==0)return v;let _=nc(a[c[g]],u[f[g]]);if(_!==0)return _}return Zt(c.length,f.length)}(r.mapValue,t.mapValue);default:throw Et()}}function UL(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Zt(r,t);let e=nl(r),n=nl(t),i=Zt(e.seconds,n.seconds);return i!==0?i:Zt(e.nanos,n.nanos)}function HL(r,t){let e=r.values||[],n=t.values||[];for(let i=0;i<e.length&&i<n.length;++i){let o=nc(e[i],n[i]);if(o)return o}return Zt(e.length,n.length)}function Af(r){return tT(r)}function tT(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(e){let n=nl(e);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(e){return ec(e).toBase64()}(r.bytesValue):"referenceValue"in r?function(e){return mt.fromName(e).toString()}(r.referenceValue):"geoPointValue"in r?function(e){return`geo(${e.latitude},${e.longitude})`}(r.geoPointValue):"arrayValue"in r?function(e){let n="[",i=!0;for(let o of e.values||[])i?i=!1:n+=",",n+=tT(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(e){let n=Object.keys(e.fields||{}).sort(),i="{",o=!0;for(let s of n)o?o=!1:i+=",",i+=`${s}:${tT(e.fields[s])}`;return i+"}"}(r.mapValue):Et()}function vu(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function nT(r){return!!r&&"integerValue"in r}function wg(r){return!!r&&"arrayValue"in r}function zL(r){return!!r&&"nullValue"in r}function $L(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function m0(r){return!!r&&"mapValue"in r}function vw(r){var t,e;return((e=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function ug(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){let t={mapValue:{fields:{}}};return Tu(r.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ug(n)),t}if(r.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ug(r.arrayValue.values[e]);return t}return Object.assign({},r)}function ZV(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var XV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rre(r){return"nullValue"in r?g0:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?vu(tc.empty(),mt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?vw(r)?XV:{mapValue:{}}:Et()}function ire(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?vu(tc.empty(),mt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?XV:"mapValue"in r?vw(r)?{mapValue:{}}:Yl:Et()}function WL(r,t){let e=nc(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function qL(r,t){let e=nc(r.value,t.value);return e!==0?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}var Ki=class r{constructor(t){this.value=t}static empty(){return new r({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!m0(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ug(e)}setAll(t){let e=Br.emptyPath(),n={},i=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let c=this.getFieldsMap(e);this.applyChanges(c,n,i),n={},i=[],e=a.popLast()}s?n[a.lastSegment()]=ug(s):i.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,n,i)}delete(t){let e=this.field(t.popLast());m0(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _a(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];m0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Tu(e,(i,o)=>t[i]=o);for(let i of n)delete t[i]}clone(){return new r(ug(this.value))}};function e2(r){let t=[];return Tu(r.fields,(e,n)=>{let i=new Br([e]);if(m0(n)){let o=e2(n.mapValue).fields;if(o.length===0)t.push(i);else for(let s of o)t.push(i.child(s))}else t.push(i)}),new Xo(t)}var ii=class r{constructor(t,e,n,i,o,s,a){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new r(t,0,Bt.min(),Bt.min(),Bt.min(),Ki.empty(),0)}static newFoundDocument(t,e,n,i){return new r(t,1,e,Bt.min(),n,i,0)}static newNoDocument(t,e){return new r(t,2,e,Bt.min(),Bt.min(),Ki.empty(),0)}static newUnknownDocument(t,e){return new r(t,3,e,Bt.min(),Bt.min(),Ki.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof r&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wa=class{constructor(t,e){this.position=t,this.inclusive=e}};function GL(r,t,e){let n=0;for(let i=0;i<r.position.length;i++){let o=t[i],s=r.position[i];if(o.field.isKeyField()?n=mt.comparator(mt.fromName(s.referenceValue),e.key):n=nc(s,e.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function KL(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!_a(r.position[e],t.position[e]))return!1;return!0}var yu=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function ore(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}var T0=class{},vn=class r extends T0{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new oT(t,e,n):e==="array-contains"?new lT(t,n):e==="in"?new O0(t,n):e==="not-in"?new cT(t,n):e==="array-contains-any"?new uT(t,n):new r(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new sT(t,n):new aT(t,n)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(nc(e,this.value)):e!==null&&mu(this.value)===mu(e)&&this.matchesComparison(nc(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Un=class r extends T0{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new r(t,e)}matches(t){return Tf(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Tf(r){return r.op==="and"}function rT(r){return r.op==="or"}function GO(r){return t2(r)&&Tf(r)}function t2(r){for(let t of r.filters)if(t instanceof Un)return!1;return!0}function iT(r){if(r instanceof vn)return r.field.canonicalString()+r.op.toString()+Af(r.value);if(GO(r))return r.filters.map(t=>iT(t)).join(",");{let t=r.filters.map(e=>iT(e)).join(",");return`${r.op}(${t})`}}function n2(r,t){return r instanceof vn?function(n,i){return i instanceof vn&&n.op===i.op&&n.field.isEqual(i.field)&&_a(n.value,i.value)}(r,t):r instanceof Un?function(n,i){return i instanceof Un&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&n2(s,i.filters[a]),!0):!1}(r,t):void Et()}function r2(r,t){let e=r.filters.concat(t);return Un.create(e,r.op)}function i2(r){return r instanceof vn?function(e){return`${e.field.canonicalString()} ${e.op} ${Af(e.value)}`}(r):r instanceof Un?function(e){return e.op.toString()+" {"+e.getFilters().map(i2).join(" ,")+"}"}(r):"Filter"}var oT=class extends vn{constructor(t,e,n){super(t,e,n),this.key=mt.fromName(n.referenceValue)}matches(t){let e=mt.comparator(t.key,this.key);return this.matchesComparison(e)}},sT=class extends vn{constructor(t,e){super(t,"in",e),this.keys=o2("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},aT=class extends vn{constructor(t,e){super(t,"not-in",e),this.keys=o2("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function o2(r,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>mt.fromName(n.referenceValue))}var lT=class extends vn{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return wg(e)&&_g(e.arrayValue,this.value)}},O0=class extends vn{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&_g(this.value.arrayValue,e)}},cT=class extends vn{constructor(t,e){super(t,"not-in",e)}matches(t){if(_g(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!_g(this.value.arrayValue,e)}},uT=class extends vn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!wg(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>_g(this.value.arrayValue,n))}};var dT=class{constructor(t,e=null,n=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function fT(r,t=null,e=[],n=[],i=null,o=null,s=null){return new dT(r,t,e,n,i,o,s)}function _u(r){let t=gt(r);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>iT(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Lg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Af(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Af(n)).join(",")),t.ue=e}return t.ue}function Vg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!ore(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!n2(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!KL(r.startAt,t.startAt)&&KL(r.endAt,t.endAt)}function M0(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function P0(r,t){return r.filters.filter(e=>e instanceof vn&&e.field.isEqual(t))}function QL(r,t,e){let n=g0,i=!0;for(let o of P0(r,t)){let s=g0,a=!0;switch(o.op){case"<":case"<=":s=rre(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=g0}WL({value:n,inclusive:i},{value:s,inclusive:a})<0&&(n=s,i=a)}if(e!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(t)){let s=e.position[o];WL({value:n,inclusive:i},{value:s,inclusive:e.inclusive})<0&&(n=s,i=e.inclusive);break}}return{value:n,inclusive:i}}function YL(r,t,e){let n=Yl,i=!0;for(let o of P0(r,t)){let s=Yl,a=!0;switch(o.op){case">=":case">":s=ire(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Yl}qL({value:n,inclusive:i},{value:s,inclusive:a})>0&&(n=s,i=a)}if(e!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(t)){let s=e.position[o];qL({value:n,inclusive:i},{value:s,inclusive:e.inclusive})>0&&(n=s,i=e.inclusive);break}}return{value:n,inclusive:i}}var Bs=class{constructor(t,e=null,n=[],i=[],o=null,s="F",a=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function s2(r,t,e,n,i,o,s,a){return new Bs(r,t,e,n,i,o,s,a)}function Hf(r){return new Bs(r)}function JL(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function KO(r){return r.collectionGroup!==null}function Cf(r){let t=gt(r);if(t.ce===null){t.ce=[];let e=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Kn(Br.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new yu(o,n))}),e.has(Br.keyField().canonicalString())||t.ce.push(new yu(Br.keyField(),n))}return t.ce}function _o(r){let t=gt(r);return t.le||(t.le=sre(t,Cf(r))),t.le}function sre(r,t){if(r.limitType==="F")return fT(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new yu(i.field,o)});let e=r.endAt?new wa(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new wa(r.startAt.position,r.startAt.inclusive):null;return fT(r.path,r.collectionGroup,t,r.filters,r.limit,e,n)}}function hT(r,t){let e=r.filters.concat([t]);return new Bs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function I0(r,t,e){return new Bs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function Bg(r,t){return Vg(_o(r),_o(t))&&r.limitType===t.limitType}function a2(r){return`${_u(_o(r))}|lt:${r.limitType}`}function mf(r){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>i2(i)).join(", ")}]`),Lg(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Af(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Af(i)).join(",")),`Target(${n})`}(_o(r))}; limitType=${r.limitType})`}function Ug(r,t){return t.isFoundDocument()&&function(n,i){let o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):mt.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(r,t)&&function(n,i){for(let o of Cf(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(r,t)&&function(n,i){for(let o of n.filters)if(!o.matches(i))return!1;return!0}(r,t)&&function(n,i){return!(n.startAt&&!function(s,a,c){let u=GL(s,a,c);return s.inclusive?u<=0:u<0}(n.startAt,Cf(n),i)||n.endAt&&!function(s,a,c){let u=GL(s,a,c);return s.inclusive?u>=0:u>0}(n.endAt,Cf(n),i))}(r,t)}function l2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function c2(r){return(t,e)=>{let n=!1;for(let i of Cf(r)){let o=are(i,t,e);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function are(r,t,e){let n=r.field.isKeyField()?mt.comparator(t.key,e.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?nc(c,u):Et()}(r.field,t,e);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}var ba=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(let[i,o]of n)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Tu(this.inner,(e,n)=>{for(let[i,o]of n)t(i,o)})}isEmpty(){return YV(this.inner)}size(){return this.innerSize}};var lre=new sr(mt.comparator);function No(){return lre}var u2=new sr(mt.comparator);function lg(...r){let t=u2;for(let e of r)t=t.insert(e.key,e);return t}function d2(r){let t=u2;return r.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ga(){return dg()}function f2(){return dg()}function dg(){return new ba(r=>r.toString(),(r,t)=>r.isEqual(t))}var cre=new sr(mt.comparator),ure=new Kn(mt.comparator);function on(...r){let t=ure;for(let e of r)t=t.add(e);return t}var dre=new Kn(Zt);function QO(){return dre}function YO(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mg(t)?"-0":t}}function h2(r){return{integerValue:""+r}}function p2(r,t){return WV(t)?h2(t):YO(r,t)}var Of=class{constructor(){this._=void 0}};function fre(r,t,e){return r instanceof rc?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&mw(o)&&(o=qO(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):r instanceof rl?m2(r,t):r instanceof il?v2(r,t):function(i,o){let s=g2(i,o),a=ZL(s)+ZL(i.Pe);return nT(s)&&nT(i.Pe)?h2(a):YO(i.serializer,a)}(r,t)}function hre(r,t,e){return r instanceof rl?m2(r,t):r instanceof il?v2(r,t):e}function g2(r,t){return r instanceof ic?function(n){return nT(n)||function(o){return!!o&&"doubleValue"in o}(n)}(t)?t:{integerValue:0}:null}var rc=class extends Of{},rl=class extends Of{constructor(t){super(),this.elements=t}};function m2(r,t){let e=y2(t);for(let n of r.elements)e.some(i=>_a(i,n))||e.push(n);return{arrayValue:{values:e}}}var il=class extends Of{constructor(t){super(),this.elements=t}};function v2(r,t){let e=y2(t);for(let n of r.elements)e=e.filter(i=>!_a(i,n));return{arrayValue:{values:e}}}var ic=class extends Of{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function ZL(r){return fr(r.integerValue||r.doubleValue)}function y2(r){return wg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}var wu=class{constructor(t,e){this.field=t,this.transform=e}};function pre(r,t){return r.field.isEqual(t.field)&&function(n,i){return n instanceof rl&&i instanceof rl||n instanceof il&&i instanceof il?Ef(n.elements,i.elements,_a):n instanceof ic&&i instanceof ic?_a(n.Pe,i.Pe):n instanceof rc&&i instanceof rc}(r.transform,t.transform)}var pT=class{constructor(t,e){this.version=t,this.transformResults=e}},Mr=class r{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new r}static exists(t){return new r(void 0,t)}static updateTime(t){return new r(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function v0(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}var Mf=class{};function _2(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new sc(r.key,Mr.none()):new oc(r.key,r.data,Mr.none());{let e=r.data,n=Ki.empty(),i=new Kn(Br.comparator);for(let o of t.fields)if(!i.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Us(r.key,n,new Xo(i.toArray()),Mr.none())}}function gre(r,t,e){r instanceof oc?function(i,o,s){let a=i.value.clone(),c=eV(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(r,t,e):r instanceof Us?function(i,o,s){if(!v0(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=eV(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(w2(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(r,t,e):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function fg(r,t,e,n){return r instanceof oc?function(o,s,a,c){if(!v0(o.precondition,s))return a;let u=o.value.clone(),f=tV(o.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(r,t,e,n):r instanceof Us?function(o,s,a,c){if(!v0(o.precondition,s))return a;let u=tV(o.fieldTransforms,c,s),f=s.data;return f.setAll(w2(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(r,t,e,n):function(o,s,a){return v0(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(r,t,e)}function mre(r,t){let e=null;for(let n of r.fieldTransforms){let i=t.data.field(n.field),o=g2(n.transform,i||null);o!=null&&(e===null&&(e=Ki.empty()),e.set(n.field,o))}return e||null}function XL(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ef(n,i,(o,s)=>pre(o,s))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}var oc=class extends Mf{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Us=class extends Mf{constructor(t,e,n,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function w2(r){let t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let n=r.data.field(e);t.set(e,n)}}),t}function eV(r,t,e){let n=new Map;Rt(r.length===e.length);for(let i=0;i<e.length;i++){let o=r[i],s=o.transform,a=t.data.field(o.field);n.set(o.field,hre(s,a,e[i]))}return n}function tV(r,t,e){let n=new Map;for(let i of r){let o=i.transform,s=e.data.field(i.field);n.set(i.field,fre(o,s,t))}return n}var sc=class extends Mf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bg=class extends Mf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cg=class{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){let n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(t.key)&&gre(o,t,n[i])}}applyToLocalView(t,e){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(e=fg(n,t,e,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(e=fg(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let n=f2();return this.mutations.forEach(i=>{let o=t.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(i.key)?null:a;let c=_2(s,a);c!==null&&n.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Bt.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),on())}isEqual(t){return this.batchId===t.batchId&&Ef(this.mutations,t.mutations,(e,n)=>XL(e,n))&&Ef(this.baseMutations,t.baseMutations,(e,n)=>XL(e,n))}},gT=class r{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Rt(t.mutations.length===n.length);let i=function(){return cre}(),o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new r(t,e,n,i)}};var xg=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mT=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var ei,wn;function b2(r){switch(r){default:return Et();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function C2(r){if(r===void 0)return Vr("GRPC error has no .code"),Ie.UNKNOWN;switch(r){case ei.OK:return Ie.OK;case ei.CANCELLED:return Ie.CANCELLED;case ei.UNKNOWN:return Ie.UNKNOWN;case ei.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case ei.INTERNAL:return Ie.INTERNAL;case ei.UNAVAILABLE:return Ie.UNAVAILABLE;case ei.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case ei.NOT_FOUND:return Ie.NOT_FOUND;case ei.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case ei.ABORTED:return Ie.ABORTED;case ei.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case ei.DATA_LOSS:return Ie.DATA_LOSS;default:return Et()}}(wn=ei||(ei={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";var nV=null;function x2(){return new TextEncoder}var vre=new Wl([4294967295,4294967295],0);function rV(r){let t=x2().encode(r),e=new IA;return e.update(t),new Uint8Array(e.digest())}function iV(r){let t=new DataView(r.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Wl([e,n],0),new Wl([i,o],0)]}var vT=class r{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new pu(`Invalid padding: ${e}`);if(n<0)throw new pu(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new pu(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Wl.fromNumber(this.Ie)}Ee(t,e,n){let i=t.add(e.multiply(Wl.fromNumber(n)));return i.compare(vre)===1&&(i=new Wl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=rV(t),[n,i]=iV(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(n,i,o);if(!this.de(s))return!1}return!0}static create(t,e,n){let i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new r(o,i,e);return n.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;let e=rV(t),[n,i]=iV(e);for(let o=0;o<this.hashCount;o++){let s=this.Ee(n,i,o);this.Ae(s)}}Ae(t){let e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}},pu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Eg=class r{constructor(t,e,n,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,n){let i=new Map;return i.set(t,Sg.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new r(Bt.min(),i,new sr(Zt),No(),on())}},Sg=class r{constructor(t,e,n,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new r(n,e,on(),on(),on())}};var xf=class{constructor(t,e,n,i){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=i}},D0=class{constructor(t,e){this.targetId=t,this.me=e}},k0=class{constructor(t,e,n=Hr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}},R0=class{constructor(){this.fe=0,this.ge=sV(),this.pe=Hr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=on(),e=on(),n=on();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Et()}}),new Sg(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=sV()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yT=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=No(),this.qe=oV(),this.Qe=new sr(Zt)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:Et()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,i)=>{this.ze(i)&&e(i)})}He(t){let e=t.targetId,n=t.me.count,i=this.Je(e);if(i){let o=i.target;if(M0(o))if(n===0){let s=new mt(o.path);this.Ue(e,s,ii.newNoDocument(s,Bt.min()))}else Rt(n===1);else{let s=this.Ye(e);if(s!==n){let a=this.Ze(t),c=a?this.Xe(a,t,s):1;if(c!==0){this.je(e);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}nV?.et(function(f,g,v,_,b){var C,S,j,q,N,G;let se={localCacheCount:f,existenceFilterCount:g.count,databaseId:v.database,projectId:v.projectId},ue=g.unchangedNames;return ue&&(se.bloomFilter={applied:b===0,hashCount:(C=ue?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(q=(j=(S=ue?.bits)===null||S===void 0?void 0:S.bitmap)===null||j===void 0?void 0:j.length)!==null&&q!==void 0?q:0,padding:(G=(N=ue?.bits)===null||N===void 0?void 0:N.padding)!==null&&G!==void 0?G:0,mightContain:Y=>{var L;return(L=_?.mightContain(Y))!==null&&L!==void 0&&L}}),se}(s,t.me,this.Le.tt(),a,c))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=e,s,a;try{s=ec(n).toUint8Array()}catch(c){if(c instanceof A0)return gs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vT(s,i,o)}catch(c){return gs(c instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){let n=this.Le.getRemoteKeysForTarget(e),i=0;return n.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,o,null),i++)}),i}rt(t){let e=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&M0(a.target)){let c=new mt(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ii.newNoDocument(c,t))}o.be&&(e.set(s,o.ve()),o.Ce())}});let n=on();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));let i=new Eg(t,e,this.Qe,this.ke,n);return this.ke=No(),this.qe=oV(),this.Qe=new sr(Zt),i}$e(t,e){if(!this.ze(t))return;let n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;let i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new R0,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Kn(Zt),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||Ke("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new R0),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function oV(){return new sr(mt.comparator)}function sV(){return new sr(mt.comparator)}var yre={asc:"ASCENDING",desc:"DESCENDING"},_re={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wre={and:"AND",or:"OR"},_T=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function wT(r,t){return r.useProto3Json||Lg(t)?t:{value:t}}function Pf(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function E2(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function bre(r,t){return Pf(r,t.toTimestamp())}function Ur(r){return Rt(!!r),Bt.fromTimestamp(function(e){let n=nl(e);return new br(n.seconds,n.nanos)}(r))}function JO(r,t){return bT(r,t).canonicalString()}function bT(r,t){let e=function(i){return new bn(["projects",i.projectId,"databases",i.database])}(r).child("documents");return t===void 0?e:e.child(t)}function S2(r){let t=bn.fromString(r);return Rt(N2(t)),t}function Ag(r,t){return JO(r.databaseId,t.path)}function va(r,t){let e=S2(t);if(e.get(1)!==r.databaseId.projectId)throw new We(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new We(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new mt(O2(e))}function A2(r,t){return JO(r.databaseId,t)}function T2(r){let t=S2(r);return t.length===4?bn.emptyPath():O2(t)}function CT(r){return new bn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function O2(r){return Rt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function aV(r,t,e){return{name:Ag(r,t),fields:e.value.mapValue.fields}}function M2(r,t,e){let n=va(r,t.name),i=Ur(t.updateTime),o=t.createTime?Ur(t.createTime):Bt.min(),s=new Ki({mapValue:{fields:t.fields}}),a=ii.newFoundDocument(n,i,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function Cre(r,t){return"found"in t?function(n,i){Rt(!!i.found),i.found.name,i.found.updateTime;let o=va(n,i.found.name),s=Ur(i.found.updateTime),a=i.found.createTime?Ur(i.found.createTime):Bt.min(),c=new Ki({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(o,s,a,c)}(r,t):"missing"in t?function(n,i){Rt(!!i.missing),Rt(!!i.readTime);let o=va(n,i.missing),s=Ur(i.readTime);return ii.newNoDocument(o,s)}(r,t):Et()}function xre(r,t){let e;if("targetChange"in t){t.targetChange;let n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Et()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(u,f){return u.useProto3Json?(Rt(f===void 0||typeof f=="string"),Hr.fromBase64String(f||"")):(Rt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Hr.fromUint8Array(f||new Uint8Array))}(r,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(u){let f=u.code===void 0?Ie.UNKNOWN:C2(u.code);return new We(f,u.message||"")}(s);e=new k0(n,i,o,a||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=va(r,n.document.name),o=Ur(n.document.updateTime),s=n.document.createTime?Ur(n.document.createTime):Bt.min(),a=new Ki({mapValue:{fields:n.document.fields}}),c=ii.newFoundDocument(i,o,s,a),u=n.targetIds||[],f=n.removedTargetIds||[];e=new xf(u,f,c.key,c)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=va(r,n.document),o=n.readTime?Ur(n.readTime):Bt.min(),s=ii.newNoDocument(i,o),a=n.removedTargetIds||[];e=new xf([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=va(r,n.document),o=n.removedTargetIds||[];e=new xf([],o,i,null)}else{if(!("filter"in t))return Et();{t.filter;let n=t.filter;n.targetId;let{count:i=0,unchangedNames:o}=n,s=new mT(i,o),a=n.targetId;e=new D0(a,s)}}return e}function Tg(r,t){let e;if(t instanceof oc)e={update:aV(r,t.key,t.value)};else if(t instanceof sc)e={delete:Ag(r,t.key)};else if(t instanceof Us)e={update:aV(r,t.key,t.data),updateMask:Mre(t.fieldMask)};else{if(!(t instanceof bg))return Et();e={verify:Ag(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(o,s){let a=s.transform;if(a instanceof rc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ic)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Et()}(0,n))),t.precondition.isNone||(e.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bre(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et()}(r,t.precondition)),e}function xT(r,t){let e=t.currentDocument?function(o){return o.updateTime!==void 0?Mr.updateTime(Ur(o.updateTime)):o.exists!==void 0?Mr.exists(o.exists):Mr.none()}(t.currentDocument):Mr.none(),n=t.updateTransforms?t.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)Rt(a.setToServerValue==="REQUEST_TIME"),c=new rc;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];c=new rl(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];c=new il(f)}else"increment"in a?c=new ic(s,a.increment):Et();let u=Br.fromServerFormat(a.fieldPath);return new wu(u,c)}(r,i)):[];if(t.update){t.update.name;let i=va(r,t.update.name),o=new Ki({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Xo(u.map(f=>Br.fromServerFormat(f)))}(t.updateMask);return new Us(i,o,s,e,n)}return new oc(i,o,e,n)}if(t.delete){let i=va(r,t.delete);return new sc(i,e)}if(t.verify){let i=va(r,t.verify);return new bg(i,e)}return Et()}function Ere(r,t){return r&&r.length>0?(Rt(t!==void 0),r.map(e=>function(i,o){let s=i.updateTime?Ur(i.updateTime):Ur(o);return s.isEqual(Bt.min())&&(s=Ur(o)),new pT(s,i.transformResults||[])}(e,t))):[]}function P2(r,t){return{documents:[A2(r,t.path)]}}function I2(r,t){let e={structuredQuery:{}},n=t.path,i;t.collectionGroup!==null?(i=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=A2(r,i);let o=function(u){if(u.length!==0)return R2(Un.create(u,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(f=>function(v){return{field:vf(v.field),direction:Are(v.dir)}}(f))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=wT(r,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:i}}function D2(r){let t=T2(r.parent),e=r.structuredQuery,n=e.from?e.from.length:0,i=null;if(n>0){Rt(n===1);let f=e.from[0];f.allDescendants?i=f.collectionId:t=t.child(f.collectionId)}let o=[];e.where&&(o=function(g){let v=k2(g);return v instanceof Un&&GO(v)?v.getFilters():[v]}(e.where));let s=[];e.orderBy&&(s=function(g){return g.map(v=>function(b){return new yu(yf(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(e.orderBy));let a=null;e.limit&&(a=function(g){let v;return v=typeof g=="object"?g.value:g,Lg(v)?null:v}(e.limit));let c=null;e.startAt&&(c=function(g){let v=!!g.before,_=g.values||[];return new wa(_,v)}(e.startAt));let u=null;return e.endAt&&(u=function(g){let v=!g.before,_=g.values||[];return new wa(_,v)}(e.endAt)),s2(t,i,s,o,a,"F",c,u)}function Sre(r,t){let e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function k2(r){return r.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let n=yf(e.unaryFilter.field);return vn.create(n,"==",{doubleValue:NaN});case"IS_NULL":let i=yf(e.unaryFilter.field);return vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=yf(e.unaryFilter.field);return vn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=yf(e.unaryFilter.field);return vn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}(r):r.fieldFilter!==void 0?function(e){return vn.create(yf(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(e.fieldFilter.op),e.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(e){return Un.create(e.compositeFilter.filters.map(n=>k2(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et()}}(e.compositeFilter.op))}(r):Et()}function Are(r){return yre[r]}function Tre(r){return _re[r]}function Ore(r){return wre[r]}function vf(r){return{fieldPath:r.canonicalString()}}function yf(r){return Br.fromServerFormat(r.fieldPath)}function R2(r){return r instanceof vn?function(e){if(e.op==="=="){if($L(e.value))return{unaryFilter:{field:vf(e.field),op:"IS_NAN"}};if(zL(e.value))return{unaryFilter:{field:vf(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if($L(e.value))return{unaryFilter:{field:vf(e.field),op:"IS_NOT_NAN"}};if(zL(e.value))return{unaryFilter:{field:vf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vf(e.field),op:Tre(e.op),value:e.value}}}(r):r instanceof Un?function(e){let n=e.getFilters().map(i=>R2(i));return n.length===1?n[0]:{compositeFilter:{op:Ore(e.op),filters:n}}}(r):Et()}function Mre(r){let t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function N2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}var If=class r{constructor(t,e,n,i,o=Bt.min(),s=Bt.min(),a=Hr.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new r(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new r(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var N0=class{constructor(t){this.ct=t}};function Pre(r,t){let e;if(t.document)e=M2(r.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let n=mt.fromSegments(t.noDocument.path),i=Cu(t.noDocument.readTime);e=ii.newNoDocument(n,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Et();{let n=mt.fromSegments(t.unknownDocument.path),i=Cu(t.unknownDocument.version);e=ii.newUnknownDocument(n,i)}}return t.readTime&&e.setReadTime(function(i){let o=new br(i[0],i[1]);return Bt.fromTimestamp(o)}(t.readTime)),e}function lV(r,t){let e=t.key,n={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:j0(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(o,s){return{name:Ag(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Pf(o,s.version.toTimestamp()),createTime:Pf(o,s.createTime.toTimestamp())}}(r.ct,t);else if(t.isNoDocument())n.noDocument={path:e.path.toArray(),readTime:bu(t.version)};else{if(!t.isUnknownDocument())return Et();n.unknownDocument={path:e.path.toArray(),version:bu(t.version)}}return n}function j0(r){let t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function bu(r){let t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cu(r){let t=new br(r.seconds,r.nanoseconds);return Bt.fromTimestamp(t)}function du(r,t){let e=(t.baseMutations||[]).map(o=>xT(r.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let n=t.mutations.map(o=>xT(r.ct,o)),i=br.fromMillis(t.localWriteTimeMs);return new Cg(t.batchId,i,e,n)}function cg(r){let t=Cu(r.readTime),e=r.lastLimboFreeSnapshotVersion!==void 0?Cu(r.lastLimboFreeSnapshotVersion):Bt.min(),n;return n=function(o){return o.documents!==void 0}(r.query)?function(o){return Rt(o.documents.length===1),_o(Hf(T2(o.documents[0])))}(r.query):function(o){return _o(D2(o))}(r.query),new If(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,t,e,Hr.fromBase64String(r.resumeToken))}function j2(r,t){let e=bu(t.snapshotVersion),n=bu(t.lastLimboFreeSnapshotVersion),i;i=M0(t.target)?P2(r.ct,t.target):I2(r.ct,t.target)._t;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:_u(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function ZO(r){let t=D2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?I0(t,t.limit,"L"):t}function LA(r,t){return new xg(t.largestBatchId,xT(r.ct,t.overlayMutation))}function cV(r,t){let e=t.path.lastSegment();return[r,yo(t.path.popLast()),e]}function uV(r,t,e,n){return{indexId:r,uid:t,sequenceNumber:e,readTime:bu(n.readTime),documentKey:yo(n.documentKey.path),largestBatchId:n.largestBatchId}}var ET=class{getBundleMetadata(t,e){return dV(t).get(e).next(n=>{if(n)return function(o){return{id:o.bundleId,createTime:Cu(o.createTime),version:o.version}}(n)})}saveBundleMetadata(t,e){return dV(t).put(function(i){return{bundleId:i.id,createTime:bu(Ur(i.createTime)),version:i.version}}(e))}getNamedQuery(t,e){return fV(t).get(e).next(n=>{if(n)return function(o){return{name:o.name,query:ZO(o.bundledQuery),readTime:Cu(o.readTime)}}(n)})}saveNamedQuery(t,e){return fV(t).put(function(i){return{name:i.name,readTime:bu(Ur(i.readTime)),bundledQuery:i.bundledQuery}}(e))}};function dV(r){return mi(r,"bundles")}function fV(r){return mi(r,"namedQueries")}var F0=class r{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){let n=e.uid||"";return new r(t,n)}getOverlay(t,e){return ig(t).get(cV(this.userId,e)).next(n=>n?LA(this.serializer,n):null)}getOverlays(t,e){let n=ga();return Me.forEach(e,i=>this.getOverlay(t,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(t,e,n){let i=[];return n.forEach((o,s)=>{let a=new xg(e,s);i.push(this.ht(t,a))}),Me.waitFor(i)}removeOverlaysForBatchId(t,e,n){let i=new Set;e.forEach(s=>i.add(yo(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);o.push(ig(t).j("collectionPathOverlayIndex",a))}),Me.waitFor(o)}getOverlaysForCollection(t,e,n){let i=ga(),o=yo(e),s=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ig(t).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=LA(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(t,e,n,i){let o=ga(),s,a=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ig(t).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{let g=LA(this.serializer,u);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):f.done()}).next(()=>o)}ht(t,e){return ig(t).put(function(i,o,s){let[a,c,u]=cV(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Tg(i.ct,s.mutation)}}(this.serializer,this.userId,e))}};function ig(r){return mi(r,"documentOverlays")}var ST=class{Pt(t){return mi(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(e=>{let n=e?.value;return n?Hr.fromUint8Array(n):Hr.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Pt(t).put({name:"sessionToken",value:e.toUint8Array()})}};var el=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(fr(t.integerValue));else if("doubleValue"in t){let n=fr(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),mg(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),typeof n=="string"&&(n=nl(n)),e.Rt(`${n.seconds||""}`),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(ec(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?ZV(t)?this.dt(e,Number.MAX_SAFE_INTEGER):vw(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):Et()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let n=t.fields||{};this.dt(e,55);for(let i of Object.keys(n))this.Vt(i,e),this.Tt(n[i],e)}wt(t,e){var n,i;let o=t.fields||{};this.dt(e,53);let s="value",a=((i=(n=o[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(e,15),e.At(fr(a)),this.Vt(s,e),this.Tt(o[s],e)}bt(t,e){let n=t.values||[];this.dt(e,50);for(let i of n)this.Tt(i,e)}yt(t,e){this.dt(e,37),mt.fromName(t).path.forEach(n=>{this.dt(e,60),this.Dt(n,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};el.vt=new el;function Ire(r){if(r===0)return 8;let t=0;return!(r>>4)&&(t+=4,r<<=4),!(r>>6)&&(t+=2,r<<=2),!(r>>7)&&(t+=1),t}function hV(r){let t=64-function(n){let i=0;for(let o=0;o<8;++o){let s=Ire(255&n[o]);if(i+=s,s!==8)break}return i}(r);return Math.ceil(t/8)}var AT=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){let e=t[Symbol.iterator](),n=e.next();for(;!n.done;)this.Ft(n.value),n=e.next();this.Mt()}xt(t){let e=t[Symbol.iterator](),n=e.next();for(;!n.done;)this.Ot(n.value),n=e.next();this.Nt()}Lt(t){for(let e of t){let n=e.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{let i=e.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(t){for(let e of t){let n=e.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{let i=e.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(t){let e=this.qt(t),n=hV(e);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Kt(t){let e=this.qt(t),n=hV(e);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){let e=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),n=(128&e[0])!=0;e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}Ft(t){let e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ot(t){let e=255&t;e===0?(this.Gt(0),this.Gt(255)):e===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){let e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);let i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}},TT=class{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}},OT=class{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}},fu=class{constructor(){this.jt=new AT,this.Ht=new TT(this.jt),this.Jt=new OT(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var hu=class r{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Zt(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new r(this.indexId,this.documentKey,this.arrayValue,n)}};function ql(r,t){let e=r.indexId-t.indexId;return e!==0?e:(e=pV(r.arrayValue,t.arrayValue),e!==0?e:(e=pV(r.directionalValue,t.directionalValue),e!==0?e:mt.comparator(r.documentKey,t.documentKey)))}function pV(r,t){for(let e=0;e<r.length&&e<t.length;++e){let n=r[e]-t[e];if(n!==0)return n}return r.length-t.length}var L0=class{constructor(t){this.Xt=new Kn((e,n)=>Br.comparator(e.field,n.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(let e of t.filters){let n=e;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(t){if(Rt(t.collectionGroup===this.collectionId),this.nn)return!1;let e=QA(t);if(e!==void 0&&!this.sn(e))return!1;let n=cu(t),i=new Set,o=0,s=0;for(;o<n.length&&this.sn(n[o]);++o)i=i.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=n[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<n.length;++o){let a=n[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let t=new Kn(Br.comparator),e=[];for(let n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")e.push(new bf(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new bf(n.field,0))}for(let n of this.en)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new bf(n.field,n.dir==="asc"?0:1)));return new Sf(Sf.UNKNOWN_ID,this.collectionId,e,gg.empty())}sn(t){for(let e of this.tn)if(this.on(e,t))return!0;return!1}on(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let n=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===n}_n(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}};function F2(r){var t,e;if(Rt(r instanceof vn||r instanceof Un),r instanceof vn){if(r instanceof O0){let i=((e=(t=r.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(o=>vn.create(r.field,"==",o)))||[];return Un.create(i,"or")}return r}let n=r.filters.map(i=>F2(i));return Un.create(n,r.op)}function Dre(r){if(r.getFilters().length===0)return[];let t=IT(F2(r));return Rt(L2(t)),MT(t)||PT(t)?[t]:t.getFilters()}function MT(r){return r instanceof vn}function PT(r){return r instanceof Un&&GO(r)}function L2(r){return MT(r)||PT(r)||function(e){if(e instanceof Un&&rT(e)){for(let n of e.getFilters())if(!MT(n)&&!PT(n))return!1;return!0}return!1}(r)}function IT(r){if(Rt(r instanceof vn||r instanceof Un),r instanceof vn)return r;if(r.filters.length===1)return IT(r.filters[0]);let t=r.filters.map(n=>IT(n)),e=Un.create(t,r.op);return e=V0(e),L2(e)?e:(Rt(e instanceof Un),Rt(Tf(e)),Rt(e.filters.length>1),e.filters.reduce((n,i)=>XO(n,i)))}function XO(r,t){let e;return Rt(r instanceof vn||r instanceof Un),Rt(t instanceof vn||t instanceof Un),e=r instanceof vn?t instanceof vn?function(i,o){return Un.create([i,o],"and")}(r,t):gV(r,t):t instanceof vn?gV(t,r):function(i,o){if(Rt(i.filters.length>0&&o.filters.length>0),Tf(i)&&Tf(o))return r2(i,o.getFilters());let s=rT(i)?i:o,a=rT(i)?o:i,c=s.filters.map(u=>XO(u,a));return Un.create(c,"or")}(r,t),V0(e)}function gV(r,t){if(Tf(t))return r2(t,r.getFilters());{let e=t.filters.map(n=>XO(r,n));return Un.create(e,"or")}}function V0(r){if(Rt(r instanceof vn||r instanceof Un),r instanceof vn)return r;let t=r.getFilters();if(t.length===1)return V0(t[0]);if(t2(r))return r;let e=t.map(i=>V0(i)),n=[];return e.forEach(i=>{i instanceof vn?n.push(i):i instanceof Un&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:Un.create(n,r.op)}var DT=class{constructor(){this.un=new Og}addToCollectionParentIndex(t,e){return this.un.add(e),Me.resolve()}getCollectionParents(t,e){return Me.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return Me.resolve()}deleteFieldIndex(t,e){return Me.resolve()}deleteAllFieldIndexes(t){return Me.resolve()}createTargetIndexes(t,e){return Me.resolve()}getDocumentsMatchingTarget(t,e){return Me.resolve(null)}getIndexType(t,e){return Me.resolve(0)}getFieldIndexes(t,e){return Me.resolve([])}getNextCollectionGroupToUpdate(t){return Me.resolve(null)}getMinOffset(t,e){return Me.resolve(ms.min())}getMinOffsetFromCollectionGroup(t,e){return Me.resolve(ms.min())}updateCollectionGroup(t,e,n){return Me.resolve()}updateIndexEntries(t,e){return Me.resolve()}},Og=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Kn(bn.comparator),o=!i.has(n);return this.index[e]=i.add(n),o}has(t){let e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Kn(bn.comparator)).toArray()}};var u0=new Uint8Array(0),kT=class{constructor(t,e){this.databaseId=e,this.cn=new Og,this.ln=new ba(n=>_u(n),(n,i)=>Vg(n,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.cn.has(e)){let n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.cn.add(e)});let o={collectionId:n,parent:yo(i)};return mV(t).put(o)}return Me.resolve()}getCollectionParents(t,e){let n=[],i=IDBKeyRange.bound([e,""],[BV(e),""],!1,!0);return mV(t).U(i).next(o=>{for(let s of o){if(s.collectionId!==e)break;n.push(pa(s.parent))}return n})}addFieldIndex(t,e){let n=og(t),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(e);delete i.indexId;let o=n.add(i);if(e.indexState){let s=hf(t);return o.next(a=>{s.put(uV(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){let n=og(t),i=hf(t),o=ff(t);return n.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=og(t),n=ff(t),i=hf(t);return e.j().next(()=>n.j()).next(()=>i.j())}createTargetIndexes(t,e){return Me.forEach(this.hn(e),n=>this.getIndexType(t,n).next(i=>{if(i===0||i===1){let o=new L0(n).an();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){let n=ff(t),i=!0,o=new Map;return Me.forEach(this.hn(e),s=>this.Pn(t,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=on(),a=[];return Me.forEach(o,(c,u)=>{Ke("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`}(c)} to execute ${_u(e)}`);let f=function(N,G){let se=QA(G);if(se===void 0)return null;for(let ue of P0(N,se.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(u,c),g=function(N,G){let se=new Map;for(let ue of cu(G))for(let Y of P0(N,ue.fieldPath))switch(Y.op){case"==":case"in":se.set(ue.fieldPath.canonicalString(),Y.value);break;case"not-in":case"!=":return se.set(ue.fieldPath.canonicalString(),Y.value),Array.from(se.values())}return null}(u,c),v=function(N,G){let se=[],ue=!0;for(let Y of cu(G)){let L=Y.kind===0?QL(N,Y.fieldPath,N.startAt):YL(N,Y.fieldPath,N.startAt);se.push(L.value),ue&&(ue=L.inclusive)}return new wa(se,ue)}(u,c),_=function(N,G){let se=[],ue=!0;for(let Y of cu(G)){let L=Y.kind===0?YL(N,Y.fieldPath,N.endAt):QL(N,Y.fieldPath,N.endAt);se.push(L.value),ue&&(ue=L.inclusive)}return new wa(se,ue)}(u,c),b=this.In(c,u,v),C=this.In(c,u,_),S=this.Tn(c,u,g),j=this.En(c.indexId,f,b,v.inclusive,C,_.inclusive,S);return Me.forEach(j,q=>n.G(q,e.limit).next(N=>{N.forEach(G=>{let se=mt.fromSegments(G.documentKey);s.has(se)||(s=s.add(se),a.push(se))})}))}).next(()=>a)}return Me.resolve(null)})}hn(t){let e=this.ln.get(t);return e||(t.filters.length===0?e=[t]:e=Dre(Un.create(t.filters,"and")).map(n=>fT(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,e),e)}En(t,e,n,i,o,s,a){let c=(e!=null?e.length:1)*Math.max(n.length,o.length),u=c/(e!=null?e.length:1),f=[];for(let g=0;g<c;++g){let v=e?this.dn(e[g/u]):u0,_=this.An(t,v,n[g%u],i),b=this.Rn(t,v,o[g%u],s),C=a.map(S=>this.An(t,v,S,!0));f.push(...this.createRange(_,b,C))}return f}An(t,e,n,i){let o=new hu(t,mt.empty(),e,n);return i?o:o.Zt()}Rn(t,e,n,i){let o=new hu(t,mt.empty(),e,n);return i?o.Zt():o}Pn(t,e){let n=new L0(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let s=null;for(let a of o)n.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let n=2,i=this.hn(e);return Me.forEach(i,o=>this.Pn(t,o).next(s=>{s?n!==0&&s.fields.length<function(c){let u=new Kn(Br.comparator),f=!1;for(let g of c.filters)for(let v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?f=!0:u=u.add(v.field));for(let g of c.orderBy)g.field.isKeyField()||(u=u.add(g.field));return u.size+(f?1:0)}(o)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(e)&&i.length>1&&n===2?1:n)}Vn(t,e){let n=new fu;for(let i of cu(t)){let o=e.data.field(i.fieldPath);if(o==null)return null;let s=n.Yt(i.kind);el.vt.It(o,s)}return n.zt()}dn(t){let e=new fu;return el.vt.It(t,e.Yt(0)),e.zt()}mn(t,e){let n=new fu;return el.vt.It(vu(this.databaseId,e),n.Yt(function(o){let s=cu(o);return s.length===0?0:s[s.length-1].kind}(t))),n.zt()}Tn(t,e,n){if(n===null)return[];let i=[];i.push(new fu);let o=0;for(let s of cu(t)){let a=n[o++];for(let c of i)if(this.fn(e,s.fieldPath)&&wg(a))i=this.gn(i,s,a);else{let u=c.Yt(s.kind);el.vt.It(a,u)}}return this.pn(i)}In(t,e,n){return this.Tn(t,e,n.position)}pn(t){let e=[];for(let n=0;n<t.length;++n)e[n]=t[n].zt();return e}gn(t,e,n){let i=[...t],o=[];for(let s of n.arrayValue.values||[])for(let a of i){let c=new fu;c.seed(a.zt()),el.vt.It(s,c.Yt(e.kind)),o.push(c)}return o}fn(t,e){return!!t.filters.find(n=>n instanceof vn&&n.field.isEqual(e)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(t,e){let n=og(t),i=hf(t);return(e?n.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.U()).next(o=>{let s=[];return Me.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(f,g){let v=g?new gg(g.sequenceNumber,new ms(Cu(g.readTime),new mt(pa(g.documentKey)),g.largestBatchId)):gg.empty(),_=f.fields.map(([b,C])=>new bf(Br.fromServerFormat(b),C));return new Sf(f.indexId,f.collectionGroup,_,v)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((n,i)=>{let o=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Zt(n.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,n){let i=og(t),o=hf(t);return this.yn(t).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>Me.forEach(a,c=>o.put(uV(c.indexId,this.uid,s,n)))))}updateIndexEntries(t,e){let n=new Map;return Me.forEach(e,(i,o)=>{let s=n.get(i.collectionGroup);return(s?Me.resolve(s):this.getFieldIndexes(t,i.collectionGroup)).next(a=>(n.set(i.collectionGroup,a),Me.forEach(a,c=>this.wn(t,i,c).next(u=>{let f=this.Sn(o,c);return u.isEqual(f)?Me.resolve():this.bn(t,o,c,u,f)}))))})}Dn(t,e,n,i){return ff(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,e.key),documentKey:e.key.path.toArray()})}vn(t,e,n,i){return ff(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,e.key),e.key.path.toArray()])}wn(t,e,n){let i=ff(t),o=new Kn(ql);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,e)])},(s,a)=>{o=o.add(new hu(n.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(t,e){let n=new Kn(ql),i=this.Vn(e,t);if(i==null)return n;let o=QA(e);if(o!=null){let s=t.data.field(o.fieldPath);if(wg(s))for(let a of s.arrayValue.values||[])n=n.add(new hu(e.indexId,t.key,this.dn(a),i))}else n=n.add(new hu(e.indexId,t.key,u0,i));return n}bn(t,e,n,i,o){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);let s=[];return function(c,u,f,g,v){let _=c.getIterator(),b=u.getIterator(),C=df(_),S=df(b);for(;C||S;){let j=!1,q=!1;if(C&&S){let N=f(C,S);N<0?q=!0:N>0&&(j=!0)}else C!=null?q=!0:j=!0;j?(g(S),S=df(b)):q?(v(C),C=df(_)):(C=df(_),S=df(b))}}(i,o,ql,a=>{s.push(this.Dn(t,e,n,a))},a=>{s.push(this.vn(t,e,n,a))}),Me.waitFor(s)}yn(t){let e=1;return hf(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,n){n=n.sort((s,a)=>ql(s,a)).filter((s,a,c)=>!a||ql(s,c[a-1])!==0);let i=[];i.push(t);for(let s of n){let a=ql(s,t),c=ql(s,e);if(a===0)i[0]=t.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(e);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,u0,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,u0,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(t,e){return ql(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(vV)}getMinOffset(t,e){return Me.mapArray(this.hn(e),n=>this.Pn(t,n).next(i=>i||Et())).next(vV)}};function mV(r){return mi(r,"collectionParents")}function ff(r){return mi(r,"indexEntries")}function og(r){return mi(r,"indexConfiguration")}function hf(r){return mi(r,"indexState")}function vV(r){Rt(r.length!==0);let t=r[0].indexState.offset,e=t.largestBatchId;for(let n=1;n<r.length;n++){let i=r[n].indexState.offset;zO(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new ms(t.readTime,t.documentKey,e)}var yV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ps=class r{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new r(t,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function V2(r,t,e){let n=r.store("mutations"),i=r.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId),a=0,c=n.J({range:s},(f,g,v)=>(a++,v.delete()));o.push(c.next(()=>{Rt(a===1)}));let u=[];for(let f of e.mutations){let g=qV(t,f.key.path,e.batchId);o.push(i.delete(g)),u.push(f.key)}return Me.waitFor(o).next(()=>u)}function B0(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw Et();t=r.noDocument}return JSON.stringify(t).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);var U0=class r{constructor(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(t,e,n,i){Rt(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new r(o,e,n,i)}checkEmpty(t){let e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gl(t).J({index:"userMutationsIndex",range:n},(i,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,n,i){let o=_f(t),s=Gl(t);return s.add({}).next(a=>{Rt(typeof a=="number");let c=new Cg(a,e,n,i),u=function(_,b,C){let S=C.baseMutations.map(q=>Tg(_.ct,q)),j=C.mutations.map(q=>Tg(_.ct,q));return{userId:b,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:j}}(this.serializer,this.userId,c),f=[],g=new Kn((v,_)=>Zt(v.canonicalString(),_.canonicalString()));for(let v of i){let _=qV(this.userId,v.key.path,a);g=g.add(v.key.path.popLast()),f.push(s.put(u)),f.push(o.put(_,Lne))}return g.forEach(v=>{f.push(this.indexManager.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),Me.waitFor(f).next(()=>c)})}lookupMutationBatch(t,e){return Gl(t).get(e).next(n=>n?(Rt(n.userId===this.userId),du(this.serializer,n)):null)}Mn(t,e){return this.Fn[e]?Me.resolve(this.Fn[e]):this.lookupMutationBatch(t,e).next(n=>{if(n){let i=n.keys();return this.Fn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){let n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]),o=null;return Gl(t).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(Rt(a.batchId>=n),o=du(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gl(t).J({index:"userMutationsIndex",range:e,reverse:!0},(i,o,s)=>{n=o.batchId,s.done()}).next(()=>n)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gl(t).U("userMutationsIndex",e).next(n=>n.map(i=>du(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){let n=p0(this.userId,e.path),i=IDBKeyRange.lowerBound(n),o=[];return _f(t).J({range:i},(s,a,c)=>{let[u,f,g]=s,v=pa(f);if(u===this.userId&&e.path.isEqual(v))return Gl(t).get(g).next(_=>{if(!_)throw Et();Rt(_.userId===this.userId),o.push(du(this.serializer,_))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Kn(Zt),i=[];return e.forEach(o=>{let s=p0(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=_f(t).J({range:a},(u,f,g)=>{let[v,_,b]=u,C=pa(_);v===this.userId&&o.path.isEqual(C)?n=n.add(b):g.done()});i.push(c)}),Me.waitFor(i).next(()=>this.xn(t,n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,i=n.length+1,o=p0(this.userId,n),s=IDBKeyRange.lowerBound(o),a=new Kn(Zt);return _f(t).J({range:s},(c,u,f)=>{let[g,v,_]=c,b=pa(v);g===this.userId&&n.isPrefixOf(b)?b.length===i&&(a=a.add(_)):f.done()}).next(()=>this.xn(t,a))}xn(t,e){let n=[],i=[];return e.forEach(o=>{i.push(Gl(t).get(o).next(s=>{if(s===null)throw Et();Rt(s.userId===this.userId),n.push(du(this.serializer,s))}))}),Me.waitFor(i).next(()=>n)}removeMutationBatch(t,e){return V2(t._e,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.On(e.batchId)}),Me.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Me.resolve();let n=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return _f(t).J({range:n},(o,s,a)=>{if(o[0]===this.userId){let c=pa(o[1]);i.push(c)}else a.done()}).next(()=>{Rt(i.length===0)})})}containsKey(t,e){return B2(t,this.userId,e)}Nn(t){return U2(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function B2(r,t,e){let n=p0(t,e.path),i=n[1],o=IDBKeyRange.lowerBound(n),s=!1;return _f(r).J({range:o,H:!0},(a,c,u)=>{let[f,g,v]=a;f===t&&g===i&&(s=!0),u.done()}).next(()=>s)}function Gl(r){return mi(r,"mutations")}function _f(r){return mi(r,"documentMutations")}function U2(r){return mi(r,"mutationQueues")}var Df=class r{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new r(0)}static kn(){return new r(-1)}};var RT=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.qn(t).next(e=>{let n=new Df(e.highestTargetId);return e.highestTargetId=n.next(),this.Qn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(e=>Bt.fromTimestamp(new br(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.qn(t).next(i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Qn(t,i)))}addTargetData(t,e){return this.Kn(t,e).next(()=>this.qn(t).next(n=>(n.targetCount+=1,this.$n(e,n),this.Qn(t,n))))}updateTargetData(t,e){return this.Kn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>pf(t).delete(e.targetId)).next(()=>this.qn(t)).next(n=>(Rt(n.targetCount>0),n.targetCount-=1,this.Qn(t,n)))}removeTargets(t,e,n){let i=0,o=[];return pf(t).J((s,a)=>{let c=cg(a);c.sequenceNumber<=e&&n.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(t,c)))}).next(()=>Me.waitFor(o)).next(()=>i)}forEachTarget(t,e){return pf(t).J((n,i)=>{let o=cg(i);e(o)})}qn(t){return _V(t).get("targetGlobalKey").next(e=>(Rt(e!==null),e))}Qn(t,e){return _V(t).put("targetGlobalKey",e)}Kn(t,e){return pf(t).put(j2(this.serializer,e))}$n(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.qn(t).next(e=>e.targetCount)}getTargetData(t,e){let n=_u(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),o=null;return pf(t).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=cg(a);Vg(e,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(t,e,n){let i=[],o=Kl(t);return e.forEach(s=>{let a=yo(s.path);i.push(o.put({targetId:n,path:a})),i.push(this.referenceDelegate.addReference(t,n,s))}),Me.waitFor(i)}removeMatchingKeys(t,e,n){let i=Kl(t);return Me.forEach(e,o=>{let s=yo(o.path);return Me.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(t,n,o)])})}removeMatchingKeysForTargetId(t,e){let n=Kl(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){let n=IDBKeyRange.bound([e],[e+1],!1,!0),i=Kl(t),o=on();return i.J({range:n,H:!0},(s,a,c)=>{let u=pa(s[1]),f=new mt(u);o=o.add(f)}).next(()=>o)}containsKey(t,e){let n=yo(e.path),i=IDBKeyRange.bound([n],[BV(n)],!1,!0),o=0;return Kl(t).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(t,e){return pf(t).get(e).next(n=>n?cg(n):null)}};function pf(r){return mi(r,"targets")}function _V(r){return mi(r,"targetGlobal")}function Kl(r){return mi(r,"targetDocuments")}function wV([r,t],[e,n]){let i=Zt(r,e);return i===0?Zt(t,n):i}var NT=class{constructor(t){this.Un=t,this.buffer=new Kn(wV),this.Wn=0}Gn(){return++this.Wn}zn(t){let e=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(e);else{let n=this.buffer.last();wV(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}},jT=class{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){Ke("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>ke(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){cc(e)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield lc(e)}yield this.Hn(3e5)}))}},FT=class{constructor(t,e){this.Jn=t,this.params=e}calculateTargetCount(t,e){return this.Jn.Yn(t).next(n=>Math.floor(e/100*n))}nthSequenceNumber(t,e){if(e===0)return Me.resolve(Zo.oe);let n=new NT(e);return this.Jn.forEachTarget(t,i=>n.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(t,i=>n.zn(i))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.Jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(yV)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yV):this.Xn(t,e))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,e){let n,i,o,s,a,c,u,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(t,i))).next(g=>(n=g,a=Date.now(),this.removeTargets(t,n,e))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(g=>(u=Date.now(),gf()<=Js.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function kre(r,t){return new FT(r,t)}var LT=class{constructor(t,e){this.db=t,this.garbageCollector=kre(this,e)}Yn(t){let e=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(n=>e.next(i=>n+i))}er(t){let e=0;return this.Zn(t,n=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Zn(t,e){return this.tr(t,(n,i)=>e(i))}addReference(t,e,n){return d0(t,n)}removeReference(t,e,n){return d0(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return d0(t,e)}nr(t,e){return function(i,o){let s=!1;return U2(i).Y(a=>B2(i,a,o).next(c=>(c&&(s=!0),Me.resolve(!c)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(t,(s,a)=>{if(a<=e){let c=this.nr(t,s).next(u=>{if(!u)return o++,n.getEntry(t,s).next(()=>(n.removeEntry(s,Bt.min()),Kl(t).delete(function(g){return[0,yo(g.path)]}(s))))});i.push(c)}}).next(()=>Me.waitFor(i)).next(()=>n.apply(t)).next(()=>o)}removeTarget(t,e){let n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return d0(t,e)}tr(t,e){let n=Kl(t),i,o=Zo.oe;return n.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Zo.oe&&e(new mt(pa(i)),o),o=u,i=c):o=Zo.oe}).next(()=>{o!==Zo.oe&&e(new mt(pa(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function d0(r,t){return Kl(r).put(function(n,i){return{targetId:0,path:yo(n.path),sequenceNumber:i}}(t,r.currentSequenceNumber))}var H0=class{constructor(){this.changes=new ba(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ii.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let n=this.changes.get(e);return n!==void 0?Me.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var VT=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return lu(t).put(n)}removeEntry(t,e,n){return lu(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],j0(s),a[a.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.rr(t,n)))}getEntry(t,e){let n=ii.newInvalidDocument(e);return lu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(sg(e))},(i,o)=>{n=this.ir(e,o)}).next(()=>n)}sr(t,e){let n={size:0,document:ii.newInvalidDocument(e)};return lu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(sg(e))},(i,o)=>{n={document:this.ir(e,o),size:B0(o)}}).next(()=>n)}getEntries(t,e){let n=No();return this._r(t,e,(i,o)=>{let s=this.ir(i,o);n=n.insert(i,s)}).next(()=>n)}ar(t,e){let n=No(),i=new sr(mt.comparator);return this._r(t,e,(o,s)=>{let a=this.ir(o,s);n=n.insert(o,a),i=i.insert(o,B0(s))}).next(()=>({documents:n,ur:i}))}_r(t,e,n){if(e.isEmpty())return Me.resolve();let i=new Kn(xV);e.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(sg(i.first()),sg(i.last())),s=i.getIterator(),a=s.getNext();return lu(t).J({index:"documentKeyIndex",range:o},(c,u,f)=>{let g=mt.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&xV(a,g)<0;)n(a,null),a=s.getNext();a&&a.isEqual(g)&&(n(a,u),a=s.hasNext()?s.getNext():null),a?f.$(sg(a)):f.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,n,i,o){let s=e.path,a=[s.popLast().toArray(),s.lastSegment(),j0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lu(t).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let f=No();for(let g of u){let v=this.ir(mt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Ug(e,v)||i.has(v.key))&&(f=f.insert(v.key,v))}return f})}getAllFromCollectionGroup(t,e,n,i){let o=No(),s=CV(e,n),a=CV(e,ms.max());return lu(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,f)=>{let g=this.ir(mt.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(g.key,g),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(t){return new BT(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return bV(t).get("remoteDocumentGlobalKey").next(e=>(Rt(!!e),e))}rr(t,e){return bV(t).put("remoteDocumentGlobalKey",e)}ir(t,e){if(e){let n=Pre(this.serializer,e);if(!(n.isNoDocument()&&n.version.isEqual(Bt.min())))return n}return ii.newInvalidDocument(t)}};function H2(r){return new VT(r)}var BT=class extends H0{constructor(t,e){super(),this.cr=t,this.trackRemovals=e,this.lr=new ba(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(t){let e=[],n=0,i=new Kn((o,s)=>Zt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(e.push(this.cr.removeEntry(t,o,a.readTime)),s.isValidDocument()){let c=lV(this.cr.serializer,s);i=i.add(o.path.popLast());let u=B0(c);n+=u-a.size,e.push(this.cr.addEntry(t,o,c))}else if(n-=a.size,this.trackRemovals){let c=lV(this.cr.serializer,s.convertToNoDocument(Bt.min()));e.push(this.cr.addEntry(t,o,c))}}),i.forEach(o=>{e.push(this.cr.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.cr.updateMetadata(t,n)),Me.waitFor(e)}getFromCache(t,e){return this.cr.sr(t,e).next(n=>(this.lr.set(e,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,e){return this.cr.ar(t,e).next(({documents:n,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:n.get(o).readTime})}),n))}};function bV(r){return mi(r,"remoteDocumentGlobal")}function lu(r){return mi(r,"remoteDocumentsV14")}function sg(r){let t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CV(r,t){let e=t.documentKey.path.toArray();return[r,j0(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function xV(r,t){let e=r.path.toArray(),n=t.path.toArray(),i=0;for(let o=0;o<e.length-2&&o<n.length-2;++o)if(i=Zt(e[o],n[o]),i)return i;return i=Zt(e.length,n.length),i||(i=Zt(e[e.length-2],n[n.length-2]),i||Zt(e[e.length-1],n[n.length-1]))}var UT=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var z0=class{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(n!==null&&fg(n.mutation,i,Xo.empty(),br.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,on()).next(()=>n))}getLocalViewOfDocuments(t,e,n=on()){let i=ga();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(o=>{let s=lg();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let n=ga();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,on()))}populateOverlays(t,e,n){let i=[];return n.forEach(o=>{e.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,n,i){let o=No(),s=dg(),a=function(){return dg()}();return e.forEach((c,u)=>{let f=n.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Us)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),fg(f.mutation,u,f.mutation.getFieldMask(),br.now())):s.set(u.key,Xo.empty())}),this.recalculateAndSaveOverlays(t,o).next(c=>(c.forEach((u,f)=>s.set(u,f)),e.forEach((u,f)=>{var g;return a.set(u,new UT(f,(g=s.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(t,e){let n=dg(),i=new sr((s,a)=>s-a),o=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=e.get(c);if(u===null)return;let f=n.get(c)||Xo.empty();f=a.applyToLocalView(u,f),n.set(c,f);let g=(i.get(a.batchId)||on()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,f=c.value,g=f2();f.forEach(v=>{if(!o.has(v)){let _=_2(e.get(v),n.get(v));_!==null&&g.set(v,_),o=o.add(v)}}),s.push(this.documentOverlayCache.saveOverlays(t,u,g))}return Me.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,i){return function(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):KO(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-o.size):Me.resolve(ga()),a=-1,c=o;return s.next(u=>Me.forEach(u,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(f)?Me.resolve():this.remoteDocumentCache.getEntry(t,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(t,u,o)).next(()=>this.computeViews(t,c,u,on())).next(f=>({batchId:a,changes:d2(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new mt(e)).next(n=>{let i=lg();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){let o=e.collectionGroup,s=lg();return this.indexManager.getCollectionParents(t,o).next(a=>Me.forEach(a,c=>{let u=function(g,v){return new Bs(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(e,c.child(o));return this.getDocumentsMatchingCollectionQuery(t,u,n,i).next(f=>{f.forEach((g,v)=>{s=s.insert(g,v)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,o,i))).next(s=>{o.forEach((c,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,ii.newInvalidDocument(f)))});let a=lg();return s.forEach((c,u)=>{let f=o.get(c);f!==void 0&&fg(f.mutation,u,Xo.empty(),br.now()),Ug(e,u)&&(a=a.insert(c,u))}),a})}};var HT=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return Me.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(e)),Me.resolve()}getNamedQuery(t,e){return Me.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(i){return{name:i.name,query:ZO(i.bundledQuery),readTime:Ur(i.readTime)}}(e)),Me.resolve()}};var zT=class{constructor(){this.overlays=new sr(mt.comparator),this.Ir=new Map}getOverlay(t,e){return Me.resolve(this.overlays.get(e))}getOverlays(t,e){let n=ga();return Me.forEach(e,i=>this.getOverlay(t,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((i,o)=>{this.ht(t,e,o)}),Me.resolve()}removeOverlaysForBatchId(t,e,n){let i=this.Ir.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(n)),Me.resolve()}getOverlaysForCollection(t,e,n){let i=ga(),o=e.length+1,s=new mt(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>n&&i.set(c.getKey(),c)}return Me.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let o=new sr((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>n){let f=o.get(u.largestBatchId);f===null&&(f=ga(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let a=ga(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Me.resolve(a)}ht(t,e,n){let i=this.overlays.get(n.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new xg(e,n));let o=this.Ir.get(e);o===void 0&&(o=on(),this.Ir.set(e,o)),this.Ir.set(e,o.add(n.key))}};var $T=class{constructor(){this.sessionToken=Hr.EMPTY_BYTE_STRING}getSessionToken(t){return Me.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Me.resolve()}};var Mg=class{constructor(){this.Tr=new Kn(ti.Er),this.dr=new Kn(ti.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){let n=new ti(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Vr(new ti(t,e))}mr(t,e){t.forEach(n=>this.removeReference(n,e))}gr(t){let e=new mt(new bn([])),n=new ti(e,t),i=new ti(e,t+1),o=[];return this.dr.forEachInRange([n,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let e=new mt(new bn([])),n=new ti(e,t),i=new ti(e,t+1),o=on();return this.dr.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new ti(t,0),n=this.Tr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}},ti=class{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return mt.comparator(t.key,e.key)||Zt(t.wr,e.wr)}static Ar(t,e){return Zt(t.wr,e.wr)||mt.comparator(t.key,e.key)}};var WT=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Kn(ti.Er)}checkEmpty(t){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cg(o,e,n,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ti(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Me.resolve(s)}lookupMutationBatch(t,e){return Me.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){let n=e+1,i=this.vr(n),o=i<0?0:i;return Me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let n=new ti(e,0),i=new ti(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,i],s=>{let a=this.Dr(s.wr);o.push(a)}),Me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Kn(Zt);return e.forEach(i=>{let o=new ti(i,0),s=new ti(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{n=n.add(a.wr)})}),Me.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,i=n.length+1,o=n;mt.isDocumentKey(o)||(o=o.child(""));let s=new ti(new mt(o),0),a=new Kn(Zt);return this.br.forEachWhile(c=>{let u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},s),Me.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(n=>{let i=this.Dr(n);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Rt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Me.forEach(e.mutations,i=>{let o=new ti(i.key,e.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,e){let n=new ti(e,0),i=this.br.firstAfterOrEqual(n);return Me.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Me.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var qT=class{constructor(t){this.Mr=t,this.docs=function(){return new sr(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let n=e.key,i=this.docs.get(n),o=i?i.size:0,s=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let n=this.docs.get(e);return Me.resolve(n?n.document.mutableCopy():ii.newInvalidDocument(e))}getEntries(t,e){let n=No();return e.forEach(i=>{let o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():ii.newInvalidDocument(i))}),Me.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let o=No(),s=e.path,a=new mt(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||zO(HV(f),n)<=0||(i.has(f.key)||Ug(e,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Me.resolve(o)}getAllFromCollectionGroup(t,e,n,i){Et()}Or(t,e){return Me.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new GT(this)}getSize(t){return Me.resolve(this.size)}},GT=class extends H0{constructor(t){super(),this.cr=t}applyChanges(t){let e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.cr.addEntry(t,i)):this.cr.removeEntry(n)}),Me.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}};var KT=class{constructor(t){this.persistence=t,this.Nr=new ba(e=>_u(e),Vg),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mg,this.targetCount=0,this.kr=Df.Bn()}forEachTarget(t,e){return this.Nr.forEach((n,i)=>e(i)),Me.resolve()}getLastRemoteSnapshotVersion(t){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Me.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),Me.resolve()}Kn(t){this.Nr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.kr=new Df(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,Me.resolve()}updateTargetData(t,e){return this.Kn(e),Me.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,Me.resolve()}removeTargets(t,e,n){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=e&&n.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Me.waitFor(o).next(()=>i)}getTargetCount(t){return Me.resolve(this.targetCount)}getTargetData(t,e){let n=this.Nr.get(e)||null;return Me.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),Me.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);let i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),Me.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),Me.resolve()}getMatchingKeysForTargetId(t,e){let n=this.Br.yr(e);return Me.resolve(n)}containsKey(t,e){return Me.resolve(this.Br.containsKey(e))}};var $0=class{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Zo(0),this.Kr=!1,this.Kr=!0,this.$r=new $T,this.referenceDelegate=t(this),this.Ur=new KT(this),this.indexManager=new DT,this.remoteDocumentCache=function(i){return new qT(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new N0(e),this.Gr=new HT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new zT,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new WT(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){Ke("MemoryPersistence","Starting transaction:",t);let i=new QT(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(t,e){return Me.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,e)))}},QT=class extends x0{constructor(t){super(),this.currentSequenceNumber=t}},W0=class r{constructor(t){this.persistence=t,this.Jr=new Mg,this.Yr=null}static Zr(t){return new r(t)}get Xr(){if(this.Yr)return this.Yr;throw Et()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),Me.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),Me.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),Me.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(i=>this.Xr.add(i.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>n.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Xr,n=>{let i=mt.fromPath(n);return this.ei(t,i).next(o=>{o||e.removeEntry(i,Bt.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(n=>{n?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return Me.or([()=>Me.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}};var YT=class{constructor(t){this.serializer=t}O(t,e,n,i){let o=new E0("createOrUpgrade",e);n<1&&i>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VL,{unique:!0}),c.createObjectStore("documentMutations")}(t),EV(t),function(c){c.createObjectStore("remoteDocuments")}(t));let s=Me.resolve();return n<3&&i>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),EV(t)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(o))),n<4&&i>=4&&(n!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VL,{unique:!0});let g=u.store("mutations"),v=f.map(_=>g.put(_));return Me.waitFor(v)})}(t,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),n<5&&i>=5&&(s=s.next(()=>this.ni(o))),n<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ri(o)))),n<7&&i>=7&&(s=s.next(()=>this.ii(o))),n<8&&i>=8&&(s=s.next(()=>this.si(t,o))),n<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),n<10&&i>=10&&(s=s.next(()=>this.oi(o))),n<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:Yne});u.createIndex("collectionPathOverlayIndex",Jne,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Zne,{unique:!1})})(t)})),n<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:Vne});u.createIndex("documentKeyIndex",Bne),u.createIndex("collectionGroupIndex",Une)}(t)).next(()=>this._i(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(s=s.next(()=>this.ai(t,o))),n<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:qne}).createIndex("sequenceNumberIndex",Gne,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Kne}).createIndex("documentKeyIndex",Qne,{unique:!1})}(t))),n<16&&i>=16&&(s=s.next(()=>{e.objectStore("indexState").clear()}).next(()=>{e.objectStore("indexEntries").clear()})),n<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(t)})),s}ri(t){let e=0;return t.store("remoteDocuments").J((n,i)=>{e+=B0(i)}).next(()=>{let n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(t){let e=t.store("mutationQueues"),n=t.store("mutations");return e.U().next(i=>Me.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next(a=>Me.forEach(a,c=>{Rt(c.userId===o.userId);let u=du(this.serializer,c);return V2(t,o.userId,u).next(()=>{})}))}))}ii(t){let e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return n.J((s,a)=>{let c=new bn(s),u=function(g){return[0,yo(g)]}(c);o.push(e.get(u).next(f=>f?Me.resolve():(g=>e.put({targetId:0,path:yo(g),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Me.waitFor(o))})}si(t,e){t.createObjectStore("collectionParents",{keyPath:Wne});let n=e.store("collectionParents"),i=new Og,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return n.put({collectionId:a,parent:yo(c)})}};return e.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new bn(s);return o(c.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([s,a,c],u)=>{let f=pa(a);return o(f.popLast())}))}oi(t){let e=t.store("targets");return e.J((n,i)=>{let o=cg(i),s=j2(this.serializer,o);return e.put(s)})}_i(t,e){let n=e.store("remoteDocuments"),i=[];return n.J((o,s)=>{let a=e.store("remoteDocumentsV14"),c=function(g){return g.document?new mt(bn.fromString(g.document.name).popFirst(5)):g.noDocument?mt.fromSegments(g.noDocument.path):g.unknownDocument?mt.fromSegments(g.unknownDocument.path):Et()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>Me.waitFor(i))}ai(t,e){let n=e.store("mutations"),i=H2(this.serializer),o=new $0(W0.Zr,this.serializer.ct);return n.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let f=(u=a.get(c.userId))!==null&&u!==void 0?u:on();du(this.serializer,c).keys().forEach(g=>f=f.add(g)),a.set(c.userId,f)}),Me.forEach(a,(c,u)=>{let f=new ni(u),g=F0.lt(this.serializer,f),v=o.getIndexManager(f),_=U0.lt(f,this.serializer,v,o.referenceDelegate);return new z0(i,_,g,v).recalculateAndSaveOverlaysForDocumentKeys(new vg(e,Zo.oe),c).next()})})}};function EV(r){r.createObjectStore("targetDocuments",{keyPath:zne}).createIndex("documentTargetsIndex",$ne,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hne,{unique:!0}),r.createObjectStore("targetGlobal")}var VA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JT=class r{constructor(t,e,n,i,o,s,a,c,u,f,g=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=f,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!r.D())throw new We(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LT(this,i),this.Ai=e+"main",this.serializer=new N0(c),this.Ri=new Xl(this.Ai,this.hi,new YT(this.serializer)),this.$r=new ST,this.Ur=new RT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=H2(this.serializer),this.Gr=new ET,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(Ie.FAILED_PRECONDITION,VA);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Zo(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=e=>ke(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(e=>ke(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(()=>ke(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>f0(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(e=>this.isPrimary&&!e?this.bi(t).next(()=>!1):!!e&&this.Di(t).next(()=>!0))).catch(t=>{if(cc(t))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return ag(t).get("owner").next(e=>Me.resolve(this.vi(e)))}Ci(t){return f0(t).delete(this.clientId)}Fi(){return ke(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let n=mi(e,"clientMetadata");return n.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return Me.forEach(s,a=>n.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let e of t)this.Vi.removeItem(this.Oi(e.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Me.resolve(!0):ag(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)){if(this.vi(e)&&this.networkEnabled)return!0;if(!this.vi(e)){if(!e.allowTabSynchronization)throw new We(Ie.FAILED_PRECONDITION,VA);return!1}}return!(!this.networkEnabled||!this.inForeground)||f0(t).U().next(n=>this.xi(n,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&Ke("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){return ke(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let e=new vg(t,Zo.oe);return this.bi(e).next(()=>this.Ci(e))}),this.Ri.close(),this.qi()})}xi(t,e){return t.filter(n=>this.Mi(n.updateTimeMs,e)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>f0(t).U().next(e=>this.xi(e,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,e){return U0.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new kT(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return F0.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,e,n){Ke("IndexedDbPersistence","Starting transaction:",t);let i=e==="readonly"?"readonly":"readwrite",o=function(c){return c===17?tre:c===16?ere:c===15?WO:c===14?QV:c===13?KV:c===12?Xne:c===11?GV:void Et()}(this.hi),s;return this.Ri.runTransaction(t,i,o,a=>(s=new vg(a,this.Qr?this.Qr.next():Zo.oe),e==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw Vr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new We(Ie.FAILED_PRECONDITION,zV);return n(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>n(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(t){return ag(t).get("owner").next(e=>{if(e!==null&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new We(Ie.FAILED_PRECONDITION,VA)})}Di(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ag(t).put("owner",e)}static D(){return Xl.D()}bi(t){let e=ag(t);return e.get("owner").next(n=>this.vi(n)?(Ke("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Me.resolve())}Mi(t,e){let n=Date.now();return!(t<n-e)&&(!(t>n)||(Vr(`Detected an update time that is in the future: ${t} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let e=/(?:Version|Mobile)\/1[456]/;_b()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var e;try{let n=((e=this.Vi)===null||e===void 0?void 0:e.getItem(this.Oi(t)))!==null;return Ke("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Vr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Vr("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function ag(r){return mi(r,"owner")}function f0(r){return mi(r,"clientMetadata")}function eM(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}var ZT=class r{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=i}static Wi(t,e){let n=on(),i=on();for(let o of e.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new r(t,e.fromCache,n,i)}};var XT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var q0=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _b()?8:$V(Ch())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,i){let o={result:null};return this.Yi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,e,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new XT;return this.Xi(t,e,s).next(a=>{if(o.result=a,this.zi)return this.es(t,e,s,a.size)})}).next(()=>o.result)}es(t,e,n,i){return n.documentReadCount<this.ji?(gf()<=Js.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",mf(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Me.resolve()):(gf()<=Js.DEBUG&&Ke("QueryEngine","Query:",mf(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(gf()<=Js.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",mf(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_o(e))):Me.resolve())}Yi(t,e){if(JL(e))return Me.resolve(null);let n=_o(e);return this.indexManager.getIndexType(t,n).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=I0(e,null,"F"),n=_o(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(o=>{let s=on(...o);return this.Ji.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,n).next(c=>{let u=this.ts(e,a);return this.ns(e,u,s,c.readTime)?this.Yi(t,I0(e,null,"F")):this.rs(t,u,e,c)}))})))}Zi(t,e,n,i){return JL(e)||i.isEqual(Bt.min())?Me.resolve(null):this.Ji.getDocuments(t,n).next(o=>{let s=this.ts(e,o);return this.ns(e,s,n,i)?Me.resolve(null):(gf()<=Js.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mf(e)),this.rs(t,s,e,UV(i,-1)).next(a=>a))})}ts(t,e){let n=new Kn(c2(t));return e.forEach((i,o)=>{Ug(t,o)&&(n=n.add(o))}),n}ns(t,e,n,i){if(t.limit===null)return!1;if(n.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(t,e,n){return gf()<=Js.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",mf(e)),this.Ji.getDocumentsMatchingQuery(t,e,ms.min(),n)}rs(t,e,n,i){return this.Ji.getDocumentsMatchingQuery(t,n,i).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var eO=class{constructor(t,e,n,i){this.persistence=t,this.ss=e,this.serializer=i,this.os=new sr(Zt),this._s=new ba(o=>_u(o),Vg),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new z0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}};function z2(r,t,e,n){return new eO(r,t,e,n)}function $2(r,t){return ke(this,null,function*(){let e=gt(r);return yield e.persistence.runTransaction("Handle user change","readonly",n=>{let i;return e.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,e.ls(t),e.mutationQueue.getAllMutationBatches(n))).next(o=>{let s=[],a=[],c=on();for(let u of i){s.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}for(let u of o){a.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}return e.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Rre(r,t){let e=gt(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let i=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){let g=u.batch,v=g.keys(),_=Me.resolve();return v.forEach(b=>{_=_.next(()=>f.getEntry(c,b)).next(C=>{let S=u.docVersions.get(b);Rt(S!==null),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),f.addEntry(C)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(e,n,t,o).next(()=>o.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let c=on();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(t))).next(()=>e.localDocuments.getDocuments(n,i))})}function W2(r){let t=gt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Nre(r,t){let e=gt(r),n=t.snapshotVersion,i=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.cs.newChangeBuffer({trackRemovals:!0});i=e.os;let a=[];t.targetChanges.forEach((f,g)=>{let v=i.get(g);if(!v)return;a.push(e.Ur.removeMatchingKeys(o,f.removedDocuments,g).next(()=>e.Ur.addMatchingKeys(o,f.addedDocuments,g)));let _=v.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(Hr.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,n)),i=i.insert(g,_),function(C,S,j){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(v,_,f)&&a.push(e.Ur.updateTargetData(o,_))});let c=No(),u=on();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(q2(o,s,t.documentUpdates).next(f=>{c=f.Ps,u=f.Is})),!n.isEqual(Bt.min())){let f=e.Ur.getLastRemoteSnapshotVersion(o).next(g=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(f)}return Me.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(e.os=i,o))}function q2(r,t,e){let n=on(),i=on();return e.forEach(o=>n=n.add(o)),t.getEntries(r,n).next(o=>{let s=No();return e.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Bt.min())?(t.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),s=s.insert(a,c)):Ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function jre(r,t){let e=gt(r);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function kf(r,t){let e=gt(r);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return e.Ur.getTargetData(n,t).next(o=>o?(i=o,Me.resolve(i)):e.Ur.allocateTargetId(n).next(s=>(i=new If(t,s,"TargetPurposeListen",n.currentSequenceNumber),e.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{let i=e.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.os=e.os.insert(n.targetId,n),e._s.set(t,n.targetId)),n})}function Rf(r,t,e){return ke(this,null,function*(){let n=gt(r),i=n.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!cc(s))throw s;Ke("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}n.os=n.os.remove(t),n._s.delete(i.target)})}function G0(r,t,e){let n=gt(r),i=Bt.min(),o=on();return n.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,f){let g=gt(c),v=g._s.get(f);return v!==void 0?Me.resolve(g.os.get(v)):g.Ur.getTargetData(u,f)}(n,s,_o(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>n.ss.getDocumentsMatchingQuery(s,t,e?i:Bt.min(),e?o:on())).next(a=>(Q2(n,l2(t),a),{documents:a,Ts:o})))}function G2(r,t){let e=gt(r),n=gt(e.Ur),i=e.os.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>n.ot(o,t).next(s=>s?s.target:null))}function K2(r,t){let e=gt(r),n=e.us.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.cs.getAllFromCollectionGroup(i,t,UV(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Q2(e,t,i),i))}function Q2(r,t,e){let n=r.us.get(t)||Bt.min();e.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),r.us.set(t,n)}function Fre(r,t,e,n){return ke(this,null,function*(){let i=gt(r),o=on(),s=No();for(let u of e){let f=t.Es(u.metadata.name);u.document&&(o=o.add(f));let g=t.ds(u);g.setReadTime(t.As(u.metadata.readTime)),s=s.insert(f,g)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield kf(i,function(f){return _o(Hf(bn.fromString(`__bundle__/docs/${f}`)))}(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>q2(u,a,s).next(f=>(a.apply(u),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.Ps,f.Is)).next(()=>f.Ps)))})}function Lre(n,i){return ke(this,arguments,function*(r,t,e=on()){let o=yield kf(r,_o(ZO(t.bundledQuery))),s=gt(r);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ur(t.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,t);let u=o.withResumeToken(Hr.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(u.targetId,u),s.Ur.updateTargetData(a,u).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,e,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,t))})})}function SV(r,t){return`firestore_clients_${r}_${t}`}function AV(r,t,e){let n=`firestore_mutations_${r}_${e}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function BA(r,t){return`firestore_targets_${r}_${t}`}var K0=class r{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static Rs(t,e,n){let i=JSON.parse(n),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new We(i.error.code,i.error.message))),s?new r(t,e,i.state,o):(Vr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},hg=class r{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Rs(t,e){let n=JSON.parse(e),i,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(i=new We(n.error.code,n.error.message))),o?new r(t,n.state,i):(Vr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Q0=class r{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Rs(t,e){let n=JSON.parse(e),i=typeof n=="object"&&n.activeTargetIds instanceof Array,o=QO();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=WV(n.activeTargetIds[s]),o=o.add(n.activeTargetIds[s]);return i?new r(t,o):(Vr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}},tO=class r{constructor(t,e){this.clientId=t,this.onlineState=e}static Rs(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new r(e.clientId,e.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${t}`),null)}},Pg=class{constructor(){this.activeTargetIds=QO()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},pg=class{constructor(t,e,n,i,o){this.window=t,this.ui=e,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new sr(Zt),this.started=!1,this.bs=[];let s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=SV(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Pg),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){return ke(this,null,function*(){let t=yield this.syncEngine.Qi();for(let n of t){if(n===this.ps)continue;let i=this.getItem(SV(this.persistenceKey,n));if(i){let o=Q0.Rs(n,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let e=this.storage.getItem(this.xs);if(e){let n=this.Ls(e);n&&this.Bs(n)}for(let n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let e=!1;return this.Ss.forEach((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,e,n){this.qs(t,e,n),this.Qs(t)}addLocalQueryTarget(t,e=!0){let n="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(BA(this.persistenceKey,t));if(i){let o=hg.Rs(t,i);o&&(n=o.state)}}return e&&this.Ks.fs(t),this.Ns(),n}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(BA(this.persistenceKey,t))}updateQueryState(t,e,n){this.$s(t,e,n)}handleUserChange(t,e,n){e.forEach(i=>{this.Qs(i)}),this.currentUser=t,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return Ke("SharedClientState","READ",t,e),e}setItem(t,e){Ke("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ke("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){let e=t;if(e.storageArea===this.storage){if(Ke("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Ds)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>ke(this,null,function*(){if(this.started){if(e.key!==null){if(this.Cs.test(e.key)){if(e.newValue==null){let n=this.Gs(e.key);return this.zs(n,null)}{let n=this.js(e.key,e.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(e.key)){if(e.newValue!==null){let n=this.Hs(e.key,e.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(e.key)){if(e.newValue!==null){let n=this.Ys(e.key,e.newValue);if(n)return this.Zs(n)}}else if(e.key===this.xs){if(e.newValue!==null){let n=this.Ls(e.newValue);if(n)return this.Bs(n)}}else if(e.key===this.vs){let n=function(o){let s=Zo.oe;if(o!=null)try{let a=JSON.parse(o);Rt(typeof a=="number"),s=a}catch(a){Vr("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(e.newValue);n!==Zo.oe&&this.sequenceNumberHandler(n)}else if(e.key===this.Os){let n=this.Xs(e.newValue);yield Promise.all(n.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(e)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,e,n){let i=new K0(this.currentUser,t,e,n),o=AV(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Vs())}Qs(t){let e=AV(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Us(t){let e={clientId:this.ps,onlineState:t};this.storage.setItem(this.xs,JSON.stringify(e))}$s(t,e,n){let i=BA(this.persistenceKey,t),o=new hg(t,e,n);this.setItem(i,o.Vs())}Ws(t){let e=JSON.stringify(Array.from(t));this.setItem(this.Os,e)}Gs(t){let e=this.Cs.exec(t);return e?e[1]:null}js(t,e){let n=this.Gs(t);return Q0.Rs(n,e)}Hs(t,e){let n=this.Fs.exec(t),i=Number(n[1]),o=n[2]!==void 0?n[2]:null;return K0.Rs(new ni(o),i,e)}Ys(t,e){let n=this.Ms.exec(t),i=Number(n[1]);return hg.Rs(i,e)}Ls(t){return tO.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){return ke(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.no(t.batchId,t.state,t.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,e){let n=e?this.Ss.insert(t,e):this.Ss.remove(t),i=this.ks(this.Ss),o=this.ks(n),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=n})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let e=QO();return t.forEach((n,i)=>{e=e.unionWith(i.activeTargetIds)}),e}},Y0=class{constructor(){this.so=new Pg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Pg,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var nO=class{_o(t){}shutdown(){}};var J0=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var h0=null;function UA(){return h0===null?h0=function(){return 268435456+Math.round(2147483648*Math.random())}():h0++,"0x"+h0.toString(16)}var Vre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var rO=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var Gi="WebChannelConnection",iO=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+e.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(e,n,i,o,s){let a=UA(),c=this.xo(e,n.toUriEncodedString());Ke("RestConnection",`Sending RPC '${e}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(e,c,u,i).then(f=>(Ke("RestConnection",`Received RPC '${e}' ${a}: `,f),f),f=>{throw gs("RestConnection",`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}Lo(e,n,i,o,s,a){return this.Mo(e,n,i,o,s)}Oo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>e[s]=o),i&&i.headers.forEach((o,s)=>e[s]=o)}xo(e,n){let i=Vre[e];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,i){let o=UA();return new Promise((s,a)=>{let c=new DA;c.setWithCredentials(!0),c.listenOnce(RA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case rg.NO_ERROR:let f=c.getResponseJson();Ke(Gi,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(f)),s(f);break;case rg.TIMEOUT:Ke(Gi,`RPC '${t}' ${o} timed out`),a(new We(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case rg.HTTP_ERROR:let g=c.getStatus();if(Ke(Gi,`RPC '${t}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);let _=v?.error;if(_&&_.status&&_.message){let b=function(S){let j=S.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(j)>=0?j:Ie.UNKNOWN}(_.status);a(new We(b,_.message))}else a(new We(Ie.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new We(Ie.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{Ke(Gi,`RPC '${t}' ${o} completed.`)}});let u=JSON.stringify(i);Ke(Gi,`RPC '${t}' ${o} sending request:`,i),c.send(e,"POST",u,n,15)})}Bo(t,e,n){let i=UA(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=FA(),a=jA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new kA({})),this.Oo(c.initMessageHeaders,e,n),c.encodeInitMessageHeaders=!0;let f=o.join("");Ke(Gi,`Creating RPC '${t}' stream ${i}: ${f}`,c);let g=s.createWebChannel(f,c),v=!1,_=!1,b=new rO({Io:S=>{_?Ke(Gi,`Not sending because RPC '${t}' stream ${i} is closed:`,S):(v||(Ke(Gi,`Opening RPC '${t}' stream ${i} transport.`),g.open(),v=!0),Ke(Gi,`RPC '${t}' stream ${i} sending:`,S),g.send(S))},To:()=>g.close()}),C=(S,j,q)=>{S.listen(j,N=>{try{q(N)}catch(G){setTimeout(()=>{throw G},0)}})};return C(g,uf.EventType.OPEN,()=>{_||(Ke(Gi,`RPC '${t}' stream ${i} transport opened.`),b.yo())}),C(g,uf.EventType.CLOSE,()=>{_||(_=!0,Ke(Gi,`RPC '${t}' stream ${i} transport closed`),b.So())}),C(g,uf.EventType.ERROR,S=>{_||(_=!0,gs(Gi,`RPC '${t}' stream ${i} transport errored:`,S),b.So(new We(Ie.UNAVAILABLE,"The operation could not be completed")))}),C(g,uf.EventType.MESSAGE,S=>{var j;if(!_){let q=S.data[0];Rt(!!q);let N=q,G=N.error||((j=N[0])===null||j===void 0?void 0:j.error);if(G){Ke(Gi,`RPC '${t}' stream ${i} received error:`,G);let se=G.status,ue=function(k){let $=ei[k];if($!==void 0)return C2($)}(se),Y=G.message;ue===void 0&&(ue=Ie.INTERNAL,Y="Unknown error status: "+se+" with message "+G.message),_=!0,b.So(new We(ue,Y)),g.close()}else Ke(Gi,`RPC '${t}' stream ${i} received:`,q),b.bo(q)}}),C(a,NA.STAT_EVENT,S=>{S.stat===c0.PROXY?Ke(Gi,`RPC '${t}' stream ${i} detected buffering proxy`):S.stat===c0.NOPROXY&&Ke(Gi,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Y2(){return typeof window<"u"?window:null}function y0(){return typeof document<"u"?document:null}function Hg(r){return new _T(r,!0)}var Ig=class{constructor(t,e,n=1e3,i=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=n,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,e-n);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Z0=class{constructor(t,e,n,i,o,s,a,c){this.ui=t,this.Ho=n,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ig(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return ke(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return ke(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,e){return ke(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===Ie.RESOURCE_EXHAUSTED?(Vr(e.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(e)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===e&&this.P_(n,i)},n=>{t(()=>{let i=new We(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(t,e){let n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>ke(this,null,function*(){this.state=0,this.start()}))}I_(t){return Ke("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},oO=class extends Z0{constructor(t,e,n,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let e=xre(this.serializer,t),n=function(o){if(!("targetChange"in o))return Bt.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?Ur(s.readTime):Bt.min()}(t);return this.listener.d_(e,n)}A_(t){let e={};e.database=CT(this.serializer),e.addTarget=function(o,s){let a,c=s.target;if(a=M0(c)?{documents:P2(o,c)}:{query:I2(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=E2(o,s.resumeToken);let u=wT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Bt.min())>0){a.readTime=Pf(o,s.snapshotVersion.toTimestamp());let u=wT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let n=Sre(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){let e={};e.database=CT(this.serializer),e.removeTarget=t,this.a_(e)}},sO=class extends Z0{constructor(t,e,n,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,Rt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Rt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let e=Ere(t.writeResults,t.commitTime),n=Ur(t.commitTime);return this.listener.g_(n,e)}p_(){let t={};t.database=CT(this.serializer),this.a_(t)}m_(t){let e={streamToken:this.lastStreamToken,writes:t.map(n=>Tg(this.serializer,n))};this.a_(e)}};var aO=class extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new We(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,bT(e,n),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new We(Ie.UNKNOWN,o.toString())})}Lo(t,e,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(t,bT(e,n),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(Ie.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},lO=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(e),this.D_=!1):Ke("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var cO=class{constructor(t,e,n,i,o){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{n.enqueueAndForget(()=>ke(this,null,function*(){uc(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield function(c){return ke(this,null,function*(){let u=gt(c);u.L_.add(4),yield zf(u),u.q_.set("Unknown"),u.L_.delete(4),yield zg(u)})}(this))}))}),this.q_=new lO(n,i)}};function zg(r){return ke(this,null,function*(){if(uc(r))for(let t of r.B_)yield t(!0)})}function zf(r){return ke(this,null,function*(){for(let t of r.B_)yield t(!1)})}function yw(r,t){let e=gt(r);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),rM(e)?nM(e):Wf(e).r_()&&tM(e,t))}function Nf(r,t){let e=gt(r),n=Wf(e);e.N_.delete(t),n.r_()&&J2(e,t),e.N_.size===0&&(n.r_()?n.o_():uc(e)&&e.q_.set("Unknown"))}function tM(r,t){if(r.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bt.min())>0){let e=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Wf(r).A_(t)}function J2(r,t){r.Q_.xe(t),Wf(r).R_(t)}function nM(r){r.Q_=new yT({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>r.N_.get(t)||null,tt:()=>r.datastore.serializer.databaseId}),Wf(r).start(),r.q_.v_()}function rM(r){return uc(r)&&!Wf(r).n_()&&r.N_.size>0}function uc(r){return gt(r).L_.size===0}function Z2(r){r.Q_=void 0}function Bre(r){return ke(this,null,function*(){r.q_.set("Online")})}function Ure(r){return ke(this,null,function*(){r.N_.forEach((t,e)=>{tM(r,t)})})}function Hre(r,t){return ke(this,null,function*(){Z2(r),rM(r)?(r.q_.M_(t),nM(r)):r.q_.set("Unknown")})}function zre(r,t,e){return ke(this,null,function*(){if(r.q_.set("Online"),t instanceof k0&&t.state===2&&t.cause)try{yield function(i,o){return ke(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(r,t)}catch(n){Ke("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield X0(r,n)}else if(t instanceof xf?r.Q_.Ke(t):t instanceof D0?r.Q_.He(t):r.Q_.We(t),!e.isEqual(Bt.min()))try{let n=yield W2(r.localStore);e.compareTo(n)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let f=o.N_.get(u);f&&o.N_.set(u,f.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let f=o.N_.get(c);if(!f)return;o.N_.set(c,f.withResumeToken(Hr.EMPTY_BYTE_STRING,f.snapshotVersion)),J2(o,c);let g=new If(f.target,c,u,f.sequenceNumber);tM(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(r,e))}catch(n){Ke("RemoteStore","Failed to raise snapshot:",n),yield X0(r,n)}})}function X0(r,t,e){return ke(this,null,function*(){if(!cc(t))throw t;r.L_.add(1),yield zf(r),r.q_.set("Offline"),e||(e=()=>W2(r.localStore)),r.asyncQueue.enqueueRetryable(()=>ke(this,null,function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield e(),r.L_.delete(1),yield zg(r)}))})}function X2(r,t){return t().catch(e=>X0(r,e,t))}function $f(r){return ke(this,null,function*(){let t=gt(r),e=ac(t),n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;$re(t);)try{let i=yield jre(t.localStore,n);if(i===null){t.O_.length===0&&e.o_();break}n=i.batchId,Wre(t,i)}catch(i){yield X0(t,i)}eB(t)&&tB(t)})}function $re(r){return uc(r)&&r.O_.length<10}function Wre(r,t){r.O_.push(t);let e=ac(r);e.r_()&&e.V_&&e.m_(t.mutations)}function eB(r){return uc(r)&&!ac(r).n_()&&r.O_.length>0}function tB(r){ac(r).start()}function qre(r){return ke(this,null,function*(){ac(r).p_()})}function Gre(r){return ke(this,null,function*(){let t=ac(r);for(let e of r.O_)t.m_(e.mutations)})}function Kre(r,t,e){return ke(this,null,function*(){let n=r.O_.shift(),i=gT.from(n,t,e);yield X2(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),yield $f(r)})}function Qre(r,t){return ke(this,null,function*(){t&&ac(r).V_&&(yield function(n,i){return ke(this,null,function*(){if(function(s){return b2(s)&&s!==Ie.ABORTED}(i.code)){let o=n.O_.shift();ac(n).s_(),yield X2(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield $f(n)}})}(r,t)),eB(r)&&tB(r)})}function TV(r,t){return ke(this,null,function*(){let e=gt(r);e.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");let n=uc(e);e.L_.add(3),yield zf(e),n&&e.q_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),yield zg(e)})}function uO(r,t){return ke(this,null,function*(){let e=gt(r);t?(e.L_.delete(2),yield zg(e)):t||(e.L_.add(2),yield zf(e),e.q_.set("Unknown"))})}function Wf(r){return r.K_||(r.K_=function(e,n,i){let o=gt(e);return o.w_(),new oO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(r.datastore,r.asyncQueue,{Eo:Bre.bind(null,r),Ro:Ure.bind(null,r),mo:Hre.bind(null,r),d_:zre.bind(null,r)}),r.B_.push(t=>ke(this,null,function*(){t?(r.K_.s_(),rM(r)?nM(r):r.q_.set("Unknown")):(yield r.K_.stop(),Z2(r))}))),r.K_}function ac(r){return r.U_||(r.U_=function(e,n,i){let o=gt(e);return o.w_(),new sO(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qre.bind(null,r),mo:Qre.bind(null,r),f_:Gre.bind(null,r),g_:Kre.bind(null,r)}),r.B_.push(t=>ke(this,null,function*(){t?(r.U_.s_(),yield $f(r)):(yield r.U_.stop(),r.O_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}var dO=class r{constructor(t,e,n,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,o){let s=Date.now()+n,a=new r(t,e,s,i,o);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Ie.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qf(r,t){if(Vr("AsyncQueue",`${t}: ${r}`),cc(r))return new We(Ie.UNAVAILABLE,`${t}: ${r}`);throw r}var ew=class r{constructor(t){this.comparator=t?(e,n)=>t(e,n)||mt.comparator(e.key,n.key):(e,n)=>mt.comparator(e.key,n.key),this.keyedMap=lg(),this.sortedSet=new sr(this.comparator)}static emptySet(t){return new r(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof r)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){let i=e.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let n=new r;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}};var tw=class{constructor(){this.W_=new sr(mt.comparator)}track(t){let e=t.doc.key,n=this.W_.get(e);n?t.type!==0&&n.type===3?this.W_=this.W_.insert(e,t):t.type===3&&n.type!==1?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.W_=this.W_.remove(e):t.type===1&&n.type===2?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):Et():this.W_=this.W_.insert(e,t)}G_(){let t=[];return this.W_.inorderTraversal((e,n)=>{t.push(n)}),t}},jf=class r{constructor(t,e,n,i,o,s,a,c,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,e,n,i,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new r(t,e,ew.emptySet(e),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}};var fO=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},hO=class{constructor(){this.queries=OV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,n){let i=gt(e),o=i.queries;i.queries=OV(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(n)})})(this,new We(Ie.ABORTED,"Firestore shutting down"))}};function OV(){return new ba(r=>a2(r),Bg)}function iM(r,t){return ke(this,null,function*(){let e=gt(r),n=3,i=t.query,o=e.queries.get(i);o?!o.H_()&&t.J_()&&(n=2):(o=new fO,n=t.J_()?0:1);try{switch(n){case 0:o.z_=yield e.onListen(i,!0);break;case 1:o.z_=yield e.onListen(i,!1);break;case 2:yield e.onFirstRemoteStoreListen(i)}}catch(s){let a=qf(s,`Initialization of query '${mf(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&sM(e)})}function oM(r,t){return ke(this,null,function*(){let e=gt(r),n=t.query,i=3,o=e.queries.get(n);if(o){let s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}})}function Yre(r,t){let e=gt(r),n=!1;for(let i of t){let o=i.query,s=e.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(n=!0);s.z_=i}}n&&sM(e)}function Jre(r,t,e){let n=gt(r),i=n.queries.get(t);if(i)for(let o of i.j_)o.onError(e);n.queries.delete(t)}function sM(r){r.Y_.forEach(t=>{t.next()})}var pO,MV;(MV=pO||(pO={})).ea="default",MV.Cache="cache";var Dg=class{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){let n=[];for(let i of t.docChanges)i.type!==3&&n.push(i);t=new jf(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;let n=e!=="Offline";return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=jf.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==pO.Cache}};var gO=class{constructor(t,e){this.aa=t,this.byteLength=e}ua(){return"metadata"in this.aa}};var nw=class{constructor(t){this.serializer=t}Es(t){return va(this.serializer,t)}ds(t){return t.metadata.exists?M2(this.serializer,t.document,!1):ii.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Ur(t)}},mO=class{constructor(t,e,n){this.ca=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nB(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++e;let n=bn.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ha(t){let e=new Map,n=new nw(this.serializer);for(let i of t)if(i.metadata.queries){let o=n.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(e.get(s)||on()).add(o);e.set(s,a)}}return e}complete(){return ke(this,null,function*(){let t=yield Fre(this.localStore,new nw(this.serializer),this.documents,this.ca.id),e=this.ha(this.documents);for(let n of this.queries)yield Lre(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}})}};function nB(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}var rw=class{constructor(t){this.key=t}},iw=class{constructor(t){this.key=t}},ow=class{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=on(),this.mutatedKeys=on(),this.Aa=c2(t),this.Ra=new ew(this.Aa)}get Va(){return this.Ta}ma(t,e){let n=e?e.fa:new tw,i=e?e.Ra:this.Ra,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((f,g)=>{let v=i.get(f),_=Ug(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;v&&_?v.data.isEqual(_.data)?b!==C&&(n.track({type:3,doc:_}),S=!0):this.ga(v,_)||(n.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!v&&_?(n.track({type:0,doc:_}),S=!0):v&&!_&&(n.track({type:1,doc:v}),S=!0,(c||u)&&(a=!0)),S&&(_?(s=s.add(_),o=C?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),n.track({type:1,doc:f})}return{Ra:s,fa:n,ns:a,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){let o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let s=t.fa.G_();s.sort((f,g)=>function(_,b){let C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return C(_)-C(b)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(n),i=i!=null&&i;let a=e&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new jf(this.query,t.Ra,o,s,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=on(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});let e=[];return t.forEach(n=>{this.da.has(n)||e.push(new iw(n))}),this.da.forEach(n=>{t.has(n)||e.push(new rw(n))}),e}ba(t){this.Ta=t.Ts,this.da=on();let e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return jf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},vO=class{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}},yO=class{constructor(t){this.key=t,this.va=!1}},_O=class{constructor(t,e,n,i,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ba(a=>a2(a),Bg),this.Ma=new Map,this.xa=new Set,this.Oa=new sr(mt.comparator),this.Na=new Map,this.La=new Mg,this.Ba={},this.ka=new Map,this.qa=Df.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Zre(r,t,e=!0){return ke(this,null,function*(){let n=_w(r),i,o=n.Fa.get(t);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield rB(n,t,e,!0),i})}function Xre(r,t){return ke(this,null,function*(){let e=_w(r);yield rB(e,t,!0,!1)})}function rB(r,t,e,n){return ke(this,null,function*(){let i=yield kf(r.localStore,_o(t)),o=i.targetId,s=r.sharedClientState.addLocalQueryTarget(o,e),a;return n&&(a=yield aM(r,t,o,s==="current",i.resumeToken)),r.isPrimaryClient&&e&&yw(r.remoteStore,i),a})}function aM(r,t,e,n,i){return ke(this,null,function*(){r.Ka=(g,v,_)=>function(C,S,j,q){return ke(this,null,function*(){let N=S.view.ma(j);N.ns&&(N=yield G0(C.localStore,S.query,!1).then(({documents:Y})=>S.view.ma(Y,N)));let G=q&&q.targetChanges.get(S.targetId),se=q&&q.targetMismatches.get(S.targetId)!=null,ue=S.view.applyChanges(N,C.isPrimaryClient,G,se);return wO(C,S.targetId,ue.wa),ue.snapshot})}(r,g,v,_);let o=yield G0(r.localStore,t,!0),s=new ow(t,o.Ts),a=s.ma(o.documents),c=Sg.createSynthesizedTargetChangeForCurrentChange(e,n&&r.onlineState!=="Offline",i),u=s.applyChanges(a,r.isPrimaryClient,c);wO(r,e,u.wa);let f=new vO(t,e,s);return r.Fa.set(t,f),r.Ma.has(e)?r.Ma.get(e).push(t):r.Ma.set(e,[t]),u.snapshot})}function eie(r,t,e){return ke(this,null,function*(){let n=gt(r),i=n.Fa.get(t),o=n.Ma.get(i.targetId);if(o.length>1)return n.Ma.set(i.targetId,o.filter(s=>!Bg(s,t))),void n.Fa.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Rf(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),e&&Nf(n.remoteStore,i.targetId),Ff(n,i.targetId)}).catch(lc))):(Ff(n,i.targetId),yield Rf(n.localStore,i.targetId,!0))})}function tie(r,t){return ke(this,null,function*(){let e=gt(r),n=e.Fa.get(t),i=e.Ma.get(n.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Nf(e.remoteStore,n.targetId))})}function nie(r,t,e){return ke(this,null,function*(){let n=dM(r);try{let i=yield function(s,a){let c=gt(s),u=br.now(),f=a.reduce((_,b)=>_.add(b.key),on()),g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=No(),C=on();return c.cs.getEntries(_,f).next(S=>{b=S,b.forEach((j,q)=>{q.isValidDocument()||(C=C.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,b)).next(S=>{g=S;let j=[];for(let q of a){let N=mre(q,g.get(q.key).overlayedDocument);N!=null&&j.push(new Us(q.key,N,e2(N.value.mapValue),Mr.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,j,a)}).next(S=>{v=S;let j=S.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(_,S.batchId,j)})}).then(()=>({batchId:v.batchId,changes:d2(g)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new sr(Zt)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(n,i.batchId,e),yield al(n,i.changes),yield $f(n.remoteStore)}catch(i){let o=qf(i,"Failed to persist write");e.reject(o)}})}function iB(r,t){return ke(this,null,function*(){let e=gt(r);try{let n=yield Nre(e.localStore,t);t.targetChanges.forEach((i,o)=>{let s=e.Na.get(o);s&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Rt(s.va):i.removedDocuments.size>0&&(Rt(s.va),s.va=!1))}),yield al(e,n,t)}catch(n){yield lc(n)}})}function PV(r,t,e){let n=gt(r);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){let i=[];n.Fa.forEach((o,s)=>{let a=s.view.Z_(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=gt(s);c.onlineState=a;let u=!1;c.queries.forEach((f,g)=>{for(let v of g.j_)v.Z_(a)&&(u=!0)}),u&&sM(c)}(n.eventManager,t),i.length&&n.Ca.d_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function rie(r,t,e){return ke(this,null,function*(){let n=gt(r);n.sharedClientState.updateQueryState(t,"rejected",e);let i=n.Na.get(t),o=i&&i.key;if(o){let s=new sr(mt.comparator);s=s.insert(o,ii.newNoDocument(o,Bt.min()));let a=on().add(o),c=new Eg(Bt.min(),new Map,new sr(Zt),s,a);yield iB(n,c),n.Oa=n.Oa.remove(o),n.Na.delete(t),uM(n)}else yield Rf(n.localStore,t,!1).then(()=>Ff(n,t,e)).catch(lc)})}function iie(r,t){return ke(this,null,function*(){let e=gt(r),n=t.batch.batchId;try{let i=yield Rre(e.localStore,t);cM(e,n,null),lM(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),yield al(e,i)}catch(i){yield lc(i)}})}function oie(r,t,e){return ke(this,null,function*(){let n=gt(r);try{let i=yield function(s,a){let c=gt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(g=>(Rt(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(u,g))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(n.localStore,t);cM(n,t,e),lM(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),yield al(n,i)}catch(i){yield lc(i)}})}function sie(r,t){return ke(this,null,function*(){let e=gt(r);uc(e.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let n=yield function(s){let a=gt(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(e.localStore);if(n===-1)return void t.resolve();let i=e.ka.get(n)||[];i.push(t),e.ka.set(n,i)}catch(n){let i=qf(n,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})}function lM(r,t){(r.ka.get(t)||[]).forEach(e=>{e.resolve()}),r.ka.delete(t)}function cM(r,t,e){let n=gt(r),i=n.Ba[n.currentUser.toKey()];if(i){let o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),n.Ba[n.currentUser.toKey()]=i}}function Ff(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(let n of r.Ma.get(t))r.Fa.delete(n),e&&r.Ca.$a(n,e);r.Ma.delete(t),r.isPrimaryClient&&r.La.gr(t).forEach(n=>{r.La.containsKey(n)||oB(r,n)})}function oB(r,t){r.xa.delete(t.path.canonicalString());let e=r.Oa.get(t);e!==null&&(Nf(r.remoteStore,e),r.Oa=r.Oa.remove(t),r.Na.delete(e),uM(r))}function wO(r,t,e){for(let n of e)n instanceof rw?(r.La.addReference(n.key,t),aie(r,n)):n instanceof iw?(Ke("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,t),r.La.containsKey(n.key)||oB(r,n.key)):Et()}function aie(r,t){let e=t.key,n=e.path.canonicalString();r.Oa.get(e)||r.xa.has(n)||(Ke("SyncEngine","New document in limbo: "+e),r.xa.add(n),uM(r))}function uM(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){let t=r.xa.values().next().value;r.xa.delete(t);let e=new mt(bn.fromString(t)),n=r.qa.next();r.Na.set(n,new yO(e)),r.Oa=r.Oa.insert(e,n),yw(r.remoteStore,new If(_o(Hf(e.path)),n,"TargetPurposeLimboResolution",Zo.oe))}}function al(r,t,e){return ke(this,null,function*(){let n=gt(r),i=[],o=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach((a,c)=>{s.push(n.Ka(c,t,e).then(u=>{var f;if((u||e)&&n.isPrimaryClient){let g=u?!u.fromCache:(f=e?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(u){i.push(u);let g=ZT.Wi(c.targetId,u);o.push(g)}}))}),yield Promise.all(s),n.Ca.d_(i),yield function(c,u){return ke(this,null,function*(){let f=gt(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Me.forEach(u,v=>Me.forEach(v.$i,_=>f.persistence.referenceDelegate.addReference(g,v.targetId,_)).next(()=>Me.forEach(v.Ui,_=>f.persistence.referenceDelegate.removeReference(g,v.targetId,_)))))}catch(g){if(!cc(g))throw g;Ke("LocalStore","Failed to update sequence numbers: "+g)}for(let g of u){let v=g.targetId;if(!g.fromCache){let _=f.os.get(v),b=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(v,C)}}})}(n.localStore,o))})}function lie(r,t){return ke(this,null,function*(){let e=gt(r);if(!e.currentUser.isEqual(t)){Ke("SyncEngine","User change. New user:",t.toKey());let n=yield $2(e.localStore,t);e.currentUser=t,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new We(Ie.CANCELLED,s))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield al(e,n.hs)}})}function cie(r,t){let e=gt(r),n=e.Na.get(t);if(n&&n.va)return on().add(n.key);{let i=on(),o=e.Ma.get(t);if(!o)return i;for(let s of o){let a=e.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function uie(r,t){return ke(this,null,function*(){let e=gt(r),n=yield G0(e.localStore,t.query,!0),i=t.view.ba(n);return e.isPrimaryClient&&wO(e,t.targetId,i.wa),i})}function die(r,t){return ke(this,null,function*(){let e=gt(r);return K2(e.localStore,t).then(n=>al(e,n))})}function fie(r,t,e,n){return ke(this,null,function*(){let i=gt(r),o=yield function(a,c){let u=gt(a),f=gt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Mn(g,c).next(v=>v?u.localDocuments.getDocuments(g,v):Me.resolve(null)))}(i.localStore,t);o!==null?(e==="pending"?yield $f(i.remoteStore):e==="acknowledged"||e==="rejected"?(cM(i,t,n||null),lM(i,t),function(a,c){gt(gt(a).mutationQueue).On(c)}(i.localStore,t)):Et(),yield al(i,o)):Ke("SyncEngine","Cannot apply mutation batch with id: "+t)})}function hie(r,t){return ke(this,null,function*(){let e=gt(r);if(_w(e),dM(e),t===!0&&e.Qa!==!0){let n=e.sharedClientState.getAllActiveQueryTargets(),i=yield IV(e,n.toArray());e.Qa=!0,yield uO(e.remoteStore,!0);for(let o of i)yw(e.remoteStore,o)}else if(t===!1&&e.Qa!==!1){let n=[],i=Promise.resolve();e.Ma.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then(()=>(Ff(e,s),Rf(e.localStore,s,!0))),Nf(e.remoteStore,s)}),yield i,yield IV(e,n),function(s){let a=gt(s);a.Na.forEach((c,u)=>{Nf(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new sr(mt.comparator)}(e),e.Qa=!1,yield uO(e.remoteStore,!1)}})}function IV(r,t,e){return ke(this,null,function*(){let n=gt(r),i=[],o=[];for(let s of t){let a,c=n.Ma.get(s);if(c&&c.length!==0){a=yield kf(n.localStore,_o(c[0]));for(let u of c){let f=n.Fa.get(u),g=yield uie(n,f);g.snapshot&&o.push(g.snapshot)}}else{let u=yield G2(n.localStore,s);a=yield kf(n.localStore,u),yield aM(n,sB(u),s,!1,a.resumeToken)}i.push(a)}return n.Ca.d_(o),i})}function sB(r){return s2(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function pie(r){return function(e){return gt(gt(e).persistence).Qi()}(gt(r).localStore)}function gie(r,t,e,n){return ke(this,null,function*(){let i=gt(r);if(i.Qa)return void Ke("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{let s=yield K2(i.localStore,l2(o[0])),a=Eg.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Hr.EMPTY_BYTE_STRING);yield al(i,s,a);break}case"rejected":yield Rf(i.localStore,t,!0),Ff(i,t,n);break;default:Et()}})}function mie(r,t,e){return ke(this,null,function*(){let n=_w(r);if(n.Qa){for(let i of t){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Ke("SyncEngine","Adding an already active target "+i);continue}let o=yield G2(n.localStore,i),s=yield kf(n.localStore,o);yield aM(n,sB(o),s.targetId,!1,s.resumeToken),yw(n.remoteStore,s)}for(let i of e)n.Ma.has(i)&&(yield Rf(n.localStore,i,!1).then(()=>{Nf(n.remoteStore,i),Ff(n,i)}).catch(lc))}})}function _w(r){let t=gt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=iB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cie.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rie.bind(null,t),t.Ca.d_=Yre.bind(null,t.eventManager),t.Ca.$a=Jre.bind(null,t.eventManager),t}function dM(r){let t=gt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iie.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oie.bind(null,t),t}function vie(r,t,e){let n=gt(r);(function(o,s,a){return ke(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(_,b){let C=gt(_),S=Ur(b.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",j=>C.Gr.getBundleMetadata(j,b.id)).then(j=>!!j&&j.createTime.compareTo(S)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(nB(c));let u=new mO(c,o.localStore,s.serializer),f=yield s.Ua();for(;f;){let v=yield u.la(f);v&&a._updateProgress(v),f=yield s.Ua()}let g=yield u.complete();return yield al(o,g.Ia,void 0),yield function(_,b){let C=gt(_);return C.persistence.runTransaction("Save bundle","readwrite",S=>C.Gr.saveBundleMetadata(S,b))}(o.localStore,c),a._completeWith(g.progress),Promise.resolve(g.Pa)}catch(c){return gs("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(n,t,e).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}var kg=class{constructor(){this.synchronizeTabs=!1}initialize(t){return ke(this,null,function*(){this.serializer=Hg(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return z2(this.persistence,new q0,t.initialUser,this.serializer)}createPersistence(t){return new $0(W0.Zr,this.serializer)}createSharedClientState(t){return new Y0}terminate(){return ke(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var sw=class r extends kg{constructor(t,e,n){super(),this.Wa=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){return ke(this,null,function*(){yield vb(r.prototype,this,"initialize").call(this,t),yield this.Wa.initialize(this,t),yield dM(this.Wa.syncEngine),yield $f(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return z2(this.persistence,new q0,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let n=this.persistence.referenceDelegate.garbageCollector;return new jT(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let n=new XA(e,this.persistence);return new ZA(t.asyncQueue,n)}createPersistence(t){let e=eM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new JT(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Y2(),y0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Y0}},bO=class r extends sw{constructor(t,e){super(t,e,!1),this.Wa=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return ke(this,null,function*(){yield vb(r.prototype,this,"initialize").call(this,t);let e=this.Wa.syncEngine;this.sharedClientState instanceof pg&&(this.sharedClientState.syncEngine={no:fie.bind(null,e),ro:gie.bind(null,e),io:mie.bind(null,e),Qi:pie.bind(null,e),eo:die.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.yi(n=>ke(this,null,function*(){yield hie(this.Wa.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=Y2();if(!pg.D(e))throw new We(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=eM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new pg(e,t.asyncQueue,n,t.clientId,t.initialUser)}},Rg=class{initialize(t,e){return ke(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>PV(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lie.bind(null,this.syncEngine),yield uO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new hO}()}createDatastore(t){let e=Hg(t.databaseInfo.databaseId),n=function(o){return new iO(o)}(t.databaseInfo);return function(o,s,a,c){return new aO(o,s,a,c)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,i,o,s,a){return new cO(n,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,e=>PV(this.syncEngine,e,0),function(){return J0.D()?new J0:new nO}())}createSyncEngine(t,e){return function(i,o,s,a,c,u,f){let g=new _O(i,o,s,a,c,u);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return ke(this,null,function*(){var t,e;yield function(i){return ke(this,null,function*(){let o=gt(i);Ke("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield zf(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};function DV(r,t=10240){let e=0;return{read(){return ke(this,null,function*(){if(e<r.byteLength){let i={value:r.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})},cancel(){return ke(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Lf=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Vr("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var CO=class{constructor(t,e){this.ja=t,this.serializer=e,this.metadata=new ri,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.aa)}`))},n=>this.metadata.reject(n))}close(){return this.ja.cancel()}getMetadata(){return ke(this,null,function*(){return this.metadata.promise})}Ua(){return ke(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return ke(this,null,function*(){let t=yield this.Ya();if(t===null)return null;let e=this.Ha.decode(t),n=Number(e);isNaN(n)&&this.Za(`length string (${e}) is not valid number`);let i=yield this.Xa(n);return new gO(JSON.parse(i),t.length+n)})}eu(){return this.buffer.findIndex(t=>t===123)}Ya(){return ke(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let t=this.eu();t<0&&this.Za("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}Xa(t){return ke(this,null,function*(){for(;this.buffer.length<t;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let e=this.Ha.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){return ke(this,null,function*(){let t=yield this.ja.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};var xO=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return ke(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(i,o){return ke(this,null,function*(){let s=gt(i),a={documents:o.map(g=>Ag(s.serializer,g))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,bn.emptyPath(),a,o.length),u=new Map;c.forEach(g=>{let v=Cre(s.serializer,g);u.set(v.key.toString(),v)});let f=[];return o.forEach(g=>{let v=u.get(g.toString());Rt(!!v),f.push(v)}),f})}(this.datastore,t);return e.forEach(n=>this.recordVersion(n)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new sc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return ke(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,n)=>{let i=mt.fromPath(n);this.mutations.push(new bg(i,this.precondition(i)))}),yield function(n,i){return ke(this,null,function*(){let o=gt(n),s={writes:i.map(a=>Tg(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,bn.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Et();e=Bt.min()}let n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new We(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Bt.min())?Mr.exists(!1):Mr.updateTime(e):Mr.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new We(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(e)}return Mr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var EO=class{constructor(t,e,n,i,o){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=o,this.nu=n.maxAttempts,this.t_=new Ig(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>ke(this,null,function*(){let t=new xO(this.datastore),e=this.su(t);e&&e.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.ou(i)}))}).catch(n=>{this.ou(n)})}))}su(t){try{let e=this.updateFunction(t);return!Lg(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!b2(e)}return!1}};var SO=class{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=ni.UNAUTHENTICATED,this.clientId=b0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,o=>ke(this,null,function*(){Ke("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>(Ke("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new We(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>ke(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let n=qf(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function _0(r,t){return ke(this,null,function*(){r.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");let e=r.configuration;yield t.initialize(e);let n=e.initialUser;r.setCredentialChangeListener(i=>ke(this,null,function*(){n.isEqual(i)||(yield $2(t.localStore,i),n=i)})),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t})}function AO(r,t){return ke(this,null,function*(){r.asyncQueue.verifyOperationInProgress();let e=yield fM(r);Ke("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,r.configuration),r.setCredentialChangeListener(n=>TV(t.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>TV(t.remoteStore,i)),r._onlineComponents=t})}function aB(r){return r.name==="FirebaseError"?r.code===Ie.FAILED_PRECONDITION||r.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}function fM(r){return ke(this,null,function*(){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _0(r,r._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!aB(e))throw e;gs("Error using user provided cache. Falling back to memory cache: "+e),yield _0(r,new kg)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield _0(r,new kg);return r._offlineComponents})}function ww(r){return ke(this,null,function*(){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield AO(r,r._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield AO(r,new Rg))),r._onlineComponents})}function lB(r){return fM(r).then(t=>t.persistence)}function hM(r){return fM(r).then(t=>t.localStore)}function cB(r){return ww(r).then(t=>t.remoteStore)}function pM(r){return ww(r).then(t=>t.syncEngine)}function yie(r){return ww(r).then(t=>t.datastore)}function Vf(r){return ke(this,null,function*(){let t=yield ww(r),e=t.eventManager;return e.onListen=Zre.bind(null,t.syncEngine),e.onUnlisten=eie.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Xre.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=tie.bind(null,t.syncEngine),e})}function _ie(r){return r.asyncQueue.enqueue(()=>ke(this,null,function*(){let t=yield lB(r),e=yield cB(r);return t.setNetworkEnabled(!0),function(i){let o=gt(i);return o.L_.delete(0),zg(o)}(e)}))}function wie(r){return r.asyncQueue.enqueue(()=>ke(this,null,function*(){let t=yield lB(r),e=yield cB(r);return t.setNetworkEnabled(!1),function(i){return ke(this,null,function*(){let o=gt(i);o.L_.add(0),yield zf(o),o.q_.set("Offline")})}(e)}))}function bie(r,t){let e=new ri;return r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(i,o,s){return ke(this,null,function*(){try{let a=yield function(u,f){let g=gt(u);return g.persistence.runTransaction("read document","readonly",v=>g.localDocuments.getDocument(v,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new We(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=qf(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield hM(r),t,e)})),e.promise}function uB(r,t,e={}){let n=new ri;return r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(o,s,a,c,u){let f=new Lf({next:v=>{s.enqueueAndForget(()=>oM(o,g));let _=v.docs.has(a);!_&&v.fromCache?u.reject(new We(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&c&&c.source==="server"?u.reject(new We(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(v)},error:v=>u.reject(v)}),g=new Dg(Hf(a.path),f,{includeMetadataChanges:!0,_a:!0});return iM(o,g)}(yield Vf(r),r.asyncQueue,t,e,n)})),n.promise}function Cie(r,t){let e=new ri;return r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(i,o,s){return ke(this,null,function*(){try{let a=yield G0(i,o,!0),c=new ow(o,a.Ts),u=c.ma(a.documents),f=c.applyChanges(u,!1);s.resolve(f.snapshot)}catch(a){let c=qf(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield hM(r),t,e)})),e.promise}function dB(r,t,e={}){let n=new ri;return r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(o,s,a,c,u){let f=new Lf({next:v=>{s.enqueueAndForget(()=>oM(o,g)),v.fromCache&&c.source==="server"?u.reject(new We(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(v)},error:v=>u.reject(v)}),g=new Dg(a,f,{includeMetadataChanges:!0,_a:!0});return iM(o,g)}(yield Vf(r),r.asyncQueue,t,e,n)})),n.promise}function xie(r,t){let e=new Lf(t);return r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(i,o){gt(i).Y_.add(o),o.next()}(yield Vf(r),e)})),()=>{e.za(),r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return function(i,o){gt(i).Y_.delete(o)}(yield Vf(r),e)}))}}function Eie(r,t,e,n){let i=function(s,a){let c;return c=typeof s=="string"?x2().encode(s):s,function(f,g){return new CO(f,g)}(function(f,g){if(f instanceof Uint8Array)return DV(f,g);if(f instanceof ArrayBuffer)return DV(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(e,Hg(t));r.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){vie(yield pM(r),i,n)}))}function Sie(r,t){return r.asyncQueue.enqueue(()=>ke(this,null,function*(){return function(n,i){let o=gt(n);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield hM(r),t)}))}function fB(r){let t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}var kV=new Map;function gM(r,t,e){if(!e)throw new We(Ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function mM(r,t,e,n){if(t===!0&&n===!0)throw new We(Ie.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function RV(r){if(!mt.isDocumentKey(r))throw new We(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function NV(r){if(mt.isDocumentKey(r))throw new We(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bw(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Et()}function Cn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new We(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=bw(r);throw new We(Ie.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function hB(r,t){if(t<=0)throw new We(Ie.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}var aw=class{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new We(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new We(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fB((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},xu=class{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new We(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new We(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new HA;switch(n.type){case"firstParty":return new qA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new We(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=kV.get(e);n&&(Ke("ComponentProvider","Removing Datastore"),kV.delete(e),n.terminate())}(this),Promise.resolve()}};function pB(r,t,e,n={}){var i;let o=(r=Cn(r,xu))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,c;if(typeof n.mockUserToken=="string")a=n.mockUserToken,c=ni.MOCK_USER;else{a=_I(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);let u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new We(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ni(u)}r._authCredentials=new zA(new w0(a,c))}}var Ii=class r{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new r(this.firestore,t,this._query)}},Zn=class r{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new r(this.firestore,t,this._key)}},ya=class r extends Ii{constructor(t,e,n){super(t,e,Hf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Zn(this.firestore,null,new mt(t))}withConverter(t){return new r(this.firestore,t,this._path)}};function vM(r,t,...e){if(r=wr(r),gM("collection","path",t),r instanceof xu){let n=bn.fromString(t,...e);return NV(n),new ya(r,null,n)}{if(!(r instanceof Zn||r instanceof ya))throw new We(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=r._path.child(bn.fromString(t,...e));return NV(n),new ya(r.firestore,null,n)}}function gB(r,t){if(r=Cn(r,xu),gM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new We(Ie.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ii(r,null,function(n){return new Bs(bn.emptyPath(),n)}(t))}function $g(r,t,...e){if(r=wr(r),arguments.length===1&&(t=b0.newId()),gM("doc","path",t),r instanceof xu){let n=bn.fromString(t,...e);return RV(n),new Zn(r,null,new mt(n))}{if(!(r instanceof Zn||r instanceof ya))throw new We(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=r._path.child(bn.fromString(t,...e));return RV(n),new Zn(r.firestore,r instanceof ya?r.converter:null,new mt(n))}}function yM(r,t){return r=wr(r),t=wr(t),(r instanceof Zn||r instanceof ya)&&(t instanceof Zn||t instanceof ya)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function _M(r,t){return r=wr(r),t=wr(t),r instanceof Ii&&t instanceof Ii&&r.firestore===t.firestore&&Bg(r._query,t._query)&&r.converter===t.converter}var TO=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ig(this,"async_queue_retry"),this.Eu=()=>{let e=y0();e&&Ke("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};let t=y0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;let e=y0();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});let e=new ri;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){return ke(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!cc(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(t){let e=this.au.then(()=>(this.Pu=!0,t().catch(n=>{this.hu=n,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Vr("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Pu=!1,n))));return this.au=e,e}enqueueAfterDelay(t,e,n){this.du(),this.Tu.indexOf(t)>-1&&(e=0);let i=dO.createAndSchedule(this,t,e,n,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&Et()}verifyOperationInProgress(){}mu(){return ke(this,null,function*(){let t;do t=this.au,yield t;while(t!==this.au)})}fu(t){for(let e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(let e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){let e=this.lu.indexOf(t);this.lu.splice(e,1)}};function OO(r){return function(e,n){if(typeof e!="object"||e===null)return!1;let i=e;for(let o of n)if(o in i&&typeof i[o]=="function")return!0;return!1}(r,["next","error","complete"])}var MO=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var mB=-1,hr=class extends xu{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=function(){return new TO}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vB(this),this._firestoreClient.terminate()}};function vi(r){return r._firestoreClient||vB(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function vB(r){var t,e,n;let i=r._freezeSettings(),o=function(a,c,u,f){return new eT(a,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,fB(f.experimentalLongPollingOptions),f.useFetchStreams)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,i);r._firestoreClient=new SO(r._authCredentials,r._appCheckCredentials,r._queue,o),!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function yB(r,t){TB(r=Cn(r,hr));let e=vi(r);if(e._uninitializedComponentsProvider)throw new We(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=r._freezeSettings(),i=new Rg;return wB(e,i,new sw(i,n.cacheSizeBytes,t?.forceOwnership))}function _B(r){TB(r=Cn(r,hr));let t=vi(r);if(t._uninitializedComponentsProvider)throw new We(Ie.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=r._freezeSettings(),n=new Rg;return wB(t,n,new bO(n,e.cacheSizeBytes))}function wB(r,t,e){let n=new ri;return r.asyncQueue.enqueue(()=>ke(this,null,function*(){try{yield _0(r,e),yield AO(r,t),n.resolve()}catch(i){let o=i;if(!aB(o))throw o;gs("Error enabling indexeddb cache. Falling back to memory cache: "+o),n.reject(o)}})).then(()=>n.promise)}function bB(r){if(r._initialized&&!r._terminated)throw new We(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new ri;return r._queue.enqueueAndForgetEvenWhileRestricted(()=>ke(this,null,function*(){try{yield function(n){return ke(this,null,function*(){if(!Xl.D())return Promise.resolve();let i=n+"main";yield Xl.delete(i)})}(eM(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function CB(r){return function(e){let n=new ri;return e.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return sie(yield pM(e),n)})),n.promise}(vi(r=Cn(r,hr)))}function xB(r){return _ie(vi(r=Cn(r,hr)))}function EB(r){return wie(vi(r=Cn(r,hr)))}function SB(r,t){let e=vi(r=Cn(r,hr)),n=new MO;return Eie(e,r._databaseId,t,n),n}function AB(r,t){return Sie(vi(r=Cn(r,hr)),t).then(e=>e?new Ii(r,null,e.query):null)}function TB(r){if(r._initialized||r._terminated)throw new We(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ca=class r{constructor(t){this._byteString=t}static fromBase64String(t){try{return new r(Hr.fromBase64String(t))}catch(e){throw new We(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new r(Hr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Hs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new We(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var ol=class{constructor(t){this._methodName=t}};var Eu=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new We(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new We(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Zt(this._lat,t._lat)||Zt(this._long,t._long)}};var Ng=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,t._values)}};var Aie=/^__.*__$/,PO=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Us(t,this.data,this.fieldMask,e,this.fieldTransforms):new oc(t,this.data,e,this.fieldTransforms)}},lw=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Us(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function OB(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}var cw=class r{constructor(t,e,n,i,o,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new r(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Su({path:n,Du:!1});return i.vu(t),i}Cu(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Su({path:n,Du:!1});return i.yu(),i}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return uw(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(OB(this.wu)&&Aie.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}},IO=class{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Hg(t)}Nu(t,e,n,i=!1){return new cw({wu:t,methodName:e,Ou:n,path:Br.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ou(r){let t=r._freezeSettings(),e=Hg(r._databaseId);return new IO(r._databaseId,!!t.ignoreUndefinedProperties,e)}function Cw(r,t,e,n,i,o={}){let s=r.Nu(o.merge||o.mergeFields?2:0,t,e,i);CM("Data must be an object, but it was:",s,n);let a=IB(n,s),c,u;if(o.merge)c=new Xo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let g of o.mergeFields){let v=jO(t,g,e);if(!s.contains(v))throw new We(Ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);kB(f,v)||f.push(v)}c=new Xo(f),u=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,u=s.fieldTransforms;return new PO(new Ki(a),c,u)}var jg=class r extends ol{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof r}};function MB(r,t,e){return new cw({wu:3,Ou:t.settings.Ou,methodName:r._methodName,Du:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var DO=class r extends ol{_toFieldTransform(t){return new wu(t.path,new rc)}isEqual(t){return t instanceof r}},kO=class r extends ol{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=MB(this,t,!0),n=this.Lu.map(o=>Mu(o,e)),i=new rl(n);return new wu(t.path,i)}isEqual(t){return t instanceof r&&wb(this.Lu,t.Lu)}},RO=class r extends ol{constructor(t,e){super(t),this.Lu=e}_toFieldTransform(t){let e=MB(this,t,!0),n=this.Lu.map(o=>Mu(o,e)),i=new il(n);return new wu(t.path,i)}isEqual(t){return t instanceof r&&wb(this.Lu,t.Lu)}},NO=class r extends ol{constructor(t,e){super(t),this.Bu=e}_toFieldTransform(t){let e=new ic(t.serializer,p2(t.serializer,this.Bu));return new wu(t.path,e)}isEqual(t){return t instanceof r&&this.Bu===t.Bu}};function wM(r,t,e,n){let i=r.Nu(1,t,e);CM("Data must be an object, but it was:",i,n);let o=[],s=Ki.empty();Tu(n,(c,u)=>{let f=xM(t,c,e);u=wr(u);let g=i.Cu(f);if(u instanceof jg)o.push(f);else{let v=Mu(u,g);v!=null&&(o.push(f),s.set(f,v))}});let a=new Xo(o);return new lw(s,a,i.fieldTransforms)}function bM(r,t,e,n,i,o){let s=r.Nu(1,t,e),a=[jO(t,n,e)],c=[i];if(o.length%2!=0)throw new We(Ie.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)a.push(jO(t,o[v])),c.push(o[v+1]);let u=[],f=Ki.empty();for(let v=a.length-1;v>=0;--v)if(!kB(u,a[v])){let _=a[v],b=c[v];b=wr(b);let C=s.Cu(_);if(b instanceof jg)u.push(_);else{let S=Mu(b,C);S!=null&&(u.push(_),f.set(_,S))}}let g=new Xo(u);return new lw(f,g,s.fieldTransforms)}function PB(r,t,e,n=!1){return Mu(e,r.Nu(n?4:3,t))}function Mu(r,t){if(DB(r=wr(r)))return CM("Unsupported field value:",t,r),IB(r,t);if(r instanceof ol)return function(n,i){if(!OB(i.wu))throw i.Mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${n._methodName}() is not currently supported inside arrays`);let o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(n,i){let o=[],s=0;for(let a of n){let c=Mu(a,i.Fu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(r,t)}return function(n,i){if((n=wr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return p2(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let o=br.fromDate(n);return{timestampValue:Pf(i.serializer,o)}}if(n instanceof br){let o=new br(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Pf(i.serializer,o)}}if(n instanceof Eu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ca)return{bytesValue:E2(i.serializer,n._byteString)};if(n instanceof Zn){let o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JO(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ng)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return YO(a.serializer,c)})}}}}}}(n,i);throw i.Mu(`Unsupported field value: ${bw(n)}`)}(r,t)}function IB(r,t){let e={};return YV(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tu(r,(n,i)=>{let o=Mu(i,t.bu(n));o!=null&&(e[n]=o)}),{mapValue:{fields:e}}}function DB(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof br||r instanceof Eu||r instanceof Ca||r instanceof Zn||r instanceof ol||r instanceof Ng)}function CM(r,t,e){if(!DB(e)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(e)){let n=bw(e);throw n==="an object"?t.Mu(r+" a custom object"):t.Mu(r+" "+n)}}function jO(r,t,e){if((t=wr(t))instanceof Hs)return t._internalPath;if(typeof t=="string")return xM(r,t);throw uw("Field path arguments must be of type string or ",r,!1,void 0,e)}var Tie=new RegExp("[~\\*/\\[\\]]");function xM(r,t,e){if(t.search(Tie)>=0)throw uw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new Hs(...t.split("."))._internalPath}catch{throw uw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function uw(r,t,e,n,i){let o=n&&!n.isEmpty(),s=i!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${n}`),s&&(c+=` in document ${i}`),c+=")"),new We(Ie.INVALID_ARGUMENT,a+r+c)}function kB(r,t){return r.some(e=>e.isEqual(t))}var Su=class{constructor(t,e,n,i,o){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new FO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(xw("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},FO=class extends Su{data(){return super.data()}};function xw(r,t){return typeof t=="string"?xM(r,t):t instanceof Hs?t._internalPath:t._delegate._internalPath}function RB(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new We(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fg=class{},Au=class extends Fg{};function ll(r,t,...e){let n=[];t instanceof Fg&&n.push(t),n=n.concat(e),function(o){let s=o.filter(c=>c instanceof LO).length,a=o.filter(c=>c instanceof dw).length;if(s>1||s>0&&a>0)throw new We(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let i of n)r=i._apply(r);return r}var dw=class r extends Au{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new r(t,e,n)}_apply(t){let e=this._parse(t);return $B(t._query,e),new Ii(t.firestore,t.converter,hT(t._query,e))}_parse(t){let e=Ou(t.firestore);return function(o,s,a,c,u,f,g){let v;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new We(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){FV(g,f);let _=[];for(let b of g)_.push(jV(c,o,b));v={arrayValue:{values:_}}}else v=jV(c,o,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||FV(g,f),v=PB(a,s,g,f==="in"||f==="not-in");return vn.create(u,f,v)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function NB(r,t,e){let n=t,i=xw("where",r);return dw._create(i,n,e)}var LO=class r extends Fg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new r(t,e)}_parse(t){let e=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return e.length===1?e[0]:Un.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)$B(s,c),s=hT(s,c)}(t._query,e),new Ii(t.firestore,t.converter,hT(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var VO=class r extends Au{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new r(t,e)}_apply(t){let e=function(i,o,s){if(i.startAt!==null)throw new We(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(o,s)}(t._query,this._field,this._direction);return new Ii(t.firestore,t.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Bs(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}};function jB(r,t="asc"){let e=t,n=xw("orderBy",r);return VO._create(n,e)}var fw=class r extends Au{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new r(t,e,n)}_apply(t){return new Ii(t.firestore,t.converter,I0(t._query,this._limit,this._limitType))}};function FB(r){return hB("limit",r),fw._create("limit",r,"F")}function LB(r){return hB("limitToLast",r),fw._create("limitToLast",r,"L")}var hw=class r extends Au{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new r(t,e,n)}_apply(t){let e=zB(t,this.type,this._docOrFields,this._inclusive);return new Ii(t.firestore,t.converter,function(i,o){return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(t._query,e))}};function VB(...r){return hw._create("startAt",r,!0)}function BB(...r){return hw._create("startAfter",r,!1)}var pw=class r extends Au{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new r(t,e,n)}_apply(t){let e=zB(t,this.type,this._docOrFields,this._inclusive);return new Ii(t.firestore,t.converter,function(i,o){return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(t._query,e))}};function UB(...r){return pw._create("endBefore",r,!1)}function HB(...r){return pw._create("endAt",r,!0)}function zB(r,t,e,n){if(e[0]=wr(e[0]),e[0]instanceof Su)return function(o,s,a,c,u){if(!c)throw new We(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let g of Cf(o))if(g.field.isKeyField())f.push(vu(s,c.key));else{let v=c.data.field(g.field);if(mw(v))throw new We(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){let _=g.field.canonicalString();throw new We(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(v)}return new wa(f,u)}(r._query,r.firestore._databaseId,t,e[0]._document,n);{let i=Ou(r.firestore);return function(s,a,c,u,f,g){let v=s.explicitOrderBy;if(f.length>v.length)throw new We(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let _=[];for(let b=0;b<f.length;b++){let C=f[b];if(v[b].field.isKeyField()){if(typeof C!="string")throw new We(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof C}`);if(!KO(s)&&C.indexOf("/")!==-1)throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${C}' contains a slash.`);let S=s.path.child(bn.fromString(C));if(!mt.isDocumentKey(S))throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let j=new mt(S);_.push(vu(a,j))}else{let S=PB(c,u,C);_.push(S)}}return new wa(_,g)}(r._query,r.firestore._databaseId,i,t,e,n)}}function jV(r,t,e){if(typeof(e=wr(e))=="string"){if(e==="")throw new We(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KO(t)&&e.indexOf("/")!==-1)throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let n=t.path.child(bn.fromString(e));if(!mt.isDocumentKey(n))throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return vu(r,new mt(n))}if(e instanceof Zn)return vu(r,e._key);throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bw(e)}.`)}function FV(r,t){if(!Array.isArray(r)||r.length===0)throw new We(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $B(r,t){let e=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new We(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new We(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Bf=class{convertValue(t,e="none"){switch(mu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ec(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Et()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let n={};return Tu(t,(i,o)=>{n[i]=this.convertValue(o,e)}),n}convertVectorValue(t){var e,n,i;let o=(i=(n=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(s=>fr(s.doubleValue));return new Ng(o)}convertGeoPoint(t){return new Eu(fr(t.latitude),fr(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":let n=qO(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(yg(t));default:return null}}convertTimestamp(t){let e=nl(t);return new br(e.seconds,e.nanos)}convertDocumentKey(t,e){let n=bn.fromString(t);Rt(N2(n));let i=new tc(n.get(1),n.get(3)),o=new mt(n.popFirst(5));return i.isEqual(e)||Vr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function Ew(r,t,e){let n;return n=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,n}var BO=class extends Bf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ca(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zn(this.firestore,null,e)}};var tl=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},vs=class extends Su{constructor(t,e,n,i,o,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let n=this._document.data.field(xw("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}},Jl=class extends vs{data(t={}){return super.data(t)}},zs=class{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new tl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Jl(this._firestore,this._userDataWriter,n.key,n,new tl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new We(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Jl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Jl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:Oie(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Oie(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}function EM(r,t){return r instanceof vs&&t instanceof vs?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(r._document===null?t._document===null:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof zs&&t instanceof zs&&r._firestore===t._firestore&&_M(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}function WB(r){r=Cn(r,Zn);let t=Cn(r.firestore,hr);return uB(vi(t),r._key).then(e=>OM(t,r,e))}var sl=class extends Bf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ca(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zn(this.firestore,null,e)}};function qB(r){r=Cn(r,Zn);let t=Cn(r.firestore,hr),e=vi(t),n=new sl(t);return bie(e,r._key).then(i=>new vs(t,n,r._key,i,new tl(i!==null&&i.hasLocalMutations,!0),r.converter))}function GB(r){r=Cn(r,Zn);let t=Cn(r.firestore,hr);return uB(vi(t),r._key,{source:"server"}).then(e=>OM(t,r,e))}function KB(r){r=Cn(r,Ii);let t=Cn(r.firestore,hr),e=vi(t),n=new sl(t);return RB(r._query),dB(e,r._query).then(i=>new zs(t,n,r,i))}function QB(r){r=Cn(r,Ii);let t=Cn(r.firestore,hr),e=vi(t),n=new sl(t);return Cie(e,r._query).then(i=>new zs(t,n,r,i))}function YB(r){r=Cn(r,Ii);let t=Cn(r.firestore,hr),e=vi(t),n=new sl(t);return dB(e,r._query,{source:"server"}).then(i=>new zs(t,n,r,i))}function SM(r,t,e){r=Cn(r,Zn);let n=Cn(r.firestore,hr),i=Ew(r.converter,t,e);return Gf(n,[Cw(Ou(n),"setDoc",r._key,i,r.converter!==null,e).toMutation(r._key,Mr.none())])}function AM(r,t,e,...n){r=Cn(r,Zn);let i=Cn(r.firestore,hr),o=Ou(i),s;return s=typeof(t=wr(t))=="string"||t instanceof Hs?bM(o,"updateDoc",r._key,t,e,n):wM(o,"updateDoc",r._key,t),Gf(i,[s.toMutation(r._key,Mr.exists(!0))])}function JB(r){return Gf(Cn(r.firestore,hr),[new sc(r._key,Mr.none())])}function ZB(r,t){let e=Cn(r.firestore,hr),n=$g(r),i=Ew(r.converter,t);return Gf(e,[Cw(Ou(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Mr.exists(!1))]).then(()=>n)}function TM(r,...t){var e,n,i;r=wr(r);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||OO(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(OO(t[s])){let g=t[s];t[s]=(e=g.next)===null||e===void 0?void 0:e.bind(g),t[s+1]=(n=g.error)===null||n===void 0?void 0:n.bind(g),t[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let c,u,f;if(r instanceof Zn)u=Cn(r.firestore,hr),f=Hf(r._key.path),c={next:g=>{t[s]&&t[s](OM(u,r,g))},error:t[s+1],complete:t[s+2]};else{let g=Cn(r,Ii);u=Cn(g.firestore,hr),f=g._query;let v=new sl(u);c={next:_=>{t[s]&&t[s](new zs(u,v,g,_))},error:t[s+1],complete:t[s+2]},RB(r._query)}return function(v,_,b,C){let S=new Lf(C),j=new Dg(_,S,b);return v.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return iM(yield Vf(v),j)})),()=>{S.za(),v.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return oM(yield Vf(v),j)}))}}(vi(u),f,a,c)}function XB(r,t){return xie(vi(r=Cn(r,hr)),OO(t)?t:{next:t})}function Gf(r,t){return function(n,i){let o=new ri;return n.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){return nie(yield pM(n),i,o)})),o.promise}(vi(r),t)}function OM(r,t,e){let n=e.docs.get(t._key),i=new sl(r);return new vs(r,i,t._key,n,new tl(e.hasPendingWrites,e.fromCache),t.converter)}var Mie={maxAttempts:5};var gw=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ou(t)}set(t,e,n){this._verifyNotCommitted();let i=Ql(t,this._firestore),o=Ew(i.converter,e,n),s=Cw(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,n);return this._mutations.push(s.toMutation(i._key,Mr.none())),this}update(t,e,n,...i){this._verifyNotCommitted();let o=Ql(t,this._firestore),s;return s=typeof(e=wr(e))=="string"||e instanceof Hs?bM(this._dataReader,"WriteBatch.update",o._key,e,n,i):wM(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Mr.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=Ql(t,this._firestore);return this._mutations=this._mutations.concat(new sc(e._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ql(r,t){if((r=wr(r)).firestore!==t)throw new We(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}var UO=class extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ou(e)}get(e){let n=Ql(e,this._firestore),i=new BO(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||o.length!==1)return Et();let s=o[0];if(s.isFoundDocument())return new Su(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Su(this._firestore,i,n._key,null,n.converter);throw Et()})}set(e,n,i){let o=Ql(e,this._firestore),s=Ew(o.converter,n,i),a=Cw(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(e,n,i,...o){let s=Ql(e,this._firestore),a;return a=typeof(n=wr(n))=="string"||n instanceof Hs?bM(this._dataReader,"Transaction.update",s._key,n,i,o):wM(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){let n=Ql(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=Ql(t,this._firestore),n=new sl(this._firestore);return super.get(t).then(i=>new vs(this._firestore,n,e._key,i._document,new tl(!1,!1),e.converter))}};function eU(r,t,e){r=Cn(r,hr);let n=Object.assign(Object.assign({},Mie),e);return function(o){if(o.maxAttempts<1)throw new We(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(o,s,a){let c=new ri;return o.asyncQueue.enqueueAndForget(()=>ke(this,null,function*(){let u=yield yie(o);new EO(o.asyncQueue,u,a,s,c).ru()})),c.promise}(vi(r),i=>t(new UO(r,i)),n)}function tU(){return new jg("deleteField")}function nU(){return new DO("serverTimestamp")}function rU(...r){return new kO("arrayUnion",r)}function iU(...r){return new RO("arrayRemove",r)}function oU(r){return new NO("increment",r)}(function(t,e=!0){(function(i){Uf=i})(CI),xh(new Cc("firestore",(n,{instanceIdentifier:i,options:o})=>{let s=n.getProvider("app").getImmediate(),a=new hr(new $A(n.getProvider("auth-internal")),new KA(n.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new We(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(u.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),wl(jL,"4.7.2",t),wl(jL,"4.7.2","esm2017")})();var Pie="@firebase/firestore-compat",Iie="0.3.37";function RM(r,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new We("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}function sU(){if(typeof Uint8Array>"u")throw new We("unimplemented","Uint8Arrays are not available in this environment.")}function aU(){if(!JV())throw new We("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sw=class r{constructor(t){this._delegate=t}static fromBase64String(t){return aU(),new r(Ca.fromBase64String(t))}static fromUint8Array(t){return sU(),new r(Ca.fromUint8Array(t))}toBase64(){return aU(),this._delegate.toBase64()}toUint8Array(){return sU(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function MM(r){return Die(r,["next","error","complete"])}function Die(r,t){if(typeof r!="object"||r===null)return!1;let e=r;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}var PM=class{enableIndexedDbPersistence(t,e){return yB(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return _B(t._delegate)}clearIndexedDbPersistence(t){return bB(t._delegate)}},Aw=class{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof tc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&gs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){pB(this._delegate,t,e,n)}enableNetwork(){return xB(this._delegate)}disableNetwork(){return EB(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,mM("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return CB(this._delegate)}onSnapshotsInSync(t){return XB(this._delegate,t)}get app(){if(!this._appCompat)throw new We("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Yf(this,vM(this._delegate,t))}catch(e){throw wo(e,"collection()","Firestore.collection()")}}doc(t){try{return new xa(this,$g(this._delegate,t))}catch(e){throw wo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ku(this,gB(this._delegate,t))}catch(e){throw wo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return eU(this._delegate,e=>t(new Tw(this,e)))}batch(){return vi(this._delegate),new Ow(new gw(this._delegate,t=>Gf(this._delegate,t)))}loadBundle(t){return SB(this._delegate,t)}namedQuery(t){return AB(this._delegate,t).then(e=>e?new ku(this,e):null)}},Kf=class extends Bf{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sw(new Ca(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return xa.forKey(e,this.firestore,null)}};function kie(r){LV(r)}var Tw=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Kf(t)}get(t){let e=Pu(t);return this._delegate.get(e).then(n=>new Iu(this._firestore,new vs(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,e.converter)))}set(t,e,n){let i=Pu(t);return n?(RM("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){let o=Pu(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){let e=Pu(t);return this._delegate.delete(e),this}},Ow=class{constructor(t){this._delegate=t}set(t,e,n){let i=Pu(t);return n?(RM("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){let o=Pu(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){let e=Pu(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},Qf=class r{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){let n=new Jl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Du(this._firestore,n),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let n=r.INSTANCES,i=n.get(t);i||(i=new WeakMap,n.set(t,i));let o=i.get(e);return o||(o=new r(t,new Kf(t),e),i.set(e,o)),o}};Qf.INSTANCES=new WeakMap;var xa=class r{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Kf(t)}static forPath(t,e,n){if(t.length%2!==0)throw new We("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new r(e,new Zn(e._delegate,n,new mt(t)))}static forKey(t,e,n){return new r(e,new Zn(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Yf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Yf(this.firestore,vM(this._delegate,t))}catch(e){throw wo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=wr(t),t instanceof Zn?yM(this._delegate,t):!1}set(t,e){e=RM("DocumentReference.set",e);try{return e?SM(this._delegate,t,e):SM(this._delegate,t)}catch(n){throw wo(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return arguments.length===1?AM(this._delegate,t):AM(this._delegate,t,e,...n)}catch(i){throw wo(i,"updateDoc()","DocumentReference.update()")}}delete(){return JB(this._delegate)}onSnapshot(...t){let e=lU(t),n=cU(t,i=>new Iu(this.firestore,new vs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return TM(this._delegate,e,n)}get(t){let e;return t?.source==="cache"?e=qB(this._delegate):t?.source==="server"?e=GB(this._delegate):e=WB(this._delegate),e.then(n=>new Iu(this.firestore,new vs(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(t){return new r(this.firestore,t?this._delegate.withConverter(Qf.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function wo(r,t,e){return r.message=r.message.replace(t,e),r}function lU(r){for(let t of r)if(typeof t=="object"&&!MM(t))return t;return{}}function cU(r,t){var e,n;let i;return MM(r[0])?i=r[0]:MM(r[1])?i=r[1]:typeof r[0]=="function"?i={next:r[0],error:r[1],complete:r[2]}:i={next:r[1],error:r[2],complete:r[3]},{next:o=>{i.next&&i.next(t(o))},error:(e=i.error)===null||e===void 0?void 0:e.bind(i),complete:(n=i.complete)===null||n===void 0?void 0:n.bind(i)}}var Iu=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return EM(this._delegate,t._delegate)}},Du=class extends Iu{data(t){let e=this._delegate.data(t);return this._delegate._converter||VV(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},ku=class r{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Kf(t)}where(t,e,n){try{return new r(this.firestore,ll(this._delegate,NB(t,e,n)))}catch(i){throw wo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new r(this.firestore,ll(this._delegate,jB(t,e)))}catch(n){throw wo(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new r(this.firestore,ll(this._delegate,FB(t)))}catch(e){throw wo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new r(this.firestore,ll(this._delegate,LB(t)))}catch(e){throw wo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new r(this.firestore,ll(this._delegate,VB(...t)))}catch(e){throw wo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new r(this.firestore,ll(this._delegate,BB(...t)))}catch(e){throw wo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new r(this.firestore,ll(this._delegate,UB(...t)))}catch(e){throw wo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new r(this.firestore,ll(this._delegate,HB(...t)))}catch(e){throw wo(e,"endAt()","Query.endAt()")}}isEqual(t){return _M(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=QB(this._delegate):t?.source==="server"?e=YB(this._delegate):e=KB(this._delegate),e.then(n=>new Wg(this.firestore,new zs(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...t){let e=lU(t),n=cU(t,i=>new Wg(this.firestore,new zs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return TM(this._delegate,e,n)}withConverter(t){return new r(this.firestore,t?this._delegate.withConverter(Qf.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},IM=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Du(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Wg=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ku(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Du(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new IM(this._firestore,e))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new Du(this._firestore,n))})}isEqual(t){return EM(this._delegate,t._delegate)}},Yf=class r extends ku{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new xa(this.firestore,t):null}doc(t){try{return t===void 0?new xa(this.firestore,$g(this._delegate)):new xa(this.firestore,$g(this._delegate,t))}catch(e){throw wo(e,"doc()","CollectionReference.doc()")}}add(t){return ZB(this._delegate,t).then(e=>new xa(this.firestore,e))}isEqual(t){return yM(this._delegate,t._delegate)}withConverter(t){return new r(this.firestore,t?this._delegate.withConverter(Qf.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Pu(r){return Cn(r,Zn)}var DM=class r{constructor(...t){this._delegate=new Hs(...t)}static documentId(){return new r(Br.keyField().canonicalString())}isEqual(t){return t=wr(t),t instanceof Hs?this._delegate._internalPath.isEqual(t._internalPath):!1}};var kM=class r{constructor(t){this._delegate=t}static serverTimestamp(){let t=nU();return t._methodName="FieldValue.serverTimestamp",new r(t)}static delete(){let t=tU();return t._methodName="FieldValue.delete",new r(t)}static arrayUnion(...t){let e=rU(...t);return e._methodName="FieldValue.arrayUnion",new r(e)}static arrayRemove(...t){let e=iU(...t);return e._methodName="FieldValue.arrayRemove",new r(e)}static increment(t){let e=oU(t);return e._methodName="FieldValue.increment",new r(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var Rie={Firestore:Aw,GeoPoint:Eu,Timestamp:br,Blob:Sw,Transaction:Tw,WriteBatch:Ow,DocumentReference:xa,DocumentSnapshot:Iu,Query:ku,QueryDocumentSnapshot:Du,QuerySnapshot:Wg,CollectionReference:Yf,FieldPath:DM,FieldValue:kM,setLogLevel:kie,CACHE_SIZE_UNLIMITED:mB};function Nie(r,t){r.INTERNAL.registerComponent(new Cc("firestore-compat",e=>{let n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)},"PUBLIC").setServiceProps(Object.assign({},Rie)))}function jie(r){Nie(r,(t,e)=>new Aw(t,e,new PM)),r.registerVersion(Pie,Iie)}jie(so);function Fie(r,t=Th){return new un(e=>{let n;return t!=null?t.schedule(()=>{n=r.onSnapshot({includeMetadataChanges:!0},e)}):n=r.onSnapshot({includeMetadataChanges:!0},e),()=>{n?.()}})}function uU(r,t){return Fie(r,t)}function Lie(r,t){return uU(r,t).pipe(Tc(void 0),Mh(),Vt(e=>{let[n,i]=e;return i.exists?n?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function FM(r,t){return uU(r,t).pipe(Vt(e=>({payload:e,type:"query"})))}var Mw=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let n=this.ref.collection(t),{ref:i,query:o}=gU(n,e);return new Iw(i,o,this.afs)}snapshotChanges(){return Lie(this.ref,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(t={}){return this.snapshotChanges().pipe(Vt(({payload:e})=>t.idField?Bn(bt({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return yn(this.ref.get(t)).pipe(Ro)}};function Pw(r,t){return FM(r,t).pipe(Tc(void 0),Mh(),Vt(e=>{let[n,i]=e,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(g=>g.doc.ref.isEqual(a.ref)),f=n?.payload.docs.find(g=>g.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function dU(r,t,e){return Pw(r,e).pipe(Ac((n,i)=>Vie(n,i.map(o=>o.payload),t),[]),Ub(),Vt(n=>n.map(i=>({type:i.type,payload:i}))))}function Vie(r,t,e){return t.forEach(n=>{e.indexOf(n.type)>-1&&(r=Bie(r,n))}),r}function NM(r,t,e,...n){let i=r.slice();return i.splice(t,e,...n),i}function Bie(r,t){switch(t.type){case"added":if(!(r[t.newIndex]&&r[t.newIndex].doc.ref.isEqual(t.doc.ref)))return NM(r,t.newIndex,0,t);break;case"modified":if(r[t.oldIndex]==null||r[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=r.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return NM(r,t.newIndex,1,t);break;case"removed":if(r[t.oldIndex]&&r[t.oldIndex].doc.ref.isEqual(t.doc.ref))return NM(r,t.oldIndex,1);break}return r}function fU(r){return(!r||r.length===0)&&(r=["added","removed","modified"]),r}var Iw=class{ref;query;afs;constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Pw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Vt(n=>n.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Tc(void 0),Mh(),pi(([n,i])=>i.length>0||!n),Vt(([,n])=>n),Ro)}auditTrail(t){return this.stateChanges(t).pipe(Ac((e,n)=>[...e,...n],[]))}snapshotChanges(t){let e=fU(t);return dU(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(t={}){return FM(this.query,this.afs.schedulers.outsideAngular).pipe(Vt(e=>e.payload.docs.map(n=>t.idField?Bn(bt({},n.data()),{[t.idField]:n.id}):n.data())),Ro)}get(t){return yn(this.query.get(t)).pipe(Ro)}add(t){return this.ref.add(t)}doc(t){return new Mw(this.ref.doc(t),this.afs)}},jM=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?Pw(this.query,this.afs.schedulers.outsideAngular).pipe(Ro):Pw(this.query,this.afs.schedulers.outsideAngular).pipe(Vt(e=>e.filter(n=>t.indexOf(n.type)>-1)),pi(e=>e.length>0),Ro)}auditTrail(t){return this.stateChanges(t).pipe(Ac((e,n)=>[...e,...n],[]))}snapshotChanges(t){let e=fU(t);return dU(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ro)}valueChanges(t={}){return FM(this.query,this.afs.schedulers.outsideAngular).pipe(Vt(n=>n.payload.docs.map(i=>t.idField?bt({[t.idField]:i.id},i.data()):i.data())),Ro)}get(t){return yn(this.query.get(t)).pipe(Ro)}},hU=new wt("angularfire2.enableFirestorePersistence"),pU=new wt("angularfire2.firestore.persistenceSettings"),Uie=new wt("angularfire2.firestore.settings"),Hie=new wt("angularfire2.firestore.use-emulator");function gU(r,t=e=>e){return{query:t(r),ref:r}}var LM=(()=>{class r{schedulers;firestore;persistenceEnabled$;constructor(e,n,i,o,s,a,c,u,f,g,v,_,b,C,S,j,q){this.schedulers=c;let N=tg(e,a,n),G=f;g&&PA(N,a,v,b,C,S,_,j),[this.firestore,this.persistenceEnabled$]=a0(`${N.name}.firestore`,"AngularFirestore",N.name,()=>{let se=a.runOutsideAngular(()=>N.firestore());if(o&&se.settings(o),G&&se.useEmulator(...G),i&&!Dl(s)){let ue=()=>{try{return yn(se.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Y){return typeof console<"u"&&console.warn(Y),Ft(!1)}};return[se,a.runOutsideAngular(ue)]}else return[se,Ft(!1)]},[o,G,i])}collection(e,n){let i;typeof e=="string"?i=this.firestore.collection(e):i=e;let{ref:o,query:s}=gU(i,n),a=this.schedulers.ngZone.run(()=>o);return new Iw(a,s,this)}collectionGroup(e,n){let i=n||(s=>s),o=this.firestore.collectionGroup(e);return new jM(i(o),this)}doc(e){let n;typeof e=="string"?n=this.firestore.doc(e):n=e;let i=this.schedulers.ngZone.run(()=>n);return new Mw(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(n){return new(n||r)(Xe(lf),Xe(cf,8),Xe(hU,8),Xe(Uie,8),Xe(Vi),Xe(_n),Xe(i0),Xe(pU,8),Xe(Hie,8),Xe(ng,8),Xe(EA,8),Xe(SA,8),Xe(AA,8),Xe(TA,8),Xe(OA,8),Xe(MA,8),Xe(su,8))};static \u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"any"})}return r})(),mU=(()=>{class r{constructor(){so.registerVersion("angularfire",au.full,"fst-compat")}static enablePersistence(e){return{ngModule:r,providers:[{provide:hU,useValue:!0},{provide:pU,useValue:e}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=Or({type:r});static \u0275inj=Tr({providers:[LM]})}return r})();var Jf=(()=>{class r{constructor(e,n){this.store=e,this.FireAuth=n,this.Components="Components",this.Array_Components=[],this.Components_collection=this.store.collection(this.Components,i=>i.orderBy("ComponentName","asc")).valueChanges({idField:"id"})}Add_New_Component_Web_Builder(e){this.store.collection(this.Components).add(e)}Update_Component_Web_Builder(e){this.store.collection(this.Components).doc(e.id).update(e)}Remove_Component_Web_Builder(e){this.store.collection(this.Components).doc(e.id).delete()}Get_Component_Web_Builder(){this.Components_collection.subscribe(e=>{this.Array_Components=e})}static{this.\u0275fac=function(n){return new(n||r)(Xe(LM),Xe(ng))}}static{this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var $ie=["divElement"],Wie=["Actions"],vU=(()=>{class r{constructor(e,n){this.renderer=e,this._Fire_Components_Service=n,this.All_Objects=new $y,this.bordersVisible=!0}initialize_All(){this._Fire_Components_Service.editor=gL.init({container:"#gjs",fromElement:!0,width:"auto",height:"100vh",storageManager:{type:"local",autosave:!1,autoload:!1,stepsBeforeSave:1,options:{local:{key:"gjs-project"}}}}),this.appendHtmlElement(),this.All_Objects.Array_All.map(e=>{this._Fire_Components_Service.editor.BlockManager.add(e.label,e)})}Save_Data(){let e=this._Fire_Components_Service.editor.getHtml(),n=this._Fire_Components_Service.editor.getCss(),i=JSON.stringify(this._Fire_Components_Service.editor.getComponents().toJSON()),o=JSON.stringify(this._Fire_Components_Service.editor.getStyle().toJSON());var s=this._Fire_Components_Service.Selected_Component;s.components=i,s.styles=o,this._Fire_Components_Service.Update_Component_Web_Builder(s)}appendHtmlElement(){let s=this.parentElement.nativeElement.querySelector(".gjs-editor").querySelector(".gjs-pn-panels").querySelector(".gjs-pn-commands").querySelector(".gjs-pn-buttons"),a=this.Actions.nativeElement;s?this.renderer.appendChild(s,a):console.error("Child div with the specified class not found")}addEventListeners(){this._Fire_Components_Service.editor.on("component:add",e=>{console.log("Component added:",e),this.handleComponentChange("add",e)}),this._Fire_Components_Service.editor.on("component:remove",e=>{console.log("Component removed:",e),this.handleComponentChange("remove",e)}),this._Fire_Components_Service.editor.on("component:update",e=>{console.log("Component updated:",e),this.handleComponentChange("update",e)})}handleComponentChange(e,n){console.log(`Component ${e} event triggered for component:`,n)}ngOnInit(){this.initialize_All()}static{this.\u0275fac=function(n){return new(n||r)(ir(Il),ir(Jf))}}static{this.\u0275cmp=oa({type:r,selectors:[["web-builder-form"]],viewQuery:function(n,i){if(n&1&&(Ux($ie,7),Ux(Wie,7)),n&2){let o;Wv(o=qv())&&(i.parentElement=o.first),Wv(o=qv())&&(i.Actions=o.first)}},decls:8,vars:1,consts:[["Actions",""],["divElement",""],[1,"Actions"],[3,"click"],["id","gjs"]],template:function(n,i){if(n&1){let o=$v();Bi(0,"div",2,0)(2,"button",3),js("click",function(){return Yh(o),Jh(i.Save_Data())}),la(3,"Save Data"),fo(),Bi(4,"p"),la(5),fo()(),aa(6,"div",4,1)}n&2&&(Vc(5),tp("Compnent Name : ",i._Fire_Components_Service.Selected_Component==null?null:i._Fire_Components_Service.Selected_Component.ComponentName,""))},styles:["#parentElement[_ngcontent-%COMP%]{padding:9px;border:1px solid}.Actions[_ngcontent-%COMP%]{margin-inline-start:9rem;width:100%;display:flex;align-items:center}.Actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#363636;outline:none;border:1px solid #4f4f4f;padding:6px 14px;color:#fff;border-radius:4px;cursor:pointer}.Actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 6px}.no-border[_ngcontent-%COMP%]{outline:none!important;border:none!important}",'.CodeMirror[_ngcontent-%COMP%]{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines[_ngcontent-%COMP%]{padding:4px 0}.CodeMirror[_ngcontent-%COMP%]   pre.CodeMirror-line[_ngcontent-%COMP%], .CodeMirror[_ngcontent-%COMP%]   pre.CodeMirror-line-like[_ngcontent-%COMP%]{padding:0 4px}.CodeMirror-scrollbar-filler[_ngcontent-%COMP%], .CodeMirror-gutter-filler[_ngcontent-%COMP%]{background-color:#fff}.CodeMirror-gutters[_ngcontent-%COMP%]{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber[_ngcontent-%COMP%]{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker[_ngcontent-%COMP%]{color:#000}.CodeMirror-guttermarker-subtle[_ngcontent-%COMP%]{color:#999}.CodeMirror-cursor[_ngcontent-%COMP%]{border-left:1px solid black;border-right:none;width:0}.CodeMirror[_ngcontent-%COMP%]   div.CodeMirror-secondarycursor[_ngcontent-%COMP%]{border-left:1px solid silver}.cm-fat-cursor[_ngcontent-%COMP%]   .CodeMirror-cursor[_ngcontent-%COMP%]{width:auto;border:0!important;background:#7e7}.cm-fat-cursor[_ngcontent-%COMP%]   div.CodeMirror-cursors[_ngcontent-%COMP%]{z-index:1}.cm-fat-cursor-mark[_ngcontent-%COMP%]{background-color:#14ff1480;-webkit-animation:_ngcontent-%COMP%_blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:_ngcontent-%COMP%_blink 1.06s steps(1) infinite}.cm-animate-fat-cursor[_ngcontent-%COMP%]{width:auto;-webkit-animation:_ngcontent-%COMP%_blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:_ngcontent-%COMP%_blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes _ngcontent-%COMP%_blink{50%{background-color:transparent}}@keyframes _ngcontent-%COMP%_blink{50%{background-color:transparent}}.cm-tab[_ngcontent-%COMP%]{display:inline-block;text-decoration:inherit}.CodeMirror-rulers[_ngcontent-%COMP%]{position:absolute;inset:-50px 0 0;overflow:hidden}.CodeMirror-ruler[_ngcontent-%COMP%]{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default[_ngcontent-%COMP%]   .cm-header[_ngcontent-%COMP%]{color:#00f}.cm-s-default[_ngcontent-%COMP%]   .cm-quote[_ngcontent-%COMP%]{color:#090}.cm-negative[_ngcontent-%COMP%]{color:#d44}.cm-positive[_ngcontent-%COMP%]{color:#292}.cm-header[_ngcontent-%COMP%], .cm-strong[_ngcontent-%COMP%]{font-weight:700}.cm-em[_ngcontent-%COMP%]{font-style:italic}.cm-link[_ngcontent-%COMP%]{text-decoration:underline}.cm-strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}.cm-s-default[_ngcontent-%COMP%]   .cm-keyword[_ngcontent-%COMP%]{color:#708}.cm-s-default[_ngcontent-%COMP%]   .cm-atom[_ngcontent-%COMP%]{color:#219}.cm-s-default[_ngcontent-%COMP%]   .cm-number[_ngcontent-%COMP%]{color:#164}.cm-s-default[_ngcontent-%COMP%]   .cm-def[_ngcontent-%COMP%]{color:#00f}.cm-s-default[_ngcontent-%COMP%]   .cm-variable-2[_ngcontent-%COMP%]{color:#05a}.cm-s-default[_ngcontent-%COMP%]   .cm-variable-3[_ngcontent-%COMP%], .cm-s-default[_ngcontent-%COMP%]   .cm-type[_ngcontent-%COMP%]{color:#085}.cm-s-default[_ngcontent-%COMP%]   .cm-comment[_ngcontent-%COMP%]{color:#a50}.cm-s-default[_ngcontent-%COMP%]   .cm-string[_ngcontent-%COMP%]{color:#a11}.cm-s-default[_ngcontent-%COMP%]   .cm-string-2[_ngcontent-%COMP%]{color:#f50}.cm-s-default[_ngcontent-%COMP%]   .cm-meta[_ngcontent-%COMP%], .cm-s-default[_ngcontent-%COMP%]   .cm-qualifier[_ngcontent-%COMP%]{color:#555}.cm-s-default[_ngcontent-%COMP%]   .cm-builtin[_ngcontent-%COMP%]{color:#30a}.cm-s-default[_ngcontent-%COMP%]   .cm-bracket[_ngcontent-%COMP%]{color:#997}.cm-s-default[_ngcontent-%COMP%]   .cm-tag[_ngcontent-%COMP%]{color:#170}.cm-s-default[_ngcontent-%COMP%]   .cm-attribute[_ngcontent-%COMP%]{color:#00c}.cm-s-default[_ngcontent-%COMP%]   .cm-hr[_ngcontent-%COMP%]{color:#999}.cm-s-default[_ngcontent-%COMP%]   .cm-link[_ngcontent-%COMP%]{color:#00c}.cm-s-default[_ngcontent-%COMP%]   .cm-error[_ngcontent-%COMP%], .cm-invalidchar[_ngcontent-%COMP%]{color:red}.CodeMirror-composing[_ngcontent-%COMP%]{border-bottom:2px solid}div.CodeMirror[_ngcontent-%COMP%]   span.CodeMirror-matchingbracket[_ngcontent-%COMP%]{color:#0b0}div.CodeMirror[_ngcontent-%COMP%]   span.CodeMirror-nonmatchingbracket[_ngcontent-%COMP%]{color:#a22}.CodeMirror-matchingtag[_ngcontent-%COMP%]{background:#ff96004d}.CodeMirror-activeline-background[_ngcontent-%COMP%]{background:#e8f2ff}.CodeMirror[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll[_ngcontent-%COMP%]{overflow:scroll!important;margin-bottom:-50px;margin-right:-50px;padding-bottom:50px;height:100%;outline:none;position:relative}.CodeMirror-sizer[_ngcontent-%COMP%]{position:relative;border-right:50px solid transparent}.CodeMirror-vscrollbar[_ngcontent-%COMP%], .CodeMirror-hscrollbar[_ngcontent-%COMP%], .CodeMirror-scrollbar-filler[_ngcontent-%COMP%], .CodeMirror-gutter-filler[_ngcontent-%COMP%]{position:absolute;z-index:6;display:none;outline:none}.CodeMirror-vscrollbar[_ngcontent-%COMP%]{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar[_ngcontent-%COMP%]{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler[_ngcontent-%COMP%]{right:0;bottom:0}.CodeMirror-gutter-filler[_ngcontent-%COMP%]{left:0;bottom:0}.CodeMirror-gutters[_ngcontent-%COMP%]{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter[_ngcontent-%COMP%]{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-50px}.CodeMirror-gutter-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt[_ngcontent-%COMP%]{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{background-color:transparent}.CodeMirror-gutter-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-selection{background-color:transparent}.CodeMirror-lines[_ngcontent-%COMP%]{cursor:text;min-height:1px}.CodeMirror[_ngcontent-%COMP%]   pre.CodeMirror-line[_ngcontent-%COMP%], .CodeMirror[_ngcontent-%COMP%]   pre.CodeMirror-line-like[_ngcontent-%COMP%]{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap[_ngcontent-%COMP%]   pre.CodeMirror-line[_ngcontent-%COMP%], .CodeMirror-wrap[_ngcontent-%COMP%]   pre.CodeMirror-line-like[_ngcontent-%COMP%]{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.CodeMirror-linewidget[_ngcontent-%COMP%]{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{direction:rtl}.CodeMirror-code[_ngcontent-%COMP%]{outline:none}.CodeMirror-scroll[_ngcontent-%COMP%], .CodeMirror-sizer[_ngcontent-%COMP%], .CodeMirror-gutter[_ngcontent-%COMP%], .CodeMirror-gutters[_ngcontent-%COMP%], .CodeMirror-linenumber[_ngcontent-%COMP%]{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure[_ngcontent-%COMP%]{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor[_ngcontent-%COMP%]{position:absolute;pointer-events:none}.CodeMirror-measure[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{position:static}div.CodeMirror-cursors[_ngcontent-%COMP%]{visibility:hidden;position:relative;z-index:3}div.CodeMirror-dragcursors[_ngcontent-%COMP%], .CodeMirror-focused[_ngcontent-%COMP%]   div.CodeMirror-cursors[_ngcontent-%COMP%]{visibility:visible}.CodeMirror-selected[_ngcontent-%COMP%]{background:#d9d9d9}.CodeMirror-focused[_ngcontent-%COMP%]   .CodeMirror-selected[_ngcontent-%COMP%]{background:#d7d4f0}.CodeMirror-crosshair[_ngcontent-%COMP%]{cursor:crosshair}.CodeMirror-line[_ngcontent-%COMP%]::selection, .CodeMirror-line[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]::selection, .CodeMirror-line[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]::selection{background:#d7d4f0}.CodeMirror-line[_ngcontent-%COMP%]::-moz-selection, .CodeMirror-line[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]::-moz-selection, .CodeMirror-line[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]::-moz-selection{background:#d7d4f0}.cm-searching[_ngcontent-%COMP%]{background-color:#ffa;background-color:#ff06}.cm-force-border[_ngcontent-%COMP%]{padding-right:.1px}@media print{.CodeMirror[_ngcontent-%COMP%]   div.CodeMirror-cursors[_ngcontent-%COMP%]{visibility:hidden}}.cm-tab-wrap-hack[_ngcontent-%COMP%]:after{content:""}span.CodeMirror-selectedtext[_ngcontent-%COMP%]{background:none}.cm-s-hopscotch.CodeMirror[_ngcontent-%COMP%]{background:#322931;color:#d5d3d5}.cm-s-hopscotch[_ngcontent-%COMP%]   div.CodeMirror-selected[_ngcontent-%COMP%]{background:#433b42!important}.cm-s-hopscotch[_ngcontent-%COMP%]   .CodeMirror-gutters[_ngcontent-%COMP%]{background:#322931;border-right:0px}.cm-s-hopscotch[_ngcontent-%COMP%]   .CodeMirror-linenumber[_ngcontent-%COMP%]{color:#797379}.cm-s-hopscotch[_ngcontent-%COMP%]   .CodeMirror-cursor[_ngcontent-%COMP%]{border-left:1px solid #989498!important}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-comment[_ngcontent-%COMP%]{color:#b33508}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-atom[_ngcontent-%COMP%], .cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-number[_ngcontent-%COMP%]{color:#c85e7c}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-property[_ngcontent-%COMP%], .cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-attribute[_ngcontent-%COMP%]{color:#8fc13e}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-keyword[_ngcontent-%COMP%]{color:#dd464c}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-string[_ngcontent-%COMP%]{color:#fdcc59}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-variable[_ngcontent-%COMP%]{color:#8fc13e}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-variable-2[_ngcontent-%COMP%]{color:#1290bf}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-def[_ngcontent-%COMP%]{color:#fd8b19}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-error[_ngcontent-%COMP%]{background:#dd464c;color:#989498}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-bracket[_ngcontent-%COMP%]{color:#d5d3d5}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-tag[_ngcontent-%COMP%]{color:#dd464c}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-link[_ngcontent-%COMP%]{color:#c85e7c}.cm-s-hopscotch[_ngcontent-%COMP%]   .CodeMirror-matchingbracket[_ngcontent-%COMP%]{text-decoration:underline;color:#fff!important}.cm-s-hopscotch[_ngcontent-%COMP%]   .CodeMirror-activeline-background[_ngcontent-%COMP%]{background:#302020}.sp-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:inline-block;z-index:9999994;overflow:hidden}.sp-container.sp-flat[_ngcontent-%COMP%]{position:relative}.sp-container[_ngcontent-%COMP%], .sp-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.sp-top[_ngcontent-%COMP%]{position:relative;width:100%;display:inline-block}.sp-top-inner[_ngcontent-%COMP%]{position:absolute;inset:0}.sp-color[_ngcontent-%COMP%]{position:absolute;inset:0 20% 0 0}.sp-hue[_ngcontent-%COMP%]{position:absolute;inset:0 0 0 84%;height:100%}.sp-clear-enabled[_ngcontent-%COMP%]   .sp-hue[_ngcontent-%COMP%]{top:33px;height:77.5%}.sp-fill[_ngcontent-%COMP%]{padding-top:80%}.sp-sat[_ngcontent-%COMP%], .sp-val[_ngcontent-%COMP%]{position:absolute;inset:0}.sp-alpha-enabled[_ngcontent-%COMP%]   .sp-top[_ngcontent-%COMP%]{margin-bottom:18px}.sp-alpha-enabled[_ngcontent-%COMP%]   .sp-alpha[_ngcontent-%COMP%]{display:block}.sp-alpha-handle[_ngcontent-%COMP%]{position:absolute;top:-4px;bottom:-4px;width:6px;left:50%;cursor:pointer;border:1px solid #000;background:#fff;opacity:.8}.sp-alpha[_ngcontent-%COMP%]{display:none;position:absolute;bottom:-14px;right:0;left:0;height:8px}.sp-alpha-inner[_ngcontent-%COMP%]{border:solid 1px #333}.sp-clear[_ngcontent-%COMP%]{display:none}.sp-clear.sp-clear-display[_ngcontent-%COMP%]{background-position:center}.sp-clear-enabled[_ngcontent-%COMP%]   .sp-clear[_ngcontent-%COMP%]{display:block;position:absolute;inset:0 0 0 84%;height:28px}.sp-container[_ngcontent-%COMP%], .sp-replacer[_ngcontent-%COMP%], .sp-preview[_ngcontent-%COMP%], .sp-dragger[_ngcontent-%COMP%], .sp-slider[_ngcontent-%COMP%], .sp-alpha[_ngcontent-%COMP%], .sp-clear[_ngcontent-%COMP%], .sp-alpha-handle[_ngcontent-%COMP%], .sp-container.sp-dragging[_ngcontent-%COMP%]   .sp-input[_ngcontent-%COMP%], .sp-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:-moz-none;-o-user-select:none;user-select:none}.sp-container.sp-input-disabled[_ngcontent-%COMP%]   .sp-input-container[_ngcontent-%COMP%], .sp-container.sp-buttons-disabled[_ngcontent-%COMP%]   .sp-button-container[_ngcontent-%COMP%], .sp-container.sp-palette-buttons-disabled[_ngcontent-%COMP%]   .sp-palette-button-container[_ngcontent-%COMP%], .sp-palette-only[_ngcontent-%COMP%]   .sp-picker-container[_ngcontent-%COMP%], .sp-palette-disabled[_ngcontent-%COMP%]   .sp-palette-container[_ngcontent-%COMP%], .sp-initial-disabled[_ngcontent-%COMP%]   .sp-initial[_ngcontent-%COMP%]{display:none}.sp-sat[_ngcontent-%COMP%]{background-image:-webkit-gradient(linear,0 0,100% 0,from(#fff),to(rgba(204,154,129,0)));background-image:-webkit-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-moz-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-o-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-ms-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:linear-gradient(to right,#fff,#cc9a8100);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(GradientType = 1, startColorstr=#FFFFFFFF, endColorstr=#00CC9A81)";filter:progid:DXImageTransform.Microsoft.gradient(GradientType = 1,startColorstr="#FFFFFFFF",endColorstr="#00CC9A81")}.sp-val[_ngcontent-%COMP%]{background-image:-webkit-gradient(linear,0 100%,0 0,from(#000000),to(rgba(204,154,129,0)));background-image:-webkit-linear-gradient(bottom,#000000,rgba(204,154,129,0));background-image:-moz-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:-o-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:-ms-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:linear-gradient(to top,#000,#cc9a8100);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00CC9A81, endColorstr=#FF000000)";filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00CC9A81",endColorstr="#FF000000")}.sp-hue[_ngcontent-%COMP%]{background:-moz-linear-gradient(top,#ff0000 0%,#ffff00 17%,#00ff00 33%,#00ffff 50%,#0000ff 67%,#ff00ff 83%,#ff0000 100%);background:-ms-linear-gradient(top,#ff0000 0%,#ffff00 17%,#00ff00 33%,#00ffff 50%,#0000ff 67%,#ff00ff 83%,#ff0000 100%);background:-o-linear-gradient(top,#ff0000 0%,#ffff00 17%,#00ff00 33%,#00ffff 50%,#0000ff 67%,#ff00ff 83%,#ff0000 100%);background:-webkit-gradient(linear,left top,left bottom,from(#ff0000),color-stop(.17,#ffff00),color-stop(.33,#00ff00),color-stop(.5,#00ffff),color-stop(.67,#0000ff),color-stop(.83,#ff00ff),to(#ff0000));background:-webkit-linear-gradient(top,#ff0000 0%,#ffff00 17%,#00ff00 33%,#00ffff 50%,#0000ff 67%,#ff00ff 83%,#ff0000 100%);background:linear-gradient(to bottom,red,#ff0 17%,#0f0 33%,#0ff,#00f 67%,#f0f 83%,red)}.sp-1[_ngcontent-%COMP%]{height:17%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ff0000",endColorstr="#ffff00")}.sp-2[_ngcontent-%COMP%]{height:16%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffff00",endColorstr="#00ff00")}.sp-3[_ngcontent-%COMP%]{height:17%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00ff00",endColorstr="#00ffff")}.sp-4[_ngcontent-%COMP%]{height:17%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00ffff",endColorstr="#0000ff")}.sp-5[_ngcontent-%COMP%]{height:16%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#0000ff",endColorstr="#ff00ff")}.sp-6[_ngcontent-%COMP%]{height:17%;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ff00ff",endColorstr="#ff0000")}.sp-hidden[_ngcontent-%COMP%]{display:none!important}.sp-cf[_ngcontent-%COMP%]:before, .sp-cf[_ngcontent-%COMP%]:after{content:"";display:table}.sp-cf[_ngcontent-%COMP%]:after{clear:both}@media (max-device-width: 480px){.sp-color[_ngcontent-%COMP%]{right:40%}.sp-hue[_ngcontent-%COMP%]{left:63%}.sp-fill[_ngcontent-%COMP%]{padding-top:60%}}.sp-dragger[_ngcontent-%COMP%]{border-radius:5px;height:5px;width:5px;border:1px solid #fff;background:#000;cursor:pointer;position:absolute;top:0;left:0}.sp-slider[_ngcontent-%COMP%]{position:absolute;top:0;cursor:pointer;height:3px;left:-1px;right:-1px;border:1px solid #000;background:#fff;opacity:.8}.sp-container[_ngcontent-%COMP%]{border-radius:0;background-color:#ececec;border:solid 1px #f0c49b;padding:0}.sp-container[_ngcontent-%COMP%], .sp-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .sp-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .sp-color[_ngcontent-%COMP%], .sp-hue[_ngcontent-%COMP%], .sp-clear[_ngcontent-%COMP%]{font: 12px Lucida Grande,Lucida Sans Unicode,Lucida Sans,Geneva,Verdana,sans-serif;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}.sp-top[_ngcontent-%COMP%]{margin-bottom:3px}.sp-color[_ngcontent-%COMP%], .sp-hue[_ngcontent-%COMP%], .sp-clear[_ngcontent-%COMP%]{border:solid 1px #666}.sp-input-container[_ngcontent-%COMP%]{float:right;width:100px;margin-bottom:4px}.sp-initial-disabled[_ngcontent-%COMP%]   .sp-input-container[_ngcontent-%COMP%]{width:100%}.sp-input[_ngcontent-%COMP%]{font-size:12px!important;border:1px inset;padding:4px 5px;margin:0;width:100%;background:transparent;border-radius:3px;color:#222}.sp-input[_ngcontent-%COMP%]:focus{border:1px solid orange}.sp-input.sp-validation-error[_ngcontent-%COMP%]{border:1px solid red;background:#fdd}.sp-picker-container[_ngcontent-%COMP%], .sp-palette-container[_ngcontent-%COMP%]{float:left;position:relative;padding:10px 10px 300px;margin-bottom:-290px}.sp-picker-container[_ngcontent-%COMP%]{width:172px;border-left:solid 1px #fff}.sp-palette-container[_ngcontent-%COMP%]{border-right:solid 1px #ccc}.sp-palette-only[_ngcontent-%COMP%]   .sp-palette-container[_ngcontent-%COMP%]{border:0}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%]{display:block;position:relative;float:left;width:24px;height:15px;margin:3px;cursor:pointer;border:solid 2px transparent}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%]:hover, .sp-palette[_ngcontent-%COMP%]   .sp-thumb-el.sp-thumb-active[_ngcontent-%COMP%]{border-color:orange}.sp-thumb-el[_ngcontent-%COMP%]{position:relative}.sp-initial[_ngcontent-%COMP%]{float:left;border:solid 1px #333}.sp-initial[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:30px;height:25px;border:none;display:block;float:left;margin:0}.sp-initial[_ngcontent-%COMP%]   .sp-clear-display[_ngcontent-%COMP%]{background-position:center}.sp-palette-button-container[_ngcontent-%COMP%], .sp-button-container[_ngcontent-%COMP%]{float:right}.sp-replacer[_ngcontent-%COMP%]{margin:0;overflow:hidden;cursor:pointer;padding:4px;display:inline-block;border:solid 1px #91765d;background:#eee;color:#333;vertical-align:middle}.sp-replacer[_ngcontent-%COMP%]:hover, .sp-replacer.sp-active[_ngcontent-%COMP%]{border-color:#f0c49b;color:#111}.sp-replacer.sp-disabled[_ngcontent-%COMP%]{cursor:default;border-color:silver;color:silver}.sp-dd[_ngcontent-%COMP%]{padding:2px 0;height:16px;line-height:16px;float:left;font-size:10px}.sp-preview[_ngcontent-%COMP%]{position:relative;width:25px;height:20px;border:solid 1px #222;margin-right:5px;float:left;z-index:0}.sp-palette[_ngcontent-%COMP%]{max-width:220px}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%]{width:16px;height:16px;margin:2px 1px;border:solid 1px #d0d0d0}.sp-container[_ngcontent-%COMP%]{padding-bottom:0}.sp-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#eee;background-image:-webkit-linear-gradient(top,#eeeeee,#cccccc);background-image:-moz-linear-gradient(top,#eeeeee,#cccccc);background-image:-ms-linear-gradient(top,#eeeeee,#cccccc);background-image:-o-linear-gradient(top,#eeeeee,#cccccc);background-image:linear-gradient(to bottom,#eee,#ccc);border:1px solid #ccc;border-bottom:1px solid #bbb;border-radius:3px;color:#333;font-size:14px;line-height:1;padding:5px 4px;text-align:center;text-shadow:0 1px 0 #eee;vertical-align:middle}.sp-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd;background-image:-webkit-linear-gradient(top,#dddddd,#bbbbbb);background-image:-moz-linear-gradient(top,#dddddd,#bbbbbb);background-image:-ms-linear-gradient(top,#dddddd,#bbbbbb);background-image:-o-linear-gradient(top,#dddddd,#bbbbbb);background-image:linear-gradient(to bottom,#ddd,#bbb);border:1px solid #bbb;border-bottom:1px solid #999;cursor:pointer;text-shadow:0 1px 0 #ddd}.sp-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{border:1px solid #aaa;border-bottom:1px solid #888;-webkit-box-shadow:inset 0 0 5px 2px #aaa,0 1px 0 0 #eee;-moz-box-shadow:inset 0 0 5px 2px #aaa,0 1px 0 0 #eee;-ms-box-shadow:inset 0 0 5px 2px #aaa,0 1px 0 0 #eee;-o-box-shadow:inset 0 0 5px 2px #aaa,0 1px 0 0 #eee;box-shadow:inset 0 0 5px 2px #aaa,0 1px #eee}.sp-cancel[_ngcontent-%COMP%]{font-size:11px;color:#d93f3f!important;margin:0 5px 0 0;padding:2px;vertical-align:middle;text-decoration:none}.sp-cancel[_ngcontent-%COMP%]:hover{color:#d93f3f!important;text-decoration:underline}.sp-palette[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .sp-palette[_ngcontent-%COMP%]   span.sp-thumb-active[_ngcontent-%COMP%]{border-color:#000}.sp-preview[_ngcontent-%COMP%], .sp-alpha[_ngcontent-%COMP%], .sp-thumb-el[_ngcontent-%COMP%]{position:relative;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.sp-preview-inner[_ngcontent-%COMP%], .sp-alpha-inner[_ngcontent-%COMP%], .sp-thumb-inner[_ngcontent-%COMP%]{display:block;position:absolute;inset:0}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-inner[_ngcontent-%COMP%]{background-position:50% 50%;background-repeat:no-repeat}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-light.sp-thumb-active[_ngcontent-%COMP%]   .sp-thumb-inner[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIVJREFUeNpiYBhsgJFMffxAXABlN5JruT4Q3wfi/0DsT64h8UD8HmpIPCWG/KemIfOJCUB+Aoacx6EGBZyHBqI+WsDCwuQ9mhxeg2A210Ntfo8klk9sOMijaURm7yc1UP2RNCMbKE9ODK1HM6iegYLkfx8pligC9lCD7KmRof0ZhjQACDAAceovrtpVBRkAAAAASUVORK5CYII=)}.sp-palette[_ngcontent-%COMP%]   .sp-thumb-dark.sp-thumb-active[_ngcontent-%COMP%]   .sp-thumb-inner[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAMdJREFUOE+tkgsNwzAMRMugEAahEAahEAZhEAqlEAZhEAohEAYh81X2dIm8fKpEspLGvudPOsUYpxE2BIJCroJmEW9qJ+MKaBFhEMNabSy9oIcIPwrB+afvAUFoK4H0tMaQ3XtlrggDhOVVMuT4E5MMG0FBbCEYzjYT7OxLEvIHQLY2zWwQ3D+9luyOQTfKDiFD3iUIfPk8VqrKjgAiSfGFPecrg6HN6m/iBcwiDAo7WiBeawa+Kwh7tZoSCGLMqwlSAzVDhoK+6vH4G0P5wdkAAAAASUVORK5CYII=)}.sp-clear-display[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-image:url(data:image/gif;base64,R0lGODlhFAAUAPcAAAAAAJmZmZ2dnZ6enqKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqurq/Hx8fLy8vT09PX19ff39/j4+Pn5+fr6+vv7+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAUABQAAAihAP9FoPCvoMGDBy08+EdhQAIJCCMybCDAAYUEARBAlFiQQoMABQhKUJBxY0SPICEYHBnggEmDKAuoPMjS5cGYMxHW3IiT478JJA8M/CjTZ0GgLRekNGpwAsYABHIypcAgQMsITDtWJYBR6NSqMico9cqR6tKfY7GeBCuVwlipDNmefAtTrkSzB1RaIAoXodsABiZAEFB06gIBWC1mLVgBa0AAOw==)}.gjs-is__grab[_ngcontent-%COMP%], .gjs-is__grab[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:grab!important}.gjs-is__grabbing[_ngcontent-%COMP%], .gjs-is__grabbing[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;cursor:grabbing!important}.gjs-one-bg[_ngcontent-%COMP%]{background-color:var(--gjs-primary-color)}.gjs-one-color[_ngcontent-%COMP%], .gjs-one-color-h[_ngcontent-%COMP%]:hover{color:var(--gjs-primary-color)}.gjs-two-bg[_ngcontent-%COMP%]{background-color:var(--gjs-secondary-color)}.gjs-two-color[_ngcontent-%COMP%], .gjs-two-color-h[_ngcontent-%COMP%]:hover{color:var(--gjs-secondary-color)}.gjs-three-bg[_ngcontent-%COMP%]{background-color:var(--gjs-tertiary-color)}.gjs-three-color[_ngcontent-%COMP%], .gjs-three-color-h[_ngcontent-%COMP%]:hover{color:var(--gjs-tertiary-color)}.gjs-four-bg[_ngcontent-%COMP%]{background-color:var(--gjs-quaternary-color)}.gjs-four-color[_ngcontent-%COMP%], .gjs-four-color-h[_ngcontent-%COMP%]:hover{color:var(--gjs-quaternary-color)}.gjs-danger-bg[_ngcontent-%COMP%]{background-color:var(--gjs-color-red)}.gjs-danger-color[_ngcontent-%COMP%], .gjs-danger-color-h[_ngcontent-%COMP%]:hover{color:var(--gjs-color-red)}.gjs-bg-main[_ngcontent-%COMP%], .gjs-sm-colorp-c[_ngcontent-%COMP%], .gjs-off-prv[_ngcontent-%COMP%]{background-color:var(--gjs-main-color)}.gjs-color-main[_ngcontent-%COMP%], .gjs-sm-stack[_ngcontent-%COMP%]   #gjs-sm-add[_ngcontent-%COMP%], .gjs-off-prv[_ngcontent-%COMP%]{color:var(--gjs-font-color);fill:var(--gjs-font-color)}.gjs-color-active[_ngcontent-%COMP%]{color:var(--gjs-font-color-active);fill:var(--gjs-font-color-active)}.gjs-color-warn[_ngcontent-%COMP%]{color:var(--gjs-color-warn);fill:var(--gjs-color-warn)}.gjs-color-hl[_ngcontent-%COMP%]{color:var(--gjs-color-highlight);fill:var(--gjs-color-highlight)}.gjs-invis-invis[_ngcontent-%COMP%], .gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-new[_ngcontent-%COMP%], .gjs-no-app[_ngcontent-%COMP%]{background-color:transparent;border:none;color:inherit}.gjs-no-app[_ngcontent-%COMP%]{height:10px}.gjs-test[_ngcontent-%COMP%]::btn{color:"#fff"}.opac50[_ngcontent-%COMP%]{opacity:.5;filter:alpha(opacity=50)}.gjs-checker-bg[_ngcontent-%COMP%], .gjs-field-colorp-c[_ngcontent-%COMP%], .checker-bg[_ngcontent-%COMP%], .gjs-sm-layer-preview[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.gjs-no-user-select[_ngcontent-%COMP%], .gjs-rte-toolbar[_ngcontent-%COMP%], .gjs-layer-name[_ngcontent-%COMP%], .gjs-grabbing[_ngcontent-%COMP%], .gjs-grabbing[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.gjs-no-pointer-events[_ngcontent-%COMP%], .gjs-margin-v-el[_ngcontent-%COMP%], .gjs-padding-v-el[_ngcontent-%COMP%], .gjs-fixedmargin-v-el[_ngcontent-%COMP%], .gjs-fixedpadding-v-el[_ngcontent-%COMP%], .gjs-resizer-c[_ngcontent-%COMP%]{pointer-events:none}.gjs-bdrag[_ngcontent-%COMP%]{pointer-events:none!important;position:absolute!important;z-index:10!important;width:auto}.gjs-drag-helper[_ngcontent-%COMP%]{background-color:var(--gjs-color-blue)!important;pointer-events:none!important;position:absolute!important;z-index:10!important;transform:scale(.3)!important;transform-origin:top left!important;-webkit-transform-origin:top left!important;margin:15px!important;transition:none!important;outline:none!important}.gjs-grabbing[_ngcontent-%COMP%], .gjs-grabbing[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:grabbing!important;cursor:-webkit-grabbing!important}.gjs-grabbing[_ngcontent-%COMP%]{overflow:hidden}.gjs-off-prv[_ngcontent-%COMP%]{position:relative;z-index:10;padding:5px;cursor:pointer}.gjs-editor-cont[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--gjs-secondary-dark-color)}.gjs-editor-cont[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#fff3}.gjs-editor-cont[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]:root{--gjs-main-color: #444;--gjs-primary-color: #444;--gjs-secondary-color: #ddd;--gjs-tertiary-color: #804f7b;--gjs-quaternary-color: #d278c9;--gjs-font-color: #ddd;--gjs-font-color-active: #f8f8f8;--gjs-main-dark-color: rgba(0, 0, 0, .2);--gjs-secondary-dark-color: rgba(0, 0, 0, .1);--gjs-main-light-color: rgba(255, 255, 255, .1);--gjs-secondary-light-color: rgba(255, 255, 255, .7);--gjs-soft-light-color: rgba(255, 255, 255, .015);--gjs-color-blue: #3b97e3;--gjs-color-red: #dd3636;--gjs-color-yellow: #ffca6f;--gjs-color-green: #62c462;--gjs-left-width: 15%;--gjs-color-highlight: #71b7f1;--gjs-color-warn: #ffca6f;--gjs-handle-margin: -5px;--gjs-light-border: rgba(255, 255, 255, .05);--gjs-arrow-color: rgba(255, 255, 255, .7);--gjs-dark-text-shadow: rgba(0, 0, 0, .2);--gjs-color-input-padding: 22px;--gjs-input-padding: 5px;--gjs-padding-elem-classmanager: 5px 6px;--gjs-upload-padding: 150px 10px;--gjs-animation-duration: .2s;--gjs-main-font: Helvetica, sans-serif;--gjs-font-size: .75rem;--gjs-placeholder-background-color: var(--gjs-color-green);--gjs-canvas-top: 40px;--gjs-flex-item-gap: 5px}.clear[_ngcontent-%COMP%]{clear:both}.no-select[_ngcontent-%COMP%], .gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-close[_ngcontent-%COMP%], .gjs-category-title[_ngcontent-%COMP%], .gjs-layer-title[_ngcontent-%COMP%], .gjs-block-category[_ngcontent-%COMP%]   .gjs-title[_ngcontent-%COMP%], .gjs-sm-sector-title[_ngcontent-%COMP%], .gjs-trait-category[_ngcontent-%COMP%]   .gjs-title[_ngcontent-%COMP%], .gjs-com-no-select[_ngcontent-%COMP%], .gjs-com-no-select[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.gjs-no-touch-actions[_ngcontent-%COMP%]{touch-action:none}.gjs-disabled[_ngcontent-%COMP%]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;opacity:.5;filter:alpha(opacity=50)}.gjs-editor[_ngcontent-%COMP%]{font-family:var(--gjs-main-font);font-size:var(--gjs-font-size);position:relative;box-sizing:border-box;height:100%}.gjs-freezed[_ngcontent-%COMP%]{opacity:.5;filter:alpha(opacity=50);pointer-events:none}.gjs-traits-label[_ngcontent-%COMP%]{border-bottom:1px solid var(--gjs-main-dark-color);font-weight:lighter;margin-bottom:5px;padding:10px;text-align:left}.gjs-label-wrp[_ngcontent-%COMP%]{width:30%;min-width:30%}.gjs-field-wrp[_ngcontent-%COMP%]{flex-grow:1}.gjs-traits-c[_ngcontent-%COMP%], .gjs-traits-cs[_ngcontent-%COMP%], .gjs-trait-categories[_ngcontent-%COMP%]{display:flex;flex-direction:column}.gjs-trait-category[_ngcontent-%COMP%]{width:100%}.gjs-trait-category[_ngcontent-%COMP%]   .gjs-caret-icon[_ngcontent-%COMP%]{margin-right:5px}.gjs-trt-header[_ngcontent-%COMP%]{font-weight:lighter;padding:10px}.gjs-trt-trait[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;padding:5px 10px;font-weight:lighter;align-items:center;text-align:left;gap:5px}.gjs-trt-traits[_ngcontent-%COMP%]{font-size:var(--gjs-font-size)}.gjs-trt-trait[_ngcontent-%COMP%]   .gjs-label[_ngcontent-%COMP%]{text-align:left;text-overflow:ellipsis;overflow:hidden}.gjs-guide-info[_ngcontent-%COMP%]{position:absolute}.gjs-guide-info__content[_ngcontent-%COMP%]{position:absolute;height:100%;display:flex;width:100%;padding:5px}.gjs-guide-info__line[_ngcontent-%COMP%]{position:relative;margin:auto}.gjs-guide-info__line[_ngcontent-%COMP%]:before, .gjs-guide-info__line[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;background-color:inherit}.gjs-guide-info__y[_ngcontent-%COMP%]{padding:0 5px}.gjs-guide-info__y[_ngcontent-%COMP%]   .gjs-guide-info__content[_ngcontent-%COMP%]{justify-content:center}.gjs-guide-info__y[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]{width:100%;height:1px}.gjs-guide-info__y[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:before, .gjs-guide-info__y[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:after{width:1px;height:10px;top:0;bottom:0;left:0;margin:auto}.gjs-guide-info__y[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:after{left:auto;right:0}.gjs-guide-info__x[_ngcontent-%COMP%]{padding:5px 0}.gjs-guide-info__x[_ngcontent-%COMP%]   .gjs-guide-info__content[_ngcontent-%COMP%]{align-items:center}.gjs-guide-info__x[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]{height:100%;width:1px}.gjs-guide-info__x[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:before, .gjs-guide-info__x[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:after{width:10px;height:1px;left:0;right:0;top:0;margin:auto;transform:translate(-50%)}.gjs-guide-info__x[_ngcontent-%COMP%]   .gjs-guide-info__line[_ngcontent-%COMP%]:after{top:auto;bottom:0}.gjs-badge[_ngcontent-%COMP%]{white-space:nowrap}.gjs-badge__icon[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;width:15px;height:15px}.gjs-badge__icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.gjs-badge__name[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.gjs-frame-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;left:0;right:0;margin:auto}.gjs-frame-wrapper--anim[_ngcontent-%COMP%]{transition:width .35s ease,height .35s ease}.gjs-frame-wrapper__top[_ngcontent-%COMP%]{transform:translateY(-100%) translate(-50%);display:flex;padding:5px 0;position:absolute;width:100%;left:50%;top:0}.gjs-frame-wrapper__top-r[_ngcontent-%COMP%]{margin-left:auto}.gjs-frame-wrapper__left[_ngcontent-%COMP%]{position:absolute;left:0;transform:translate(-100%) translateY(-50%);height:100%;top:50%}.gjs-frame-wrapper__bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;transform:translateY(100%) translate(-50%);width:100%;left:50%}.gjs-frame-wrapper__right[_ngcontent-%COMP%]{position:absolute;right:0;transform:translate(100%) translateY(-50%);height:100%;top:50%}.gjs-frame-wrapper__icon[_ngcontent-%COMP%]{width:24px;cursor:pointer}.gjs-frame-wrapper__icon[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{fill:currentColor}.gjs-padding-v-top[_ngcontent-%COMP%], .gjs-fixedpadding-v-top[_ngcontent-%COMP%]{width:100%;top:0;left:0}.gjs-padding-v-right[_ngcontent-%COMP%], .gjs-fixedpadding-v-right[_ngcontent-%COMP%]{right:0}.gjs-padding-v-bottom[_ngcontent-%COMP%], .gjs-fixedpadding-v-bottom[_ngcontent-%COMP%]{width:100%;left:0;bottom:0}.gjs-padding-v-left[_ngcontent-%COMP%], .gjs-fixedpadding-v-left[_ngcontent-%COMP%]{left:0}.gjs-cv-canvas[_ngcontent-%COMP%]{box-sizing:border-box;width:calc(100% - var(--gjs-left-width));height:calc(100% - var(--gjs-canvas-top));bottom:0;overflow:hidden;z-index:1;position:absolute;left:0;top:var(--gjs-canvas-top)}.gjs-cv-canvas-bg[_ngcontent-%COMP%]{background-color:#00000026}.gjs-cv-canvas.gjs-cui[_ngcontent-%COMP%]{width:100%;height:100%;top:0}.gjs-cv-canvas.gjs-is__grab[_ngcontent-%COMP%]   .gjs-cv-canvas__frames[_ngcontent-%COMP%], .gjs-cv-canvas.gjs-is__grabbing[_ngcontent-%COMP%]   .gjs-cv-canvas__frames[_ngcontent-%COMP%]{pointer-events:none}.gjs-cv-canvas__frames[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.gjs-cv-canvas__spots[_ngcontent-%COMP%]{position:absolute;pointer-events:none;z-index:1}.gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-ghost[_ngcontent-%COMP%]{display:none;pointer-events:none;background-color:#5b5b5b;border:2px dashed #ccc;position:absolute;z-index:10;opacity:.55;filter:alpha(opacity=55)}.gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-highlighter[_ngcontent-%COMP%], .gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-highlighter-sel[_ngcontent-%COMP%]{position:absolute;outline:1px solid var(--gjs-color-blue);outline-offset:-1px;pointer-events:none;width:100%;height:100%}.gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-highlighter-warning[_ngcontent-%COMP%]{outline:3px solid var(--gjs-color-yellow)}.gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-highlighter-sel[_ngcontent-%COMP%]{outline:2px solid var(--gjs-color-blue);outline-offset:-2px}.gjs-cv-canvas[_ngcontent-%COMP%]   #gjs-tools[_ngcontent-%COMP%], .gjs-cv-canvas[_ngcontent-%COMP%]   .gjs-tools[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;outline:none;z-index:1}.gjs-cv-canvas[_ngcontent-%COMP%]   #gjs-tools[_ngcontent-%COMP%]{z-index:2}.gjs-cv-canvas[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.gjs-frame[_ngcontent-%COMP%]{outline:medium none;height:100%;width:100%;border:none;margin:auto;display:block;transition:width .35s ease,height .35s ease;position:absolute;inset:0}.gjs-toolbar[_ngcontent-%COMP%]{position:absolute;background-color:var(--gjs-color-blue);white-space:nowrap;color:#fff;z-index:10;top:0;left:0}.gjs-toolbar-item[_ngcontent-%COMP%]{width:26px;padding:5px;cursor:pointer;display:inline-block}.gjs-toolbar-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor;vertical-align:middle}.gjs-resizer-c[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:9}.gjs-margin-v-el[_ngcontent-%COMP%], .gjs-padding-v-el[_ngcontent-%COMP%], .gjs-fixedmargin-v-el[_ngcontent-%COMP%], .gjs-fixedpadding-v-el[_ngcontent-%COMP%]{opacity:.1;filter:alpha(opacity=10);position:absolute;background-color:#ff0}.gjs-fixedmargin-v-el[_ngcontent-%COMP%], .gjs-fixedpadding-v-el[_ngcontent-%COMP%]{opacity:.2;filter:alpha(opacity=20)}.gjs-padding-v-el[_ngcontent-%COMP%], .gjs-fixedpadding-v-el[_ngcontent-%COMP%]{background-color:navy}.gjs-resizer-h[_ngcontent-%COMP%]{pointer-events:all;position:absolute;border:3px solid var(--gjs-color-blue);width:10px;height:10px;background-color:#fff;margin:var(--gjs-handle-margin)}.gjs-resizer-h-tl[_ngcontent-%COMP%]{top:0;left:0;cursor:nwse-resize}.gjs-resizer-h-tr[_ngcontent-%COMP%]{top:0;right:0;cursor:nesw-resize}.gjs-resizer-h-tc[_ngcontent-%COMP%]{top:0;margin:var(--gjs-handle-margin) auto;left:0;right:0;cursor:ns-resize}.gjs-resizer-h-cl[_ngcontent-%COMP%]{left:0;margin:auto var(--gjs-handle-margin);top:0;bottom:0;cursor:ew-resize}.gjs-resizer-h-cr[_ngcontent-%COMP%]{margin:auto var(--gjs-handle-margin);top:0;bottom:0;right:0;cursor:ew-resize}.gjs-resizer-h-bl[_ngcontent-%COMP%]{bottom:0;left:0;cursor:nesw-resize}.gjs-resizer-h-bc[_ngcontent-%COMP%]{bottom:0;margin:var(--gjs-handle-margin) auto;left:0;right:0;cursor:ns-resize}.gjs-resizer-h-br[_ngcontent-%COMP%]{bottom:0;right:0;cursor:nwse-resize}.gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h[_ngcontent-%COMP%]{background-color:#0003;border:none;opacity:0;transition:opacity .25s}.gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h[_ngcontent-%COMP%]:hover{opacity:1}.gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h-tc[_ngcontent-%COMP%], .gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h-bc[_ngcontent-%COMP%]{margin:0 auto;width:100%}.gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h-cr[_ngcontent-%COMP%], .gjs-pn-panel[_ngcontent-%COMP%]   .gjs-resizer-h-cl[_ngcontent-%COMP%]{margin:auto 0;height:100%}.gjs-resizing[_ngcontent-%COMP%]   .gjs-highlighter[_ngcontent-%COMP%], .gjs-resizing[_ngcontent-%COMP%]   .gjs-badge[_ngcontent-%COMP%]{display:none!important}.gjs-resizing-tl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:nwse-resize!important}.gjs-resizing-tr[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:nesw-resize!important}.gjs-resizing-tc[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:ns-resize!important}.gjs-resizing-cl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .gjs-resizing-cr[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:ew-resize!important}.gjs-resizing-bl[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:nesw-resize!important}.gjs-resizing-bc[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:ns-resize!important}.gjs-resizing-br[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:nwse-resize!important}.btn-cl[_ngcontent-%COMP%], .gjs-am-close[_ngcontent-%COMP%], .gjs-mdl-btn-close[_ngcontent-%COMP%]{opacity:.3;filter:alpha(opacity=30);font-size:25px;cursor:pointer}.btn-cl[_ngcontent-%COMP%]:hover, .gjs-am-close[_ngcontent-%COMP%]:hover, .gjs-mdl-btn-close[_ngcontent-%COMP%]:hover{opacity:.7;filter:alpha(opacity=70)}.no-dots[_ngcontent-%COMP%], .ui-resizable-handle[_ngcontent-%COMP%]{border:none!important;margin:0!important;outline:none!important}.gjs-com-dashed[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{outline:1px dashed #888;outline-offset:-2px;box-sizing:border-box}.gjs-com-badge[_ngcontent-%COMP%], .gjs-badge[_ngcontent-%COMP%]{pointer-events:none;background-color:var(--gjs-color-blue);color:#fff;padding:2px 5px;position:absolute;z-index:1;font-size:12px;outline:none;display:none}.gjs-badge-warning[_ngcontent-%COMP%]{background-color:var(--gjs-color-yellow)}.gjs-placeholder[_ngcontent-%COMP%], .gjs-com-placeholder[_ngcontent-%COMP%]{position:absolute;z-index:10;pointer-events:none;display:none}.gjs-placeholder[_ngcontent-%COMP%]{border-style:solid!important;outline:none;box-sizing:border-box;transition:top var(--gjs-animation-duration),left var(--gjs-animation-duration),width var(--gjs-animation-duration),height var(--gjs-animation-duration)}.gjs-placeholder.horizontal[_ngcontent-%COMP%], .gjs-com-placeholder.horizontal[_ngcontent-%COMP%]{border-color:transparent var(--gjs-placeholder-background-color);border-width:3px 5px;margin:-3px 0 0}.gjs-placeholder.vertical[_ngcontent-%COMP%], .gjs-com-placeholder.vertical[_ngcontent-%COMP%]{border-color:var(--gjs-placeholder-background-color) transparent;border-width:5px 3px;margin:0 0 0 -3px}.gjs-placeholder-int[_ngcontent-%COMP%], .gjs-com-placeholder-int[_ngcontent-%COMP%]{background-color:var(--gjs-placeholder-background-color);box-shadow:0 0 3px #0003;height:100%;width:100%;pointer-events:none;padding:1.5px;outline:none}.gjs-pn-panel[_ngcontent-%COMP%]{display:inline-block;position:absolute;box-sizing:border-box;text-align:center;padding:5px;z-index:3}.gjs-pn-panel[_ngcontent-%COMP%]   .icon-undo[_ngcontent-%COMP%], .gjs-pn-panel[_ngcontent-%COMP%]   .icon-redo[_ngcontent-%COMP%]{font-size:20px;height:30px;width:25px}.gjs-pn-commands[_ngcontent-%COMP%]{width:calc(100% - var(--gjs-left-width));left:0;top:0;box-shadow:0 0 5px var(--gjs-main-dark-color)}.gjs-pn-options[_ngcontent-%COMP%]{right:var(--gjs-left-width);top:0}.gjs-pn-views[_ngcontent-%COMP%]{border-bottom:2px solid var(--gjs-main-dark-color);right:0;width:var(--gjs-left-width);z-index:4}.gjs-pn-views-container[_ngcontent-%COMP%]{height:100%;padding:42px 0 0;right:0;width:var(--gjs-left-width);overflow:auto;box-shadow:0 0 5px var(--gjs-main-dark-color)}.gjs-pn-buttons[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between}.gjs-pn-btn[_ngcontent-%COMP%]{box-sizing:border-box;min-height:30px;min-width:30px;line-height:21px;background-color:transparent;border:none;font-size:18px;margin-right:5px;border-radius:2px;padding:4px;position:relative;cursor:pointer}.gjs-pn-btn.gjs-pn-active[_ngcontent-%COMP%]{background-color:#00000026;box-shadow:0 0 3px #00000040 inset}.gjs-pn-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.gjs-label[_ngcontent-%COMP%]{line-height:18px}.gjs-fields[_ngcontent-%COMP%]{display:flex}.gjs-select[_ngcontent-%COMP%]{padding:0;width:100%}.gjs-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-right:10px}.gjs-select[_ngcontent-%COMP%]:-moz-focusring, .gjs-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--gjs-secondary-light-color)}.gjs-input[_ngcontent-%COMP%]:focus, .gjs-button[_ngcontent-%COMP%]:focus, .gjs-btn-prim[_ngcontent-%COMP%]:focus, .gjs-select[_ngcontent-%COMP%]:focus, .gjs-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.gjs-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;color:inherit;border:none;background-color:transparent;box-sizing:border-box;width:100%;position:relative;padding:var(--gjs-input-padding);z-index:1}.gjs-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .gjs-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .gjs-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none}.gjs-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.gjs-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .gjs-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.gjs-field-range[_ngcontent-%COMP%]{flex:9 1 auto}.gjs-field-integer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}.gjs-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-field-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-sm-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-fields[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-sm-unit[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--gjs-main-color);color:var(--gjs-font-color)}.gjs-field[_ngcontent-%COMP%]{background-color:var(--gjs-main-dark-color);border:none;box-shadow:none;border-radius:2px;box-sizing:border-box;padding:0;position:relative}.gjs-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.gjs-field[_ngcontent-%COMP%]   .gjs-sel-arrow[_ngcontent-%COMP%]{height:100%;width:9px;position:absolute;right:0;top:0;z-index:0}.gjs-field[_ngcontent-%COMP%]   .gjs-d-s-arrow[_ngcontent-%COMP%]{bottom:0;top:0;margin:auto;right:var(--gjs-input-padding);border-top:4px solid var(--gjs-arrow-color);position:absolute;height:0;width:0;border-left:3px solid transparent;border-right:4px solid transparent;cursor:pointer}.gjs-field-arrows[_ngcontent-%COMP%]{position:absolute;cursor:ns-resize;margin:auto;height:20px;width:9px;z-index:10;bottom:0;right:calc(var(--gjs-input-padding) - 2px);top:0}.gjs-field-color[_ngcontent-%COMP%], .gjs-field-radio[_ngcontent-%COMP%]{width:100%}.gjs-field-color[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:var(--gjs-color-input-padding);box-sizing:border-box}.gjs-field-colorp[_ngcontent-%COMP%]{border-left:1px solid var(--gjs-main-dark-color);box-sizing:border-box;height:100%;padding:2px;position:absolute;right:0;top:0;width:var(--gjs-color-input-padding);z-index:10}.gjs-field-colorp[_ngcontent-%COMP%]   .gjs-checker-bg[_ngcontent-%COMP%], .gjs-field-colorp[_ngcontent-%COMP%]   .gjs-field-colorp-c[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:1px}.gjs-field-colorp-c[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.gjs-field-color-picker[_ngcontent-%COMP%]{background-color:var(--gjs-font-color);cursor:pointer;height:100%;width:100%;box-shadow:0 0 1px var(--gjs-main-dark-color);border-radius:1px;position:absolute;top:0}.gjs-field-checkbox[_ngcontent-%COMP%]{padding:0;width:17px;height:17px;display:block;cursor:pointer}.gjs-field-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.gjs-field-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .gjs-chk-icon[_ngcontent-%COMP%]{border-color:#ffffff80;border-width:0 2px 2px 0;border-style:solid}.gjs-radio-item[_ngcontent-%COMP%]{flex:1 1 auto;text-align:center;border-left:1px solid var(--gjs-dark-text-shadow)}.gjs-radio-item[_ngcontent-%COMP%]:first-child{border:none}.gjs-radio-item[_ngcontent-%COMP%]:hover{background:var(--gjs-main-dark-color)}.gjs-radio-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.gjs-radio-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .gjs-radio-item-label[_ngcontent-%COMP%]{background-color:#fff3}.gjs-radio-items[_ngcontent-%COMP%]{display:flex}.gjs-radio-item-label[_ngcontent-%COMP%]{cursor:pointer;display:block;padding:var(--gjs-input-padding)}.gjs-field-units[_ngcontent-%COMP%]{position:absolute;margin:auto;right:10px;bottom:0;top:0}.gjs-field-unit[_ngcontent-%COMP%]{position:absolute;right:10px;top:3px;font-size:10px;color:var(--gjs-arrow-color);cursor:pointer}.gjs-input-unit[_ngcontent-%COMP%]{text-align:center}.gjs-field-arrow-u[_ngcontent-%COMP%], .gjs-field-arrow-d[_ngcontent-%COMP%]{position:absolute;height:0;width:0;border-left:3px solid transparent;border-right:4px solid transparent;border-top:4px solid var(--gjs-arrow-color);bottom:4px;cursor:pointer}.gjs-field-arrow-u[_ngcontent-%COMP%]{border-bottom:4px solid var(--gjs-arrow-color);border-top:none;top:4px}.gjs-field-select[_ngcontent-%COMP%]{padding:0}.gjs-field-range[_ngcontent-%COMP%]{background-color:transparent;border:none;box-shadow:none;padding:0}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;height:100%}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-4px;height:10px;width:10px;border:1px solid var(--gjs-main-dark-color);border-radius:100%;background-color:var(--gjs-font-color);cursor:pointer}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-range-thumb{height:10px;width:10px;border:1px solid var(--gjs-main-dark-color);border-radius:100%;background-color:var(--gjs-font-color);cursor:pointer}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-thumb{height:10px;width:10px;border:1px solid var(--gjs-main-dark-color);border-radius:100%;background-color:var(--gjs-font-color);cursor:pointer}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-range-track{background-color:var(--gjs-main-dark-color);border-radius:1px;margin-top:3px;height:3px}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-slider-runnable-track{background-color:var(--gjs-main-dark-color);border-radius:1px;margin-top:3px;height:3px}.gjs-field-range[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-track{background-color:var(--gjs-main-dark-color);border-radius:1px;margin-top:3px;height:3px}.gjs-btn-prim[_ngcontent-%COMP%]{color:inherit;background-color:var(--gjs-main-light-color);border-radius:2px;padding:3px 6px;padding:var(--gjs-input-padding);cursor:pointer;border:none}.gjs-btn-prim[_ngcontent-%COMP%]:active{background-color:var(--gjs-main-light-color)}.gjs-btn--full[_ngcontent-%COMP%]{width:100%}.gjs-chk-icon[_ngcontent-%COMP%]{-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);transform:rotate(45deg);box-sizing:border-box;display:block;height:14px;margin:0 5px;width:6px}.gjs-add-trasp[_ngcontent-%COMP%]{background:none;border:none;color:var(--gjs-font-color);cursor:pointer;font-size:1em;border-radius:2px;opacity:.75;filter:alpha(opacity=75)}.gjs-add-trasp[_ngcontent-%COMP%]:hover{opacity:1;filter:alpha(opacity=100)}.gjs-add-trasp[_ngcontent-%COMP%]:active{background-color:#0003}.gjs-devices-c[_ngcontent-%COMP%]{display:flex;align-items:center;padding:2px 3px 3px}.gjs-devices-c[_ngcontent-%COMP%]   .gjs-device-label[_ngcontent-%COMP%]{flex-grow:2;text-align:left;margin-right:10px}.gjs-devices-c[_ngcontent-%COMP%]   .gjs-select[_ngcontent-%COMP%]{flex-grow:20}.gjs-devices-c[_ngcontent-%COMP%]   .gjs-add-trasp[_ngcontent-%COMP%]{flex-grow:1;margin-left:5px}.gjs-category-open[_ngcontent-%COMP%], .gjs-block-category.gjs-open[_ngcontent-%COMP%], .gjs-sm-sector.gjs-sm-open[_ngcontent-%COMP%], .gjs-trait-category.gjs-open[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.25)}.gjs-category-title[_ngcontent-%COMP%], .gjs-layer-title[_ngcontent-%COMP%], .gjs-block-category[_ngcontent-%COMP%]   .gjs-title[_ngcontent-%COMP%], .gjs-sm-sector-title[_ngcontent-%COMP%], .gjs-trait-category[_ngcontent-%COMP%]   .gjs-title[_ngcontent-%COMP%]{font-weight:lighter;background-color:var(--gjs-secondary-dark-color);letter-spacing:1px;padding:9px 10px 9px 20px;border-bottom:1px solid rgba(0,0,0,.25);text-align:left;position:relative;cursor:pointer}.gjs-sm-clear[_ngcontent-%COMP%]{cursor:pointer;width:14px;min-width:14px;height:14px;margin-left:3px}.gjs-sm-header[_ngcontent-%COMP%]{font-weight:lighter;padding:10px}.gjs-sm-sector[_ngcontent-%COMP%]{clear:both;font-weight:lighter;text-align:left}.gjs-sm-sector-title[_ngcontent-%COMP%]{display:flex;align-items:center}.gjs-sm-sector-caret[_ngcontent-%COMP%]{width:17px;height:17px;min-width:17px;transform:rotate(-90deg)}.gjs-sm-sector-label[_ngcontent-%COMP%]{margin-left:5px}.gjs-sm-sector.gjs-sm-open[_ngcontent-%COMP%]   .gjs-sm-sector-caret[_ngcontent-%COMP%]{transform:none}.gjs-sm-properties[_ngcontent-%COMP%]{font-size:var(--gjs-font-size);padding:10px 5px;display:flex;flex-wrap:wrap;align-items:flex-end;box-sizing:border-box;width:100%}.gjs-sm-label[_ngcontent-%COMP%]{margin:5px 5px 3px 0;display:flex;align-items:center}.gjs-sm-close-btn[_ngcontent-%COMP%], .gjs-sm-preview-file-close[_ngcontent-%COMP%]{display:block;font-size:23px;position:absolute;cursor:pointer;right:5px;top:0;opacity:.7;filter:alpha(opacity=70)}.gjs-sm-close-btn[_ngcontent-%COMP%]:hover, .gjs-sm-preview-file-close[_ngcontent-%COMP%]:hover{opacity:.9;filter:alpha(opacity=90)}.gjs-sm-field[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]{width:100%;position:relative}.gjs-sm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;color:#ffffffb3;border:none;width:100%}.gjs-sm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{box-sizing:border-box}.gjs-sm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{position:relative;z-index:1;-webkit-appearance:none;-moz-appearance:none;appearance:none}.gjs-sm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand, .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand, .gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.gjs-sm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring, .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring, .gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 var(--gjs-secondary-light-color)}.gjs-sm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .gjs-clm-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .gjs-clm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .gjs-sm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-unit[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-unit[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-unit[_ngcontent-%COMP%]{position:absolute;right:10px;top:3px;font-size:10px;color:var(--gjs-secondary-light-color);cursor:pointer}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-clm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-clm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-clm-sel-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-int-arrows[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-int-arrows[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-int-arrows[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%]{height:100%;width:9px;position:absolute;right:0;top:0;cursor:ns-resize}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-sel-arrow[_ngcontent-%COMP%]{cursor:pointer}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%]{position:absolute;height:0;width:0;border-left:3px solid transparent;border-right:4px solid transparent;cursor:pointer}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-u-arrow[_ngcontent-%COMP%]{border-bottom:4px solid var(--gjs-secondary-light-color);top:4px}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-d-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%]{border-top:4px solid var(--gjs-secondary-light-color);bottom:4px}.gjs-sm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-clm-d-s-arrow[_ngcontent-%COMP%], .gjs-sm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%], .gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-d-s-arrow[_ngcontent-%COMP%]{bottom:7px}.gjs-sm-field.gjs-sm-color[_ngcontent-%COMP%], .gjs-sm-color.gjs-clm-field[_ngcontent-%COMP%], .gjs-sm-field.gjs-sm-input[_ngcontent-%COMP%], .gjs-sm-input.gjs-clm-field[_ngcontent-%COMP%], .gjs-sm-field.gjs-sm-integer[_ngcontent-%COMP%], .gjs-sm-integer.gjs-clm-field[_ngcontent-%COMP%], .gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%], .gjs-sm-field.gjs-sm-select[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%], .gjs-sm-select.gjs-clm-field[_ngcontent-%COMP%]{background-color:var(--gjs-main-dark-color);border:1px solid rgba(0,0,0,.1);box-shadow:1px 1px 0 var(--gjs-main-light-color);color:var(--gjs-secondary-light-color);border-radius:2px;box-sizing:border-box;padding:0 5px}.gjs-sm-field.gjs-sm-composite[_ngcontent-%COMP%], .gjs-sm-composite.gjs-clm-select[_ngcontent-%COMP%], .gjs-sm-composite.gjs-clm-field[_ngcontent-%COMP%]{border-radius:2px}.gjs-sm-field.gjs-sm-select[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%], .gjs-sm-select.gjs-clm-field[_ngcontent-%COMP%]{padding:0}.gjs-sm-field.gjs-sm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-sm-select.gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:20px}.gjs-sm-field.gjs-sm-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-clm-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .gjs-sm-select.gjs-clm-field[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:3px 0}.gjs-sm-field.gjs-sm-composite[_ngcontent-%COMP%], .gjs-sm-composite.gjs-clm-select[_ngcontent-%COMP%], .gjs-sm-composite.gjs-clm-field[_ngcontent-%COMP%]{background-color:var(--gjs-secondary-dark-color);border:1px solid rgba(0,0,0,.25)}.gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-select[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%]{width:auto;padding:0;overflow:hidden;float:left}.gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;padding:5px;display:block}.gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%]   .gjs-sm-radio[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-radio[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-radio[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#fff3}.gjs-sm-field.gjs-sm-list[_ngcontent-%COMP%]   .gjs-sm-icon[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-select[_ngcontent-%COMP%]   .gjs-sm-icon[_ngcontent-%COMP%], .gjs-sm-list.gjs-clm-field[_ngcontent-%COMP%]   .gjs-sm-icon[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;text-shadow:none;line-height:normal}.gjs-sm-field.gjs-sm-integer[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-sm-integer.gjs-clm-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .gjs-sm-integer.gjs-clm-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;padding:0}.gjs-sm-list[_ngcontent-%COMP%]   .gjs-sm-el[_ngcontent-%COMP%]{float:left;border-left:1px solid var(--gjs-main-dark-color)}.gjs-sm-list[_ngcontent-%COMP%]   .gjs-sm-el[_ngcontent-%COMP%]:first-child{border:none}.gjs-sm-list[_ngcontent-%COMP%]   .gjs-sm-el[_ngcontent-%COMP%]:hover{background:var(--gjs-main-dark-color)}.gjs-sm-slider[_ngcontent-%COMP%]   .gjs-field-integer[_ngcontent-%COMP%]{flex:1 1 65px}.gjs-sm-property[_ngcontent-%COMP%]{box-sizing:border-box;float:left;width:50%;margin-bottom:5px;padding:0 5px}.gjs-sm-property--full[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-composite[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-file[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-list[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-stack[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-slider[_ngcontent-%COMP%], .gjs-sm-property.gjs-sm-color[_ngcontent-%COMP%]{width:100%}.gjs-sm-property[_ngcontent-%COMP%]   .gjs-sm-btn[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--gjs-main-dark-color),white 13%);border-radius:2px;box-shadow:1px 1px color-mix(in srgb,var(--gjs-main-dark-color),white 2%),1px 1px color-mix(in srgb,var(--gjs-main-dark-color),white 17%) inset;padding:5px;position:relative;text-align:center;height:auto;width:100%;cursor:pointer;color:var(--gjs-font-color);box-sizing:border-box;text-shadow:-1px -1px 0 var(--gjs-main-dark-color);border:none;opacity:.85;filter:alpha(opacity=85)}.gjs-sm-property[_ngcontent-%COMP%]   .gjs-sm-btn-c[_ngcontent-%COMP%]{box-sizing:border-box;float:left;width:100%}.gjs-sm-property__text-shadow[_ngcontent-%COMP%]   .gjs-sm-layer-preview-cnt[_ngcontent-%COMP%]:after{color:#000;content:"T";font-weight:900;line-height:17px;padding:0 4px}.gjs-sm-preview-file[_ngcontent-%COMP%]{background-color:var(--gjs-light-border);border-radius:2px;margin-top:5px;position:relative;overflow:hidden;border:1px solid color-mix(in srgb,var(--gjs-light-border),black 1%);padding:3px 20px}.gjs-sm-preview-file-cnt[_ngcontent-%COMP%]{background-size:auto 100%;background-repeat:no-repeat;background-position:center center;height:50px}.gjs-sm-preview-file-close[_ngcontent-%COMP%]{top:-5px;width:14px;height:14px}.gjs-sm-layers[_ngcontent-%COMP%]{margin-top:5px;padding:1px 3px;min-height:30px}.gjs-sm-layer[_ngcontent-%COMP%]{background-color:#ffffff0e;border-radius:2px;margin:2px 0;padding:7px;position:relative}.gjs-sm-layer.gjs-sm-active[_ngcontent-%COMP%]{background-color:#ffffff1f}.gjs-sm-layer[_ngcontent-%COMP%]   .gjs-sm-label-wrp[_ngcontent-%COMP%]{display:flex;align-items:center}.gjs-sm-layer[_ngcontent-%COMP%]   #gjs-sm-move[_ngcontent-%COMP%]{height:14px;width:14px;min-width:14px;cursor:grab}.gjs-sm-layer[_ngcontent-%COMP%]   #gjs-sm-label[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0 5px}.gjs-sm-layer-preview[_ngcontent-%COMP%]{height:15px;width:15px;min-width:15px;margin-right:5px;border-radius:2px}.gjs-sm-layer-preview-cnt[_ngcontent-%COMP%]{border-radius:2px;background-color:#fff;height:100%;width:100%;background-size:cover!important}.gjs-sm-layer[_ngcontent-%COMP%]   #gjs-sm-close-layer[_ngcontent-%COMP%]{display:block;cursor:pointer;height:14px;width:14px;min-width:14px;opacity:.5;filter:alpha(opacity=50)}.gjs-sm-layer[_ngcontent-%COMP%]   #gjs-sm-close-layer[_ngcontent-%COMP%]:hover{opacity:.8;filter:alpha(opacity=80)}.gjs-sm-stack[_ngcontent-%COMP%]   .gjs-sm-properties[_ngcontent-%COMP%]{padding:5px 0 0}.gjs-sm-stack[_ngcontent-%COMP%]   #gjs-sm-add[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;outline:none;position:absolute;right:0;top:-17px;opacity:.75;padding:0;width:18px;height:18px}.gjs-sm-stack[_ngcontent-%COMP%]   #gjs-sm-add[_ngcontent-%COMP%]:hover{opacity:1;filter:alpha(opacity=100)}.gjs-sm-colorp-c[_ngcontent-%COMP%]{height:100%;width:20px;position:absolute;right:0;top:0;box-sizing:border-box;border-radius:2px;padding:2px}.gjs-sm-colorp-c[_ngcontent-%COMP%]   .gjs-checker-bg[_ngcontent-%COMP%], .gjs-sm-colorp-c[_ngcontent-%COMP%]   .gjs-field-colorp-c[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:1px}.gjs-sm-color-picker[_ngcontent-%COMP%]{background-color:var(--gjs-font-color);cursor:pointer;height:16px;width:100%;margin-top:-16px;box-shadow:0 0 1px var(--gjs-main-dark-color);border-radius:1px}.gjs-sm-btn-upload[_ngcontent-%COMP%]   #gjs-sm-upload[_ngcontent-%COMP%]{left:0;top:0;position:absolute;width:100%;opacity:0;cursor:pointer}.gjs-sm-btn-upload[_ngcontent-%COMP%]   #gjs-sm-label[_ngcontent-%COMP%]{padding:2px 0}.gjs-sm-layer[_ngcontent-%COMP%] > #gjs-sm-move[_ngcontent-%COMP%]{opacity:.7;filter:alpha(opacity=70);cursor:move;font-size:12px;float:left;margin:0 5px 0 0}.gjs-sm-layer[_ngcontent-%COMP%] > #gjs-sm-move[_ngcontent-%COMP%]:hover{opacity:.9;filter:alpha(opacity=90)}.gjs-blocks-c[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-start}.gjs-block-categories[_ngcontent-%COMP%]{display:flex;flex-direction:column}.gjs-block-category[_ngcontent-%COMP%]{width:100%}.gjs-block-category[_ngcontent-%COMP%]   .gjs-caret-icon[_ngcontent-%COMP%]{margin-right:5px}.gjs-block[_ngcontent-%COMP%]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;width:45%;min-width:45px;padding:1em;box-sizing:border-box;min-height:90px;cursor:all-scroll;font-size:11px;font-weight:lighter;text-align:center;display:flex;flex-direction:column;justify-content:space-between;border:1px solid rgba(0,0,0,.2);border-radius:3px;margin:10px 2.5% 5px;box-shadow:0 1px #00000026;transition:all .2s ease 0s;transition-property:box-shadow,color}.gjs-block[_ngcontent-%COMP%]:hover{box-shadow:0 3px 4px #00000026}.gjs-block[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.gjs-block__media[_ngcontent-%COMP%]{margin-bottom:10px;pointer-events:none}.gjs-block-svg[_ngcontent-%COMP%]{width:54px;fill:currentColor}.gjs-block-svg-path[_ngcontent-%COMP%]{fill:currentColor}.gjs-block.fa[_ngcontent-%COMP%]{font-size:2em;line-height:2em;padding:11px}.gjs-block-label[_ngcontent-%COMP%]{line-height:normal;font-size:.65rem;font-weight:400;font-family:Helvetica,sans-serif;overflow:hidden;text-overflow:ellipsis;pointer-events:none}.gjs-block.gjs-bdrag[_ngcontent-%COMP%]{width:auto;padding:0}.gjs-selected-parent[_ngcontent-%COMP%]{border:1px solid var(--gjs-color-yellow)}.gjs-opac50[_ngcontent-%COMP%]{opacity:.5;filter:alpha(opacity=50)}.gjs-layer[_ngcontent-%COMP%]{font-weight:lighter;text-align:left;position:relative;font-size:var(--gjs-font-size);display:grid}.gjs-layer-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:5px 10px;border-bottom:1px solid var(--gjs-main-dark-color);background-color:var(--gjs-secondary-dark-color);gap:var(--gjs-flex-item-gap);cursor:pointer}.gjs-layer-item-left[_ngcontent-%COMP%], .gjs-layer-item-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gjs-flex-item-gap)}.gjs-layer-item-left[_ngcontent-%COMP%]{width:100%}.gjs-layer-hidden[_ngcontent-%COMP%]{opacity:.55;filter:alpha(opacity=55)}.gjs-layer-vis[_ngcontent-%COMP%]{box-sizing:content-box;cursor:pointer;z-index:1}.gjs-layer-vis-on[_ngcontent-%COMP%], .gjs-layer-vis-off[_ngcontent-%COMP%]{display:flex;width:13px}.gjs-layer-vis-off[_ngcontent-%COMP%], .gjs-layer-vis.gjs-layer-off[_ngcontent-%COMP%]   .gjs-layer-vis-on[_ngcontent-%COMP%]{display:none}.gjs-layer-vis.gjs-layer-off[_ngcontent-%COMP%]   .gjs-layer-vis-off[_ngcontent-%COMP%]{display:flex}.gjs-layer-caret[_ngcontent-%COMP%]{width:15px;cursor:pointer;box-sizing:content-box;transform:rotate(90deg);display:flex;opacity:.7;filter:alpha(opacity=70)}.gjs-layer-caret[_ngcontent-%COMP%]:hover{opacity:1;filter:alpha(opacity=100)}.gjs-layer.open[_ngcontent-%COMP%] > .gjs-layer-item[_ngcontent-%COMP%]   .gjs-layer-caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.gjs-layer-title[_ngcontent-%COMP%]{padding:0;display:flex;align-items:center;background-color:transparent!important;border-bottom:none}.gjs-layer-title-inn[_ngcontent-%COMP%]{align-items:center;position:relative;display:flex;gap:var(--gjs-flex-item-gap)}.gjs-layer-title-c[_ngcontent-%COMP%]{width:100%}.gjs-layer__icon[_ngcontent-%COMP%]{display:block;width:100%;max-width:15px;max-height:15px;padding-left:5px}.gjs-layer__icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.gjs-layer-name[_ngcontent-%COMP%]{display:inline-block;box-sizing:content-box;overflow:hidden;white-space:nowrap;max-width:170px;height:auto}.gjs-layer-name--no-edit[_ngcontent-%COMP%]{text-overflow:ellipsis}.gjs-layer[_ngcontent-%COMP%] > .gjs-layer-children[_ngcontent-%COMP%]{display:none}.gjs-layer.open[_ngcontent-%COMP%] > .gjs-layer-children[_ngcontent-%COMP%]{display:block}.gjs-layer-no-chld[_ngcontent-%COMP%] > .gjs-layer-title-inn[_ngcontent-%COMP%] > .gjs-layer-caret[_ngcontent-%COMP%]{visibility:hidden}.gjs-layer-move[_ngcontent-%COMP%]{display:flex;width:13px;box-sizing:content-box;cursor:move}.gjs-layer.gjs-hovered[_ngcontent-%COMP%]   .gjs-layer-item[_ngcontent-%COMP%]{background-color:var(--gjs-soft-light-color)}.gjs-layer.gjs-selected[_ngcontent-%COMP%]   .gjs-layer-item[_ngcontent-%COMP%]{background-color:var(--gjs-main-light-color)}.gjs-layers[_ngcontent-%COMP%]{position:relative;height:100%}.gjs-layers[_ngcontent-%COMP%]   #gjs-placeholder[_ngcontent-%COMP%]{width:100%;position:absolute}.gjs-layers[_ngcontent-%COMP%]   #gjs-placeholder[_ngcontent-%COMP%]   #gjs-plh-int[_ngcontent-%COMP%]{height:100%;padding:1px}.gjs-layers[_ngcontent-%COMP%]   #gjs-placeholder[_ngcontent-%COMP%]   #gjs-plh-int.gjs-insert[_ngcontent-%COMP%]{background-color:var(--gjs-color-green)}#gjs-clm-add-tag[_ngcontent-%COMP%], .gjs-clm-tags-btn[_ngcontent-%COMP%]{background-color:#ffffff26;border-radius:2px;padding:3px;margin-right:3px;border:1px solid rgba(0,0,0,.15);width:24px;height:24px;box-sizing:border-box;cursor:pointer}.gjs-clm-tags-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor;display:block}.gjs-clm-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin:7px 0}.gjs-clm-header-status[_ngcontent-%COMP%]{flex-shrink:1;margin-left:auto}.gjs-clm-tag[_ngcontent-%COMP%]{display:flex;overflow:hidden;align-items:center;border-radius:3px;margin:0 3px 3px 0;padding:5px;cursor:default}.gjs-clm-tag-status[_ngcontent-%COMP%], .gjs-clm-tag-close[_ngcontent-%COMP%]{width:12px;height:12px;flex-shrink:1}.gjs-clm-tag-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .gjs-clm-tag-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:middle;fill:currentColor}.gjs-clm-sels-info[_ngcontent-%COMP%]{margin:7px 0;text-align:left}.gjs-clm-sel-id[_ngcontent-%COMP%]{font-size:.9em;opacity:.5;filter:alpha(opacity=50)}.gjs-clm-label-sel[_ngcontent-%COMP%]{float:left;padding-right:5px}.gjs-clm-tags[_ngcontent-%COMP%]{font-size:var(--gjs-font-size);padding:10px 5px}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-sel[_ngcontent-%COMP%]{padding:7px 0;float:left}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-sel[_ngcontent-%COMP%]{font-style:italic;margin-left:5px}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-tags-field[_ngcontent-%COMP%]{clear:both;padding:5px;margin-bottom:5px;display:flex;flex-wrap:wrap}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-tags-c[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;vertical-align:top;overflow:hidden}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-new[_ngcontent-%COMP%]{color:var(--gjs-font-color);padding:var(--gjs-padding-elem-classmanager);display:none}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-close[_ngcontent-%COMP%]{opacity:.85;filter:alpha(opacity=85);font-size:20px;line-height:0;cursor:pointer;color:#ffffffe6}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-close[_ngcontent-%COMP%]:hover{opacity:1;filter:alpha(opacity=100)}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-checkbox[_ngcontent-%COMP%]{color:#ffffffe6;vertical-align:middle;cursor:pointer;font-size:9px}.gjs-clm-tags[_ngcontent-%COMP%]   #gjs-clm-tag-label[_ngcontent-%COMP%]{flex-grow:1;text-overflow:ellipsis;overflow:hidden;padding:0 3px;cursor:text}.gjs-mdl-container[_ngcontent-%COMP%]{font-family:var(--gjs-main-font);overflow-y:auto;position:fixed;background-color:#00000080;display:flex;inset:0;z-index:100}.gjs-mdl-dialog[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 rgba(0,0,0,.05);animation:_ngcontent-%COMP%_gjs-slide-down .215s;margin:auto;max-width:850px;width:90%;border-radius:3px;font-weight:lighter;position:relative;z-index:2}.gjs-mdl-title[_ngcontent-%COMP%]{font-size:1rem}.gjs-mdl-btn-close[_ngcontent-%COMP%]{position:absolute;right:15px;top:5px}.gjs-mdl-active[_ngcontent-%COMP%]   .gjs-mdl-dialog[_ngcontent-%COMP%]{animation:gjs-mdl-slide-down .216s}.gjs-mdl-header[_ngcontent-%COMP%], .gjs-mdl-content[_ngcontent-%COMP%]{padding:10px 15px;clear:both}.gjs-mdl-header[_ngcontent-%COMP%]{position:relative;border-bottom:1px solid var(--gjs-main-dark-color);padding:15px 15px 7px}.gjs-export-dl[_ngcontent-%COMP%]:after{content:"";clear:both;display:block;margin-bottom:10px}.gjs-dropzone[_ngcontent-%COMP%]{display:none;opacity:0;position:absolute;top:0;left:0;z-index:11;width:100%;height:100%;transition:opacity .25s;pointer-events:none}.gjs-dropzone-active[_ngcontent-%COMP%]   .gjs-dropzone[_ngcontent-%COMP%]{display:block;opacity:1}.gjs-am-assets[_ngcontent-%COMP%]{height:290px;overflow:auto;clear:both;display:flex;flex-wrap:wrap;align-items:flex-start;align-content:flex-start}.gjs-am-assets-header[_ngcontent-%COMP%]{padding:5px}.gjs-am-add-asset[_ngcontent-%COMP%]   .gjs-am-add-field[_ngcontent-%COMP%]{width:70%;float:left}.gjs-am-add-asset[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:25%;float:right}.gjs-am-preview-cont[_ngcontent-%COMP%]{position:relative;height:70px;width:30%;background-color:var(--gjs-main-color);border-radius:2px;float:left;overflow:hidden}.gjs-am-preview[_ngcontent-%COMP%]{position:absolute;background-position:center center;background-size:cover;background-repeat:no-repeat;height:100%;width:100%;z-index:1}.gjs-am-preview-bg[_ngcontent-%COMP%]{opacity:.5;filter:alpha(opacity=50);position:absolute;height:100%;width:100%;z-index:0}.gjs-am-dimensions[_ngcontent-%COMP%]{opacity:.5;filter:alpha(opacity=50);font-size:10px}.gjs-am-meta[_ngcontent-%COMP%]{width:70%;float:left;font-size:12px;padding:5px 0 0 5px;box-sizing:border-box}.gjs-am-meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:5px}.gjs-am-close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:5px;top:0;display:none}.gjs-am-asset[_ngcontent-%COMP%]{border-bottom:1px solid color-mix(in srgb,var(--gjs-main-dark-color),black 3%);padding:5px;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.gjs-am-asset[_ngcontent-%COMP%]:hover   .gjs-am-close[_ngcontent-%COMP%]{display:block}.gjs-am-highlight[_ngcontent-%COMP%]{background-color:var(--gjs-main-light-color)}.gjs-am-assets-cont[_ngcontent-%COMP%]{background-color:var(--gjs-secondary-dark-color);border-radius:3px;box-sizing:border-box;padding:10px;width:45%;float:right;height:325px;overflow:hidden}.gjs-am-file-uploader[_ngcontent-%COMP%]{width:55%;float:left}.gjs-am-file-uploader[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{background-color:var(--gjs-secondary-dark-color);border:2px dashed;border-radius:3px;position:relative;text-align:center;margin-bottom:15px}.gjs-am-file-uploader[_ngcontent-%COMP%] > form.gjs-am-hover[_ngcontent-%COMP%]{border:2px solid var(--gjs-color-green);color:color-mix(in srgb,var(--gjs-color-green),white 5%)}.gjs-am-file-uploader[_ngcontent-%COMP%] > form.gjs-am-disabled[_ngcontent-%COMP%]{border-color:red}.gjs-am-file-uploader[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   #gjs-am-uploadFile[_ngcontent-%COMP%]{opacity:0;filter:alpha(opacity=0);padding:var(--gjs-upload-padding);width:100%;box-sizing:border-box}.gjs-am-file-uploader[_ngcontent-%COMP%]   #gjs-am-title[_ngcontent-%COMP%]{position:absolute;padding:var(--gjs-upload-padding);width:100%}.gjs-cm-editor-c[_ngcontent-%COMP%]{float:left;box-sizing:border-box;width:50%}.gjs-cm-editor-c[_ngcontent-%COMP%]   .CodeMirror[_ngcontent-%COMP%]{height:450px}.gjs-cm-editor[_ngcontent-%COMP%]{font-size:12px}.gjs-cm-editor#gjs-cm-htmlmixed[_ngcontent-%COMP%]{padding-right:10px;border-right:1px solid var(--gjs-main-dark-color)}.gjs-cm-editor#gjs-cm-htmlmixed[_ngcontent-%COMP%]   #gjs-cm-title[_ngcontent-%COMP%]{color:#a97d44}.gjs-cm-editor#gjs-cm-css[_ngcontent-%COMP%]{padding-left:10px}.gjs-cm-editor#gjs-cm-css[_ngcontent-%COMP%]   #gjs-cm-title[_ngcontent-%COMP%]{color:#ddca7e}.gjs-cm-editor[_ngcontent-%COMP%]   #gjs-cm-title[_ngcontent-%COMP%]{background-color:var(--gjs-main-dark-color);font-size:12px;padding:5px 10px 3px;text-align:right}.gjs-rte-toolbar[_ngcontent-%COMP%]{position:absolute;z-index:10}.gjs-rte-toolbar-ui[_ngcontent-%COMP%]{border:1px solid var(--gjs-main-dark-color);border-radius:3px}.gjs-rte-actionbar[_ngcontent-%COMP%]{display:flex}.gjs-rte-action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;width:25px;border-right:1px solid var(--gjs-main-dark-color);text-align:center;cursor:pointer;outline:none}.gjs-rte-action[_ngcontent-%COMP%]:last-child{border-right:none}.gjs-rte-action[_ngcontent-%COMP%]:hover, .gjs-rte-active[_ngcontent-%COMP%]{background-color:var(--gjs-main-light-color)}.gjs-rte-disabled[_ngcontent-%COMP%]{color:var(--gjs-main-light-color);cursor:not-allowed}.gjs-rte-disabled[_ngcontent-%COMP%]:hover{background-color:unset}.gjs-editor-sp[_ngcontent-%COMP%]{border:1px solid var(--gjs-main-dark-color);box-shadow:0 0 7px var(--gjs-main-dark-color);border-radius:3px}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-hue[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-slider[_ngcontent-%COMP%]{cursor:row-resize}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-color[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-dragger[_ngcontent-%COMP%]{cursor:crosshair}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-alpha-inner[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-alpha-handle[_ngcontent-%COMP%]{cursor:col-resize}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-hue[_ngcontent-%COMP%]{left:90%}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-color[_ngcontent-%COMP%]{right:15%}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-picker-container[_ngcontent-%COMP%]{border:none}.gjs-editor-sp[_ngcontent-%COMP%]   .colpick_dark[_ngcontent-%COMP%]   .colpick_color[_ngcontent-%COMP%]{outline:1px solid var(--gjs-main-dark-color)}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-cancel[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-cancel[_ngcontent-%COMP%]:hover{bottom:-8px;color:#777!important;font-size:25px;left:0;position:absolute;text-decoration:none}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-alpha-handle[_ngcontent-%COMP%]{background-color:#ccc;border:1px solid #555;width:4px}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-color[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-hue[_ngcontent-%COMP%]{border:1px solid #333}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-slider[_ngcontent-%COMP%]{background-color:#ccc;border:1px solid #555;height:3px;left:-4px;width:22px}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-dragger[_ngcontent-%COMP%]{background:transparent;box-shadow:0 0 0 1px #111}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-button-container[_ngcontent-%COMP%]{float:none;width:100%;position:relative;text-align:right}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-button-container[_ngcontent-%COMP%]   .sp-choose[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-button-container[_ngcontent-%COMP%]   .sp-choose[_ngcontent-%COMP%]:hover, .gjs-editor-sp[_ngcontent-%COMP%]   .sp-button-container[_ngcontent-%COMP%]   .sp-choose[_ngcontent-%COMP%]:active{background:var(--gjs-main-dark-color);border-color:var(--gjs-main-dark-color);color:var(--gjs-font-color);text-shadow:none;box-shadow:none;padding:3px 5px}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-palette-container[_ngcontent-%COMP%]{border:none;float:none;margin:0;padding:5px 10px 0}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%], .gjs-editor-sp[_ngcontent-%COMP%]   .sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%]:hover{border:1px solid rgba(0,0,0,.9)}.gjs-editor-sp[_ngcontent-%COMP%]   .sp-palette[_ngcontent-%COMP%]   .sp-thumb-el[_ngcontent-%COMP%]:hover, .gjs-editor-sp[_ngcontent-%COMP%]   .sp-palette[_ngcontent-%COMP%]   .sp-thumb-el.sp-thumb-active[_ngcontent-%COMP%]{border-color:#000000e6}.gjs-hidden[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_gjs-slide-down{0%{transform:translateY(-3rem);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_gjs-slide-up{0%{transform:translate(0);opacity:1}to{transform:translateY(-3rem);opacity:0}}.cm-s-hopscotch[_ngcontent-%COMP%]   span.cm-error[_ngcontent-%COMP%]{color:#fff}']})}}return r})();var SU=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||r)(ir(Il),ir(sa))}}static{this.\u0275dir=za({type:r})}}return r})(),Gie=(()=>{class r extends SU{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xh(r)))(i||r)}})()}static{this.\u0275dir=za({type:r,features:[Pd]})}}return r})(),AU=new wt("");var Kie={provide:AU,useExisting:qh(()=>Nw),multi:!0};function Qie(){let r=ca()?ca().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Yie=new wt(""),Nw=(()=>{class r extends SU{constructor(e,n,i){super(e,n),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Qie())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||r)(ir(Il),ir(sa),ir(Yie,8))}}static{this.\u0275dir=za({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){n&1&&js("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[$x([Kie]),Pd]})}}return r})();var Jie=new wt(""),Zie=new wt("");function TU(r){return r!=null}function OU(r){return Uc(r)?yn(r):r}function MU(r){let t={};return r.forEach(e=>{t=e!=null?bt(bt({},t),e):t}),Object.keys(t).length===0?null:t}function PU(r,t){return t.map(e=>e(r))}function Xie(r){return!r.validate}function IU(r){return r.map(t=>Xie(t)?t:e=>t.validate(e))}function eoe(r){if(!r)return null;let t=r.filter(TU);return t.length==0?null:function(e){return MU(PU(e,t))}}function DU(r){return r!=null?eoe(IU(r)):null}function toe(r){if(!r)return null;let t=r.filter(TU);return t.length==0?null:function(e){let n=PU(e,t).map(OU);return Lb(n).pipe(Vt(MU))}}function kU(r){return r!=null?toe(IU(r)):null}function yU(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function noe(r){return r._rawValidators}function roe(r){return r._rawAsyncValidators}function BM(r){return r?Array.isArray(r)?r:[r]:[]}function kw(r,t){return Array.isArray(r)?r.includes(t):r===t}function _U(r,t){let e=BM(t);return BM(r).forEach(i=>{kw(e,i)||e.push(i)}),e}function wU(r,t){return BM(t).filter(e=>!kw(r,e))}var Rw=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=DU(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},UM=class extends Rw{get formDirective(){return null}get path(){return null}},Kg=class extends Rw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},HM=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ioe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bme=Bn(bt({},ioe),{"[class.ng-submitted]":"isSubmitted"}),RU=(()=>{class r extends HM{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||r)(ir(Kg,2))}}static{this.\u0275dir=za({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){n&2&&Vx("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Pd]})}}return r})();var qg="VALID",Dw="INVALID",Zf="PENDING",Gg="DISABLED";function ooe(r){return(jw(r)?r.validators:r)||null}function soe(r){return Array.isArray(r)?DU(r):r||null}function aoe(r,t){return(jw(t)?t.asyncValidators:r)||null}function loe(r){return Array.isArray(r)?kU(r):r||null}function jw(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}var zM=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===qg}get invalid(){return this.status===Dw}get pending(){return this.status==Zf}get disabled(){return this.status===Gg}get enabled(){return this.status!==Gg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(_U(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(_U(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(wU(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(wU(t,this._rawAsyncValidators))}hasValidator(t){return kw(this._rawValidators,t)}hasAsyncValidator(t){return kw(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Zf,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Gg,this.errors=null,this._forEachChild(n=>{n.disable(Bn(bt({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Bn(bt({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=qg,this._forEachChild(n=>{n.enable(Bn(bt({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Bn(bt({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qg||this.status===Zf)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gg:qg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Zf,this._hasOwnPendingAsyncValidator=!0;let e=OU(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,i)=>n&&n._find(i),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Zr,this.statusChanges=new Zr}_calculateStatus(){return this._allControlsDisabled()?Gg:this.errors?Dw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zf)?Zf:this._anyControlsHaveStatus(Dw)?Dw:qg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){jw(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=soe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=loe(this._rawAsyncValidators)}};var NU=new wt("CallSetDisabledState",{providedIn:"root",factory:()=>$M}),$M="always";function coe(r,t){return[...t.path,r]}function uoe(r,t,e=$M){foe(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),hoe(r,t),goe(r,t),poe(r,t),doe(r,t)}function bU(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function doe(r,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function foe(r,t){let e=noe(r);t.validator!==null?r.setValidators(yU(e,t.validator)):typeof e=="function"&&r.setValidators([e]);let n=roe(r);t.asyncValidator!==null?r.setAsyncValidators(yU(n,t.asyncValidator)):typeof n=="function"&&r.setAsyncValidators([n]);let i=()=>r.updateValueAndValidity();bU(t._rawValidators,i),bU(t._rawAsyncValidators,i)}function hoe(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&jU(r,t)})}function poe(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&jU(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function jU(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function goe(r,t){let e=(n,i)=>{t.valueAccessor.writeValue(n),i&&t.viewToModelUpdate(n)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function moe(r,t){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function voe(r){return Object.getPrototypeOf(r.constructor)===Gie}function yoe(r,t){if(!t)return null;Array.isArray(t);let e,n,i;return t.forEach(o=>{o.constructor===Nw?e=o:voe(o)?n=o:i=o}),i||n||e||null}function CU(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function xU(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var _oe=class extends zM{constructor(t=null,e,n){super(ooe(e),aoe(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jw(e)&&(e.nonNullable||e.initialValueIsDefault)&&(xU(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){CU(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){CU(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){xU(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var woe={provide:Kg,useExisting:qh(()=>WM)},EU=Promise.resolve(),WM=(()=>{class r extends Kg{constructor(e,n,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new _oe,this._registered=!1,this.name="",this.update=new Zr,this._parent=e,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=yoe(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),moe(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uoe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){EU.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,i=n!==0&&Xv(n);EU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?coe(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||r)(ir(UM,9),ir(Jie,10),ir(Zie,10),ir(AU,10),ir(zc,8),ir(NU,8))}}static{this.\u0275dir=za({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ls.None,"disabled","isDisabled"],model:[ls.None,"ngModel","model"],options:[ls.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$x([woe]),Pd,Ad]})}}return r})();var boe=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({})}}return r})();var FU=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:NU,useValue:e.callSetDisabledState??$M}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r})}static{this.\u0275inj=Tr({imports:[boe]})}}return r})();var LU=(()=>{class r{constructor(e){this._Fire_Components_Service=e,this.Components_Data={ComponentName:"",styles:"",components:""}}Add_New_Component_Web_Builder(){this.Components_Data.ComponentName.length>0&&(this._Fire_Components_Service.Add_New_Component_Web_Builder(this.Components_Data),this.Components_Data.ComponentName="")}static{this.\u0275fac=function(n){return new(n||r)(ir(Jf))}}static{this.\u0275cmp=oa({type:r,selectors:[["add-build-component"]],decls:4,vars:1,consts:[[1,"card-add"],["name","text","placeholder","Component Name","type","search",1,"input",3,"ngModelChange","ngModel"],[3,"click"]],template:function(n,i){n&1&&(Bi(0,"div",0)(1,"input",1),zx("ngModelChange",function(s){return Dk(i.Components_Data.ComponentName,s)||(i.Components_Data.ComponentName=s),s}),fo(),Bi(2,"button",2),js("click",function(){return i.Add_New_Component_Web_Builder()}),la(3,"Add New"),fo()()),n&2&&(Vc(),Hx("ngModel",i.Components_Data.ComponentName))},dependencies:[Nw,RU,WM],styles:[".card-add[_ngcontent-%COMP%]{display:flex;width:-webkit-fill-available;justify-content:center;padding:1rem}button[_ngcontent-%COMP%]{width:fit-content;min-width:100px;height:45px;padding:8px;border-radius:5px;border:2.5px solid #E0E1E4;box-shadow:0 0 20px -20px;cursor:pointer;background-color:#fff;transition:all .2s ease-in-out 0ms;-webkit-user-select:none;user-select:none;font-family:Poppins,sans-serif;margin:0 8px}button[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;box-shadow:0 0 20px -18px}button[_ngcontent-%COMP%]:active{transform:scale(.95)}.input[_ngcontent-%COMP%]{max-width:190px;background-color:#f5f5f5;color:#242424;padding:.15rem .5rem;min-height:40px;border-radius:4px;outline:none;border:none;line-height:1.15;box-shadow:0 10px 20px -18px}input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #5b5fc7;border-radius:4px 4px 2px 2px}input[_ngcontent-%COMP%]:hover{outline:1px solid lightgrey}"]})}}return r})();function Eoe(r,t){if(r&1){let e=$v();Bi(0,"div",1)(1,"span",2),js("click",function(){let i=Yh(e).$implicit,o=Bx();return Jh(o.Remove_Component_Web_Builder(i))}),la(2,"X"),fo(),Bi(3,"p"),la(4," Component : "),Bi(5,"b"),la(6),fo()(),aa(7,"div",3),Bi(8,"button",4),js("click",function(){let i=Yh(e).$implicit,o=Bx();return Jh(o.Select_Item(i))}),la(9,"Open Editor"),fo()()}if(r&2){let e=t.$implicit;Vc(6),tp(" ",e.ComponentName," ")}}var VU=(()=>{class r{constructor(e){this._Fire_Components_Service=e}get Array_Components(){return this._Fire_Components_Service.Array_Components}Select_Item(e){this._Fire_Components_Service.Selected_Component=e;let n=this._Fire_Components_Service.Selected_Component;this._Fire_Components_Service.editor.setComponents(),this._Fire_Components_Service.editor.setStyle(),n.components&&n.styles&&(this._Fire_Components_Service.editor.setComponents(JSON.parse(n.components)),this._Fire_Components_Service.editor.setStyle(JSON.parse(n.styles)))}Remove_Component_Web_Builder(e){this._Fire_Components_Service.Remove_Component_Web_Builder(e)}ngOnInit(){this._Fire_Components_Service.Components_collection.subscribe(e=>{console.log("Components data:",e)}),this._Fire_Components_Service.Get_Component_Web_Builder()}static{this.\u0275fac=function(n){return new(n||r)(ir(Jf))}}static{this.\u0275cmp=oa({type:r,selectors:[["builders-form"]],decls:4,vars:0,consts:[[1,"Group-Card"],[1,"card"],[1,"Remove",3,"click"],[1,"card-image"],[3,"click"]],template:function(n,i){n&1&&(aa(0,"add-build-component"),Bi(1,"div",0),Mk(2,Eoe,10,1,"div",1,Ok),fo()),n&2&&(Vc(2),Pk(i.Array_Components))},dependencies:[LU],styles:[".Group-Card[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-direction:row}.Group-Card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:190px;height:254px;background:#ececec;box-shadow:#0006 0 2px 4px,#0000004d 0 7px 13px -3px,#0003 0 -3px inset;margin:1rem;flex:1;flex-basis:auto;max-width:13rem;min-width:13rem;display:flex;flex-direction:column;padding:1rem}.Group-Card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .Remove[_ngcontent-%COMP%]{width:100%;text-align:end;cursor:pointer}.Group-Card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-image[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #cacaca;border-radius:3px;margin-bottom:1rem}.Group-Card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font:inherit;background-color:#f0f0f0;border:0;color:#242424;border-radius:.5em;font-size:.95rem;padding:.375em 1em;font-weight:600;text-shadow:0 .0625em 0 #fff;box-shadow:inset 0 .0625em #f4f4f4,0 .0625em #efefef,0 .125em #ececec,0 .25em #e0e0e0,0 .3125em #dedede,0 .375em #dcdcdc,0 .425em #cacaca,0 .425em .5em #cecece;transition:.15s ease;cursor:pointer;width:fit-content;margin:auto}.Group-Card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{translate:0 .225em;box-shadow:inset 0 .03em #f4f4f4,0 .03em #efefef,0 .0625em #ececec,0 .125em #e0e0e0,0 .125em #dedede,0 .2em #dcdcdc,0 .225em #cacaca,0 .225em .375em #cecece}"]})}}return r})();var BU=(()=>{class r{constructor(){this.title="Angular_Web_Builder"}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=oa({type:r,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"Group"]],template:function(n,i){n&1&&(Bi(0,"div",0),aa(1,"builders-form")(2,"web-builder-form"),fo())},dependencies:[vU,VU],styles:[".Group[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}}return r})();var UU={production:!1,firebaseConfig:{apiKey:"AIzaSyDC92ckC_lHCM8WaZhkI38BUJfHjTpTokI",authDomain:"web-builder-5cbd6.firebaseapp.com",databaseURL:"https://web-builder-5cbd6-default-rtdb.firebaseio.com",projectId:"web-builder-5cbd6",storageBucket:"web-builder-5cbd6.appspot.com",messagingSenderId:"1034578651570",appId:"1:1034578651570:web:41b4a0170a872078c49cab",measurementId:"G-ZVF60YXRE9"}};var HU=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Or({type:r,bootstrap:[BU]})}static{this.\u0275inj=Tr({imports:[wR,dN,IL.initializeApp(UU.firebaseConfig),mU,DL,dR,FU]})}}return r})();_R().bootstrapModule(HU).catch(r=>console.error(r));
